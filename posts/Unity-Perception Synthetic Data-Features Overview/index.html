<!DOCTYPE html>
<html lang=zh-CN data-theme="light">
	
<script src="/js/plugins/toggleTheme.js"></script>

	<script>
		setTheme();
	</script>
	<head>
		
<title>Unity-Perception Synthetic Data-Features Overview | Zi-Zi's Journey</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/images/icon/favicon.ico">
<link href="/css/plugins/print.css" media="print" rel="stylesheet" />

<link rel="stylesheet" href="/css/index.css">



<meta name="keywords" content="数据集,Unity,Perception,">
<meta name="description" content="Unity Perception 插件学习笔记。">



<script src="/js/plugins/jquery.min.js"></script>


<script src="/js/plugins/hljs.min.js"></script>


<script src="/js/plugins/init.js"></script>


<script src="/js/plugins/hide.js"></script>


<script src="/js/plugins/tabs.js"></script>



    



    
<script src="/js/plugins/alert-title.js"></script>

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-base.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-dark-class.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-light.css">






    

	<meta name="generator" content="Hexo 6.1.0"></head>

	<body>
		<header class="sticky-header">
	<nav>
		<div class="nav-left">
			<a href="/" class="logo">
				<img no-lazy src="/images/headers_icon/logo.webp" alt="Quieter">
			</a>
			<ul class="breadcrumb" id="breadcrumb"></ul>
		</div>
		<div class="nav-right">
			<ul>
				
					<li>
						<a href="/">
						  主页
						</a>
					</li>
				
					<li>
						<a href="/categories">
						  类别
						</a>
					</li>
				
					<li>
						<a href="/tags">
						  标签
						</a>
					</li>
				
					<li>
						<a href="/archives">
						  归档
						</a>
					</li>
				
					<li>
						<a href="/galleries">
						  相册
						</a>
					</li>
				
					<li>
						<a href="/links">
						  链接
						</a>
					</li>
				
					<li>
						<a href="/about">
						  关于
						</a>
					</li>
								  
			</ul>
		</div>
		<div class="nav-right-close">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
				<path fill="none" d="M0 0h24v24H0z" />
				<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
			</svg>
		</div>

		<div class="sidebar">
    <div class="topo">
        <p>Zi-Zi's Journey</p>
    </div>
    <ul>
        
        <li>
            <a href="/">
                主页
            </a>
        </li>
        
        <li>
            <a href="/categories">
                类别
            </a>
        </li>
        
        <li>
            <a href="/tags">
                标签
            </a>
        </li>
        
        <li>
            <a href="/archives">
                归档
            </a>
        </li>
        
        <li>
            <a href="/galleries">
                相册
            </a>
        </li>
        
        <li>
            <a href="/links">
                链接
            </a>
        </li>
        
        <li>
            <a href="/about">
                关于
            </a>
        </li>
        
    </ul>
    <div class="sidebar-footer">
        
        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
        </a>
        
    </div>
</div>
<div class='shelter'>
    <script>
        $(function() {
            $('.nav-right-close > svg').click(function() {
                $('.sidebar').animate({
                    right: "0"
                }, 500);
                $('.shelter').fadeIn("slow");
            
                var element = $('.topo');
                element.addClass('custom-style');
            
                var links = null;
                if ("") {
                    links = "".split(',');
                } else {
                    links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
                }
            
                var randomLink = links[Math.floor(Math.random() * links.length)];
                element.css('background-image', "url('" + randomLink + "')");
            });
          
            $('.shelter').click(function(e) {
                $('.sidebar').animate({
                    right: "-100%"
                }, 500);
                $('.shelter').fadeOut("slow");
            });
        });      
    </script>
</div>
	</nav>

	
		<div class="header-background"></div>
	

	<script>
		const name = 'post';
		const ul = document.querySelectorAll('.nav-right ul')[0];
		const lis = ul.querySelectorAll('li');

		if (name == 'home') {
			lis[0].classList.add('select');
		} else {
			for (let i = 0; i < lis.length; i++) {
				const li = lis[i];
				const a = li.querySelector('a');
				if (name === a.href.split('/')[3]) {
					li.classList.add('select');
				}
			}
		}
	</script>
	
	<script>
		var element = document.querySelector('.header-background');
		if(element) {
			element.classList.add('custom-style');
			var links = null;
			if("")
			{
				links = "".split(',');
			} else
			{
				links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
			}
			var randomLink = links[Math.floor(Math.random() * links.length)];
			element.style.backgroundImage = "url('" + randomLink + "')";
		}
	</script>

	
<script src="/js/plugins/breadcrumb.js"></script>

	<script>
		var menus_title = [];
		
			menus_title.push({home: '主页'});
		
			menus_title.push({categories: '类别'});
		
			menus_title.push({tags: '标签'});
		
			menus_title.push({archives: '归档'});
		
			menus_title.push({galleries: '相册'});
		
			menus_title.push({links: '链接'});
		
			menus_title.push({about: '关于'});
		
		
			
				postsBreadcrumb(
					document.getElementById('breadcrumb'),
					"类别",
					"/categories",
					"学习",
					"/categories/学习",
					1
				);
			
		
	</script>
</header>

<div class="main-wrapper">
    <main class="post">
        <header class="main-header">
	
		
			
				
<link rel="stylesheet" href="/css/plugins/fancybox.css">

				
<script src="/js/plugins/fancybox.umd.js"></script>

				
<script src="/js/plugins/fancybox.js"></script>

			
			<div class="post-header-background-content">
				<ul class="post-header-tag">
					
						
							<li><a href="/tags/数据集"><span>数据集</span></a></li>
						
							<li><a href="/tags/Unity"><span>Unity</span></a></li>
						
							<li><a href="/tags/Perception"><span>Perception</span></a></li>
						
					
				</ul>
				
				<h1>Unity-Perception Synthetic Data-Features Overview</h1>
		
				
					<div class="post-header-desc">
						<svg t="1714702231661" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="1154" xmlns:xlink="http://www.w3.org/1999/xlink"
						width="20" height="20">
						<path
							d="M778.24 117.76A46.08 46.08 0 0 1 824.32 163.84v430.08c0 8.4992-4.13696 16.01536-10.50624 20.6848l-0.24576 0.2048L587.5712 846.09024a35.84 35.84 0 0 1-61.48096-25.06752v-220.9792a46.08 46.08 0 0 1 46.08-46.08l200.94976-0.02048V168.96h-522.24v686.08H389.12c13.25056 0 24.1664 10.07616 25.47712 22.97856l0.12288 2.62144c0 14.1312-11.4688 25.6-25.6 25.6h-143.36A46.08 46.08 0 0 1 199.68 860.16V163.84A46.08 46.08 0 0 1 245.76 117.76h532.48z m-26.78784 487.38304h-174.16192v178.176l174.16192-178.176z m-45.19936-169.94304a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z m0-122.88a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z"
							fill="#ffffff" p-id="1155"></path>
						</svg>
						<p>Unity Perception 插件学习笔记。</p>
					</div>
				
		
				<div class="post-header-info">
					<svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
					xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
						<path
							d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
							p-id="2902" fill="#ffffff"></path>
					</svg>
					<div class="post-header-info-author">
						<a href="/about">Zi-Zi</a>
					</div>
					
						<div class="post-header-info-categories">
							
								<a href="/categories/学习">学习</a>
							
						</div>
					
					<time>2023/05/25 20:57:00</time>
				</div>
		
				
					<div class="post-header-stat">
						<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
						viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve" width="20" height="20">
							<path fill="#FFFFFF" d="M187.2,165.6c0,2.6-2.1,4.7-4.7,4.7H17.5c-2.6,0-4.7-2.1-4.7-4.7s2.1-4.7,4.7-4.7h165.1
								C185.2,160.9,187.2,163,187.2,165.6z"/>
							<path fill="#FFFFFF" d="M17.5,29.7c2.6,0,4.7,2.1,4.7,4.7v131.2c0,2.6-2.1,4.7-4.7,4.7s-4.7-2.1-4.7-4.7V34.4
								C12.8,31.8,14.9,29.7,17.5,29.7z M77.9,91.5c1.8,1.8,1.8,4.8,0,6.6l-39.8,39.8c-1.9,1.8-4.9,1.7-6.6-0.2c-1.7-1.8-1.7-4.6,0-6.4
								l39.8-39.8C73.1,89.6,76,89.6,77.9,91.5z M169.9,70.2c1.6,2.1,1.1,5-0.9,6.5c0,0,0,0,0,0l-64.2,48.2c-2.1,1.5-5,1.1-6.6-0.9
								c-1.6-2.1-1.1-5,0.9-6.5c0,0,0,0,0,0l64.2-48.2C165.4,67.7,168.3,68.1,169.9,70.2L169.9,70.2z"/>
							<path fill="#FFFFFF" d="M104.6,124.5c-1.8,1.8-4.8,1.8-6.6,0L71.6,98.1c-1.8-1.8-1.8-4.8,0-6.6c1.8-1.8,4.8-1.8,6.6,0l26.3,26.3
								C106.4,119.6,106.4,122.6,104.6,124.5C104.6,124.4,104.6,124.4,104.6,124.5z"/>
						</svg>
		
						
							
<script src="/js/plugins/wordCount.js"></script>

							<p class="post-count">文字数：---</p>
						
		
						
							<p id="busuanzi_container_page_pv" style='display:none;'>阅读数：<span id="busuanzi_value_page_pv"></span></p>
						
					</div>
				
			</div>
		
	
</header>
        <div class="post-content article-container">
            <article class="post-content-info">
                <h1 id="%E5%A4%A7%E7%BA%B2" tabindex="-1">大纲</h1>
<h2 id="fundamentals" tabindex="-1" id="Fundamentals">Fundamentals</h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Perception Camera</td>
<td>Captures RGB images and ground truth from a <a target="_blank" rel="noopener" href="https://docs.unity3d.com/Manual/">Camera</a><br/>从 Camera 捕获 RGB 图像和 ground truth</td>
</tr>
<tr>
<td>SOLO Schema</td>
<td>Schema for annotation, metric, and ground-truth data for the default SOLO endpoint<br/>SOLO 形式的 annotation, metric, ground-truth 数据</td>
</tr>
<tr>
<td>Labeling</td>
<td>A component that marks a GameObject and its descendants with a set of labels<br/>用一组标签标记 GameObject 及其子对象的组件</td>
</tr>
<tr>
<td>Label Config</td>
<td>An asset that defines a taxonomy of labels for ground truth generation<br/>定义用于生成 ground truth 的标签分类的 asset</td>
</tr>
<tr>
<td>Randomization</td>
<td>The Randomization tool set lets you integrate domain randomization principles into your simulation.<br/>随机化</td>
</tr>
<tr>
<td>FAQ</td>
<td>Frequently Asked Questions about common workflows and issues.<br/>常见问题及解答</td>
</tr>
<tr>
<td>Legacy Perception Schema</td>
<td>Schema for annotation, metric, and ground-truth data for the legacy Perception endpoint<br/>Legacy Perception 形式的 annotation, metric, ground-truth 数据</td>
</tr>
</tbody>
</table>
<h2 id="labeling" tabindex="-1" id="Labeling">Labeling</h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#Labeling">Labeling</a></td>
<td>A component that marks a GameObject and its descendants with a set of labels<br/>用一组标签标记 GameObject 及其子对象的组件</td>
</tr>
<tr>
<td>[Label Config](#Label Config)</td>
<td>An asset that defines a taxonomy of labels for ground truth generation<br/>定义用于生成 ground truth 的标签分类的 asset</td>
</tr>
<tr>
<td>[Bounding Box 2D Labeler](#Bounding Box 2D Labeler)</td>
<td>Capture 2D bounding boxes for visible labeled objects.<br/>捕获可见标记对象的 2D 边界框</td>
</tr>
<tr>
<td>[Hierarchical Bounding Boxes](#Hierarchical Bounding Boxes)</td>
<td>How to combine bounding boxes of objects with parent-child hierarchical relationships during runtime.<br/>如何在运行时将具有父子层次关系的对象的边界框组合在一起</td>
</tr>
<tr>
<td>[Bounding Box 3D Labeler](#Bounding Box 3D Labeler)</td>
<td>Capture 3D bounding boxes for visible labeled objects.<br/>捕获可见标记对象的三维边界框</td>
</tr>
<tr>
<td>[Keypoint Labeler](#Keypoint Labeler)</td>
<td>Record the screen locations of specific points on labeled objects such as keypoints on humans.<br/>记录标记对象上特定点的屏幕位置，例如人身上的关键点</td>
</tr>
<tr>
<td>[Metadata Labeler](#Metadata Labeler)</td>
<td>Reporting object-level or environment-level metadata information during runtime.<br/>在运行时报告对象级别或环境级别的元数据信息</td>
</tr>
</tbody>
</table>
<h2 id="randomization" tabindex="-1" id="Randomization">Randomization</h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#Randomization">Randomization</a></td>
<td>The Randomization toolset lets you integrate domain randomization principles into your simulation.<br/>随机化</td>
</tr>
<tr>
<td><a href="#Scenarios">Scenarios</a></td>
<td>Scenarios control execution flow of your simulation – how many iterations to run the simulation, what randomizers to use, etc.<br/>场景控制模拟的执行流程——运行模拟的迭代次数，使用什么随机化器等</td>
</tr>
<tr>
<td><a href="#Randomizers">Randomizers</a></td>
<td>Randomizers encapsulate specific randomization activities to perform during the lifecycle of a randomized simulation.<br/>随机化器封装了要在随机化模拟的生命周期中执行的特定随机化活动</td>
</tr>
<tr>
<td>[Randomizer Tags](#Randomizer Tags)</td>
<td>RandomizerTags are the primary mechanism by which Randomizers query for a certain subset of GameObjects to randomize within a simulation.<br/>RandomizerTags 是随机化器查询游戏对象的某个子集以在模拟中随机化的主要机制</td>
</tr>
<tr>
<td><a href="#Parameters">Parameters</a></td>
<td>Parameters are classes that utilize Samplers to deterministically generate random typed values.<br/>Parameters 是利用 Samplers 确定地生成随即类型值的类</td>
</tr>
<tr>
<td><a href="#Samplers">Samplers</a></td>
<td>Samplers generate bounded random float values by sampling from probability distributions.<br/>Samplers 通过从概率分布中采样来生成有界随机浮点值</td>
</tr>
</tbody>
</table>
<h2 id="data-generation" tabindex="-1" id="Data-Generation">Data Generation</h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>[Perception Camera](#Perception Camera)</td>
<td>Captures RGB images and ground truth from a <a target="_blank" rel="noopener" href="https://docs.unity3d.com/Manual/class-Camera.html">Camera</a>.<br/>从 Camera 捕获 RGB 图像和 ground truth</td>
</tr>
<tr>
<td>[Dataset Capture](#Dataset Capture)</td>
<td>Ensures sensors are triggered at proper rates and accepts data for the JSON dataset.<br/>确保传感器以正确的速率触发，并接受 JSON 数据集的数据</td>
</tr>
<tr>
<td>[Output Endpoint](#Output Endpoint)</td>
<td>Currently supported output endpoints are: <code>No Output</code>, <code>Perception</code> endpoint, and <code>Solo</code> endpoint.<br/>当前支持的输出端点有：<code>No Output</code>、<code>Perception</code> 端点和 <code>Solo</code> 端点</td>
</tr>
<tr>
<td>[Metadata Labeler](#Metadata Labeler)</td>
<td>Reporting object-level or environment-level metadata information during runtime.<br/>在运行时报告对象级别或环境级别的元数据信息</td>
</tr>
</tbody>
</table>
<h2 id="%E8%B5%84%E6%BA%90" tabindex="-1" id="资源">资源</h2>
<p>​    原文档：<a target="_blank" rel="noopener" href="https://github.com/Unity-Technologies/com.unity.perception/blob/main/com.unity.perception/Documentation~/Features/index.md">com.unity.perception/index.md at main · Unity-Technologies/com.unity.perception · GitHub</a></p>
<h1 id="api" tabindex="-1">API</h1>
<h2 id="labeling-1" tabindex="-1" id="a-name-Labeling-Labeling-a"><a name="Labeling">Labeling</a></h2>
<h2 id="label-config" tabindex="-1" id="a-name-Label-Config-Label-Config-a"><a name="Label Config">Label Config</a></h2>
<h2 id="bounding-box-2d-labeler" tabindex="-1" id="a-name-Bounding-Box-2D-Labeler-Bounding-Box-2D-Labeler-a"><a name="Bounding Box 2D Labeler">Bounding Box 2D Labeler</a></h2>
<h2 id="hierarchical-bounding-boxes" tabindex="-1" id="a-name-Hierarchical-Bounding-Boxes-Hierarchical-Bounding-Boxes-a"><a name="Hierarchical Bounding Boxes">Hierarchical Bounding Boxes</a></h2>
<h2 id="bounding-box-3d-labeler" tabindex="-1" id="a-name-Bounding-Box-3D-Labeler-Bounding-Box-3D-Labeler-a"><a name="Bounding Box 3D Labeler">Bounding Box 3D Labeler</a></h2>
<h2 id="keypoint-labeler" tabindex="-1" id="a-name-Keypoint-Labeler-Keypoint-Labeler-a"><a name="Keypoint Labeler">Keypoint Labeler</a></h2>
<h2 id="metadata-labeler" tabindex="-1" id="a-name-Metadata-Labeler-Metadata-Labeler-a"><a name="Metadata Labeler">Metadata Labeler</a></h2>
<h2 id="randomization-1" tabindex="-1" id="a-name-Randomization-Randomization-a"><a name="Randomization">Randomization</a></h2>
<p>​    Randomization 工具集集成了合成数据集中随机化的功能：</p>
<ol>
<li>提供了用于随机化的 Parameters</li>
<li>提供了从 Parameters 中挑选随机值的 Samplers</li>
<li>提供了协调完整随机化过程的 Scenarios</li>
</ol>
<p>​    随机化的步骤：</p>
<ol>
<li>创建 Scenario</li>
<li>定义 Randomizers 并将其添加到 Scenario 中</li>
<li>在 Randomizers 里设置好 Parameters 和 Samplers</li>
<li>生成用于 CV 的随机化训练数据</li>
</ol>
<h2 id="scenarios" tabindex="-1" id="a-name-Scenarios-Scenarios-a"><a name="Scenarios">Scenarios</a></h2>
<p>​    预先定义好的 <code>Fixed Length Scenario</code> 加载在场景的一个空对象中：</p>
<p><img src="S2.jpg" alt="jpg"></p>
<p>​    Scenarios 有三个任务：</p>
<ol>
<li>控制模拟的执行流</li>
<li>组织 Randomizers 列表</li>
<li>定义可以从构建的 Unity 播放器外部配置的设置</li>
</ol>
<p>​    默认情况下，Perception 包括一个现成的 Scenario，即 <code>FixedLengthScenario</code> 类。此场景针对固定数量的帧运行每次迭代，以创建指定大小的数据集。</p>
<h3 id="scenario-lifecycle-hooks" tabindex="-1" id="Scenario-Lifecycle-Hooks">Scenario Lifecycle Hooks</h3>
<p>​    Scenarios 有许多在执行过程中调用的生命周期挂钩。下面是一张图表，显示了典型 scenario 运行的操作序列：</p>
<p><img src="S1.png" alt="png"></p>
<h3 id="json-configuration" tabindex="-1" id="JSON-Configuration">JSON Configuration</h3>
<p>​    场景可以序列化为 JSON，在运行时进行修改和导入，以配置模拟行为，即使在构建了 Unity 播放器之后也是如此。默认情况下，可以使用场景检查器上的 <code>Generate JSON Config</code> 按钮序列化以下场景设置：</p>
<ol>
<li>Scenario 常量</li>
<li>Randomizers 和 Parameters 上的字符串、数字和布尔字段</li>
<li>Constant，Uniform，Normal 采样器的配置</li>
</ol>
<p>​    以下是如何使用<code>--Scenario-config-file</code> 将场景 JSON 配置加载到 Windows Unity 播放器的示例：<code>.\PerceptionTutorial.exe --scenario-config-file scenarioConfiguration.json</code></p>
<h3 id="implementing-custom-scenarios" tabindex="-1" id="Implementing-Custom-Scenarios">Implementing Custom Scenarios</h3>
<p>​    对于场景应该针对任意数量的帧运行的用例，可能需要实现自定义场景。以下是用户可能想要覆盖以实现自定义场景迭代条件的两个最常见的场景属性：</p>
<ol>
<li><strong>isScenarioReadyToStart</strong> - 定义确定场景何时可以开始迭代的条件</li>
<li><strong>isIterationComplete</strong> - 定义确定场景迭代结束的条件</li>
<li><strong>isScenarioComplete</strong> - 定义确定场景停止迭代的条件</li>
</ol>
<h4 id="abstract-scenario-classes" tabindex="-1" id="Abstract-Scenario-Classes">Abstract Scenario Classes</h4>
<p>​    在派生自定义场景时，根据您的需求，有两个抽象场景类可供选择。以下是这些选项的列表，以及何时可以为您的用例派生它们：</p>
<ol>
<li><strong>Scenario&lt;T&gt;</strong>：如果只需要基本的场景生命周期协调工具，这是要派生的最基本的场景类</li>
<li><strong>PerceptionScenario&lt;T&gt;</strong>：感知场景抽象类为打算利用 perception 包的数据捕获工具生成数据集的场景引入了一些有用的功能。</li>
</ol>
<h4 id="scenario-constants" tabindex="-1" id="Scenario-Constants">Scenario Constants</h4>
<p>​    常量包括配置场景生命周期设置的属性，如起始迭代值或总迭代计数。通过派生自己的常量类，您可以添加自己的自定义场景设置来配置不同的场景属性。以下是<code>FixedLengthScenario</code>类中使用的 Constants 类的示例：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs C#">[<span class="hljs-meta">Serializable</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Constants</span> : <span class="hljs-title">ScenarioConstants</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> totalIterations = <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> framesPerIteration = <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<ol>
<li>请确保在常量类上包含 <code>[Serializable]</code> 特性。这将确保可以从 Unity inspector 正确配置常量。</li>
<li>Scenario 类的 <code>SerializeToJson()</code> 和 <code>DeserializeFromJson()</code> 方法可以重写以实现自定义序列化策略。</li>
</ol>
<h2 id="randomizers" tabindex="-1" id="a-name-Randomizers-Randomizers-a"><a name="Randomizers">Randomizers</a></h2>
<blockquote>
<p>Randomizers 封装了在随机模拟执行期间要执行的特定随机化活动。例如，存在用于 spawning objects（生成对象）、repositioning（重新定位灯光）、varying the color of objects（更改对象颜色）等的 Randomizers。Randomizers 将 random parameters 公开到其 inspector interface，以进一步自定义这些变化。用户可以将一组 Randomizers 添加到 Scenario 中，以便定义模拟生命周期中要执行的随机化活动的有序列表。</p>
<p>要定义一个全新的 Randomizer，请派生 Randomizer 类并实现下面一节中列出的一个或多个方法，以便在模拟运行时随机化游戏对象。</p>
</blockquote>
<p><img src="S3.jpg" alt="jpg"></p>
<center>添加到 Scenario 类中的 Randomizer</center>
<h3 id="randomizer-hooks" tabindex="-1" id="Randomizer-Hooks">Randomizer Hooks</h3>
<ol>
<li><code>OnCreate() </code>- called when the Randomizer is added or loaded to a Scenario 将 Randomizer 添加或加载到 Scenario 时调用</li>
<li><code>OnIterationStart()</code> - called at the start of a new Scenario Iteration 在 Scenario 迭代开始时调用</li>
<li><code>OnIterationEnd() </code>- called the after a Scenario Iteration has completed 在 Scenario 迭代完成后调用</li>
<li><code>OnScenarioComplete()</code> - called the after the entire Scenario has completed 在整个 Scenario 完成后调用</li>
<li><code>OnStartRunning()</code> - called on the first frame a Randomizer is enabled 在启动 Randomizer 的第一帧调用</li>
<li><code>OnStopRunning()</code>- called on the first frame a disabled Randomizer is updated 更新第一帧时，关闭 Randomizer</li>
<li><code>OnUpdate() </code>- executed every frame for enabled Randomizers 为启用的 Randomizer 执行每帧</li>
</ol>
<h3 id="randomizer-coding-example" tabindex="-1" id="Randomizer-Coding-Example">Randomizer Coding Example</h3>
<p>​    以下是 Perception 软件包中包含的 rotation Randomizer 示例的代码：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs C#">[<span class="hljs-meta">Serializable</span>]<br>[<span class="hljs-meta">AddRandomizerMenu(<span class="hljs-string">&quot;Perception/Rotation Randomizer&quot;</span>)</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RotationRandomizer</span> : <span class="hljs-title">Randomizer</span><br>&#123;<br>    <span class="hljs-keyword">public</span> Vector3Parameter rotation = <span class="hljs-keyword">new</span> Vector3Parameter();<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnIterationStart</span>()</span><br>    &#123;<br>        <span class="hljs-keyword">var</span> taggedObjects = tagManager.Query&lt;RotationRandomizerTag&gt;();<br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> taggedObject <span class="hljs-keyword">in</span> taggedObjects)<br>            taggedObject.transform.rotation = Quaternion.Euler(rotation.Sample());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="randomizer-library" tabindex="-1" id="Randomizer-Library">Randomizer Library</h3>
<hr>
<p><strong>Light Randomizer</strong>：以所有绑定 <code>Light RandomizerTag</code> 的对象为目标。</p>
<p><strong>Light Randomizer Tag</strong>：必须绑定在有 <code>Light</code> 组件的 <code>GameObject</code> 上。</p>
<p>​    可以随机化的参数：</p>
<ol>
<li>可以开关的可能性</li>
<li>灯光强度</li>
<li>灯光温度</li>
<li>灯光颜色</li>
</ol>
<hr>
<p><strong>Material Property Randomizer（材质特性随机化器）</strong>: 以所有绑定 <code>Material Property Randomizer Tag</code> 的对象为目标。</p>
<p><strong>Material Property Randomizer Tag</strong>: 必须绑定在有一种 <code>Renderer</code>（MeshRenderer, BillboardRenderer 等）组件的 <code>GameObject</code> 上。</p>
<p>​    对于选定材质的着色器，指定要修改哪些着色器属性以及在哪些范围之间进行修改。</p>
<hr>
<p><strong>Material Swapper</strong>：以所有绑定 <code>Material Swapper Tag</code> 的对象为目标。</p>
<p><strong>Material Swapper Tag</strong>: 必须绑定在有 <code>Material</code> 组件的 <code>GameObject</code> 上。</p>
<p>​    给定一个材质列表，在每次迭代中，将给定 GameObject 的材质与列表中的一个采样材质进行交换。</p>
<hr>
<p><strong>Scene Randomizer</strong>：给定一个场景列表，每 <code>n</code> 次迭代从列表中加载一个场景。</p>
<p>​    列表中的任何 scenes 都不应具有 scenario 组件，因为一次只能有一个 scenario 组件处于活动状态。启动组件的 scenario 中指定的随机化器将持续存在，并作用于新加载的场景中的对象。</p>
<hr>
<p><strong>Sky Randomizer</strong>: 以所有绑定 <code>Skybox Randomizer Tag</code> 的对象为目标。</p>
<p><strong>Sky Randomizer Tag</strong>: 必须绑定在有 <code>Volume</code> 组件（？）的 <code>GameObject</code> 上。</p>
<hr>
<p><strong>Substance Randomizer</strong>：以所有绑定 <code>Substance Randomizer Tag</code> 的对象为目标。</p>
<p><strong>Substance Randomizer Tag</strong>：必须绑定在有 <code>SubstanceGraph</code> 组件的 <code>GameObject</code> 上。</p>
<p>​    好像很高级，还不太稳定，少用吧。（没有接触过 <code>SubstanceGraph</code> 这个组件）</p>
<hr>
<p><strong>Transform Randomizer</strong>：以所有绑定 <code>Transform Randomizer Tag</code> 的对象为目标。</p>
<p><strong>Transform Randomizer Tag</strong>：任何 <code>GameObject</code> 上都可绑定。</p>
<ol>
<li>Translation 平移
<ol>
<li>是否启用</li>
<li>平移范围</li>
<li>平移是相对平移还是绝对平移（直接设置坐标值）</li>
</ol>
</li>
<li>Rotation 旋转
<ol>
<li>是否启用</li>
<li>旋转范围</li>
<li>旋转是相对旋转还是绝对旋转（直接设置旋转角）</li>
</ol>
</li>
<li>Scale 缩放
<ol>
<li>是否启用</li>
<li>缩放范围</li>
<li>Uniformly scaled？（是否所有轴都具有相同的随机化值）</li>
<li>缩放是相对缩放还是绝对缩放（直接设置缩放值）</li>
</ol>
</li>
</ol>
<hr>
<p><strong>Volume Randomizer</strong>：以所有绑定 <code>Volume Randomizer Tag</code> 的对象为目标。</p>
<p><strong>Volume Randomizer Tag</strong>：必须绑定在有 <code>Volume</code> 组件的 <code>GameObject</code> 上。</p>
<hr>
<p>​    从可用的后处理效果列表中，可以随机化哪些效果以及每个后处理效果的特定参数。</p>
<ol>
<li>
<p><strong>Bloom</strong>–阈值、强度、散射</p>
</li>
<li>
<p><strong>曝光 Exposure</strong>–补偿</p>
</li>
<li>
<p><strong>景深 Depth of Field</strong>–近焦起点和终点，远焦起点和末端</p>
</li>
<li>
<p><strong>相机类型 Camera Type</strong>–相机规格列表（焦距、传感器尺寸、镜头偏移、门配合等）</p>
</li>
<li>
<p><strong>运动模糊 Motion Blur</strong>–强度、最小速度、最大速度</p>
</li>
<li>
<p><strong>镜头失真 Lens Distortion</strong>–强度、X和Y倍增、中心、比例</p>
</li>
</ol>
<h2 id="randomizer-tags" tabindex="-1" id="a-name-Randomizer-Tags-Randomizer-Tags-a"><a name="Randomizer Tags">Randomizer Tags</a></h2>
<p>​    <strong>RandomizerTags</strong> 是随机化器查询游戏对象的某个子集以在模拟中随机化的主要机制。更具体地说，RandomizerTags 是可以添加到 <code>GameObjects</code> 的组件，以便在活动场景的 TagManager 中注册它们。该 TagManager 可以识别场景中所有带有标记的对象，并且可以查询以查找包含特定标记的所有 GameObjects。下面是一个简单的示例，<code>ColorRandomizer</code> 使用 <code>ColorRandomizerTag</code> 查询所有游戏对象，它将对其应用随机材质基础颜色：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs C#">[<span class="hljs-meta">Serializable</span>]<br>[<span class="hljs-meta">AddRandomizerMenu(<span class="hljs-string">&quot;Perception/Color Randomizer&quot;</span>)</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ColorRandomizer</span> : <span class="hljs-title">Randomizer</span><br>&#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">int</span> k_BaseColor = Shader.PropertyToID(<span class="hljs-string">&quot;_BaseColor&quot;</span>);<br><br>    <span class="hljs-keyword">public</span> ColorHsvaParameter colorParameter;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnIterationStart</span>()</span><br>    &#123;<br>        <span class="hljs-keyword">var</span> taggedObjects = tagManager.Query&lt;ColorRandomizerTag&gt;();<br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> taggedObject <span class="hljs-keyword">in</span> taggedObjects)<br>        &#123;<br>            <span class="hljs-keyword">var</span> renderer = taggedObject.GetComponent&lt;MeshRenderer&gt;();<br>            renderer.material.SetColor(k_BaseColor, colorParameter.Sample());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>​    RandomizerTag 还可以用于自定义随机化器如何将其随机化应用于特定游戏对象。</p>
<h2 id="parameters" tabindex="-1" id="a-name-Parameters-Parameters-a"><a name="Parameters">Parameters</a></h2>
<p>​    Parameters 通常被定义为 Randomizer 类的字段，但它们也可以像任何其他 C# 类一样实例化：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs C#"><span class="hljs-comment">// Create a color Parametervar</span><br><span class="hljs-keyword">var</span> colorParameter = <span class="hljs-keyword">new</span> HsvaColorParameter();<br><span class="hljs-comment">// Generate one color sample</span><br><span class="hljs-keyword">var</span> color = colorParameter.Sample();<br></code></pre></td></tr></table></figure>
<p>​    请注意，Parameters 与 Samplers 一样，为 <code>Sample()</code> 方法的每次调用生成新的随机值：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs C#"><span class="hljs-keyword">var</span> color1 = colorParameter.Sample();<br><span class="hljs-keyword">var</span> color2 = colorParameter.Sample();<br>Assert.AreNotEqual(color1, color2);<br></code></pre></td></tr></table></figure>
<p>​    所有参数都派生自 <code>Parameter</code> 抽象类。此外，Perception 软件包类型中包含的参数源自两个专门的参数基类：</p>
<ol>
<li><code>CategoricalParameter</code> 类别参数</li>
<li><code>CategoricalParameter</code> 数值参数</li>
</ol>
<p>​    **在 Randomizers 以外使用 Parameters（MonoBehaviours and ScriptableObjects）: **将公共参数字段添加到 <code>MonoBehavior</code> 或 <code>ScriptableObject</code> 后，您可能已经注意到参数的 UI 看起来与添加到随机化器时不同。这是因为大多数 Perception 随机化组件的 Inspector UI 都是使用 Unity 相对较新的 UI Elements 框架编写的，尽管在默认情况下，Unity 使用旧的 IMGUI 框架来呈现默认的检查器编辑器。</p>
<p>假设您有以下具有公共 <code>GameObjectParameter</code> 字段的 <code>CustomMonoBehavior</code>：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs C#"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.Perception.Randomization.Parameters;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomMonoBehaviour</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> GameObjectParameter prefabs;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>​    **Categorical Parameters: **Categorical Parameters 从没有内在排序的选项列表中选择一个值。例如，材质参数从材质选项列表中随机选择，但材质选项列表本身可以按任何特定顺序重新排列，而不会影响选定材质的分布。</p>
<p>**​    Numeric Parameters: **Numeric Parameters 使用采样器生成随机化结构。查看Perception包中包含的 <code>ColorHsvaParameter</code> 类，了解如何实现 Numeric Parameters 的示例。</p>
<h2 id="samplers" tabindex="-1" id="a-name-Samplers-Samplers-a"><a name="Samplers">Samplers</a></h2>
<p>​    <code>Perception</code> 包中的采样器是根据有界概率分布确定地生成随机浮点值的类。尽管 <code>Samplers</code> 通常与 <code>Parameters</code> 一起用于生成类型化随机值的数组，但采样器可以从任何普通脚本中实例化和使用。<code>Perception</code> 软件包中包含了一些采样器。</p>
<hr>
<p>**Constant Sampler: **生成一个常数：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs C#"><span class="hljs-keyword">var</span> sampler = <span class="hljs-keyword">new</span> ConstantSampler();<br><br><span class="hljs-comment">// set sampled value to be 25</span><br>sampler.<span class="hljs-keyword">value</span> = <span class="hljs-number">25</span>;<br><br><span class="hljs-comment">// Generate a sample</span><br><span class="hljs-keyword">var</span> sample = sampler.Sample(); <span class="hljs-comment">// returns 25</span><br><span class="hljs-keyword">var</span> sample2 = sampler.Sample(); <span class="hljs-comment">// returns 25</span><br><span class="hljs-keyword">var</span> sample3 = sampler.Sample(); <span class="hljs-comment">// returns 25</span><br></code></pre></td></tr></table></figure>
<hr>
<p>**Uniform Sampler: **均匀分布：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs C#"><span class="hljs-keyword">var</span> sampler = <span class="hljs-keyword">new</span> UniformSampler();<br><br><span class="hljs-comment">// generate values between the range 5 and 15</span><br>sampler.range = <span class="hljs-keyword">new</span> FloatRange(<span class="hljs-number">5</span>, <span class="hljs-number">15</span>);<br><br><span class="hljs-comment">// Generate a sample</span><br><span class="hljs-keyword">var</span> sample = sampler.Sample(); <span class="hljs-comment">// value between 5 and 15</span><br></code></pre></td></tr></table></figure>
<p><img src="SA1.png" alt="png"></p>
<hr>
<p>**Normal Sampler: **正态分布：</p>
<p>从由指定范围限定的截断正态分布生成随机样本。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs C#"><span class="hljs-keyword">var</span> sampler = <span class="hljs-keyword">new</span> NormalSampler();<br><br><span class="hljs-comment">// in statistics, often denoted by µ 均值</span><br>sampler.mean = <span class="hljs-number">10</span>;<br><span class="hljs-comment">// in statistics, often denoted by σ 标准差</span><br>sampler.stdDev = <span class="hljs-number">2</span>;<br><span class="hljs-comment">// cut-off values below -20 and above 20 截断</span><br>sampler.range = <span class="hljs-keyword">new</span> FloatRange(<span class="hljs-number">-20</span>, <span class="hljs-number">20</span>);<br><br><span class="hljs-comment">// Generate a sample</span><br><span class="hljs-keyword">var</span> sample = sampler.Sample();<br></code></pre></td></tr></table></figure>
<p><img src="SA2.png" alt="png"></p>
<hr>
<p>**Animation Curve Sampler: **</p>
<p>Animation Curve 是 Unity 的内置功能，而不是 Perception 里的内容。</p>
<p>​    根据用户提供的“Animation Curve”表示的范围和概率分布对值进行采样。动画曲线的 X 轴对应于该采样器将从中拾取的值，而 Y 轴对应于这些值的相对概率。相对概率（Y 轴）不需要在 1 时最大化，因为只有曲线的形状才重要。然而，Y 值不能为负（即可能为负的值）。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs C#"><span class="hljs-keyword">var</span> sampler = <span class="hljs-keyword">new</span> AnimationCurveSampler();<br><br><span class="hljs-comment">// create an animation curve programattically</span><br>sampler.distributionCurve = AnimationCurve.EaseInOut(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">100</span>);<br><br><span class="hljs-comment">// Generate a sample</span><br><span class="hljs-keyword">var</span> sample = sampler.Sample();<br></code></pre></td></tr></table></figure>
<p>​    通过在 Inspector 中公开上面的 Sampler 变量并使用 Unity 的 UI 在曲线上添加和编辑点，可以更容易地创建动画曲线。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs C#"><span class="hljs-comment">// Unity UI handles curve creation</span><br><span class="hljs-keyword">public</span> AnimationCurve myDistributionCurve;<br><br>... <br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">myFunction</span>()</span> &#123;<br>  <span class="hljs-keyword">var</span> sampler = <span class="hljs-keyword">new</span> AnimationCurveSampler();<br>  <br>  <span class="hljs-comment">// public variable containing the AnimationCurve</span><br>  sampler.distributionCurve = myDistributionCurve;<br>  <br>  <span class="hljs-comment">// Generate a sample</span><br>  <span class="hljs-keyword">var</span> sample = sampler.Sample();<br>&#125;<br></code></pre></td></tr></table></figure>
<hr>
<p>​    <code>Sampler</code> 生成由活动场景的当前随机状态设定种子的随机值。更改场景的随机种子将导致 <code>Sampler</code> 生成不同的值。更改 <code>Sampler</code>、<code>Parameters</code>  或<code>Randomizers</code>的顺序也会导致在模拟过程中采样不同的值。建议用户不要在模拟中使用 <code>UnityEngine.Rom</code> 类或 <code>System.random</code> 类生成随机值，因为这两个类都可能生成不确定或种子不正确的随机值。仅使用 <code>Perception</code> 采样器生成随机值将有助于确保 <code>Perception</code> 模拟在本地执行期间和云中的 <code>Unity</code> 模拟上生成一致的结果。</p>
<h2 id="perception-camera" tabindex="-1" id="a-name-Perception-Camera-Perception-Camera-a"><a name="Perception Camera">Perception Camera</a></h2>
<p>​    <code>Perception Camera</code> 组件是绑在 <code>Camera</code> 上的：</p>
<p><img src="PC1.jpg" alt="jpg"></p>
<h3 id="properties" tabindex="-1" id="Properties">Properties</h3>
<table>
<thead>
<tr>
<th>Property:</th>
<th>Function:</th>
</tr>
</thead>
<tbody>
<tr>
<td>Description</td>
<td>A description of the Camera to be registered in the JSON dataset.<br/>要在 JSON 数据集中注册的 Camera 的描述。</td>
</tr>
<tr>
<td>Show Visualizations</td>
<td>Display realtime visualizations for labelers that are currently active on this camera.<br/>显示此 camera 上当前活动的 labelers 的实时可视化。</td>
</tr>
<tr>
<td>Capture RGB Images</td>
<td>When you enable this property, Unity captures RGB images as PNG files in the dataset each frame.<br/>启用此属性时，Unity 会在每帧的数据集中捕获 RGB 图像作为 PNG 文件。</td>
</tr>
<tr>
<td>Capture Trigger Mode</td>
<td>The method of triggering captures for this camera. In <code>Scheduled</code> mode, captures happen automatically based on a start frame and frame delta time. In <code>Manual</code> mode, captures should be triggered manually through calling the <code>RequestCapture</code> method of <code>PerceptionCamera</code>.<br/>触发此 camera 捕获的方法。在 <code>Scheduled</code>（计划）模式下，捕获会根据开始帧和帧增量时间自动进行。在 <code>Manual</code>（手动）模式下，应通过调用 <code>PerceptionCamera</code> 的 <code>RequestCapture</code> 方法手动触发捕获。</td>
</tr>
<tr>
<td>Override Layer Mask</td>
<td>When this property is enabled, labelers will utilize the layer mask on the Perception Camera instead of the culling mask on the camera when rendering objects during data capture. This override particularly affects object culling during segmentation image rendering.<br/>启用此属性后，在数据捕获期间渲染对象时，labelers 将使用 Perception Camera 上的 layer mask，而不是相机上的 culling mask。此覆盖特别影响分割图像渲染过程中的对象剔除。</td>
</tr>
<tr>
<td>Sensor Type</td>
<td>The Camera Sensor selected for producing pixel based ground truth data.<br/>为生成基于像素的 ground truth 数据而选择的摄像机传感器。</td>
</tr>
<tr>
<td>Layer Mask</td>
<td>The layer mask used by labelers when the Override Layer Mask field is enabled.<br/>启用 <code>Override Layer Mask</code> 字段时，<code>labelers</code> 使用的层遮罩。</td>
</tr>
<tr>
<td>Alpha Threshold</td>
<td>The minimum level of transparency required for a pixel to be rendered in segmentation images.<br/>在分割图像中渲染像素所需的最低透明度级别。</td>
</tr>
<tr>
<td>Camera Labelers</td>
<td>A list of labelers that generate data derived from this Camera.<br/>从该相机生成数据的 labelers 列表。</td>
</tr>
</tbody>
</table>
<h3 id="properties-for-scheduled-capture-mode" tabindex="-1" id="Properties-for-Scheduled-Capture-Mode">Properties for Scheduled Capture Mode</h3>
<table>
<thead>
<tr>
<th>Property:</th>
<th>Function:</th>
</tr>
</thead>
<tbody>
<tr>
<td>Simulation Delta Time</td>
<td>The simulation frame time (seconds) for this camera. <br/>此相机的模拟帧时间（秒）。<br/>E.g. 0.0166 translates to 60 frames per second. <br/>例如，0.0166 转换为每秒 60 帧。<br/>This will be used as Unity’s <code>Time.captureDeltaTime</code>, causing a fixed number of frames to be generated for each second of elapsed simulation time regardless of the capabilities of the underlying hardware. For more information on sensor scheduling, see <a href="DatasetCapture.md">DatasetCapture</a>.<br/>导致无论底层硬件的功能如何，每秒经过的模拟时间都会生成固定数量的帧。</td>
</tr>
<tr>
<td>First Capture Frame</td>
<td>Frame number at which this camera starts capturing.<br/>此相机开始拍摄时的帧序号。</td>
</tr>
<tr>
<td>Frames Between Captures</td>
<td>The number of frames to simulate and render between the camera’s scheduled captures. Setting this to 0makes the camera capture every frame.<br/>在摄影机的计划捕获之间要模拟和渲染的帧数。将此设置为 0 将使相机捕捉每一帧。</td>
</tr>
</tbody>
</table>
<h3 id="properties-for-manual-capture-mode" tabindex="-1" id="Properties-for-Manual-Capture-Mode">Properties for Manual Capture Mode</h3>
<table>
<thead>
<tr>
<th>Property:</th>
<th>Function:</th>
</tr>
</thead>
<tbody>
<tr>
<td>Affect Simulation Timing</td>
<td>Have this camera affect simulation timings (similar to a scheduled camera) by requesting a specific frame delta time. Enabling this option will let you set the <code>Simulation Delta Time</code> property described above.<br/>通过请求特定的帧增量时间，使此摄影机影响模拟计时（类似于 scheduled camera）。启用此选项可以设置上述 <code>Simulation Delta Time</code> 属性。</td>
</tr>
</tbody>
</table>
<h3 id="output-resolution" tabindex="-1" id="Output-Resolution">Output Resolution</h3>
<blockquote>
<p>使用 Unity Editor 生成数据集时，Perception Camera 生成的图像的分辨率将与编辑器的<em><strong>游戏</strong></em>视图设置的分辨率相匹配。但是，使用 built players 生成的图像（包括 local builds 和 Unity Simulation runs）将使用项目设置中指定的分辨率。（这句话应该是指编译后的程序？）</p>
</blockquote>
<p><img src="PC2.jpg" alt="jpg"></p>
<center>Unity Editor</center>
<p><img src="PC3.jpg" alt="jpg"></p>
<center>Resolution and Presentation</center>
<h3 id="accumulation" tabindex="-1" id="Accumulation">Accumulation</h3>
<blockquote>
<p>Accumulation 允许您使用需要多个帧才能获得最终结果的渲染技术。例如路径跟踪或累积运动模糊。</p>
</blockquote>
<h3 id="camera-sensors" tabindex="-1" id="Camera-Sensors">Camera Sensors</h3>
<blockquote>
<p>可以为 Perception Cameras 实现自定义相机传感器，以控制如何为所有支持的通道类型（RGB、实例分割、法线、深度等）执行渲染。可以使用 Perception Camera 组件检查器中的 <code>Sensor Type</code> 字段配置为 Perception 相机选择的特定传感器。</p>
</blockquote>
<h4 id="unity-camera-sensor" tabindex="-1" id="Unity-Camera-Sensor">Unity Camera Sensor</h4>
<blockquote>
<p>Unity 摄像头传感器是 Perception Cameras 上选择的默认传感器。这种传感器类型使用户能够捕获 Perception camera 游戏对象上配置的摄像头组件输出的数据。该传感器上的“超级采样因子”字段通知相机以原始宽度和高度的 2 倍、4 倍或 8 倍（分别为分辨率的 4 倍、16 倍或 64 倍）捕获图像，以执行高质量的超级采样抗锯齿（SSAA）效果。该效果使用子像素平均来生成更平滑的输出图像，渲染几何体边缘周围的混叠伪影更少，有时纹理中的小细节周围的混迭也会得到改善。请注意，无论该传感器上配置的特定超级采样设置如何，该传感器的输出分辨率都不会改变。</p>
</blockquote>
<h3 id="camera-labelers" tabindex="-1" id="Camera-Labelers">Camera Labelers</h3>
<blockquote>
<p><strong>Camera labelers</strong> 在 JSON 数据集中捕获与相机相关的数据。您可以使用这些数据来训练模型和进行数据集统计。Perception 软件包提供了多个 CameraLabeler，您可以从 CameraLabeler 类派生来定义更多的 labelers。</p>
</blockquote>
<h4 id="semantic-segmentation-labeler" tabindex="-1" id="Semantic-Segmentation-Labeler">Semantic Segmentation Labeler</h4>
<p><img src="PC4.png" alt="png"></p>
<blockquote>
<p><strong>SemanticSegmentationLabeler</strong> 使用附加的 Camera 生成 2D RGB 图像。Unity 使用 <code>SemanticSegmentationLabelingConfiguration</code> 中与标签关联的颜色绘制对象。如果 Unity 找不到对象的标签，它会将其绘制为黑色。</p>
</blockquote>
<h4 id="instance-segmentation-labeler" tabindex="-1" id="Instance-Segmentation-Labeler">Instance Segmentation Labeler</h4>
<blockquote>
<p>**Instance Segmentation Labeler（实例分割标注器）**使用附加的摄影机生成 2D RGB 图像。Unity 使用唯一的颜色绘制标记对象的每个实例。</p>
</blockquote>
<h4 id="bounding-box-2d-labeler-1" tabindex="-1" id="Bounding-Box-2D-Labeler">Bounding Box 2D Labeler</h4>
<p><img src="PC5.png" alt="png"></p>
<blockquote>
<p><strong>BoundingBox2DLabeler</strong> 为每个具有在 <code>IdLabelConfig</code> 中定义的标签的可见对象生成二维边界框。Unity 使用渲染图像计算边界框，因此它仅<strong>排除对象的遮挡部分或框外部分</strong>。</p>
</blockquote>
<h4 id="bounding-box-3d-labeler-1" tabindex="-1" id="Bounding-Box-3D-Labeler">Bounding Box 3D Labeler</h4>
<blockquote>
<p><strong>Bounding Box 3D Labeler</strong> 为场景中每个标记的游戏对象生成 3D 地面实况边界框。与 2D 边界框不同，3D 边界框是根据场景中标记的网格计算的，并且会记录所有对象（<strong>与它们的遮挡状态无关</strong>）</p>
<p>***注意：***边界框 3D Labeler 仅支持非嵌套蒙皮网格渲染器对象。</p>
</blockquote>
<h4 id="object-count-labeler" tabindex="-1" id="Object-Count-Labeler">Object Count Labeler</h4>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;label_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">25</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;label_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;drink_whippingcream_lucerne&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;count&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p><strong>ObjectCountLabeler</strong> 记录您在 <code>IdLabelConfig</code> 中定义的每个标签的对象计数。Unity 仅记录 <code>Camera</code> 帧中至少有一个可见像素的对象。</p>
</blockquote>
<h4 id="rendered-object-info-labeler" tabindex="-1" id="Rendered-Object-Info-Labeler">Rendered Object Info Labeler</h4>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;label_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">24</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;instance_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">320</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;visible_pixels&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">28957</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p><strong>RenderedObjectInfoLabeler</strong> 记录相机图像中可见的所有对象的列表，包括它们的实例 ID、解析的标签 ID 和可见像素计数。如果 Unity 无法将对象解析为 <code>IdLabelConfig</code> 中的标签，则不会记录这些对象。</p>
</blockquote>
<h4 id="keypoint-labeler-1" tabindex="-1" id="Keypoint-Labeler">Keypoint Labeler</h4>
<blockquote>
<p>**Keypoint labeler（关键点标注器）**捕捉已标记游戏对象上特定点的屏幕位置。此 Labeler 的典型用途是捕捉人体姿态估计数据，但它可以用于捕捉任何类型对象上的点。Labeler 使用关键点模板，该模板定义要为模型捕获的关键点以及这些关键点之间的骨架连接。关键点的位置记录在像素坐标中。</p>
</blockquote>
<h4 id="occlusion-labeler" tabindex="-1" id="Occlusion-Labeler">Occlusion Labeler</h4>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;instanceId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;percentVisible&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.25</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;percentInFrame&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.5</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;visibilityInFrame&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.5</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>**Occlusion Labeler（遮挡标注器）**为帧内可见的每个对象报告一组可见性度量。每组包含 3 个指标：</p>
<ol>
<li><strong>可见百分比 Percent Visible</strong>：对象的可见部分。</li>
<li><strong>帧内百分比 Percent In Frame</strong>：对象未被摄影机帧遮挡的部分。</li>
<li><strong>帧内可见性 Visibility In Frame</strong>：帧内对象部分的未遮挡部分。</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>e</mi><mi>r</mi><mi>c</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>V</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>b</mi><mi>l</mi><mi>e</mi><mo>=</mo><mi>p</mi><mi>e</mi><mi>r</mi><mi>c</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>I</mi><mi>n</mi><mi>F</mi><mi>r</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>×</mo><mi>v</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>b</mi><mi>i</mi><mi>l</mi><mi>i</mi><mi>t</mi><mi>y</mi><mi>I</mi><mi>n</mi><mi>F</mi><mi>r</mi><mi>a</mi><mi>m</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">percentVisible = percentInFrame\times visibilityInFrame</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mbin">×</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">b</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">i</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span></span></span></li>
</ol>
</blockquote>
<h4 id="depth-labeler" tabindex="-1" id="Depth-Labeler">Depth Labeler</h4>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;annotations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;@type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.DepthAnnotation&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Depth&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;sensorId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;camera&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Generates a 32-bit depth image in EXR format where each pixel contains the actual distance in Unity units (usually meters) from the camera to the object in the scene.&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;imageFormat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Exr&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;dimension&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-number">736.0</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-number">483.0</span><br>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;filename&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;step0.camera.Depth.exr&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure>
<center>深度帧的度量输出示例</center>
<blockquote>
<p>**Depth Labeler（深度标注器）**以 EXR 格式输出 32 位深度图像。每个像素包含从摄影机到场景中对象的实际距离，单位为 Unity units（通常为米）。深度值直接写入 R 通道。</p>
<p>深度图可以用 RenderDoc 软件来打开。</p>
</blockquote>
<h4 id="normal-labeler" tabindex="-1" id="Normal-Labeler">Normal Labeler</h4>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;annotations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>       <span class="hljs-punctuation">&#123;</span><br>         <span class="hljs-attr">&quot;@type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.NormalAnnotation&quot;</span><span class="hljs-punctuation">,</span><br>         <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Normal&quot;</span><span class="hljs-punctuation">,</span><br>         <span class="hljs-attr">&quot;sensorId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;camera&quot;</span><span class="hljs-punctuation">,</span><br>         <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Produces an image capturing the vertex normals of objects within the frame.&quot;</span><span class="hljs-punctuation">,</span><br>         <span class="hljs-attr">&quot;imageFormat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Exr&quot;</span><span class="hljs-punctuation">,</span><br>         <span class="hljs-attr">&quot;dimension&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>           <span class="hljs-number">736.0</span><span class="hljs-punctuation">,</span><br>           <span class="hljs-number">483.0</span><br>         <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>         <span class="hljs-attr">&quot;filename&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;step0.camera.Normal.exr&quot;</span><br>       <span class="hljs-punctuation">&#125;</span><br>     <span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>**Normal Labeler（法线标注器）**捕捉 3 通道图像中对象的顶点法线。此法线图像使用 EXR 格式进行编码。图像的 RGB 通道分别存储每个顶点法线像素的 XYZ 分量。</p>
</blockquote>
<h3 id="environment-labeler" tabindex="-1" id="Environment-Labeler">Environment Labeler</h3>
<blockquote>
<p>**Environment Labeler（环境标签器）**生成有关场景环境的信息，例如其标记对象的层次。</p>
</blockquote>
<h5 id="available-information" tabindex="-1" id="Available-Information">Available Information</h5>
<blockquote>
<p><strong>标签层次结构（Label Hierarchy）</strong>–标签层次结构（JSON 中的 <code>hierarchy</code> 字段）提供了由实例 ID 唯一标识的标记对象之间的父子关系。用户可以决定是只为可见对象生成标签层次，还是为场景中的所有对象生成标签层级。禁用的对象始终被忽略。</p>
</blockquote>
<h5 id="annotation-example" tabindex="-1" id="Annotation-Example">Annotation Example</h5>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;@type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.EnvironmentStateMetric&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;environment&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;sensorId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;annotationId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Captures details about the environment such as label hierarchy&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;hierarchy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;instance_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;parent_instance_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;child_instance_ids&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">]</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;instance_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;parent_instance_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;child_instance_ids&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;instance_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;parent_instance_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;child_instance_ids&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">5</span><span class="hljs-punctuation">]</span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
<h4 id="pixel-position-labeler" tabindex="-1" id="Pixel-Position-Labeler">Pixel Position Labeler</h4>
<blockquote>
<p><strong>Pixel Position Labeler</strong> 以像素输出从摄影机到对象的摄影机空间距离。输出是 EXR 格式的图像文件，对每个像素进行以下编码。想象一个向量 v_{AB}=(x，y，z)，从相机到像素 (A，B) 的</p>
<p><strong>红色通道</strong>–向量 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>v</mi><mrow><mi>A</mi><mi>B</mi></mrow></msub></mrow><annotation encoding="application/x-tex">v_{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">A</span><span class="mord mathit" style="margin-right:0.05017em;">B</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span> 的 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span> 分量</p>
<p><strong>绿色通道</strong>–向量 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>v</mi><mrow><mi>A</mi><mi>B</mi></mrow></msub></mrow><annotation encoding="application/x-tex">v_{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">A</span><span class="mord mathit" style="margin-right:0.05017em;">B</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span> 的 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span> 分量</p>
<p><strong>蓝色通道</strong>-向量 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>v</mi><mrow><mi>A</mi><mi>B</mi></mrow></msub></mrow><annotation encoding="application/x-tex">v_{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">A</span><span class="mord mathit" style="margin-right:0.05017em;">B</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span> 的 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span></span> 分量</p>
<p><strong>Alpha 通道</strong>–始终设置为 1</p>
</blockquote>
<h4 id="metadata-labeler-1" tabindex="-1" id="Metadata-Labeler">Metadata Labeler</h4>
<blockquote>
<p>在帧的末尾，这个 labeler 从场景中的所有 MetadataTags 中获取数据，并将其记录到结果 JSON 中的 <em>metadata</em> 部分。</p>
</blockquote>
<h5 id="included-metadata-tags" tabindex="-1" id="Included-metadata-tags">Included metadata tags</h5>
<ul>
<li>LabelingNameMetadataTag
<ul>
<li>添加有关 GameObject 名称的信息</li>
<li>如何添加数据的简单示例 Frame JSON 数据</li>
</ul>
</li>
<li>LabelingTagMetadataTag
<ul>
<li>添加有关 GameObject 标签的信息</li>
<li>添加数据的一个简单示例 Frame JSON 数据</li>
</ul>
</li>
<li>LightMetadataTag
<ul>
<li>添加有关灯光强度和颜色的信息</li>
<li>这是如何注入场景相关的示例帧 JSON 数据中的信息</li>
</ul>
</li>
<li>LabelingChildNameMetadataTag
<ul>
<li>将子对象的名称报告给父数据</li>
<li>如何将不同对象的数据分组到同一报告的示例</li>
</ul>
</li>
<li>LabelingDistanceToMainCameraMetadataTag
<ul>
<li>报告从游戏对象到主相机的距离</li>
<li>如何对报告进行任何 Unity Engine 计算的简单示例</li>
</ul>
</li>
<li>LabelingKeyValuesMetadataTag
<ul>
<li>增加了通过 Unity 编辑器添加自定义字符串的可能性</li>
<li>这是如何通过 Unity Editor 添加自定义信息的示例</li>
</ul>
</li>
<li>LabelingTransformDataMetadataTag
<ul>
<li>-添加了关于 GameObject 转换的信息</li>
<li>这是一个如何添加选择信息的可能性的示例，以包括在 Unity Editor 中的 Frame JSON 数据中</li>
</ul>
</li>
</ul>
<h5 id="how-to-create-custom-labeling-related-metadata-tag" tabindex="-1" id="How-to-create-custom-Labeling-related-metadata-tag">How to create custom Labeling-related metadata tag</h5>
<ol>
<li>
<p>继承 <em>LabelMetadataTag</em></p>
</li>
<li>
<p>实现所需的抽象方法</p>
<p>2.1 键-序列化 JSON 文件中对象的名称</p>
<p>2.2 GetReportedValues（IMessageBuilder-builder）-通过 <em>builder 将此处所需的任何信息添加到 <em>builder</em> 中。add(“object_name”，data_to_be_addd&gt;</em>)。将组件添加到带有标签的 GameObject 组件</p>
</li>
<li>
<p>将组件添加到带有标签的 GameObject 组件</p>
</li>
</ol>
<h3 id="limitations" tabindex="-1" id="Limitations">Limitations</h3>
<p>​    ground truth 并不与所有渲染功能兼容，尤其是那些修改帧中对象的可见性或形状的渲染功能。</p>
<p>生成 ground truth 时：</p>
<ul>
<li>Unity 不运行顶点和几何体着色器</li>
<li>Unity 不会运行后处理效果，HDRP 中的内置镜头失真除外</li>
</ul>
<h2 id="dataset-capture" tabindex="-1" id="a-name-Dataset-Capture-Dataset-Capture-a"><a name="Dataset Capture">Dataset Capture</a></h2>
<p>​    <code>DatasetCapture</code> 跟踪 <code>sensors</code>，<code>annotations</code>，<code>metrics</code>，并将数据传递到激活的 <code>endpoint</code>。它还控制每帧经过的模拟时间，以适应激活的 <code>sensors</code>。</p>
<hr>
<p>这段代码是一个自定义的相机标记器 <code>CameraLabeler</code>，用于在场景中添加标记 <code>labels</code> 和测量 <code>metrics</code> ，以用于训练和评估模型。</p>
<blockquote>
<p>在 Perception Camera 中，Label 通常用于标记场景中的物体，如人、车、建筑等，以及它们的属性，如类别、大小、颜色等等。这些信息可以通过标记器（labeler）进行添加或修改，并且可以用于训练和评估机器学习模型。</p>
<p>而 Metric 则是用于测量场景中某些物理量或者训练和评估过程中的指标，如灯光的位置、物体的速度、模型的精度等等。这些信息可以被记录下来，以便后续对场景展开更深入的数据分析和挖掘。相比于 Label，Metric 更关注于数值上的精确度和可重复性，可以帮助开发者更好地分析和改进算法表现。</p>
<p>总之，Label 是场景中物体的标记，而 Metric 是场景中物理量或者模型性能的测量。两者各有不同的应用场景和意义，但都可以作为机器学习和计算机视觉任务的关键信息来源。</p>
</blockquote>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><code class="hljs C#"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.Perception.GroundTruth;<br><span class="hljs-keyword">using</span> UnityEngine.Perception.GroundTruth.DataModel;<br><span class="hljs-keyword">using</span> UnityEngine.Rendering;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomLabeler</span> : <span class="hljs-title">CameraLabeler</span>  <span class="hljs-comment">// 定义了 CustomLabeler 类，继承自 CameraLabeler</span><br>&#123;<br>    <span class="hljs-comment">// 重写了 description、labelerId 和 supportsVisualization 属性</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">string</span> description =&gt; <span class="hljs-string">&quot;Demo labeler&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">string</span> labelerId =&gt; <span class="hljs-string">&quot;Demo labeler&quot;</span>;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">bool</span> supportsVisualization =&gt; <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-comment">// 创建了一个公共的 GameObject 类型的变量 targetLight 和 target，分别表示需要标记的灯光和物体的信息</span><br>    <span class="hljs-keyword">public</span> GameObject targetLight;<br>    <span class="hljs-keyword">public</span> GameObject target;<br><br>    <span class="hljs-comment">// 定义了一个 MetricDefinition 类型的变量 lightMetricDefinition 和一个 AnnotationDefinition 类型的变量 targetPositionDef，分别表示灯光的度量标准和物体位置的注释定义</span><br>    MetricDefinition lightMetricDefinition;<br>    AnnotationDefinition targetPositionDef;<br><br>    <span class="hljs-comment">// 新定义了一个 AnnotationDefinition 子类 TargetPositionDef，用于表示物体在相机空间中的位置</span><br>    <span class="hljs-keyword">class</span> <span class="hljs-title">TargetPositionDef</span> : <span class="hljs-title">AnnotationDefinition</span><br>    &#123;<br>        <span class="hljs-comment">// 构造函数：接受一个字符串类型的 ID 作为参数，用于初始化注释定义实例</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TargetPositionDef</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> id</span>)</span><br><span class="hljs-function">            : <span class="hljs-title">base</span>(<span class="hljs-params">id</span>)</span> &#123; &#125;<br><br>        <span class="hljs-comment">// 成员变量 modelType：表示注释定义所属的模型类型，是一个只读字符串属性，该属性指定了该注释定义的类型</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">string</span> modelType =&gt; <span class="hljs-string">&quot;targetPosDef&quot;</span>;<br>        <span class="hljs-comment">// 成员变量 description：表示注释定义的描述信息，是一个只读字符串属性，该属性描述了注释定义的用途和含义</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">string</span> description =&gt; <span class="hljs-string">&quot;The position of the target in the camera&#x27;s local space&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// 定义了一个序列化的 TargetPosition 类，其中包括物体的注释信息以及其在相机空间中的位置</span><br>    [<span class="hljs-meta">Serializable</span>]<br>    <span class="hljs-keyword">class</span> <span class="hljs-title">TargetPosition</span> : <span class="hljs-title">Annotation</span><br>    &#123;<br>        <span class="hljs-comment">// 构造函数：</span><br>        <span class="hljs-comment">// 接受注释定义（AnnotationDefinition）实例</span><br>        <span class="hljs-comment">// 感知传感器 ID（sensorId）</span><br>        <span class="hljs-comment">// 物体在相机空间中的位置信息（pos）</span><br>        <span class="hljs-comment">// 调用基类的构造函数进行初始化</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TargetPosition</span>(<span class="hljs-params">AnnotationDefinition definition, <span class="hljs-built_in">string</span> sensorId, Vector3 pos</span>)</span><br><span class="hljs-function">            : <span class="hljs-title">base</span>(<span class="hljs-params">definition, sensorId</span>)</span><br>        &#123;<br>            position = pos;<br>        &#125;<br><br>        <span class="hljs-comment">// 成员变量 position：表示物体在相机空间中的位置，类型为 Vector3</span><br>        <span class="hljs-keyword">public</span> Vector3 position;<br><br>        <span class="hljs-comment">// 方法 ToMessage()：将该注释实例转换为消息格式，方便传输和分析。</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ToMessage</span>(<span class="hljs-params">IMessageBuilder builder</span>)</span><br>        &#123;<br>            <span class="hljs-keyword">base</span>.ToMessage(builder);<br>            <span class="hljs-comment">// 使用 IMessageBuilder 接口的 AddFloatArray() 方法将 position 转换为浮点数数组，并添加到消息体中去</span><br>            builder.AddFloatArray(<span class="hljs-string">&quot;position&quot;</span>, MessageBuilderUtils.ToFloatVector(position));<br>        &#125;<br><br>        <span class="hljs-comment">// 检查该注释实例是否合法，始终返回 true</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">IsValid</span>()</span> =&gt; <span class="hljs-literal">true</span>;<br><br>    &#125;<br><br>    <span class="hljs-comment">// 在 Setup() 方法中，注册度量标准 lightMetricDefinition 和注释定义 targetPositionDef</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Setup</span>()</span><br>    &#123;<br>        <span class="hljs-comment">// 创建了一个名为 lightMetricDefinition 的 MetricDefinition 类实例，该实例表示灯光在世界空间中的位置度量。</span><br>        <span class="hljs-comment">// 使用 MetricDefinition 构造函数传入三个字符串类型的参数：ID、名称和描述，</span><br>        <span class="hljs-comment">// 分别指定度量定义的唯一标识符、度量定义的名称和作用。</span><br>        lightMetricDefinition =<br>            <span class="hljs-keyword">new</span> MetricDefinition(<br>                <span class="hljs-string">&quot;LightMetric&quot;</span>,<br>                <span class="hljs-string">&quot;lightMetric1&quot;</span>,<br>                <span class="hljs-string">&quot;The world-space position of the light&quot;</span>);<br>        <span class="hljs-comment">// 通过 DatasetCapture 类的 RegisterMetric() 方法注册了上述定义的度量定义，将其添加到场景捕捉器中。</span><br>        DatasetCapture.RegisterMetric(lightMetricDefinition);<br><br>        <span class="hljs-comment">// 创建了一个名为 targetPositionDef 的 TargetPositionDef 类实例，</span><br>        <span class="hljs-comment">// 该实例表示场景中某个目标物体相对于相机的位置注释。</span><br>        <span class="hljs-comment">// 使用 TargetPositionDef 构造函数传入一个字符串 ID 参数，用于初始化注释定义实例。</span><br>        targetPositionDef = <span class="hljs-keyword">new</span> TargetPositionDef(<span class="hljs-string">&quot;target1&quot;</span>);<br>        <span class="hljs-comment">// 通过 DatasetCapture 类的 RegisterAnnotationDefinition() 方法注册了上述定义的注释定义，</span><br>        <span class="hljs-comment">// 将其添加到场景捕捉器中。</span><br>        DatasetCapture.RegisterAnnotationDefinition(targetPositionDef);<br>    &#125;<br><br>    <span class="hljs-comment">// 在 OnBeginRendering() 方法中，获取灯光位置并报告度量；计算物体在相机空间中的位置并报告注释</span><br>    <span class="hljs-comment">// 这段代码出现在某个类的 OnBeginRendering() 方法中，在场景渲染之前被调用。</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnBeginRendering</span>(<span class="hljs-params">ScriptableRenderContext scriptableRenderContext</span>)</span><br>    &#123;<br>        <span class="hljs-comment">// 获取灯光的世界空间位置，并使用 GenericMetric 类创建一个度量对象，</span><br>        <span class="hljs-comment">// 并将其位置信息添加到 JSON 数组字符串中，将度量对象报告给 DatasetCapture，以记录灯光的位置信息。</span><br>        <span class="hljs-comment">// Report the light&#x27;s position by manually creating the json array string.</span><br>        <span class="hljs-keyword">var</span> lightPos = targetLight.transform.position;<br>        <span class="hljs-keyword">var</span> metric = <span class="hljs-keyword">new</span> GenericMetric(<span class="hljs-keyword">new</span>[] &#123; lightPos.x, lightPos.y, lightPos.z &#125;, lightMetricDefinition);<br>        DatasetCapture.ReportMetric(lightMetricDefinition, metric);<br><br>        <span class="hljs-comment">// 计算目标物体相对于相机的本地位置，并使用 TargetPosition 类创建一个注释对象，</span><br>        <span class="hljs-comment">// 其中包括注释的类型（即 targetPositionDef）、传感器 ID 和目标物体的本地位置信息。</span><br>        <span class="hljs-comment">// compute the location of the object in the camera&#x27;s local space</span><br>        Vector3 targetPos = perceptionCamera.transform.worldToLocalMatrix * target.transform.position;<br><br>        <span class="hljs-comment">// 使用 PerceptionCamera 的 SensorHandle 类报告上述注释对象，并将其添加到 DatasetCapture 中。</span><br>        <span class="hljs-comment">// Report using the PerceptionCamera&#x27;s SensorHandle if scheduled this frame</span><br>        <span class="hljs-keyword">var</span> sensorHandle = perceptionCamera.SensorHandle;<br><br>        <span class="hljs-keyword">if</span> (sensorHandle.ShouldCaptureThisFrame)<br>        &#123;<br>            <span class="hljs-keyword">var</span> annotation = <span class="hljs-keyword">new</span> TargetPosition(targetPositionDef, sensorHandle.Id, targetPos);<br>            sensorHandle.ReportAnnotation(targetPositionDef, annotation);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>Example metric that is added each frame in the dataset:</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;capture_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;annotation_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;sequence_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;9768671e-acea-4c9e-a670-0f2dba5afe12&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;step&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;metric_definition&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lightMetric1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;values&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-number">96.1856</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-number">192.675964</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-number">-193.838638</span><br>   <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure>
<p>**Example annotation that is added to each capture in the dataset: **</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;annotation_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;target1&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;model_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;targetPosDef&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;The position of the target in the camera&#x27;s local space&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;sensor_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;camera&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;target1&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;position&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-number">1.85350215</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-number">-0.253945172</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-number">-5.015307</span><br>    <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
<h2 id="output-endpoint" tabindex="-1" id="a-name-Output-Endpoint-Output-Endpoint-a"><a name="Output Endpoint">Output Endpoint</a></h2>
<p><strong>Dataset Capture</strong> 跟踪 <strong>sensors（传感器）</strong>，<strong>annotations（注释）</strong> 和 <strong>metrics（度量）</strong>，将数据传递到 <strong>Endpoint</strong>，<strong>Endpoint</strong> 负责将数据打包为用户可用的格式。</p>
<h3 id="supported-endpoints" tabindex="-1" id="Supported-Endpoints">Supported Endpoints</h3>
<p>Perception 软件包包含三个内置端点选项：</p>
<h4 id="1.-%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89solo-endpoint" tabindex="-1" id="1-（推荐）SOLO-Endpoint">1. （推荐）SOLO Endpoint</h4>
<blockquote>
<p>随着模拟的进行，我们最新的输出格式将捕获信息写入相关目录。这与我们以前在模拟结束时写入数据的方法不同，使您能够在长时间模拟运行时查看数据。查看 SOLO endpoint 相对于我们以前的 Perception endpoint 所具有的优势的完整列表。</p>
</blockquote>
<hr>
<p>SOLO 数据集是 JSON 和图像文件的组合。本文档描述了用于存储数据的架构。</p>
<p>SOLO schema（模式）为模拟输出提供了一种通用结构，可以很容易地使用它来显示统计数据或训练机器学习模型。</p>
<p>SOLO 数据集由 sensor captures（传感器捕获）、annotations（注释）和 metrics（度量组成），例如 images（图像）和 2d bounding box labels（二维边界框标签）。</p>
<p>这些数据有各种形式，可能会被不同的 sensors（传感器）和 annotation（注释机制）捕获。</p>
<p>多个 sensors（传感器）可以产生不同频率的捕获。</p>
<h5 id="%E7%9B%AE%E6%A0%87" tabindex="-1" id="目标">目标</h5>
<p>schema（模式）应该：</p>
<ul>
<li>
<p>以一种定义良好的格式包括捕获的传感器数据和注释。这使我们能够维护 Perception 包和数据集消费者之间的合同（例如，统计和 ML 建模…）</p>
</li>
<li>
<p>维护捕获的数据和同一传感器同时获取的注释之间的关系。</p>
<p>它还应保持与时间相关的感知任务（如物体跟踪）的连续捕获之间的关系。</p>
</li>
<li>
<p>支持流式数据，因为数据将在模拟过程中从多个进程或云实例动态创建。</p>
</li>
<li>
<p>能够轻松支持新型传感器和注释。</p>
</li>
</ul>
<h5 id="%E6%9C%AF%E8%AF%AD" tabindex="-1" id="术语">术语</h5>
<ul>
<li><strong>simulation</strong>：一个 Unity player 构建的一个或多个 build，可能具有不同的参数。</li>
<li><strong>capture</strong>：Unity 传感器的完整渲染过程，将渲染结果保存到数据文件中，如（png、pcd 等）</li>
<li><strong>frame</strong>：Unity 模拟中的实际帧</li>
<li><strong>sequence</strong>：simulation 生成的按时间顺序的一系列 captures。（Perception Scenario 中每一个 Iteration 对应一个 SOLO 数据 sequence）</li>
<li><strong>step</strong>：每个 sequence 产生 frames 的数据索引。</li>
<li><strong>annotation</strong>：记录的数据（如边界框或语义分割），用于描述同一时间戳的特定 capture。capture 可能包括多种类型的 annotations。</li>
<li><strong>label</strong>：表示语义类型或类的字符串标记（如 car、human.adult 等）。一个 GameObject 可能有多个 labels 用于不同的 annotation 目的。</li>
<li><strong>coordinate systems</strong>：schema 中使用了 3 个坐标系：
<ul>
<li><strong>global coordinate system</strong>：相对于 Unity 中 global origin 的坐标。</li>
<li><strong>sensor coordinate system</strong>：相对于 sensor（传感器）的坐标。这对于单个传感器的 ML 模型训练很有用，该传感器可以从全局坐标系和自我坐标系转换。在仿真中很少记录使用传感器坐标系的物体姿态的原始值。</li>
</ul>
</li>
</ul>
<h5 id="%E7%BB%93%E6%9E%84" tabindex="-1" id="结构">结构</h5>
<p><img src="SOLO1.png" alt="png"></p>
<p>SOLO 数据存储在 sequence/step 层次结构中。生成的数据的顶层将包括<strong>元数据</strong>和<strong>定义文件</strong>，以及每个 captured sequence 的目录。</p>
<p>在 sequence 目录中，将有一个 JSON 文件，其中包含 frame 中的所有 annotations 和 metrics。</p>
<p>sensors 和 annotators（如 RGB 捕获或分段掩码）也将驻留在该目录中。出于组织目的，所有文件都将遵循严格的命名模式，frame 文件如下：</p>
<ul>
<li><strong>step.<em>NNNN</em>.frame.json</strong>
<ul>
<li><em><strong>NNNN</strong></em> 是 step 的序号</li>
</ul>
</li>
<li><strong>step.<em>NNNN.ID.EXT</em></strong>
<ul>
<li><em><strong>NNNN</strong></em> 是 step 的序号</li>
<li><em><strong>ID</strong></em> 是创建文件的 sensor 或 labeler 的注册 ID</li>
<li><em><strong>EXT</strong></em> 是文件扩展名</li>
</ul>
</li>
</ul>
<p>顶级目录包含：</p>
<ul>
<li><strong>metadata.json</strong>：元数据文件包含模拟范围的数据。这些值要么由 Perception 软件包自动生成一次，要么是系统范围的元数据。</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;unityVersion&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2021.3.11f1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;perceptionVersion&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0-preview.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;renderPipeline&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;HDRP&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;simulationStartTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2023/6/21 8:17:17&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;scenarioRandomSeed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">539662031</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;scenarioActiveRandomizers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-string">&quot;BackgroundObjectPlacementRandomizer&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;TextureRandomizer&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;HueOffsetRandomizer&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;ForegroundObjectPlacementRandomizer&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;RotationRandomizer&quot;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;totalFrames&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;totalSequences&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;sensors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-string">&quot;camera&quot;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;metricCollectors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-string">&quot;ObjectCount&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;RenderedObjectInfo&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;scenario_iteration&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;random-seed&quot;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;simulationEndTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2023/6/21 8:17:21&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;annotators&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;bounding box&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.BoundingBox2DAnnotation&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;semantic segmentation&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.SemanticSegmentationAnnotation&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
<ul>
<li><strong>sensor_definitions.json</strong>：包含数据集中所有 sensors 的定义。</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;sensorDefinitions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;@type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.RGBCamera&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;camera&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;modality&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;camera&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;firstCaptureFrame&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;captureTriggerMode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Scheduled&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;simulationDeltaTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.0166</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;framesBetweenCaptures&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;manualSensorsAffectTiming&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
<ul>
<li><strong>annotation_definitions.json</strong>：包含数据集中所有注释的定义。</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;annotationDefinitions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;@type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.BoundingBox2DAnnotation&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;bounding box&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Produces 2D bounding box annotations for all visible objects that bear a label defined in this labeler&#x27;s associated label configuration.&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;spec&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;label_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;label_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;candy_minipralines_lindt&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><br>...<br>          <br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;label_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;label_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;snack_granolabar_naturevalley&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;@type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.SemanticSegmentationAnnotation&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;semantic segmentation&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Generates a semantic segmentation image for each captured frame. Each object is rendered to the semantic segmentation image using the color associated with it based on this labeler&#x27;s associated semantic segmentation label configuration. Semantic segmentation images are saved to the dataset in PNG format. Please note that only one SemanticSegmentationLabeler can render at once across all cameras.&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
<ul>
<li><strong>metric_definitions.json</strong>：包含数据集中所有 metrics 的定义。</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;metricDefinitions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;@type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.ObjectCountMetric&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ObjectCount&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-comment">// 为该标签器相关的标签配置中定义的每个标签生成对象计数。</span><br>      <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Produces object counts for each label defined in this labeler&#x27;s associated label configuration.&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;@type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.RenderedObjectInfoMetric&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;RenderedObjectInfo&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-comment">// 根据该标签器相关的标签配置，为每个在摄像头画面中占用一个或多个像素的对象，在每帧中生成标签 ID、实例 ID 和可见像素计数的单个度量。</span><br>      <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Produces label id, instance id, and visible pixel count in a single metric each frame for each object which takes up one or more pixels in the camera&#x27;s frame, based on this labeler&#x27;s associated label configuration.&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;@type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.GenericMetric&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;scenario_iteration&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-comment">// 数据集序列的迭代信息。</span><br>      <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Iteration information for dataset sequences&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;@type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.GenericMetric&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;random-seed&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-comment">// 随机种子用于初始化仿真的随机状态。每次仿真只会触发一次。</span><br>      <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;The random seed used to initialize the random state of the simulation. Only triggered once per simulation.&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
<p>每个 sequence 都将获得自己的目录，该目录将包含所有 capture。序列目录的命名约定如下：sequence.X，其中 X 是从值 0 开始的数值。例如，模拟的前三个 sequence 目录名称为：</p>
<ul>
<li>sequence.0</li>
<li>sequency.1</li>
<li>sequence.2</li>
</ul>
<p>sequence 目录包含序列的所有 captures、annotations 和 metrics。</p>
<p>所有数据文件名都以捕获它们的步骤开始。根据文件类型的不同，文件名规则不同：</p>
<h5 id="file-structure" tabindex="-1" id="File-Structure">File Structure</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">dataset.XXXX<br>├── metadata.json<br>├── sensor_definitions.json<br>├── annotation_definitions.json<br>├── metric_definitions.json<br>└── sequence.NUM<br>├── step.NUM.frame.json<br>├── step.NUM.capture.SENSOR[_ID].[ext]<br>└── step.NUM.annotation.NAME[_ID].SENSOR[_ID].[ext]<br></code></pre></td></tr></table></figure>
<h5 id="example-dataset-layout" tabindex="-1" id="Example-Dataset-Layout">Example Dataset Layout</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">dataset<br>├── metadata.json							<br>├── sensor_definitions.json                			<br>├── annotation_definitions.json            			<br>├── metric_definitions.json	            			<br>├── sequence.1<br>│   ├── step.1.frame.json<br>│   ├── step.1.rgb.front_camera.png<br>│   ├── step.1.semantic_segmentation_0.png<br>│   ├── step.1.semantic_segmentation_1.png<br>│   ├── step.1.instance_segmentation.png<br>│   ├── step.2.frame.json<br>│   ├── step.2.rgb.front_camera.png<br>│   ├── step.2.semantic_segmentation_0.png<br>│   ├── step.2.semantic_segmentation_1.png<br>│   └── step.2.instance_segmentation.png<br>└── sequence.2<br>├── step.1.frame.json<br>├── step.1.rgb.front_camera.png<br>├── step.1.semantic_segmentation_0.png<br>├── step.1.semantic_segmentation_1.png<br>├── step.1.instance_segmentation.png<br>├── step.2.frame.json<br>├── step.2.rgb.front_camera.png<br>├── step.2.semantic_segmentation_0.png<br>├── step.2.semantic_segmentation_1.png<br>└── step.2.instance_segmentation.png<br></code></pre></td></tr></table></figure>
<h5 id="frame" tabindex="-1" id="Frame">Frame</h5>
<p>对于 <code>step.1.frame.json</code>，文件结构及解释：</p>
<p><img src="SOLO3.png" alt="png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">frame &#123;<br>  frame:            &lt;int&gt; -- The integer ID of the frame <br>  sequence:         &lt;int&gt; -- The sequence number<br>  step:             &lt;int&gt; -- The step inside the sequence<br>  timestamp:        &lt;int&gt; -- Timestamp in milliseconds since the sequence started 自序列开始以来的时间戳（以毫秒为单位）<br>  captures:         [&lt;capture&gt;,...] [optional] - The list of captures (see below) captures 的参数信息<br>  metrics:          [&lt;metric&gt;,...] [optional] - The list of metrics recorded for the frame (see below) metric 的参数信息<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="capture" tabindex="-1" id="Capture">Capture</h5>
<p><img src="SOLO4.png" alt="png"></p>
<p>Capture 记录包含 captured（捕获）的文件、annotations（注释）集合和描述 sensor 状态的额外 metadata（元数据）之间的关系。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">capture &#123;<br>  @type:             &lt;str&gt; -- The class type of the sensor<br>  id:                &lt;str&gt; -- The ID of the sensor that made the capture<br>  description:       &lt;str&gt; -- Human readable description of the sensor<br>  position:          &lt;float3&gt; -- Position in meters: (x, y, z) with respect to the global coordinate system<br>  rotation:          &lt;float4&gt; -- Orientation as quaternion: w, x, y, z<br>  velocity:          &lt;float3&gt; -- Velocity in meters per second as v_x, v_y, v_z<br>  acceleration:      &lt;float3&gt; [optional] -- Acceleration in meters per second^2 as a_x, a_y, a_z<br>  annotations:       [&lt;obj&gt;,...] [optional] -- List of the annotations in this capture. See below.<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="rgb-capture" tabindex="-1" id="RGB-Capture">RGB Capture</h5>
<p><img src="SOLO5.png" alt="png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">rgb_capture : capture &#123;<br>  filename:          &lt;str&gt; -- A single file that stores sensor captured data.<br>  imageFormat:       &lt;str&gt; -- The format of the sensor captured file. (e.g. &quot;Png&quot;)<br>  dimension:         &lt;int2&gt; -- The image size in pixels (width/height)<br>  projection:        &lt;string&gt; -- holds the type of projection the camera used for that capture: Options: &quot;perspective&quot; or &quot;orthographic&quot;<br>  matrix:            &lt;float3&gt; -- The projection matrix of the camera<br>&#125;<br><br>reference: [camera_intrinsic](https://www.mathworks.com/help/vision/ug/camera-calibration.html#bu0ni74)<br></code></pre></td></tr></table></figure>
<h5 id="sequence%2C-step%2C-and-timestamp" tabindex="-1" id="Sequence-Step-and-Timestamp">Sequence, Step, and Timestamp</h5>
<blockquote>
<p>在某些用例中，在模拟过程中，两个连续的捕获可能在时间上不相关。例如，如果我们在场景中为 X 步模拟生成随机放置的对象。在这种情况下，序列、步骤和时间戳与捕获的数据无关。我们可以为这些类型的捕获的序列、步骤和时间戳添加一个默认值。在我们需要保持捕获（例如，10 秒视频中的相机捕获序列）和[度量]（#metrics）之间的时间顺序关系的情况下，我们需要添加序列、步骤和时间戳来保持捕获的时间顺序的关系。</p>
</blockquote>
<blockquote>
<p>在 SOLO 中，序列表示任何时间顺序捕获和注释的集合，并对应于感知场景的一次迭代。时间戳是指自序列开始以来以毫秒为单位的模拟挂钟。步长是指在触发捕获或度量事件时增加的整数值。我们不能使用时间戳在两个不同的事件之间进行同步，因为时间戳是浮动的，因此会产生较差的索引。相反，我们使用了一个“步长”计数器，可以很容易地将同时发生的度量和捕获关联起来。</p>
</blockquote>
<blockquote>
<p>以下是如何同步捕获、度量、时间戳和步骤的说明。</p>
</blockquote>
<p><img src="SOLO6.png" alt="png"></p>
<blockquote>
<p>由于每个传感器可能会触发不同频率的捕获，因此在同一时间戳，我们可能包含 0 到 N 个捕获，其中 N 是该场景中包括的传感器的总数。如果在同一时间戳捕获两个传感器，则它们应该共享相同的序列、步骤和时间戳值。</p>
</blockquote>
<h5 id="annotation" tabindex="-1" id="Annotation">Annotation</h5>
<p><img src="SOLO7.png" alt="png"></p>
<p>Annotation 注释记录包含 sensor 的 ground truth，可以是内联的，也可以是单独的文件。单个 capture 可以包含许多 annotations，每个 annotation 对应于模拟中的一个活动 Labeler。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">annotation &#123;<br>  @type:             &lt;str&gt; -- The class type of the annotation<br>  id:                &lt;str&gt; -- The registered ID of the annotation<br>  sensorId:          &lt;str&gt; -- The ID of the sensor that this annotation is attached to<br>  description:       &lt;str&gt; -- The human readable description of the sensor<br>&#125;<br></code></pre></td></tr></table></figure>
<p>除上述内容外，注释还可以包括为该注释记录的单个对象的阵列，例如边界框的列表。我们看下面的几个例子。此数组通常命名为 <code>values</code> 或 <code>instances</code>。</p>
<h5 id="example-annotations" tabindex="-1" id="Example-Annotations">Example Annotations</h5>
<h6 id="semantic-segmentation" tabindex="-1" id="Semantic-Segmentation">Semantic Segmentation</h6>
<p>语义分割注释扩展了基本注释类，以包括 PNG 格式的颜色掩码的文件名，其中每个颜色映射到唯一的对象类。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">SemanticSegmentationAnnotation &#123;<br>  @type:             &quot;type.unity.com/unity.solo.SemanticSegmentationAnnotation&quot;,<br>  id:                &lt;str&gt; -- The registered ID of the annotation 注释的注册 ID<br>  sensorId:          &lt;str&gt; -- The ID of the sensor that this annotation is attached to 此注释所附加的传感器的 ID<br>  description:       &lt;str&gt; -- The human readable description of the sensor 传感器的人类可读描述<br>  imageFormat:       &lt;str&gt; -- Format of the segmentation mask (&quot;Png&quot;) 分段掩码的格式（“Png”）<br>  dimension:         &lt;int2&gt; -- Width and height of the output image 输出图像的宽度和高度<br>  instances [              -- Array of recorded object classes and their unique R,G,B pixel values 记录的对象类及其唯一的 R、G、B 像素值的数组<br>    &#123;<br>      labelName:     &lt;str&gt; -- String identifier of the object class label 对象类标签的字符串标识符<br>      pixelValue:    &lt;int4&gt; -- R,G,B,A values for this label&#x27;s unique color [0-255] 此标签的唯一颜色的 G、B、A 值[0-255]<br>    &#125;, ...<br>  ]        <br>&#125;<br></code></pre></td></tr></table></figure>
<p>语义分段注释示例：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;@type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;type.unity.com/unity.solo.SemanticSegmentationAnnotation&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;9ca0e2e4-5a0f-4ee3-8cae-b34565275059&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;sensorId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;camera&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Produces a semantic segmentation RGB mask&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;imageFormat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Png&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dimension&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-number">1600.0</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-number">1200.0</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;filename&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;step1.camera.9ca0e2e4-5a0f-4ee3-8cae-b34565275059.png&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;instances&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;labelName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Baseboard-1&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;pixelValue&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-number">177</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-number">255</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-number">101</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-number">255</span><br>      <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> ...<br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span> <br></code></pre></td></tr></table></figure>
<p>下面显示了一个示例语义分割掩码。请注意同一类物品（例如餐椅）的颜色是如何相同的：</p>
<p><img src="SOLO8.png" alt="png"></p>
<p><em>注意：未标记的对象在分割遮罩中渲染为黑色</em></p>
<h6 id="instance-segmentation" tabindex="-1" id="Instance-Segmentation">Instance Segmentation</h6>
<p>与语义分割类似，实例分割注释包括 PNG 格式的颜色掩码的文件名。这一次，每个独特的物体都有一种独特的颜色。该模式与语义分割略有不同，包括<code>instanceId</code>（整个模拟中唯一的对象 id）和 <code>labelId</code>（对象类的数字标识符）。例如：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;instances&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>  <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;instanceId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">19</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;labelId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">273</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;labelName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Wall&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;color&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-number">255</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-number">53</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-number">255</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> ...  <br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure>
<p>示例实例分段掩码如下所示。请注意每个对象如何具有唯一的颜色：</p>
<p><img src="SOLO9.png" alt="png"></p>
<h6 id="2d-bounding-box" tabindex="-1" id="2D-Bounding-Box">2D Bounding Box</h6>
<blockquote>
<p>每个边界框记录将一个元组（实例、标签）映射到一组 4 个变量（x、y、宽度、高度），用于绘制边界框。</p>
</blockquote>
<h6 id="3d-bounding-box" tabindex="-1" id="3D-Bounding-Box">3D Bounding Box</h6>
<blockquote>
<p>三维边界框信息。与 2D 边界框不同，3D 边界框坐标是在<strong>传感器坐标系</strong>中捕获的。每个边界框记录将一个元组（实例、标签）映射到绘制三维边界框的平移、大小和旋转，以及三维边界盒的速度和加速度（可选）。</p>
</blockquote>
<h6 id="keypoints" tabindex="-1" id="Keypoints">Keypoints</h6>
<blockquote>
<p>关键点数据，通常用于人体姿态估计。</p>
</blockquote>
<h5 id="metrics" tabindex="-1" id="Metrics">Metrics</h5>
<blockquote>
<p>度量存储可用于描述特定序列、捕获或注释的额外元数据。度量记录存储为任意数量（M）的键值对。对于序列度量，capture_id、annotation_id 和 step 应为 null。对于捕获度量，annotation_id 可以为 null。对于注释度量，sequence_id、capture_id、annotation_id 和 step 这四列都不为空。度量文件可以从不同的模拟实例并行生成。</p>
</blockquote>
<h5 id="definitions" tabindex="-1" id="Definitions">Definitions</h5>
<blockquote>
<p>传感器、注释和度量定义表在模拟过程中是静态的。这通常来自模拟的定义，并在模拟过程中生成。</p>
</blockquote>
<h6 id="sensor_definitions.json" tabindex="-1" id="sensor-definitions-json">sensor_definitions.json</h6>
<blockquote>
<p>JSON 文件，包含模拟中存在的所有传感器的集合。每个传感器都被分配了一个唯一的 UUID。每个都与一个自我相关联，并将自我的 UUID 存储为外键。</p>
</blockquote>
<blockquote>
<p>传感器扩展了这个基本传感器类，并且可以在其定义中包含其他字段。</p>
</blockquote>
<h6 id="annotation_definitions.json" tabindex="-1" id="annotation-definitions-json">annotation_definitions.json</h6>
<blockquote>
<p>一个 JSON 文件，包含一组注释规范（annotation_definition）。每个记录描述一种特定类型的注释。</p>
</blockquote>
<h6 id="metric_definitions.json" tabindex="-1" id="metric-definitions-json">metric_definitions.json</h6>
<blockquote>
<p>存储度量规范记录集合（metric_definition）的 JSON 文件。每个规范记录描述存储在 metric 值中的特定度量。</p>
</blockquote>
<h5 id="schema-versioning" tabindex="-1" id="Schema-Versioning">Schema Versioning</h5>
<p>架构版本控制。</p>
<h4 id="2.-perception-endpoint" tabindex="-1" id="2-Perception-Endpoint">2. Perception Endpoint</h4>
<blockquote>
<p>我们的传统 Perception 输出格式，其中信息存储在捕获中，并在模拟结束时写入（或 150 帧块）。尽管该端点仍然支持所有新的 Labeler，如深度和遮挡，但我们强烈建议尝试上面的 SOLO 端点，以获得更轻松的后处理和调试体验。</p>
</blockquote>
<h4 id="3.-no-output-endpoint" tabindex="-1" id="3-No-Output-Endpoint">3. No Output Endpoint</h4>
<blockquote>
<p>选中时，此端点不会将任何信息写入磁盘！这对于防止在编辑器中调试模拟逻辑或使用 Perception Camera 的实时可视化工具进行测试时生成无关数据集非常有用。</p>
</blockquote>
<h3 id="how-to-change-the-active-endpoint" tabindex="-1" id="How-to-Change-the-Active-Endpoint">How to Change the Active Endpoint</h3>
<ol>
<li><code>Project Settings</code> → <code>Perception</code></li>
<li>点击 <code>Change Endpoint Type</code></li>
<li>从下拉列表中选择您的首选端点。</li>
</ol>
<h3 id="creating-your-own-endpoint" tabindex="-1" id="Creating-your-Own-Endpoint">Creating your Own Endpoint</h3>
<blockquote>
<p>使用 Endpoint 系统，为您喜欢的输出格式创建自己的 Endpoint 不仅是可能的，而且很容易访问。我们整理了一个假设自定义 Endpoint 的小示例，向您介绍创建、迭代和使用自己的自定义端点的基本知识。</p>
</blockquote>
<blockquote>
<p>0.11.0-preview.1 版本以后的 Perception 软件包支持自定义端点的概念。以前，Perception 生成的所有数据都是使用我们专有的输出格式自动写入磁盘的。但是，使用自定义 Endpoint，您可以使用我们的中间表示以您选择的输出格式编写所有数据！</p>
</blockquote>
<blockquote>
<p>我们用一个我们称之为“FlatEndpoint”的假设端点来证明这一点，该端点将在每次模拟运行中将所有数据写入一个唯一的文件夹中。为此，我们创建了一个新类并实现了“IConsumerEndpoint”。这允许在 Perception Settings UI 中选择我们的自定义端点，并将其用作模拟的端点。我们进一步实现了“IFileSystemEndpoint”界面，以连接 Perception 如何保存上次创建的数据集所在的位置，并使“显示最新数据集”按钮等功能正常工作。</p>
</blockquote>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br></pre></td><td class="code"><pre><code class="hljs C#"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> System.IO;<br><span class="hljs-keyword">using</span> Newtonsoft.Json.Linq;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.Perception.GroundTruth;<br><span class="hljs-keyword">using</span> UnityEngine.Perception.GroundTruth.Consumers;<br><span class="hljs-keyword">using</span> UnityEngine.Perception.GroundTruth.DataModel;<br><span class="hljs-keyword">using</span> UnityEngine.Perception.Settings;<br><br><span class="hljs-keyword">namespace</span> <span class="hljs-title">MyCustomNamespace</span><br>&#123;<br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> Example endpoint which outputs all information in small files to one single directory.</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> 示例端点，将所有信息输出到一个单独的目录中的小文件中。</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> We demonstrate two methods of serializing data: (1) Custom serialization; (2) IMessageProducers</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> 我们展示了两种序列化数据的方法：（1）自定义序列化；（2）IMessageProducers。</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;remarks&gt;</span>For more complex examples, checkout SoloEndpoint<span class="hljs-doctag">&lt;/remarks&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> 要了解更复杂的示例，请查看 SoloEndpoint。</span><br>    [<span class="hljs-meta">Serializable</span>]<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FlatEndpoint</span> : <span class="hljs-title">IConsumerEndpoint</span>, <span class="hljs-title">IFileSystemEndpoint</span><br>    &#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> prefix = <span class="hljs-string">&quot;FLAT&quot;</span>;<br><br>        DateTimeOffset m_SimulationStartTime;<br><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> Helper function to create a new JsonMessageBuilder</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> 创建新的 JsonMessageBuilder 的辅助函数。</span><br>        <span class="hljs-function">JsonMessageBuilder <span class="hljs-title">GetNewJsonMessageBuilder</span>()</span> =&gt; <span class="hljs-keyword">new</span> JsonMessageBuilder();<br><br>        <span class="hljs-meta">#<span class="hljs-keyword">region</span> IFileSystemEndpoint</span><br><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> Allows the user to set the base path from the Perception Settings UI.</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> 允许用户从 Perception Settings 用户界面设置基本路径。</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> basePath<br>        &#123;<br>            <span class="hljs-keyword">get</span> =&gt; PerceptionSettings.GetOutputBasePath();<br>            <span class="hljs-keyword">set</span> =&gt; PerceptionSettings.SetOutputBasePath(<span class="hljs-keyword">value</span>);<br>        &#125;<br><br>        <span class="hljs-built_in">string</span> m_CachedCurrentPath = <span class="hljs-built_in">string</span>.Empty;<br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> The root directory to use for all files that we output.</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> 我们输出的所有文件使用的根目录。</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> currentPath<br>        &#123;<br>            <span class="hljs-keyword">get</span><br>            &#123;<br>                <span class="hljs-comment">// Check if we already reserved the output path for this simulation run</span><br>                <span class="hljs-comment">// 检查我们是否已为此仿真运行保留了输出路径。</span><br>                <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrWhiteSpace(m_CachedCurrentPath))<br>                    <span class="hljs-keyword">return</span> m_CachedCurrentPath;<br><br>                <span class="hljs-comment">// A small piece of logic to get the next available directory name</span><br>                <span class="hljs-comment">// 获取下一个可用目录名称的小段逻辑。</span><br>                <span class="hljs-comment">//   get: &#123;basePath&#125;/FLAT_0</span><br>                <span class="hljs-comment">//   if above already exists, then get: &#123;basePath&#125;/FLAT_1</span><br>                <span class="hljs-comment">//   ... and so on</span><br><br>                <span class="hljs-keyword">var</span> availableSuffix = <span class="hljs-number">0</span>;<br>                m_CachedCurrentPath = <span class="hljs-built_in">string</span>.Empty;<br>                <span class="hljs-keyword">do</span><br>                &#123;<br>                    m_CachedCurrentPath = Path.Combine(basePath, <span class="hljs-string">$&quot;<span class="hljs-subst">&#123;prefix&#125;</span>_<span class="hljs-subst">&#123;availableSuffix&#125;</span>&quot;</span>);<br>                    availableSuffix++;<br>                &#125;<br>                <span class="hljs-keyword">while</span> (Directory.Exists(m_CachedCurrentPath));<br><br>                <span class="hljs-comment">// actually create the directory we decided upon above</span><br>                <span class="hljs-comment">// 实际创建我们上面决定的目录。</span><br>                Directory.CreateDirectory(m_CachedCurrentPath);<br><br>                <span class="hljs-keyword">return</span> m_CachedCurrentPath;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> The path used when &quot;Reset to Default&quot; is used in the Perception Settings UI.</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> 在 Perception Settings 用户界面上使用“重置为默认值”时使用的路径。</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> defaultPath =&gt; Path.Combine(Application.persistentDataPath);<br>        <span class="hljs-meta">#<span class="hljs-keyword">endregion</span></span><br><br>        <span class="hljs-meta">#<span class="hljs-keyword">region</span> IConsumerEndpoint</span><br><br>        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> description =&gt; <span class="hljs-string">&quot;Example endpoint that puts all the files in one single directory&quot;</span>;<br><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> Validate the configuration of your endpoint before the simulation runs.</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> 在仿真运行之前验证端点的配置。</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">IsValid</span>(<span class="hljs-params"><span class="hljs-keyword">out</span> <span class="hljs-built_in">string</span> errorMessage</span>)</span><br>        &#123;<br>            <span class="hljs-comment">// Check if the prefix supplied by the user is empty or whitespace</span><br>            <span class="hljs-comment">// 检查用户提供的前缀是否为空或空格。</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrWhiteSpace(prefix))<br>            &#123;<br>                errorMessage = <span class="hljs-string">&quot;Prefix must not be empty.&quot;</span>;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br><br>            errorMessage = <span class="hljs-string">$&quot;Directory <span class="hljs-subst">&#123;basePath&#125;</span> does not exist. Please create the directory.&quot;</span>;<br>            <span class="hljs-comment">// To create &#123;basePath&#125;/FLAT_&#123;xyz&#125;, we need to ensure that the &#123;basePath&#125; directory exists.</span><br>            <span class="hljs-comment">// 要创建 &#123;basePath&#125;/FLAT_&#123;xyz&#125;，我们需要确保目录 &#123;basePath&#125; 已经存在。</span><br>            <span class="hljs-comment">// If it doesn&#x27;t, the Perception Settings UI will show the above error message.</span><br>            <span class="hljs-comment">// 如果不存在，则 Perception Settings 用户界面将显示上述错误消息。</span><br>            <span class="hljs-keyword">return</span> Directory.Exists(basePath);<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SimulationStarted</span>(<span class="hljs-params">SimulationMetadata metadata</span>)</span><br>        &#123;<br>            <span class="hljs-comment">// record when the simulation started so we can use this to calculate</span><br>            <span class="hljs-comment">// duration of the simulation on the SimulationEnded function</span><br>            <span class="hljs-comment">// 记录仿真开始时间，以便我们可以在 SimulationEnded 函数中使用它来计算仿真持续时间。</span><br>            m_SimulationStartTime = DateTimeOffset.Now;<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SensorRegistered</span>(<span class="hljs-params">SensorDefinition sensor</span>)</span><br>        &#123;<br>            <span class="hljs-comment"><span class="hljs-doctag">///</span>/ Using Method 1 (Custom Serialization)</span><br>            <span class="hljs-comment"><span class="hljs-doctag">///</span>/ 使用方法 1（自定义序列化）</span><br>            <span class="hljs-comment">// 1. Create a new JsonMessageBuilder class</span><br>            <span class="hljs-comment">// 创建一个新的 JsonMessageBuilder 类</span><br>            <span class="hljs-keyword">var</span> builder = GetNewJsonMessageBuilder();<br><br>            <span class="hljs-comment">// 2. Add all relevant fields to the builder as unique key-value pairs</span><br>            <span class="hljs-comment">// 将所有相关字段作为唯一的键值对添加到构建器中。</span><br>            builder.AddString(<span class="hljs-string">&quot;model_type&quot;</span>, sensor.modelType);<br>            builder.AddString(<span class="hljs-string">&quot;capture_mode&quot;</span>, sensor.captureTriggerMode.ToString());<br>            builder.AddString(<span class="hljs-string">&quot;id&quot;</span>, sensor.id);<br>            builder.AddInt(<span class="hljs-string">&quot;frames_between_captures&quot;</span>, sensor.framesBetweenCaptures);<br>            builder.AddFloat(<span class="hljs-string">&quot;first_capture_frame&quot;</span>, sensor.firstCaptureFrame);<br><br>            <span class="hljs-comment">// Invariant: The builder now contains a representation of the sensor class</span><br>            <span class="hljs-comment">// 不变量：该构建器现在包含传感器类的表示。</span><br>            <span class="hljs-comment">// 3. We can use the ToJson function in the builder to write that representation to JSON</span><br>            <span class="hljs-comment">// 我们可以使用构建器中的 ToJson 函数将该表示写入 JSON。</span><br>            PathUtils.WriteAndReportJsonFile(<br>                Path.Combine(currentPath, <span class="hljs-string">$&quot;sensor-<span class="hljs-subst">&#123;sensor.id&#125;</span>.json&quot;</span>),<br>                builder.ToJson()<br>            );<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AnnotationRegistered</span>(<span class="hljs-params">AnnotationDefinition annotationDefinition</span>)</span><br>        &#123;<br>            <span class="hljs-comment"><span class="hljs-doctag">///</span>/ Using Method 2 (IMessageProducer Serialization)</span><br>            <span class="hljs-comment"><span class="hljs-doctag">///</span>/ 使用方法 2（IMessageProducer 序列化）</span><br><br>            <span class="hljs-comment">// 1. Create a new JsonMessageBuilder class</span><br>            <span class="hljs-comment">// 创建一个新的 JsonMessageBuilder 类</span><br>            <span class="hljs-keyword">var</span> builder = GetNewJsonMessageBuilder();<br><br>            <span class="hljs-comment">// 2. Allow the annotation definition to convert itself to a message and add it to our builder</span><br>            <span class="hljs-comment">// 允许注解定义将自身转换为消息并将其添加到我们的构建器中</span><br>            annotationDefinition.ToMessage(builder);<br><br>            <span class="hljs-comment">// Invariant: The builder now contains a representation of the annotation definition class</span><br>            <span class="hljs-comment">// 不变量：该构建器现在包含注解定义类的表示</span><br>            <span class="hljs-comment">// 3. We can use the ToJson function in the builder to write that representation to JSON</span><br>            <span class="hljs-comment">// 我们可以使用构建器中的 ToJson 函数将该表示写入 JSON</span><br>            PathUtils.WriteAndReportJsonFile(<br>                Path.Combine(currentPath, <span class="hljs-string">$&quot;annotation-definition-<span class="hljs-subst">&#123;annotationDefinition.id&#125;</span>.json&quot;</span>),<br>                builder.ToJson()<br>            );<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">MetricRegistered</span>(<span class="hljs-params">MetricDefinition metricDefinition</span>)</span><br>        &#123;<br>            <span class="hljs-comment">// Using Method 2 (IMessageProducer Serialization)</span><br>            <span class="hljs-comment">// 使用方法 2（IMessageProducer 序列化）</span><br><br>            <span class="hljs-comment">// Similar to SensorDefinition, MetricDefinition also inherits from IMessageProducer so it can tell the builder how it should be serialized.</span><br>            <span class="hljs-comment">// 类似于 SensorDefinition，MetricDefinition 也继承自 IMessageProducer，因此它可以告诉构建器它应该如何序列化。</span><br>            <span class="hljs-keyword">var</span> builder = GetNewJsonMessageBuilder();<br>            metricDefinition.ToMessage(builder);<br>            PathUtils.WriteAndReportJsonFile(<br>                Path.Combine(currentPath, <span class="hljs-string">$&quot;annotation-definition-<span class="hljs-subst">&#123;metricDefinition.id&#125;</span>.json&quot;</span>),<br>                builder.ToJson()<br>            );<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">FrameGenerated</span>(<span class="hljs-params">Frame frame</span>)</span><br>        &#123;<br>            <span class="hljs-comment">// Using Method 2 (IMessageProducer Serialization)</span><br><br>            <span class="hljs-comment">// By default, the JsonMessageBuilder class does not know how to process image files referenced in the</span><br>            <span class="hljs-comment">// Frame class. So we need to make a new FlatFrameMessageBuilder that inherits from JsonMessageBuilder</span><br>            <span class="hljs-comment">// and specify how to handle image files. We can conveniently use the ToMessage function of the Frame</span><br>            <span class="hljs-comment">// class and pass in our new FlatFrameMessageBuilder class.</span><br>            <span class="hljs-comment">// 默认情况下，JsonMessageBuilder 类不知道如何处理 Frame 类中引用的图像文件。</span><br>            <span class="hljs-comment">// 因此，我们需要创建一个新的 FlatFrameMessageBuilder 类，它继承自 JsonMessageBuilder 并指定如何处理图像文件。</span><br>            <span class="hljs-comment">// 我们可以方便地使用 Frame 类的 ToMessage 函数并传入我们的新的 FlatFrameMessageBuilder 类。</span><br>            <span class="hljs-keyword">var</span> builder = <span class="hljs-keyword">new</span> FlatFrameMessageBuilder(<span class="hljs-keyword">this</span>, frame);<br>            frame.ToMessage(builder);<br><br>            PathUtils.WriteAndReportJsonFile(<br>                Path.Combine(currentPath, <span class="hljs-string">$&quot;frame-<span class="hljs-subst">&#123;frame.id&#125;</span>.json&quot;</span>),<br>                builder.ToJson()<br>            );<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SimulationCompleted</span>(<span class="hljs-params">SimulationMetadata metadata</span>)</span><br>        &#123;<br>            <span class="hljs-comment">// Using Method 2 (IMessageProducer Serialization)</span><br>            <span class="hljs-comment">// 使用方法 2（IMessageProducer 序列化）</span><br><br>            <span class="hljs-comment">// 1. Create a new JsonMessageBuilder class</span><br>            <span class="hljs-comment">// 创建一个新的 JsonMessageBuilder 类</span><br>            <span class="hljs-keyword">var</span> metadataBuilder = GetNewJsonMessageBuilder();<br><br>            <span class="hljs-comment">// 2. Add metadata as a message into the metadataBuilder</span><br>            <span class="hljs-comment">// 将元数据作为消息添加到 metadataBuilder 中</span><br>            metadata.ToMessage(metadataBuilder);<br><br>            <span class="hljs-comment">// 3. Write the metadata parameter to &#123;currentPath&#125;/metadata.json</span><br>            <span class="hljs-comment">// 将元数据参数写入 &#123;currentPath&#125;/metadata.json</span><br>            PathUtils.WriteAndReportJsonFile(<br>                Path.Combine(currentPath, <span class="hljs-string">&quot;metadata.json&quot;</span>),<br>                metadataBuilder.ToJson()<br>            );<br><br>            <span class="hljs-comment"><span class="hljs-doctag">///</span>/ Using Method 1 (Custom Serialization)</span><br><br>            <span class="hljs-comment">// 1. Create a new JsonMessageBuilder class</span><br>            <span class="hljs-keyword">var</span> completeBuilder = GetNewJsonMessageBuilder();<br>            <span class="hljs-keyword">var</span> simulationEndTime = DateTimeOffset.Now;<br>            <span class="hljs-keyword">var</span> simulationDuration = simulationEndTime - m_SimulationStartTime;<br><br>            <span class="hljs-comment">// 2. Add all relevant key-value pairs</span><br>            completeBuilder.AddLong(<span class="hljs-string">&quot;start_timestamp&quot;</span>, m_SimulationStartTime.ToUnixTimeMilliseconds());<br>            completeBuilder.AddLong(<span class="hljs-string">&quot;end_timestamp&quot;</span>, m_SimulationStartTime.ToUnixTimeMilliseconds());<br>            completeBuilder.AddDouble(<span class="hljs-string">&quot;duration_seconds&quot;</span>, simulationDuration.TotalSeconds);<br><br>            <span class="hljs-comment">// 3. Convert data to json and write to file</span><br>            PathUtils.WriteAndReportJsonFile(<br>                Path.Combine(currentPath, <span class="hljs-string">&quot;simulation-complete.json&quot;</span>),<br>                completeBuilder.ToJson()<br>            );<br>        &#125;<br><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> Placeholder for crash resumption logic.</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> 崩溃续传逻辑占位符</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;remarks&gt;</span>Unsupported for FlatEndpoint<span class="hljs-doctag">&lt;/remarks&gt;</span></span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> FlatEndpoint 不支持该操作。</span><br>        <span class="hljs-keyword">public</span> (<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>) ResumeSimulationFromCrash(<span class="hljs-built_in">int</span> maxFrameCount)<br>        &#123;<br>            Debug.LogError(<span class="hljs-string">&quot;Crash resumption not supported for FlatEndpoint output.&quot;</span>);<br>            <span class="hljs-keyword">return</span> (<span class="hljs-built_in">string</span>.Empty, <span class="hljs-number">0</span>);<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">object</span> <span class="hljs-title">Clone</span>()</span><br>        &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FlatEndpoint();<br>        &#125;<br><br>        <span class="hljs-meta">#<span class="hljs-keyword">endregion</span></span><br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> A MessageBuilder that extends JsonMessageBuilder to add support for serializing images and tensors.</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> 创建一个新的 MessageBuilder 类，它继承自 JsonMessageBuilder 并添加支持序列化图像和张量的功能。</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-keyword">class</span> <span class="hljs-title">FlatFrameMessageBuilder</span> : <span class="hljs-title">JsonMessageBuilder</span><br>    &#123;<br>        Frame m_Frame;<br>        FlatEndpoint m_Endpoint;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FlatFrameMessageBuilder</span>(<span class="hljs-params">FlatEndpoint endpoint, Frame frame</span>)</span><br>        &#123;<br>            m_Endpoint = endpoint;<br>            m_Frame = frame;<br>        &#125;<br><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> Write out the byte array as an image and append sequence and step number to the key to construct the final file-name.</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> 将字节数组写出为图像，并将序列号和步骤号附加到键上构造最终的文件名。</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddEncodedImage</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> key, <span class="hljs-built_in">string</span> extension, <span class="hljs-built_in">byte</span>[] <span class="hljs-keyword">value</span></span>)</span><br>        &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">value</span>.Length &gt; <span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">var</span> filename = <span class="hljs-string">$&quot;<span class="hljs-subst">&#123;key&#125;</span>_<span class="hljs-subst">&#123;m_Frame.sequence&#125;</span>-<span class="hljs-subst">&#123;m_Frame.step&#125;</span>.<span class="hljs-subst">&#123;extension.ToLower()&#125;</span>&quot;</span>;<br>                <span class="hljs-comment">// write out the file</span><br>                PathUtils.WriteAndReportImageFile(<br>                    Path.Combine(m_Endpoint.currentPath, filename),<br>                    <span class="hljs-keyword">value</span><br>                );<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> A nested message adds the output of an IMessageBuilder to a specific key.</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> 嵌套消息将 IMessageBuilder 的输出添加到特定的键中。</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> IMessageBuilder <span class="hljs-title">AddNestedMessage</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> key</span>)</span><br>        &#123;<br>            <span class="hljs-keyword">var</span> nested = <span class="hljs-keyword">new</span> FlatFrameMessageBuilder(m_Endpoint, m_Frame);<br>            <span class="hljs-keyword">if</span> (nestedValue.ContainsKey(key))<br>            &#123;<br>                Debug.LogWarning(<span class="hljs-string">$&quot;Report data with key [<span class="hljs-subst">&#123;key&#125;</span>] will be overridden by new values&quot;</span>);<br>            &#125;<br><br>            nestedValue[key] = nested;<br>            <span class="hljs-keyword">return</span> nested;<br>        &#125;<br><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> 将 IMessageBuilder 的输出作为键为 <span class="hljs-doctag">&lt;see cref=&quot;arraykey&quot;/&gt;</span> 的数组元素添加。</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> Adds the output of an IMessageBuilder as an element of an array identified by the key <span class="hljs-doctag">&lt;see cref=&quot;arraykey&quot;/&gt;</span>.</span><br>        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> IMessageBuilder <span class="hljs-title">AddNestedMessageToVector</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> arraykey</span>)</span><br>        &#123;<br>            <span class="hljs-keyword">if</span> (!nestedArrays.TryGetValue(arraykey, <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> nestedList))<br>            &#123;<br>                nestedList = <span class="hljs-keyword">new</span> List&lt;JsonMessageBuilder&gt;();<br>                nestedArrays[arraykey] = nestedList;<br>            &#125;<br>            <span class="hljs-keyword">var</span> nested = <span class="hljs-keyword">new</span> FlatFrameMessageBuilder(m_Endpoint, m_Frame);<br>            nestedList.Add(nested);<br>            <span class="hljs-keyword">return</span> nested;<br>        &#125;<br><br>        <span class="hljs-comment">// A tensor is a multi-dimensional array</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddTensor</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> key, Tensor tensor</span>)</span><br>        &#123;<br>            <span class="hljs-comment">// By default, write the tensor as a flattened array</span><br>            <span class="hljs-comment">// 默认情况下，将张量写为一个扁平化的数组。</span><br>            currentJToken[key] = <span class="hljs-keyword">new</span> JArray(tensor.buffer);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="metadata-labeler-2" tabindex="-1" id="a-name-Metadata-Labeler-Metadata-Labeler-a-2"><a name="Metadata Labeler">Metadata Labeler</a></h2>

            </article>
            
	<div class="rightside">
	
		<div class="rightside-button" id="js-aside">
			<span>
				<img no-lazy src="/images/icon/aside.png" class="rightside-button-icon" alt="Icon">
			</span>
		</div>
		<script>
			$("#js-aside").click(function () {
				onShowAsideButton();
			});
		</script>
	
	<div class="rightside-button" id="js-toggle_theme">
		<span>
			<img no-lazy src="/images/icon/toggle_theme.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	
<script src="/js/plugins/goto_position.js"></script>

	
	<div class="rightside-button" id="js-go_top">
		<span>
			<img no-lazy src="/images/icon/go_top.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>
	<div class="rightside-button" id="js-go_bottom">
		<span>
			<img no-lazy src="/images/icon/go_bottom.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	<script>
		setToggleThemeButtonListener();
	</script>
	<script>
		$('#js-go_top')
		.gotoPosition( {
			speed: 300,
			target: 'top',
		} );
		$('#js-go_bottom')
		.gotoPosition( {
			speed: 300,
			target: 'bottom',
		} );
	</script>
</div>


<div class="post-bottom">
    
        <div class="post-paging">     
            <div class="post-paging-last">
                
                    <a href="/posts/Diary-%E4%BC%BC%E4%B9%8E%E5%BE%88%E5%B9%B3%E6%B7%A1%E7%9A%84%E7%AC%AC%2013%20%E5%91%A8%E5%92%8C%E7%AC%AC%2014%20%E5%91%A8/">
                        上一篇：Diary-似乎很平淡的第 13 周和第 14 周
                    </a>
                
            </div>
            <div class="post-paging-next">
                
                    <a href="/posts/Python-%E5%A4%84%E7%90%86%20SOLO%20%E6%95%B0%E6%8D%AE%E9%9B%86/">
                        下一篇：Python-处理 SOLO 数据集
                    </a>
                
            </div>
        </div>
    
    
    
        
            <div class="giscus comments"></div>
            <script>
                var scriptElement = document.createElement('script');
                scriptElement.src = 'https://giscus.app/client.js';
                scriptElement.setAttribute('data-repo', 'GZ-Metal-Cell/GZ-Metal-Cell.github.io');
                scriptElement.setAttribute('data-repo-id', 'R_kgDOIHLEOQ');
                scriptElement.setAttribute('data-category', 'Announcements');
                scriptElement.setAttribute('data-category-id', 'DIC_kwDOIHLEOc4CcVwP');
                scriptElement.setAttribute('data-mapping', 'title');
                scriptElement.setAttribute('data-strict', '1');
                scriptElement.setAttribute('data-reactions-enabled', '');
                scriptElement.setAttribute('data-emit-metadata', '0');
                scriptElement.setAttribute('data-input-position', 'bottom');
                scriptElement.setAttribute('data-theme', localStorage.getItem('theme') === 'light' ? 'light' : 'dark_high_contrast');
                scriptElement.setAttribute('data-lang', 'zh-CN');
                
                scriptElement.setAttribute('crossorigin', 'anonymous');
                scriptElement.async = true;
                document.head.appendChild(scriptElement);
            </script>
        
    
</div>
        </div>
    </main>
    
        <aside class="main-aside">
    
<script src="/js/widgets/aside.js"></script>

    <script>
        showAside();
    </script>

    <div class="aside-top">
        <div class="aside-top-about aside-card">
            <a href="/about" class="aside-top-about-portrait">
                <img no-lazy src="/about/portrait.png" alt="Q">
            </a>
            <div class="aside-top-about-info">
                <span class="author"> Zi-Zi</span>
                <span class="description">不以物喜，不以己悲。</span>
            </div>              
            <div class="aside-top-about-site">
                <a href="/categories" class="aside-top-about-site-item">
                    <span class="title">类别</span>
                    <span class="count">5</span>
                </a>
                <a href="/tags" class="aside-top-about-site-item">
                    <span class="title">标签</span>
                    <span class="count">121</span>
                </a>
                <a href="/archives" class="aside-top-about-site-item">
                    <span class="title">归档</span>
                    <span class="count">436</span>
                </a>
            </div>
            <div class="aside-top-about-contact">
                
                    
                        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
                            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
                            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
                            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
                            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
                        </a>
                    
                
            </div>
        </div> 

        
            <div class="aside-top-series aside-card">
                <ol class="aside-top-series-content">
                    
                    
                    
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/Unity-Perception Synthetic Data-1/">
                                                <span class="text">Unity-Perception Synthetic Data-1</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/Unity-Perception Synthetic Data-2/">
                                                <span class="text">Unity-Perception Synthetic Data-2</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                                    
                                    
                                    
                                        
                                        <li class="series-item active">
                                            <a class="series-link active" href="/posts/Unity-Perception Synthetic Data-Features Overview/">
                                                <span class="text">Unity-Perception Synthetic Data-Features Overview</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/Paper-PEOPLESANSPEOPLE-A Synthetic Data Generator for Human-Centric Computer Vision/">
                                                <span class="text">Paper-PEOPLESANSPEOPLE-A Synthetic Data Generator for Human-Centric Computer Vision</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                </ol>
                <div class="aside-top-series-title">
                    <h1>
                        <a href="/tags/Perception">标签：Perception</a>
                    </h1>
                    <span id="serial-number">3/4</span>
                </div>
            </div>
            <script>
                activeSeriesItem();
            </script> 
        
    </div>

    <div class="aside-bottom">
        
            <script>
                
                    const tocCollapsed = true;
                
                
                    const tocDepth = 6;
                
                var headerString = '';
                for (let i = 1; i <= tocDepth; i++) {
                    if (i === 1) {
                        headerString += 'h1';
                    } else {
                        headerString += ', h' + i;
                    }
                }
                hbeToc();
            </script>
            <div class="aside-bottom-toc aside-card">
                <div class="aside-bottom-toc-title">
                    <h1>目录</h1>
                    <span class="toc-percentage"></span>
                </div>
                <ol class="aside-bottom-toc-content"></ol>
            </div>
        
    </div>
</aside>
    
</div>
		<footer>
	<div class="content">
		
			<span>©2022-2025&nbsp;By&nbsp;<a href="/about">Zi-Zi</a>.</span>
		
		<span><a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> theme by <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell/hexo-theme-quieter">Quieter</a>.</span>
		
			<span style="display: flex;">
				<img no-lazy alt="icp" src="/images/icp_icon.png" style="width: 16px; height: 16px;">
				<a href="https://icp.gov.moe/?keyword=20241647" target="_blank">萌 ICP 备 20241647 号</a>
			</span>
		
	</div>

	
<script src="/js/plugins/ref.js"></script>

	
<script src="/js/plugins/highlight_tools.js"></script>

	<script>
		const  COPY_ICON = "/images/icon/copy.png";
		const CLOSE_CODE_BLOCK_ICON = "/images/icon/close_code_block.png";
		const HIGHLIGHT_SHRINK = "";
		const HIGHLIGHT_HEIGHT_LIMIT = "";
	</script>

	
	
	<!-- Analytics -->

    
        <!-- Busuanzi Analytics -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
        <!-- Baidu Analytics -->
        <script defer>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?e57cf62289f84322ebff116e8b3d343e";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
    


	

	
		
			
				<link rel="stylesheet" href="/css/plugins/katex/katex.min.css">
				<script src="/js/plugins/copy-tex.js"></script>
			
		
	

    
		
<link rel="stylesheet" href="/css/plugins/textIndent.css">

		
<script src="/js/plugins/textIndent.js"></script>

	

	
	
	
		<script>
			if (typeof init === 'function') {
				init();
			}
		</script>
	

	
		
	

	

	<!--
		
<script src="/js/plugins/jquery.pjax.min.js"></script>

		<script>
			$(document).pjax('a[target!=_blank]', 'main', {
				fragment: 'main',
				timeout: 8000
			});

			$(document).on('pjax:complete', function() {
			});
		</script> 
	-->
	<script>
		console.log('\n %c Hexo-Quieter 主题 %c https://github.com/GZ-Metal-Cell/hexo-theme-quieter \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
	</script>
</footer>
	</body>

	<!-- Hexo-Quieter 主题  https://github.com/GZ-Metal-Cell/hexo-theme-quieter -->
</html>

