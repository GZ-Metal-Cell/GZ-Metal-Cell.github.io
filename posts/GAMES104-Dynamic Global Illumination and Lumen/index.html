<!DOCTYPE html>
<html lang=zh-CN data-theme="light">
	
<script src="/js/plugins/toggleTheme.js"></script>

	<script>
		setTheme();
	</script>
	<head>
		
<title>GAMES104-Dynamic Global Illumination and Lumen | Zi-Zi's Journey</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/images/icon/favicon.ico">
<link href="/css/plugins/print.css" media="print" rel="stylesheet" />

<link rel="stylesheet" href="/css/index.css">



<meta name="keywords" content="游戏引擎架构,GAMES104,">
<meta name="description" content="王希-GAMES104-现代游戏引擎：从入门到实践。">



<script src="/js/plugins/jquery.min.js"></script>


<script src="/js/plugins/hljs.min.js"></script>


<script src="/js/plugins/init.js"></script>


<script src="/js/plugins/hide.js"></script>


<script src="/js/plugins/tabs.js"></script>



    



    
<script src="/js/plugins/alert-title.js"></script>

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-base.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-dark-class.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-light.css">




    
        
            <link rel="stylesheet" type="text/css" href="/css/subfields.css">
        
    



    

	<meta name="generator" content="Hexo 6.1.0"></head>

	<body>
		<header class="sticky-header">
	<nav>
		<div class="nav-left">
			<a href="/" class="logo">
				<img no-lazy src="/images/headers_icon/logo.webp" alt="Quieter">
			</a>
			<ul class="breadcrumb" id="breadcrumb"></ul>
		</div>
		<div class="nav-right">
			<ul>
				
					<li>
						<a href="/">
						  主页
						</a>
					</li>
				
					<li>
						<a href="/categories">
						  类别
						</a>
					</li>
				
					<li>
						<a href="/tags">
						  标签
						</a>
					</li>
				
					<li>
						<a href="/archives">
						  归档
						</a>
					</li>
				
					<li>
						<a href="/galleries">
						  相册
						</a>
					</li>
				
					<li>
						<a href="/links">
						  链接
						</a>
					</li>
				
					<li>
						<a href="/about">
						  关于
						</a>
					</li>
								  
			</ul>
		</div>
		<div class="nav-right-close">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
				<path fill="none" d="M0 0h24v24H0z" />
				<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
			</svg>
		</div>

		<div class="sidebar">
    <div class="topo">
        <p>Zi-Zi's Journey</p>
    </div>
    <ul>
        
        <li>
            <a href="/">
                主页
            </a>
        </li>
        
        <li>
            <a href="/categories">
                类别
            </a>
        </li>
        
        <li>
            <a href="/tags">
                标签
            </a>
        </li>
        
        <li>
            <a href="/archives">
                归档
            </a>
        </li>
        
        <li>
            <a href="/galleries">
                相册
            </a>
        </li>
        
        <li>
            <a href="/links">
                链接
            </a>
        </li>
        
        <li>
            <a href="/about">
                关于
            </a>
        </li>
        
    </ul>
    <div class="sidebar-footer">
        
        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
        </a>
        
    </div>
</div>
<div class='shelter'>
    <script>
        $(function() {
            $('.nav-right-close > svg').click(function() {
                $('.sidebar').animate({
                    right: "0"
                }, 500);
                $('.shelter').fadeIn("slow");
            
                var element = $('.topo');
                element.addClass('custom-style');
            
                var links = null;
                if ("") {
                    links = "".split(',');
                } else {
                    links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
                }
            
                var randomLink = links[Math.floor(Math.random() * links.length)];
                element.css('background-image', "url('" + randomLink + "')");
            });
          
            $('.shelter').click(function(e) {
                $('.sidebar').animate({
                    right: "-100%"
                }, 500);
                $('.shelter').fadeOut("slow");
            });
        });      
    </script>
</div>
	</nav>

	
		<div class="header-background"></div>
	

	<script>
		const name = 'post';
		const ul = document.querySelectorAll('.nav-right ul')[0];
		const lis = ul.querySelectorAll('li');

		if (name == 'home') {
			lis[0].classList.add('select');
		} else {
			for (let i = 0; i < lis.length; i++) {
				const li = lis[i];
				const a = li.querySelector('a');
				if (name === a.href.split('/')[3]) {
					li.classList.add('select');
				}
			}
		}
	</script>
	
	<script>
		var element = document.querySelector('.header-background');
		if(element) {
			element.classList.add('custom-style');
			var links = null;
			if("")
			{
				links = "".split(',');
			} else
			{
				links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
			}
			var randomLink = links[Math.floor(Math.random() * links.length)];
			element.style.backgroundImage = "url('" + randomLink + "')";
		}
	</script>

	
<script src="/js/plugins/breadcrumb.js"></script>

	<script>
		var menus_title = [];
		
			menus_title.push({home: '主页'});
		
			menus_title.push({categories: '类别'});
		
			menus_title.push({tags: '标签'});
		
			menus_title.push({archives: '归档'});
		
			menus_title.push({galleries: '相册'});
		
			menus_title.push({links: '链接'});
		
			menus_title.push({about: '关于'});
		
		
			
				postsBreadcrumb(
					document.getElementById('breadcrumb'),
					"类别",
					"/categories",
					"学习",
					"/categories/学习",
					1
				);
			
		
	</script>
</header>

<div class="main-wrapper">
    <main class="post">
        <header class="main-header">
	
		
			
				
<link rel="stylesheet" href="/css/plugins/fancybox.css">

				
<script src="/js/plugins/fancybox.umd.js"></script>

				
<script src="/js/plugins/fancybox.js"></script>

			
			<div class="post-header-background-content">
				<ul class="post-header-tag">
					
						
							<li><a href="/tags/游戏引擎架构"><span>游戏引擎架构</span></a></li>
						
							<li><a href="/tags/GAMES104"><span>GAMES104</span></a></li>
						
					
				</ul>
				
				<h1>GAMES<b><font color="#0FF">104</font></b>-Dynamic Global Illumination and Lumen</h1>
		
				
					<div class="post-header-desc">
						<svg t="1714702231661" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="1154" xmlns:xlink="http://www.w3.org/1999/xlink"
						width="20" height="20">
						<path
							d="M778.24 117.76A46.08 46.08 0 0 1 824.32 163.84v430.08c0 8.4992-4.13696 16.01536-10.50624 20.6848l-0.24576 0.2048L587.5712 846.09024a35.84 35.84 0 0 1-61.48096-25.06752v-220.9792a46.08 46.08 0 0 1 46.08-46.08l200.94976-0.02048V168.96h-522.24v686.08H389.12c13.25056 0 24.1664 10.07616 25.47712 22.97856l0.12288 2.62144c0 14.1312-11.4688 25.6-25.6 25.6h-143.36A46.08 46.08 0 0 1 199.68 860.16V163.84A46.08 46.08 0 0 1 245.76 117.76h532.48z m-26.78784 487.38304h-174.16192v178.176l174.16192-178.176z m-45.19936-169.94304a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z m0-122.88a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z"
							fill="#ffffff" p-id="1155"></path>
						</svg>
						<p>王希-GAMES104-现代游戏引擎：从入门到实践。</p>
					</div>
				
		
				<div class="post-header-info">
					<svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
					xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
						<path
							d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
							p-id="2902" fill="#ffffff"></path>
					</svg>
					<div class="post-header-info-author">
						<a href="/about">Zi-Zi</a>
					</div>
					
						<div class="post-header-info-categories">
							
								<a href="/categories/学习">学习</a>
							
						</div>
					
					<time>2024/08/21 09:10:00</time>
				</div>
		
				
					<div class="post-header-stat">
						<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
						viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve" width="20" height="20">
							<path fill="#FFFFFF" d="M187.2,165.6c0,2.6-2.1,4.7-4.7,4.7H17.5c-2.6,0-4.7-2.1-4.7-4.7s2.1-4.7,4.7-4.7h165.1
								C185.2,160.9,187.2,163,187.2,165.6z"/>
							<path fill="#FFFFFF" d="M17.5,29.7c2.6,0,4.7,2.1,4.7,4.7v131.2c0,2.6-2.1,4.7-4.7,4.7s-4.7-2.1-4.7-4.7V34.4
								C12.8,31.8,14.9,29.7,17.5,29.7z M77.9,91.5c1.8,1.8,1.8,4.8,0,6.6l-39.8,39.8c-1.9,1.8-4.9,1.7-6.6-0.2c-1.7-1.8-1.7-4.6,0-6.4
								l39.8-39.8C73.1,89.6,76,89.6,77.9,91.5z M169.9,70.2c1.6,2.1,1.1,5-0.9,6.5c0,0,0,0,0,0l-64.2,48.2c-2.1,1.5-5,1.1-6.6-0.9
								c-1.6-2.1-1.1-5,0.9-6.5c0,0,0,0,0,0l64.2-48.2C165.4,67.7,168.3,68.1,169.9,70.2L169.9,70.2z"/>
							<path fill="#FFFFFF" d="M104.6,124.5c-1.8,1.8-4.8,1.8-6.6,0L71.6,98.1c-1.8-1.8-1.8-4.8,0-6.6c1.8-1.8,4.8-1.8,6.6,0l26.3,26.3
								C106.4,119.6,106.4,122.6,104.6,124.5C104.6,124.4,104.6,124.4,104.6,124.5z"/>
						</svg>
		
						
							
<script src="/js/plugins/wordCount.js"></script>

							<p class="post-count">文字数：---</p>
						
		
						
							<p id="busuanzi_container_page_pv" style='display:none;'>阅读数：<span id="busuanzi_value_page_pv"></span></p>
						
					</div>
				
			</div>
		
	
</header>
        <div class="post-content article-container">
            <article class="post-content-info">
                <h1 id="%E8%B5%84%E6%BA%90" tabindex="-1">资源</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1oU4y1R7Km/">GAMES104-现代游戏引擎：从入门到实践_哔哩哔哩_bilibili</a></li>
<li><a target="_blank" rel="noopener" href="https://games104.boomingtech.com/sc/">GAMES104 - 现代游戏引擎入门必修课 (boomingtech.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://www.piccoloengine.com/topics/node/feed/all">Piccolo 社区 - 游戏引擎爱好者的新家园 (piccoloengine.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/BoomingTech/Piccolo">BoomingTech/Piccolo: Piccolo (formerly Pilot) – mini game engine for games104 (github.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/597024196">GAMES104：现代游戏引擎，从理论到实践 - 知乎 (zhihu.com)</a></li>
</ul>
<h1 id="%E8%AF%BE%E7%A8%8B" tabindex="-1">课程</h1>
<h2 id="%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%80%E8%8A%82%EF%BC%9A%E5%8A%A8%E6%80%81%E5%85%A8%E5%B1%80%E5%85%89%E7%85%A7%E5%92%8C-lumen" tabindex="-1" id="第二十一节：动态全局光照和-Lumen">第二十一节：动态全局光照和 Lumen</h2>
<h3 id="global-illumination-(gi)" tabindex="-1" id="Global-Illumination-GI">Global Illumination (GI)</h3>
<p>全局光照</p>
<h4 id="the-rendering-equation" tabindex="-1" id="The-Rendering-Equation">The Rendering Equation</h4>
<p>渲染方程</p>
<p>James Kajiya,”The Rendering Equation.”<br>
SIGGRAPH 1986.<br>
Energy equilibrium:</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mi>o</mi></msub><mo>(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>o</mi></msub><mo>)</mo><mo>=</mo><msub><mi>L</mi><mi>e</mi></msub><mo>(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>o</mi></msub><mo>)</mo><mo>+</mo><msub><mo>∫</mo><mrow><msup><mi>H</mi><mn>2</mn></msup></mrow></msub><msub><mi>f</mi><mi>r</mi></msub><mo>(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>o</mi></msub><mo separator="true">,</mo><msub><mi>ω</mi><mi>i</mi></msub><mo>)</mo><msub><mi>L</mi><mi>i</mi></msub><mo>(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>i</mi></msub><mo>)</mo><mi>cos</mi><msub><mi>θ</mi><mi>i</mi></msub><mi>d</mi><msub><mi>ω</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">L_o(x,\omega_o)=L_e(x,\omega_o)+\int_{H^2}f_r(x,\omega_o,\omega_i)L_i(x,\omega_i)\cos\theta_id\omega_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.805em;"></span><span class="strut bottom" style="height:1.16112em;vertical-align:-0.35612em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">e</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mop"><span class="op-symbol small-op mop" style="margin-right:0.19445em;top:-0.0005599999999999772em;">∫</span><span class="vlist"><span style="top:0.35612em;margin-right:0.05em;margin-left:-0.19445em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mop">cos</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">θ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">d</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span></p>
<p>outgoing = emitted + reflected</p>
<p>Radiance and Irradiance 辐射和辐照度</p>
<p><img src="21.1.webp" alt="webp"></p>
<p>​	这个方程揭示了渲染的规律。</p>
<h4 id="global-illumination%3A-billions-of-light-source" tabindex="-1" id="Global-Illumination-Billions-of-Light-Source">Global Illumination: Billions of Light Source</h4>
<p>全球照明：数十亿光源</p>
<p><img src="21.2.webp" alt="webp"></p>
<p>​	然而，要计算渲染方程的积分可不容易，现实生活中的反射有无数次。</p>
<h4 id="global-illumination-is-matter-for-gaming" tabindex="-1" id="Global-Illumination-is-Matter-for-Gaming">Global Illumination is Matter for Gaming</h4>
<p>全局照明对游戏很重要</p>
<p><img src="21.3.webp" alt="webp"></p>
<p>​	游戏中要加上一个全局照明以近似周围环境反射而来的光照效果。</p>
<h4 id="monte-carlointegration" tabindex="-1" id="Monte-CarloIntegration">Monte CarloIntegration</h4>
<p>蒙特卡洛一体化</p>
<p><img src="21.4.webp" alt="webp"></p>
<ul>
<li>
<p>How to solve an integral, when it’s too hard to solve it analytically?</p>
<p>当一个积分很难解析求解时，如何求解它？</p>
</li>
</ul>
<p><img src="21.5.webp" alt="webp"></p>
<ul>
<li>
<p>Approximate integral with the average of randomly sample values</p>
<p>随机样本值平均值的近似积分</p>
</li>
</ul>
<h4 id="monte-carlo-ray-tracing-(offline)" tabindex="-1" id="Monte-Carlo-Ray-Tracing-Offline">Monte Carlo Ray Tracing (Offline)</h4>
<p>蒙特卡罗射线追踪（离线）</p>
<p><img src="21.6.webp" alt="webp"></p>
<p>​	使用蒙特卡洛算法求解渲染方程中的积分。</p>
<h4 id="sampling-is-the-key" tabindex="-1" id="Sampling-is-the-Key">Sampling is the Key</h4>
<p>采样是关键</p>
<ul>
<li>
<p>Noise decreases as the number of samples per pixel increases. The top left shows 1sample per pixel, and doubles from left to right each square.</p>
<p>噪声随着每像素采样数的增加而降低。左上角显示每个像素 1 个样本，每个方格从左到右加倍。</p>
</li>
</ul>
<p><img src="21.7.webp" alt="webp"></p>
<h4 id="sampling-%3A-uniform-sampling" tabindex="-1" id="Sampling-Uniform-Sampling">Sampling : Uniform Sampling</h4>
<p>取样：均匀取样</p>
<p><img src="21.8.webp" alt="webp"></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><msubsup><mo>∫</mo><mi>a</mi><mi>b</mi></msubsup><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mrow><mtext> </mtext><mi mathvariant="normal">d</mi></mrow><mi>x</mi></mrow></mtd><mtd><mrow><mrow></mrow><mtable><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><msub><mi>lim</mi><mrow><mi>n</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow></msub><mfrac><mrow><mn>1</mn></mrow><mrow><mi>n</mi></mrow></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>n</mi></mrow></msubsup><mi>f</mi><mo>(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>)</mo><mo>(</mo><mi>b</mi><mo>−</mo><mi>a</mi><mo>)</mo></mrow></mtd></mtr></mtable></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><msub><mi>lim</mi><mrow><mi>n</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow></msub><mfrac><mn>1</mn><mi>n</mi></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mfrac><mrow><mi>f</mi><mo>(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>)</mo></mrow><mrow><mfrac><mn>1</mn><mrow><mi>b</mi><mo>−</mo><mi>a</mi></mrow></mfrac></mrow></mfrac></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned}
\int_a^bf(x)\mathrm{~d}x&amp; \begin{aligned}&amp;=\lim_{n\to\infty}\frac{1}{n}\sum_{i=1}^{n}f(x_i)(b-a)\end{aligned} \\
&amp;=\lim_{n\to\infty}\frac1n\sum_{i=1}^n\frac{f(x_i)}{\frac1{b-a}}
\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.7331465000000001em;"></span><span class="strut bottom" style="height:2.9662930000000003em;vertical-align:-1.2331465000000001em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-0.8280385000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord textstyle uncramped"><span class="mop"><span class="op-symbol small-op mop" style="margin-right:0.19445em;top:-0.0005599999999999772em;">∫</span><span class="vlist"><span style="top:0.35612em;margin-left:-0.19445em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">a</span></span></span><span style="top:-0.41900000000000004em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">b</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mord textstyle uncramped"><span class="mord mspace"> </span><span class="mord mathrm">d</span></span><span class="mord mathit">x</span></span></span><span style="top:0.5419615000000002em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord textstyle uncramped"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-0.8280385000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord textstyle uncramped"><span class="mord textstyle uncramped"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-0.007446000000000064em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord textstyle uncramped"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-0.007446000000000064em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord textstyle uncramped"><span class="mord textstyle uncramped"></span><span class="mrel">=</span><span class="mop"><span class="mop">lim</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span><span class="mrel">→</span><span class="mord mathrm">∞</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">∑</span><span class="vlist"><span style="top:0.30001em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.364em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathit">b</span><span class="mbin">−</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span></span><span style="top:0.5419615000000002em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord textstyle uncramped"><span class="mord textstyle uncramped"></span><span class="mrel">=</span><span class="mop"><span class="mop">lim</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span><span class="mrel">→</span><span class="mord mathrm">∞</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">∑</span><span class="vlist"><span style="top:0.30001em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.364em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.40802em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord reset-scriptstyle scriptstyle cramped"><span class="sizing reset-size5 size5 reset-scriptstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathit">b</span><span class="mbin">−</span><span class="mord mathit">a</span></span></span></span><span style="top:-0.22142857142857147em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-scriptstyle textstyle uncramped nulldelimiter"></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.485em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span></span></span></p>
<ul>
<li>
<p>We are doing uniform random sample, so we have factor <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mn>1</mn></mrow><mrow><mi>b</mi><mo>−</mo><mi>a</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{b-a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.2484389999999999em;vertical-align:-0.403331em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">b</span><span class="mbin">−</span><span class="mord mathit">a</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span> here</p>
<p>我们正在进行均匀随机采样，因此这里有因子<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mn>1</mn></mrow><mrow><mi>b</mi><mo>−</mo><mi>a</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{b-a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.2484389999999999em;vertical-align:-0.403331em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">b</span><span class="mbin">−</span><span class="mord mathit">a</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></p>
</li>
</ul>
<h4 id="probability-distribution-function" tabindex="-1" id="Probability-Distribution-Function">Probability Distribution Function</h4>
<p>概率分布函数</p>
<p><img src="21.4.webp" alt="webp"></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mo>∫</mo><mi>a</mi><mi>b</mi></msubsup><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mrow><mi mathvariant="normal">d</mi></mrow><mi>x</mi><mo>∼</mo><msub><mi>F</mi><mi>n</mi></msub><mo>(</mo><mi>X</mi><mo>)</mo><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><msubsup><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mfrac><mrow><mi>f</mi><mo>(</mo><msub><mi>X</mi><mi>k</mi></msub><mo>)</mo></mrow><mrow><mi>P</mi><mi>D</mi><mi>F</mi><mo>(</mo><msub><mi>X</mi><mi>k</mi></msub><mo>)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\int_a^bf(x)\mathrm{d}x\sim F_n(X)=\frac1n\sum_{k=1}^n\frac{f(X_k)}{PDF(X_k)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.01em;"></span><span class="strut bottom" style="height:1.53em;vertical-align:-0.52em;"></span><span class="base textstyle uncramped"><span class="mop"><span class="op-symbol small-op mop" style="margin-right:0.19445em;top:-0.0005599999999999772em;">∫</span><span class="vlist"><span style="top:0.35612em;margin-left:-0.19445em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">a</span></span></span><span style="top:-0.41900000000000004em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">b</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mord textstyle uncramped"><span class="mord mathrm">d</span></span><span class="mord mathit">x</span><span class="mrel">∼</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">∑</span><span class="vlist"><span style="top:0.30001em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.364em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.34500000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.485em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></p>
<p>Probability Distribution Function</p>
<p>概率分布函数</p>
<ul>
<li>
<p>Describes the relative likehood for this random variable to take on a given value</p>
<p>描述此随机变量取给定值的相对可能性</p>
</li>
<li>
<p>Higher means more possible to be chosen</p>
<p>更高意味着更有可能被选择</p>
</li>
</ul>
<h4 id="importance-sampling" tabindex="-1" id="Importance-Sampling">Importance Sampling</h4>
<p>重要性采样</p>
<p>The PDF can be arbitrary, but which is the best?</p>
<p>PDF 可以是任意的，但哪个是最好的？</p>
<p><img src="21.9.webp" alt="webp"></p>
<h4 id="importance-sampling-%3A-best-pdf-for-rendering%3F" tabindex="-1" id="Importance-Sampling-Best-PDF-for-Rendering">Importance Sampling : Best PDF for Rendering?</h4>
<p>重要性采样：最佳的 PDF 渲染？</p>
<ul>
<li>
<p>Rendering equation:</p>
<p>渲染方程式：</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mi>o</mi></msub><mrow><mo fence="true">(</mo><mi>p</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>o</mi></msub><mo fence="true">)</mo></mrow><mo>=</mo><msub><mo>∫</mo><mrow><msup><mi mathvariant="normal">Ω</mi><mo>+</mo></msup></mrow></msub><msub><mi>L</mi><mi>i</mi></msub><mrow><mo fence="true">(</mo><mi>p</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>i</mi></msub><mo fence="true">)</mo></mrow><msub><mi>f</mi><mi>r</mi></msub><mrow><mo fence="true">(</mo><mi>p</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>ω</mi><mi>o</mi></msub><mo fence="true">)</mo></mrow><mrow><mo fence="true">(</mo><mi>n</mi><mo>⋅</mo><msub><mi>ω</mi><mi>i</mi></msub><mo fence="true">)</mo></mrow><mrow><mi mathvariant="normal">d</mi></mrow><msub><mi>ω</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">L_o\left(p,\omega_o\right)=\int_{\Omega^+}L_i\left(p,\omega_i\right)f_r\left(p,\omega_i,\omega_o\right)\left(n\cdot\omega_i\right)\mathrm{d}\omega_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.805em;"></span><span class="strut bottom" style="height:1.16112em;vertical-align:-0.35612em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="minner textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;">(</span><span class="mord mathit">p</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;">)</span></span><span class="mrel">=</span><span class="mop"><span class="op-symbol small-op mop" style="margin-right:0.19445em;top:-0.0005599999999999772em;">∫</span><span class="vlist"><span style="top:0.35612em;margin-right:0.05em;margin-left:-0.19445em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathrm">Ω</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord">+</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="minner textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;">(</span><span class="mord mathit">p</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;">)</span></span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="minner textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;">(</span><span class="mord mathit">p</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;">)</span></span><span class="minner textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;">(</span><span class="mord mathit">n</span><span class="mbin">⋅</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;">)</span></span><span class="mord textstyle uncramped"><span class="mord mathrm">d</span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span></p>
</li>
<li>
<p>Monte Carlo Integration:</p>
<p>蒙特卡洛积分：</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mi>o</mi></msub><mrow><mo fence="true">(</mo><mi>p</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>o</mi></msub><mo fence="true">)</mo></mrow><mo>≈</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>N</mi></mrow></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>N</mi></mrow></msubsup><mfrac><mrow><msub><mi>L</mi><mi>i</mi></msub><mrow><mo fence="true">(</mo><mi>p</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>i</mi></msub><mo fence="true">)</mo></mrow><msub><mi>f</mi><mi>r</mi></msub><mrow><mo fence="true">(</mo><mi>p</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>ω</mi><mi>o</mi></msub><mo fence="true">)</mo></mrow><mrow><mo fence="true">(</mo><mi>n</mi><mo>⋅</mo><msub><mi>ω</mi><mi>i</mi></msub><mo fence="true">)</mo></mrow></mrow><mrow><mi>p</mi><mrow><mo fence="true">(</mo><msub><mi>ω</mi><mi>i</mi></msub><mo fence="true">)</mo></mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex">L_o\left(p,\omega_o\right)\approx\frac{1}{N}\sum_{i=1}^{N}\frac{L_i\left(p,\omega_i\right)f_r\left(p,\omega_i,\omega_o\right)\left(n\cdot\omega_i\right)}{p\left(\omega_i\right)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.01em;"></span><span class="strut bottom" style="height:1.53em;vertical-align:-0.52em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="minner textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;">(</span><span class="mord mathit">p</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;">)</span></span><span class="mrel">≈</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">∑</span><span class="vlist"><span style="top:0.30001em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.364em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.34500000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0.7em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">p</span><span class="minner scriptstyle cramped"><span class="style-wrap reset-scriptstyle scriptstyle uncramped" style="top:0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="style-wrap reset-scriptstyle scriptstyle uncramped" style="top:0em;">)</span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0.7em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.485em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0.7em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="minner scriptstyle uncramped"><span class="style-wrap reset-scriptstyle scriptstyle uncramped" style="top:0em;">(</span><span class="mord mathit">p</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="style-wrap reset-scriptstyle scriptstyle uncramped" style="top:0em;">)</span></span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="minner scriptstyle uncramped"><span class="style-wrap reset-scriptstyle scriptstyle uncramped" style="top:0em;">(</span><span class="mord mathit">p</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="style-wrap reset-scriptstyle scriptstyle uncramped" style="top:0em;">)</span></span><span class="minner scriptstyle uncramped"><span class="style-wrap reset-scriptstyle scriptstyle uncramped" style="top:0em;">(</span><span class="mord mathit">n</span><span class="mbin">⋅</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="style-wrap reset-scriptstyle scriptstyle uncramped" style="top:0em;">)</span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0.7em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></p>
</li>
<li>
<p>What’s our f(x)?</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mi>i</mi></msub><mo>(</mo><mi>p</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>i</mi></msub><mo>)</mo><msub><mi>f</mi><mi>r</mi></msub><mo>(</mo><mi>p</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>ω</mi><mi>o</mi></msub><mo>)</mo><mo>(</mo><mi>n</mi><mo>⋅</mo><msub><mi>ω</mi><mi>i</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">L_i(p,\omega_i)f_r(p,\omega_i,\omega_o)(n\cdot\omega_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">⋅</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span></span></span></span></p>
</li>
<li>
<p>What’s our pdf?</p>
<ul>
<li>Uniform: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><msub><mi>ω</mi><mi>i</mi></msub><mo>)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mn>2</mn><mi>π</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">p(\omega_i)=\frac1{2\pi}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span><span class="mord mathit" style="margin-right:0.03588em;">π</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></li>
<li>Other pdf? (cosine-weight, GGX)（余弦权重，GGX）</li>
</ul>
</li>
</ul>
<h4 id="importance-sampling-%3A-pdf-is-matter" tabindex="-1" id="Importance-Sampling-PDF-is-Matter">Importance Sampling : PDF is Matter</h4>
<p>重要性采样：PDF 很重要</p>
<p><img src="21.10.webp" alt="webp"></p>
<p>​	重要性采样比均匀采样渲染出的效果更好。</p>
<h4 id="importance-sampling%3A-cosine-and-ggx-pdf" tabindex="-1" id="Importance-Sampling-Cosine-and-GGX-PDF">Importance Sampling: Cosine and GGX PDF</h4>
<p>重要性采样：余弦和 GGX PDF</p>
<p><img src="21.11.webp" alt="webp"></p>
<p>​	换一种 PDF 会产生不同的渲染效果。</p>
<h3 id="reflective-shadow-maps-(rsm%2C-2005)" tabindex="-1" id="Reflective-Shadow-Maps-RSM-2005">Reflective Shadow Maps (RSM, 2005)</h3>
<p>Let’s inject light in. (Photon Mapping?)</p>
<p>反射阴影贴图（RSM，2005）</p>
<p>让我们注入光线。（光子映射？）</p>
<ul>
<li>
<p>Each pixel on the shadow map is a indirect light source</p>
<p>阴影贴图上的每个像素都是间接光源</p>
</li>
</ul>
<p><img src="21.12.webp" alt="webp"></p>
<ul>
<li>
<p>How the RSM pixel <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">X_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">p</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span> illuminates position <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span>?</p>
<p>RSM 像素 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">X_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">p</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span> 如何照亮位置 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07847em;">X</span></span></span></span>？</p>
</li>
</ul>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>E</mi><mi>p</mi></msub><mo>(</mo><mi>x</mi><mo separator="true">,</mo><mi>n</mi><mo>)</mo><mo>=</mo><msub><mi>ϕ</mi><mi>p</mi></msub><mfrac><mrow><mi>max</mi><mo>{</mo><mn>0</mn><mo separator="true">,</mo><mo>⟨</mo><msub><mi>n</mi><mi>p</mi></msub><mi mathvariant="normal">∣</mi><mi>x</mi><mo>−</mo><msub><mi>x</mi><mi>p</mi></msub><mo>⟩</mo><mo>}</mo><mi>max</mi><mo>{</mo><mn>0</mn><mo separator="true">,</mo><mo>⟨</mo><mi>n</mi><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>p</mi></msub><mo>−</mo><mi>x</mi><mo>⟩</mo><mo>}</mo></mrow><mrow><mi mathvariant="normal">∥</mi><mi>x</mi><mo>−</mo><msub><mi>x</mi><mi>p</mi></msub><msup><mi mathvariant="normal">∥</mi><mn>4</mn></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">E_p(x,n)=\phi_p\frac{\max\{0,\langle n_p|x-x_p\rangle\}\max\{0,\langle n|x_p-x\rangle\}}{\|x-x_p\|^4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.03722em;"></span><span class="strut bottom" style="height:1.58444em;vertical-align:-0.54722em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">p</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">ϕ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">p</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.34500000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">∥</span><span class="mord mathit">x</span><span class="mbin">−</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">p</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathrm">∥</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.51222em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mop">max</span><span class="mopen">{</span><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mopen">⟨</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">p</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathrm">∣</span><span class="mord mathit">x</span><span class="mbin">−</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">p</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">⟩</span><span class="mclose">}</span><span class="mop">max</span><span class="mopen">{</span><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mopen">⟨</span><span class="mord mathit">n</span><span class="mord mathrm">∣</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">p</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord mathit">x</span><span class="mclose">⟩</span><span class="mclose">}</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></p>
<ul>
<li>
<p>The indirect irradiance at a surface point <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span> can be approximated by summing up the illumination due to all pixel lights.</p>
<p>表面点 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span> 处的间接辐照度可以通过将所有像素光的照度相加来近似。</p>
</li>
<li>
<p>Do not consider occlusion.</p>
<p>不要考虑遮挡。</p>
</li>
</ul>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo>(</mo><mi>x</mi><mo separator="true">,</mo><mi>n</mi><mo>)</mo><mo>=</mo><msub><mo>∑</mo><mrow><mtext><mi mathvariant="normal">p</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">x</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">s</mi></mtext><mi>p</mi></mrow></msub><msub><mi>E</mi><mi>p</mi></msub><mo>(</mo><mi>x</mi><mo separator="true">,</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">E(x,n)=\sum_{\text{pixels}p}E_p(x,n)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.050005em;"></span><span class="strut bottom" style="height:2.488226em;vertical-align:-1.438221em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mrel">=</span><span class="mop op-limits"><span class="vlist"><span style="top:1.202113em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="text mord scriptstyle cramped"><span class="mord mathrm">p</span><span class="mord mathrm">i</span><span class="mord mathrm">x</span><span class="mord mathrm">e</span><span class="mord mathrm">l</span><span class="mord mathrm">s</span></span><span class="mord mathit">p</span></span></span></span><span style="top:-0.000005000000000032756em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span><span class="op-symbol large-op mop">∑</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">p</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></span></p>
<p><img src="21.13.webp" alt="webp"></p>
<h4 id="cone-tracing-with-rsm" tabindex="-1" id="Cone-Tracing-with-RSM">Cone Tracing with RSM</h4>
<p>使用 RSM 进行锥体追踪</p>
<ul>
<li>
<p>Gathering Indirect Illumination</p>
<p>收集间接照明</p>
<ul>
<li>
<p>random sampling RSM pixels</p>
<p>随机采样 RSM 像素</p>
</li>
<li>
<p>precompute such a sampling pattern and reuse it for all indirect light computations</p>
<p>预先计算这样的采样模式，并将其重新用于所有间接光计算</p>
<ul>
<li>
<p>400samples were sufficient</p>
<p>400 个样本就足够了</p>
</li>
<li>
<p>use Poisson sampling to obtain a more even sample distribution</p>
<p>使用泊松采样获得更均匀的样本分布</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="21.14.webp" alt="webp"></p>
<p>Sampling pattern example. The sample density decreases and the sample weights (visualized by the disk radius) increases with the distance to the center.</p>
<p>采样模式示例。随着到中心的距离的增加，样品密度降低，样品重量（通过圆盘半径显示）增加。</p>
<h4 id="acceleration-with-low-res-indirect-illumination" tabindex="-1" id="Acceleration-with-Low-Res-Indirect-Illumination">Acceleration with Low-Res Indirect Illumination</h4>
<p>低分辨率间接照明加速</p>
<ul>
<li>
<p>Compute the indirect illumination for a low resolution image</p>
<p>计算低分辨率图像的间接照明</p>
</li>
<li>
<p>For each pixel on full resolution:</p>
<p>对于全分辨率的每个像素：</p>
<ul>
<li>
<p>get its four surrounding low-res samples</p>
<p>获取其四个周围的低分辨率样本</p>
</li>
<li>
<p>validate by comparing normal and world space position</p>
<p>通过比较正常空间位置和世界空间位置进行验证</p>
</li>
<li>
<p>bi-linear interpolation</p>
<p>双线性插值</p>
</li>
</ul>
</li>
<li>
<p>Recompute the left (red pixels)</p>
<p>重新计算左侧（红色像素）</p>
</li>
</ul>
<p><img src="21.15.webp" alt="webp"></p>
<p>Gears of War 4, Uncharted 4, The Last of US, etc.</p>
<p>《战争机器 4》、《神秘海域 4》、“最后的美国”等</p>
<p><img src="21.16.webp" alt="webp"></p>
<h4 id="thanks%2C-rsm" tabindex="-1" id="Thanks-RSM">Thanks, RSM</h4>
<p>Cool Ideas</p>
<p>很酷的想法</p>
<ul>
<li>
<p>Easy to be implemented</p>
<p>易于实施</p>
</li>
<li>
<p>Photon Injection with RSM</p>
<p>RSM 的光子注入</p>
</li>
<li>
<p>Cone sampling in mipmap</p>
<p>mipmap 中的圆锥采样</p>
</li>
<li>
<p>Low-res Indirect illumination with error check</p>
<p>低分辨率间接照明，带错误检查</p>
</li>
</ul>
<p>Cons</p>
<p>缺点</p>
<ul>
<li>
<p>Single bounce</p>
<p>单次反弹</p>
</li>
<li>
<p>No visibility check for indirect illumination</p>
<p>间接照明不进行能见度检查</p>
</li>
</ul>
<p><img src="21.17.webp" alt="webp"></p>
<h3 id="light-propagation-volumes-(lpv)" tabindex="-1" id="Light-Propagation-Volumes-LPV">Light Propagation Volumes (LPV)</h3>
<p>光传播体积（LPV）</p>
<p>First introduced in CryEngine 3（SIGGRAPH 2009）</p>
<p>首次引入 CryEngine 3（SIGGRAPH 2009）</p>
<p><img src="21.18.webp" alt="webp"></p>
<ul>
<li>
<p>Key Idea</p>
<p>核心思想</p>
<ul>
<li>
<p>Use a 3D grid to propagate radiance from directly illuminated surfaces to anywhere else</p>
<p>使用 3D 网格将辐射从直接照射的表面传播到其他任何地方</p>
</li>
</ul>
</li>
</ul>
<p><img src="21.19.webp" alt="webp"></p>
<p>Steps</p>
<p>步骤</p>
<ol>
<li>
<p>Generation of radiance point set scene representation</p>
<p>辐射点集场景表示的生成</p>
</li>
<li>
<p>Injection of point cloud of virtual light sources into radiance volume</p>
</li>
</ol>
<p>将虚拟光源的点云注入辐射体积</p>
<ol start="3">
<li>
<p>Volumetric radiance propagation</p>
<p>体积辐射传播</p>
</li>
<li>
<p>Scene lighting with final light propagation volume</p>
<p>具有最终光传播量的场景照明</p>
</li>
</ol>
<p>Reflective shadow map generation → Radiance injection → Radiance propagation → Scene lighting</p>
<p>反射阴影贴图生成→辐射注入→辐射传播→场景照明</p>
<h4 id="%E2%80%9Cfreeze%E2%80%9D-the-radiance-in-voxel" tabindex="-1" id="“Freeze”-the-Radiance-in-Voxel">“Freeze” the Radiance in Voxel</h4>
<p>“冻结”体素中的光芒</p>
<p>Light Injection</p>
<p>光注入</p>
<ul>
<li>
<p>Pre-subdivide the scene into a 3D grid</p>
<p>将场景预细分为 3D 网格</p>
</li>
<li>
<p>For each grid cell, find enclosed virtual light sources</p>
<p>对于每个网格单元，找到封闭的虚拟光源</p>
</li>
<li>
<p>Sum up their directional radiance distribution</p>
<p>总结它们的方向辐射分布</p>
</li>
<li>
<p>Project to first 2 orders of SHs (4 in total)</p>
<p>前 2 个 SH 订单的项目（共 4 个）</p>
</li>
</ul>
<p><img src="21.20.webp" alt="webp"></p>
<h4 id="radiance-propagation" tabindex="-1" id="Radiance-Propagation">Radiance Propagation</h4>
<p>辐射传播</p>
<ul>
<li>
<p>For each grid cell, collect the radiance received from each of its 6 faces</p>
<p>对于每个网格单元，收集从其 6 个面中的每一个面接收到的辐射</p>
</li>
<li>
<p>Sum up, and again use SH to represent</p>
<p>总结一下，再次用 SH 表示</p>
</li>
<li>
<p>Repeat this propagation several times till the volume becomes stable</p>
<p>重复此传播几次，直到体积稳定</p>
</li>
</ul>
<p><img src="21.21.webp" alt="webp"></p>
<h4 id="light-with-%E2%80%9Climit-speed%E2%80%9D%EF%BC%9F" tabindex="-1" id="Light-with-“Limit-Speed”？">Light with “Limit Speed”？</h4>
<p>“限速”灯</p>
<p><img src="21.22.webp" alt="webp"></p>
<h3 id="sparse-voxel-octree-for-real-time-global-illumination-(svogi)" tabindex="-1" id="Sparse-Voxel-Octree-for-Real-time-Global-Illumination-SVOGI">Sparse Voxel Octree for Real-time Global Illumination (SVOGI)</h3>
<p>稀疏体素八叉树用于实时全局照明（SVOGI）</p>
<h4 id="voxelization-pass" tabindex="-1" id="Voxelization-Pass">Voxelization Pass</h4>
<p>体素化通行证</p>
<p><img src="21.23.webp" alt="webp"></p>
<h4 id="collect-surface-voxels" tabindex="-1" id="Collect-Surface-Voxels">Collect Surface Voxels</h4>
<p>收集表面体素</p>
<p><img src="21.24.webp" alt="webp"></p>
<p><img src="21.25.webp" alt="webp"></p>
<ul>
<li>
<p>Inject Irradiance into voxels from light</p>
<p>从光线向体素中注入辐照度</p>
</li>
<li>
<p>Filter irradiance inside the octree</p>
<p>八叉树内部的过滤辐照度</p>
</li>
</ul>
<h4 id="shading-with-cone-tracing-in-voxel-tree" tabindex="-1" id="Shading-with-Cone-Tracing-in-Voxel-Tree">Shading with Cone Tracing in Voxel Tree</h4>
<p>体素树中的圆锥体跟踪着色</p>
<p>Pass 2 from the camera</p>
<p>从相机中传 2</p>
<ul>
<li>
<p>Emit some cones based on diffuse + specular BRDF</p>
<p>基于漫反射 + 镜面反射 BRDF 发射一些锥体</p>
</li>
<li>
<p>Query in octree based on the (growing) size of the cone</p>
<p>基于圆锥体（增长）大小的八叉树查询</p>
</li>
</ul>
<p><img src="21.26.webp" alt="webp"></p>
<h3 id="voxelization-based-global-illumination-(vxgi)" tabindex="-1" id="Voxelization-Based-Global-Illumination-VXGI">Voxelization Based Global Illumination (VXGI)</h3>
<p>基于体素化的全局照明（VXGI）</p>
<p><img src="21.27.webp" alt="webp"></p>
<ul>
<li>
<p>Store the voxel data in clipmaps</p>
<p>将体素数据存储在 clipmap 中</p>
<ul>
<li>
<p>Multi-resolution texture</p>
<p>多分辨率纹理</p>
</li>
<li>
<p>Regions near the center have higher spatial resolution</p>
<p>中心附近的区域具有更高的空间分辨率</p>
</li>
<li>
<p>Seems to map naturally to cone tracing needs</p>
<p>似乎很自然地映射到锥体跟踪需求</p>
</li>
</ul>
</li>
<li>
<p>A clipmap is easier to build than SVO</p>
<p>clipmap 比 SVO 更容易构建</p>
<ul>
<li>
<p>No nodes, pointers etc., handled by hardware</p>
<p>没有由硬件处理的节点、指针等</p>
</li>
</ul>
</li>
<li>
<p>A clipmap is easier to read from</p>
<p>Clipmap 更容易阅读</p>
</li>
<li>
<p>Clipmap size is (64…256)^3 with 3…5 levels of detail</p>
<p>Clipmap 大小为（64…256）^3，具有 3…5 个细节级别</p>
<ul>
<li>
<p>16…32 bytes per voxel =&gt; 12 MB … 2.5 GB of video memory required</p>
<p>每个体素 16…32 字节=&gt;12 MB…需要 2.5 GB 的视频内存</p>
</li>
</ul>
</li>
</ul>
<h4 id="voxel-update-and-toroidal-addressing" tabindex="-1" id="Voxel-Update-and-Toroidal-Addressing">Voxel Update and Toroidal Addressing</h4>
<p>体素更新和环形寻址</p>
<ul>
<li>
<p>A fixed point in space always maps to the same address in the clipmap</p>
<p>空间中的固定点总是映射到剪贴图中的同一地址</p>
</li>
<li>
<p>The background shows texture addresses: <code>frac(worldPos.xy / clipmapSize.xy)</code></p>
<p>背景显示纹理地址：<code>frac(worldPos.xy / clipmapSize.xy)</code></p>
</li>
</ul>
<p><img src="21.28.webp" alt="webp"></p>
<p><img src="21.29.webp" alt="webp"></p>
<h4 id="voxelization-for-opacity" tabindex="-1" id="Voxelization-for-Opacity">Voxelization for Opacity</h4>
<p>不透明度的体素化</p>
<ul>
<li>
<p>We have a triangle and a voxel</p>
<p>我们有一个三角形和一个体素</p>
</li>
<li>
<p>Select the projection plane that yields the biggest projection area</p>
<p>选择产生最大投影面积的投影平面</p>
</li>
<li>
<p>Rasterize the triangle using MSAA to compute one coverage mask per pixel</p>
<p>使用 MSAA 对三角形进行光栅化，以计算每个像素的一个覆盖掩模</p>
</li>
<li>
<p>Take the MSAA samples and reproject them onto other planes</p>
<p>采集 MSAA 样本并将其重新投影到其他平面上</p>
</li>
<li>
<p>Repeat that process for all covered samples</p>
<p>对所有覆盖的样本重复该过程</p>
</li>
<li>
<p>Thicken the result by blurring all the reprojected samples</p>
<p>通过模糊所有重新投影的样本来增加结果</p>
</li>
</ul>
<p><img src="21.30.webp" alt="webp"></p>
<h4 id="voxelization%3A-directional-coverage" tabindex="-1" id="Voxelization-Directional-Coverage">Voxelization: Directional Coverage</h4>
<p>体素化：定向覆盖</p>
<p><img src="21.31.webp" alt="webp"></p>
<h4 id="light-injection" tabindex="-1" id="Light-Injection">Light Injection</h4>
<p>光注入</p>
<ul>
<li>
<p>Calculate emittance of voxels that contain surfaces lit by direct lights</p>
<p>计算包含由直射光照亮的表面的体素的发射度</p>
</li>
<li>
<p>Take information from reflective shadow maps (RSM)</p>
<p>从反射阴影图（RSM）中获取信息</p>
</li>
</ul>
<p><img src="21.32.webp" alt="webp"></p>
<p><img src="21.33.webp" alt="webp"></p>
<h4 id="shading-with-cone-tracing" tabindex="-1" id="Shading-with-Cone-Tracing">Shading with Cone Tracing</h4>
<p>使用圆锥体追踪进行着色</p>
<ul>
<li>
<p>generate several cones based on BRDF</p>
<p>基于 BRDF 生成多个锥体</p>
</li>
</ul>
<p><img src="21.34.webp" alt="webp"></p>
<h4 id="accumulate-voxel-radiance-and-opacity-along-the-path" tabindex="-1" id="Accumulate-Voxel-Radiance-and-Opacity-along-the-Path">Accumulate Voxel Radiance and Opacity along the Path</h4>
<p>沿路径累积体素辐射度和不透明度</p>
C_{\mathrm{dst}}\leftarrow C_{\mathrm{dst}}+(1-\alpha_{\mathrm{dst}})C_{\mathrm{src}}\\\alpha_\mathrm{dst}\leftarrow\alpha_\mathrm{dst}+(1-\alpha_\mathrm{dst})\alpha_\mathrm{src}

<p><img src="21.35.webp" alt="webp"></p>
<p><img src="21.36.webp" alt="webp"></p>
<h4 id="problems-in-vxgi" tabindex="-1" id="Problems-in-VXGI">Problems in VXGI</h4>
<p>VXGI 中的问题</p>
<p>Incorrect Occlusion (opacity)</p>
<p>遮挡不正确（不透明）</p>
<ul>
<li>
<p>naively combine the opacity with alpha blending.</p>
<p>天真地将不透明与阿尔法混合结合起来。</p>
</li>
</ul>
<p>Light Leaking</p>
<p>漏光</p>
<ul>
<li>
<p>when occlusion wall is much smaller than voxel size</p>
<p>当闭塞壁远小于体素尺寸时</p>
</li>
</ul>
<p><img src="21.37.webp" alt="webp"></p>
<h3 id="screen-space-global-illumination-(ssgi)" tabindex="-1" id="Screen-Space-Global-Illumination-SSGI">Screen Space Global Illumination (SSGI)</h3>
<p>屏幕空间全局照明（SSGI）</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://advances.realtimerendering.com/s2015/">Advances in Real-Time Rendering- SIGGRAPH 2015 (realtimerendering.com)</a></li>
</ul>
<h4 id="general-idea" tabindex="-1" id="General-Idea">General Idea</h4>
<p>总体思路</p>
<ul>
<li>
<p>Reuse screen-space data</p>
<p>重复使用屏幕空间数据</p>
</li>
</ul>
<p><img src="21.38.webp" alt="webp"></p>
<h4 id="radiance-sampling-in-screen-space" tabindex="-1" id="Radiance-Sampling-in-Screen-Space">Radiance Sampling in Screen Space</h4>
<p>屏幕空间中的辐射采样</p>
<p>For each fragment:</p>
<p>对于每个片段：</p>
<ul>
<li>
<p>Step 1: compute many reflection rays</p>
<p>步骤 1：计算许多反射光线</p>
</li>
<li>
<p>Step 2: march along ray direction (in depth gbuffer)</p>
<p>步骤 2：沿射线方向行进（在深度 gbuffer 中）</p>
</li>
<li>
<p>Step 3: use color of hit pointas indirect lighting</p>
<p>步骤 3：使用目标点的颜色作为间接照明</p>
</li>
</ul>
<p><img src="21.39.webp" alt="webp"></p>
<h4 id="linear-raymarching" tabindex="-1" id="Linear-Raymarching">Linear Raymarching</h4>
<p>线性射线推进</p>
<ul>
<li>
<p>General Steps</p>
<p>一般步骤</p>
<ul>
<li>
<p>Step forward at a fixed step size</p>
<p>以固定步长向前迈进</p>
</li>
<li>
<p>At each step, check depth value</p>
<p>每一步，检查深度值</p>
</li>
</ul>
</li>
<li>
<p>Features</p>
<p>特征</p>
<ul>
<li>
<p>Fast</p>
<p>快速</p>
</li>
<li>
<p>May skip thin objects</p>
<p>可能跳过薄物体</p>
</li>
</ul>
</li>
</ul>
<p><img src="21.40.webp" alt="webp"></p>
<h4 id="hierachical-tracing" tabindex="-1" id="Hierachical-Tracing">Hierachical Tracing</h4>
<p>层次追踪</p>
<ul>
<li>
<p>Generate min-depth mipmap (pyramid)</p>
<p>生成最小深度 mipmap（金字塔）</p>
</li>
<li>
<p>Stackless ray walk of min-depth mipmap</p>
<p>最小深度 mipmap 的无堆叠射线行走</p>
</li>
</ul>
<p><img src="21.41.webp" alt="webp"></p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs C#">level = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(level &gt; <span class="hljs-number">-1</span>)<br>&#123;<br>	stepcurrentcell();<br>    <span class="hljs-keyword">if</span> (above z plane) level++;<br>    <span class="hljs-keyword">if</span> (below z plane) level--;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="21.42.webp" alt="webp"></p>
<h4 id="ray-reuse-among-neighbor-pixels" tabindex="-1" id="Ray-Reuse-among-Neighbor-Pixels">Ray Reuse among Neighbor Pixels</h4>
<p>相邻像素间的光线复用</p>
<ul>
<li>
<p>Store hitpoint data</p>
<p>存储命中点数据</p>
</li>
<li>
<p>Assume visibility is the same between neighbors</p>
<p>假设邻居之间的能见度相同</p>
</li>
<li>
<p>Regard ray to neighbor’s hitpointas valid</p>
<p>将邻居的 hitpoint 视为有效</p>
</li>
</ul>
<p><img src="21.43.webp" alt="webp"></p>
<h4 id="cone-tracing-with-mipmap-filtering" tabindex="-1" id="Cone-Tracing-with-Mipmap-Filtering">Cone Tracing with Mipmap Filtering</h4>
<p>基于 Mipmap 滤波的圆锥跟踪</p>
<p>Estimate footprintof a coneat hit point</p>
<p>估算锥形撞击点的足迹</p>
<ul>
<li>
<p>roughness</p>
<p>粗糙度</p>
</li>
<li>
<p>distance to hit</p>
<p>击中距离</p>
</li>
</ul>
<p>Sample the color mipmap</p>
<p>对彩色 mipmap 进行采样</p>
<ul>
<li>
<p>mip level is determined by footprint</p>
<p>mip 级别由足迹决定</p>
</li>
</ul>
<p>Pre-filter color mipmap (pyramid)</p>
<p>预过滤彩色 mipmap（金字塔）</p>
<p><img src="21.44.webp" alt="webp"></p>
<h4 id="ssgi-summary" tabindex="-1" id="SSGI-Summary">SSGI Summary</h4>
<p>SSGI 总结</p>
<ul>
<li>
<p>Pros:</p>
<p>优点：</p>
<ul>
<li>
<p>Fast for glossy and specular reflections</p>
<p>快速实现光泽和镜面反射</p>
</li>
<li>
<p>Good quality</p>
<p>质量好</p>
</li>
<li>
<p>No occlusion issues</p>
<p>无遮挡问题</p>
</li>
</ul>
</li>
<li>
<p>Cons:</p>
<p>缺点：</p>
<ul>
<li>
<p>Missing information outside screen</p>
<p>屏幕外信息缺失</p>
</li>
<li>
<p>Affects of incorrect visibility of neighbor ray reuse</p>
<p>相邻射线重用可见性不正确的影响</p>
</li>
</ul>
</li>
</ul>
<p><img src="21.45.webp" alt="webp"></p>
<h4 id="unique-advantages-of-ssgi" tabindex="-1" id="Unique-Advantages-of-SSGI">Unique Advantages of SSGI</h4>
<p>SSGI 的独特优势</p>
<ul>
<li>
<p>Easy to handle close contact shadow</p>
<p>易于处理近距离接触阴影</p>
</li>
<li>
<p>Precise hit point calculation</p>
<p>精确的命中点计算</p>
</li>
<li>
<p>Decouple from scene complexity</p>
<p>与场景复杂性解耦</p>
</li>
<li>
<p>Handle dynamic objects</p>
<p>处理动态对象</p>
</li>
</ul>
<h3 id="lumen" tabindex="-1" id="Lumen">Lumen</h3>
<blockquote>
<p>​	Lumen 是一个实时全局光照系统，由 Epic Games 开发，用于其虚幻引擎（Unreal Engine）。它旨在提高游戏和其他实时应用中的光照效果的真实感。Lumen 可以动态地计算光线的传播、反射和折射，无需事先烘焙光照贴图，因此能更好地适应场景的变化，比如光线源的移动或物体的位置改变。它通过实时计算来模拟复杂的光照效果，比如间接光和反射，使得视觉效果更加自然和沉浸。</p>
</blockquote>
<h4 id="ray-traces-are-slow" tabindex="-1" id="Ray-Traces-are-slow">Ray Traces are slow</h4>
<p>光线追踪很慢</p>
<ul>
<li>
<p>Can only afford 1/2 ray per pixel</p>
<p>每像素只能提供 1/2 射线</p>
</li>
<li>
<p>But quality GI needs hundreds</p>
<p>但高质量的 GI 需要数百个</p>
</li>
</ul>
<p><img src="21.46.webp" alt="webp"></p>
<h4 id="sampling-is-hard" tabindex="-1" id="Sampling-is-hard">Sampling is hard</h4>
<p>取样很困难</p>
<p>Previous real-time work: Irradiance Fields</p>
<p>以前的实时工作：辐照度场</p>
<ul>
<li>
<p>Problems:</p>
<p>问题：</p>
<ul>
<li>
<p>Leaking and over-occlusion</p>
<p>渗漏和过度堵塞</p>
</li>
<li>
<p>Probe placement</p>
<p>探头放置</p>
</li>
<li>
<p>Slow lighting update</p>
<p>照明更新缓慢</p>
</li>
<li>
<p>Distinctive flat look</p>
<p>独特的扁平外观</p>
</li>
</ul>
</li>
</ul>
<p>Previous real-time work: Screen Space Denoiser</p>
<p>以前的实时工作：屏幕空间去噪器</p>
<ul>
<li>
<p>Problems:</p>
<p>问题：</p>
<ul>
<li>
<p>Too noisy in many difficult indoor cases</p>
<p>在许多困难的室内环境中噪音太大</p>
</li>
<li>
<p>Noise is not constant.</p>
<p>噪音不是恒定的。</p>
</li>
</ul>
</li>
</ul>
<p><img src="21.47.webp" alt="webp"></p>
<h4 id="low-res-filtered-scene-space-probes-lit-full-pixels" tabindex="-1" id="Low-res-filtered-scene-space-probes-lit-full-pixels">Low-res filtered scene space probes lit full pixels</h4>
<p>低分辨率滤波场景空间探测器照亮了全像素</p>
<p><img src="21.48.webp" alt="webp"></p>
<h3 id="phase-1-%3A-fast-ray-trace-in-any-hardware" tabindex="-1" id="Phase-1-Fast-Ray-Trace-in-Any-Hardware">Phase 1 : Fast Ray Trace in Any Hardware</h3>
<p>阶段 1：任何硬件中的快速光线追踪</p>
<h4 id="signed-distance-field-(sdf)" tabindex="-1" id="Signed-Distance-Field-SDF">Signed Distance Field (SDF)</h4>
<p>签名距离字段（SDF）</p>
<h4 id="what-is-sdf" tabindex="-1" id="What-is-SDF">What is SDF</h4>
<ul>
<li>
<p>The distance to the nearest surface at every point</p>
<p>每个点到最近曲面的距离</p>
</li>
<li>
<p>Inside regions store negative distance (signed)</p>
<p>内部区域存储负距离（带符号）</p>
</li>
<li>
<p>Distance = 0 is the surface</p>
<p>距离 = 0 是曲面</p>
</li>
</ul>
<p><img src="21.49.webp" alt="webp"></p>
<h4 id="per-mesh-sdf" tabindex="-1" id="Per-Mesh-SDF">Per-Mesh SDF</h4>
<p>每网格 SDF</p>
<p>Store SDF of the whole scene is expensive</p>
<p>整个场景的商店 SDF 都很贵</p>
<p>Generated for each mesh</p>
<p>为每个网格生成</p>
<ul>
<li>
<p>Resolution based on mesh size</p>
<p>基于网格大小的分辨率</p>
</li>
<li>
<p>Embree point query</p>
<p>Embree 积分查询</p>
</li>
<li>
<p>Trace rays and count triangle back faces for sign ( more than 25% hit back is negative)</p>
<p>追踪光线并计算标志的三角形背面（超过 25% 的回射为负）</p>
</li>
</ul>
<p><img src="21.50.webp" alt="webp"></p>
<ul>
<li>
<p>Original Mesh</p>
<p>原始网格</p>
</li>
<li>
<p>Resolution is too low, important features are lost</p>
<p>分辨率太低，重要功能丢失</p>
</li>
<li>
<p>Resolution has been increased, important features represented</p>
<p>分辨率已提高，重要功能已呈现</p>
</li>
</ul>
<h4 id="sdf-for-thin-meshes" tabindex="-1" id="SDF-for-Thin-meshes">SDF for Thin meshes</h4>
<p>用于薄网格的 SDF</p>
<ul>
<li>
<p>Half voxel expand to fix leaking</p>
<p>半体素扩展以修复泄漏</p>
</li>
<li>
<p>Lost contact shadows due to surface bias</p>
<p>表面偏移导致接触阴影丢失</p>
<ul>
<li>
<p>Over occlusion better than leaking</p>
<p>过度堵塞比泄漏好</p>
</li>
</ul>
</li>
</ul>
<p><img src="21.51.webp" alt="webp"></p>
<h4 id="ray-tracing-with-sdf" tabindex="-1" id="Ray-Tracing-with-SDF">Ray Tracing with SDF</h4>
<p>使用 SDF 进行光线追踪</p>
<p>Ray intersection skips through empty space based on distance to surface</p>
<p>射线交点根据到曲面的距离跳过空白空间</p>
<ul>
<li>
<p>Safe and fast</p>
<p>安全快捷</p>
</li>
<li>
<p>Each time at <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span></span></span></span>, just travel <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>D</mi><mi>F</mi><mo>(</mo><mi>p</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">SDF(p)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mclose">)</span></span></span></span> distance</p>
<p>每次在 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span></span></span></span> 时，只需行进 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>D</mi><mi>F</mi><mo>(</mo><mi>p</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">SDF(p)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mclose">)</span></span></span></span> 距离</p>
</li>
</ul>
<p><img src="21.52.webp" alt="webp"></p>
<h4 id="cone-tracing-with-sdf-(ie.-soft-shadow)" tabindex="-1" id="Cone-Tracing-with-SDF-ie-Soft-Shadow">Cone Tracing with SDF (ie. Soft Shadow)</h4>
<p>使用 SDF 进行圆锥体跟踪（即软阴影）</p>
<p><img src="21.53.webp" alt="webp"></p>
<h4 id="sparse-mesh-sdf" tabindex="-1" id="Sparse-Mesh-SDF">Sparse Mesh SDF</h4>
<p>稀疏网格 SDF</p>
<p>Divides the Mesh SDF into bricks</p>
<p>将网格 SDF 划分为块</p>
<ul>
<li>
<p>Define a max_encode_distance</p>
<p>定义 max_encode 距离</p>
<ul>
<li>
<p>Invalid if ∀ sdf(brick) &gt; max_encode_distance</p>
<p>如果 ∀sdf(brick) &gt; max_encode_distance，则无效</p>
</li>
</ul>
</li>
<li>
<p>IndirectionTable store the index of each brick</p>
<p>IndirectionTable 存储每块砖的索引</p>
</li>
</ul>
<p><img src="21.54.webp" alt="webp"></p>
<p><img src="21.55.webp" alt="webp"></p>
<h4 id="mesh-sdf-lod" tabindex="-1" id="Mesh-SDF-LoD">Mesh SDF LoD</h4>
<p>网状 SDF LoD</p>
<ul>
<li>
<p>Every frame GPU gathers requests</p>
<p>每一帧 GPU 都会收集请求</p>
</li>
<li>
<p>CPU download requests and streams pages in/out</p>
<p>CPU 下载请求和流式页面输入/输出</p>
</li>
<li>
<p>3mips are generated</p>
<p>生成 3 个 MIP</p>
<ul>
<li>
<p>Lowest resolution always loaded and the other 2streamed</p>
<p>始终加载最低分辨率，其他 2 个分辨率为流式传输</p>
</li>
</ul>
</li>
</ul>
<p><img src="21.56.webp" alt="webp"></p>
<h4 id="sparse-mesh-sdf-1" tabindex="-1" id="Sparse-Mesh-SDF-2">Sparse Mesh SDF</h4>
<p>稀疏网格 SDF</p>
<p><img src="21.57.webp" alt="webp"></p>
<h4 id="ray-tracing-cost-in-real-scene" tabindex="-1" id="Ray-Tracing-Cost-in-Real-Scene">Ray Tracing Cost in Real Scene</h4>
<p>真实场景中的光线追踪成本</p>
<p><img src="21.58.webp" alt="webp"></p>
<p>Trace camera rays and visualize the number of steps</p>
<p>追踪相机光线并可视化步数</p>
<h4 id="many-objects-along-each-ray" tabindex="-1" id="Many-Objects-along-Each-Ray">Many Objects along Each Ray</h4>
<p>每条射线上有许多物体</p>
<p><img src="21.59.webp" alt="webp"></p>
<p>Number of hit objects along each ray</p>
<p>沿每条射线的命中物体数量</p>
<h4 id="global-sdf" tabindex="-1" id="Global-SDF">Global SDF</h4>
<p>全球 SDF</p>
<ul>
<li>
<p>Global SDF is inaccurate near surface</p>
<p>全球 SDF 在地表附近不准确</p>
</li>
<li>
<p>Sample object SDFs near start of cone, global SDF for the rest</p>
<p>在圆锥体起点附近采样对象 SDF，其余部分为全局 SDF</p>
</li>
</ul>
<p><img src="21.60.webp" alt="webp"></p>
<h4 id="ray-tracing-with-global-sdf" tabindex="-1" id="Ray-Tracing-with-Global-SDF">Ray Tracing with Global SDF</h4>
<p>使用全局 SDF 进行光线追踪</p>
<p>Massively reduces tracing cost on overlapping objects</p>
<p>大幅降低重叠对象的跟踪成本</p>
<p><img src="21.61.webp" alt="webp"></p>
<h4 id="cache-global-sdf-around-camera" tabindex="-1" id="Cache-Global-SDF-around-Camera">Cache Global SDF around Camera</h4>
<p>在相机周围缓存全局 SDF</p>
<ul>
<li>
<p>4 clipmaps centered around camera</p>
<p>4 张以相机为中心的剪贴画</p>
</li>
<li>
<p>Clipmaps are scrolled with movement</p>
<p>Clipmap 随着移动而滚动</p>
</li>
<li>
<p>Distant clipmaps updated less frequently</p>
<p>远处的 clipmap 更新频率较低</p>
</li>
<li>
<p>Also sparsely stored (~16x memory saving)</p>
<p>存储也很稀疏（约节省 16 倍内存）</p>
</li>
</ul>
<p><img src="21.62.webp" alt="webp"></p>
<h3 id="phase-2-%3A-radiance-injection-and-caching" tabindex="-1" id="Phase-2-Radiance-Injection-and-Caching">Phase 2 : Radiance Injection and Caching</h3>
<p>阶段 2：辐射注入和缓存</p>
<h4 id="mesh-card-%E2%80%93orthogonal-camera-on-6-axis-aligned-directions" tabindex="-1" id="Mesh-card-–orthogonal-camera-on-6-Axis-Aligned-directions">Mesh card –orthogonal camera on 6-Axis Aligned directions</h4>
<p>网格卡——6 轴对齐方向上的正交相机</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FLumenCard</span><br>&#123;<br>	FLumenCardOBB LocalOBB;<br>    FLumenCardOBB WorldOBB;<br>    uint8 AxisAliqnedDirectionIndex;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="21.63.webp" alt="webp"></p>
<p><img src="21.64.webp" alt="webp"></p>
<h4 id="generate-surface-cache" tabindex="-1" id="Generate-Surface-Cache">Generate Surface Cache</h4>
<p>生成 Surface 缓存</p>
<p>Two Passes</p>
<p>两个步骤</p>
<p>Pass 1：Card capture</p>
<p>步骤 1：卡捕获</p>
<ul>
<li>
<p>Fix texel budget per frame (512 x 512)</p>
<p>固定每帧的纹理像素预算（512 x 512）</p>
</li>
<li>
<p>Sort by distance to camera and GPU feedback</p>
<p>按距离相机和 GPU 反馈排序</p>
</li>
<li>
<p>Capture resultion depends on card projection on screen</p>
<p>捕获结果取决于屏幕上的卡片投影</p>
</li>
</ul>
<p><img src="21.65.webp" alt="webp"></p>
<p>Pass 2：Copy cards to surface cache and compress</p>
<p>步骤 2：将卡片复制到表面缓存并压缩</p>
<p><img src="21.66.webp" alt="webp"></p>
<p>4096 x 4096 Surface Cache Atlas</p>
<table>
<thead>
<tr>
<th>贴图</th>
<th>颜色通道</th>
<th>纹理压缩</th>
<th>缓存大小</th>
</tr>
</thead>
<tbody>
<tr>
<td>Albedo</td>
<td>RGB8</td>
<td>BC7</td>
<td>16mb</td>
</tr>
<tr>
<td>Opacity</td>
<td>R8</td>
<td>BC4</td>
<td>8mb</td>
</tr>
<tr>
<td>Depth</td>
<td>R16</td>
<td>-</td>
<td>32mb</td>
</tr>
<tr>
<td>Normal</td>
<td>Hemisphere RG8</td>
<td>BC4</td>
<td>16mb</td>
</tr>
<tr>
<td>Emissive</td>
<td>RGB Float16</td>
<td>BCGH</td>
<td>16mb</td>
</tr>
</tbody>
</table>
<p>compress from 320mb to 88mb</p>
<p>从 320mb 压缩到 88mb</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-type">static</span> FLumenSurfaceLayerConfig Configs[(uint32)ELumenSurfaceCacheLayer::MAX]<br>&#123;<br>    &#123;<span class="hljs-built_in">TEXT</span>(<span class="hljs-string">&quot;Depth&quot;</span>), PF_G16, PF_Unknown, PF_Unknown, <span class="hljs-built_in">FVector</span>(<span class="hljs-number">1.</span>af,<span class="hljs-number">0.0f</span>,<span class="hljs-number">0.0f</span>)&#125;,<br>    &#123;<span class="hljs-built_in">TEXT</span>(<span class="hljs-string">&quot;Albedo&quot;</span>), PF_R8G8B8A8,PF_BC7, PF_R32G32B32A32_UINT, <span class="hljs-built_in">FVector</span>(<span class="hljs-number">0.0f</span>,<span class="hljs-number">0.0f</span>,<span class="hljs-number">0.0f</span>)&#125;,<br>    &#123;<span class="hljs-built_in">TEXT</span>(<span class="hljs-string">&quot;Opacity&quot;</span>), PF_G8, PF_BC4, PF_R32G32B32A32_UINT, <span class="hljs-built_in">FVector</span>(<span class="hljs-number">1.0f</span>,<span class="hljs-number">0.0f</span>,<span class="hljs-number">0.0f</span>)&#125;,<br>    &#123;<span class="hljs-built_in">TEXT</span>(<span class="hljs-string">&quot;Normal&quot;</span>), PF_R8G8, PF_BC5, PF_R32G32A32_UINT, <span class="hljs-built_in">FVector</span>(<span class="hljs-number">0.0f</span>,<span class="hljs-number">0.0f</span>,<span class="hljs-number">0.0f</span>)&#125;,<br>    &#123;<span class="hljs-built_in">TEXT</span>(<span class="hljs-string">&quot;Emissive&quot;</span>), PF_BC4, PF_FloatR11G11B10, PF_BC6H, PF_R32G32B32A32_UINT, <span class="hljs-built_in">FVector</span>(<span class="hljs-number">0.0f</span>,<span class="hljs-number">0.0f</span>,<span class="hljs-number">0.0f</span>)&#125;<br>&#125;;<br></code></pre></td></tr></table></figure>
<h4 id="view-dependent-per-object-card-resolution" tabindex="-1" id="View-Dependent-Per-Object-Card-Resolution">View Dependent Per-Object Card Resolution</h4>
<p>查看每对象卡分辨率</p>
<p>128 x 128 physical pages in a 4096 x 4096 atlas</p>
<p>4096 x 4096 图集中的 128 x 128 个物理页面</p>
<p>Card capture res &gt;= 128 x 128</p>
<p>卡捕获分辨率 &gt;= 128 x 128</p>
<ul>
<li>
<p>Split into multiple 128 x 128 physical pages</p>
<p>拆分为多个 128 x 128 物理页面</p>
</li>
</ul>
<p>Card capture res &lt; 128 x 128</p>
<p>卡捕获分辨率 &lt; 128 x 128</p>
<ul>
<li>
<p>Sub-allocate from a 128 x 128 physical page</p>
<p>从 128 x 128 物理页面进行子分配</p>
</li>
</ul>
<p><img src="21.67.webp" alt="webp"></p>
<h4 id="how-can-we-%E2%80%9Cfreeze%E2%80%9D-lighting-on-surface-cache" tabindex="-1" id="How-can-we-“freeze”-lighting-on-Surface-Cache">How can we “freeze” lighting on Surface Cache</h4>
<p>我们如何在 Surface Cache 上“冻结”照明</p>
<p>How to compute lighting on hit?</p>
<p>如何计算命中时的光照？</p>
<ul>
<li>
<p>Is the pixel under the shadow</p>
<p>像素是否位于阴影之下</p>
</li>
<li>
<p>How can we handle multi-bounce</p>
<p>我们如何处理多次反弹</p>
</li>
</ul>
<h4 id="lighting-cache-pipeline" tabindex="-1" id="Lighting-Cache-Pipeline">Lighting Cache Pipeline</h4>
<p>照明缓存管道</p>
<p><img src="21.68.webp" alt="webp"></p>
<h4 id="direct-lighting" tabindex="-1" id="Direct-Lighting">Direct Lighting</h4>
<p>直接照明</p>
<ul>
<li>
<p>Divide 128 x 128 page into 8 x 8 tiles</p>
<p>将 128 x 128 页划分为 8 x 8 个图块</p>
</li>
<li>
<p>Cull lights with 8 x 8 tile</p>
<p>8 x 8 瓷砖装饰灯</p>
</li>
<li>
<p>Select first 8 lights per tile</p>
<p>为每块瓷砖选择前 8 盏灯</p>
</li>
<li>
<p>1bit shadow mask</p>
<p>1bit 荫罩</p>
</li>
</ul>
<p><img src="21.69.webp" alt="webp"></p>
<h4 id="one-tile-can-be-lited-by-multilights%2C-the-result-will-be-accumlated" tabindex="-1" id="One-tile-can-be-lited-by-multilights-the-result-will-be-accumlated">One tile can be lited by multilights, the result will be accumlated</h4>
<p>一块瓷砖可以被多盏灯照亮，结果会累加</p>
<p><img src="21.70.webp" alt="webp"></p>
<p>Global SDF can’t sample surface cache</p>
<p>全局 SDF 无法对曲面缓存进行采样</p>
<ul>
<li>
<p>no per mesh information, only hit position and normal</p>
<p>无网格信息，仅命中位置和正常</p>
</li>
</ul>
<p>Use voxel lighting to sample</p>
<p>使用体素照明进行采样</p>
<p><img src="21.71.webp" alt="webp"></p>
<h4 id="voxel-clipmapfor-radiance-caching-of-the-whole-scene" tabindex="-1" id="Voxel-Clipmapfor-Radiance-Caching-of-the-Whole-Scene">Voxel Clipmapfor Radiance Caching of the Whole Scene</h4>
<p>体素剪贴画用于整个场景的辐射缓存</p>
<p>4 level clipmaps of 64x64x64 voxels</p>
<p>64 x 64 x 64 体素的 4 级剪贴图</p>
<ul>
<li>
<p>Radiance per 6 directions per voxel</p>
<p>每个体素每 6 个方向的辐射</p>
</li>
<li>
<p>Sample and interpolate 3 directions by normal</p>
<p>通过法线对 3 个方向进行采样和插值</p>
</li>
<li>
<p>Clipmap0 cover 50m^3, voxel size is 0.78m</p>
<p>Clipmap0 覆盖 50m^3，体素大小为 0.78m</p>
</li>
<li>
<p>Store in 3D texture</p>
<p>存储在 3D 纹理中</p>
</li>
</ul>
<p>Clipmapupdate frequency rules</p>
<p>剪贴图更新频率规则</p>
<table>
<thead>
<tr>
<th></th>
<th>Clipmap 0</th>
<th>Clipmap 1</th>
<th>Clipmap 2</th>
<th>Clipmap 3</th>
</tr>
</thead>
<tbody>
<tr>
<td>Start_Frame</td>
<td>0</td>
<td>1</td>
<td>3</td>
<td>7</td>
</tr>
<tr>
<td>Update_interval</td>
<td>2</td>
<td>4</td>
<td>8</td>
<td>8</td>
</tr>
</tbody>
</table>
<p><img src="21.72.webp" alt="webp"></p>
<h4 id="build-voxel-faces-by-short-ray-cast" tabindex="-1" id="Build-Voxel-Faces-by-Short-Ray-cast">Build Voxel Faces by Short Ray cast</h4>
<p>通过短光线投射构建体素人脸</p>
<ul>
<li>
<p>Trace mesh DF on 6 directions per voxel</p>
<p>在每个体素的 6 个方向上跟踪网格 DF</p>
</li>
<li>
<p>Hit mesh id and hit distance</p>
<p>命中网格 id 和命中距离</p>
</li>
<li>
<p>RayStart = VoxelCenter – AxisDir * VoxelRaidus</p>
</li>
<li>
<p>RayEnd = VoxelCenter + AxisDir * VoxelRaidus</p>
</li>
</ul>
<p><img src="21.73.webp" alt="webp"></p>
<p>store hit infro intovisibilty buffer uint32 [Hit distance| Hit object id]</p>
<p>将命中信息存储到可见性缓冲区 uint32 [命中距离|命中对象 id]</p>
<h4 id="filter-most-object-out-by-4x4x4-tiles" tabindex="-1" id="Filter-Most-Object-Out-by-4x4x4-Tiles">Filter Most Object Out by 4x4x4 Tiles</h4>
<p>通过 4x4x4 瓷砖过滤掉大部分对象</p>
<p><img src="21.74.webp" alt="webp"></p>
<h4 id="inject-light-into-clipmap" tabindex="-1" id="Inject-light-into-clipmap">Inject light into clipmap</h4>
<p>将光线注入 clipmap</p>
<ul>
<li>
<p>Clear all voxel lighting in entire Clipmap</p>
<p>清除整个 Clipmap 中的所有体素照明</p>
</li>
<li>
<p>Compact all valid VisBuffer in Clipmap</p>
<p>压缩 Clipmap 中的所有有效 VisBuffer</p>
</li>
<li>
<p>Sampling FinalLighting from VisBufferand inject lighting</p>
<p>从 VisBuffer 中采样 FinalLighting 并注入照明</p>
</li>
</ul>
<p><img src="21.75.webp" alt="webp"></p>
<h4 id="indirect-lighting" tabindex="-1" id="Indirect-Lighting">Indirect Lighting</h4>
<p>间接照明</p>
<ul>
<li>
<p>Place 2 x 2 probes on each tile -each probe cover 4 x 4 texels</p>
<p>在每个瓷砖上放置 2 x 2 个探头，每个探头覆盖 4 x 4 纹理像素</p>
</li>
<li>
<p>Trace 16 rays from hemisphere per probe</p>
<p>每个探测器追踪 16 条来自半球的射线</p>
</li>
<li>
<p>Jitter probe placement and ray directions</p>
<p>抖动探头位置和射线方向</p>
</li>
</ul>
<p><img src="21.76.webp" alt="webp"></p>
<ul>
<li>
<p>Spatial filtering between probes</p>
<p>探头之间的空间滤波</p>
</li>
<li>
<p>Convert to TwoBandSH (store in half4)</p>
<p>转换为 TwoBandSH（存储在 half4）</p>
</li>
</ul>
<p><img src="21.77.webp" alt="webp"></p>
<h4 id="per-pixel-indirect-lighting-with-4-probe-interpolation" tabindex="-1" id="Per-Pixel-Indirect-Lighting-with-4-Probe-Interpolation">Per-Pixel Indirect Lighting with 4 Probe Interpolation</h4>
<p>采用 4 探头插值的每像素间接照明</p>
<ul>
<li>
<p>Integrate on pixel -bilinear interpolation of 4 neighbor probes</p>
<p>4 个相邻探针的像素双线性插值集成</p>
</li>
</ul>
<p><img src="21.78.webp" alt="webp"></p>
<h4 id="combine-lighting" tabindex="-1" id="Combine-Lighting">Combine Lighting</h4>
<p>组合照明</p>
<p>FinalLighting = (DirectLighting + IndirectLighting) * Diffuse_Lambert(Albedo) + Emissive;</p>
<p><img src="21.79.webp" alt="webp"></p>
<h4 id="ligting-update-strategy" tabindex="-1" id="Ligting-Update-Strategy">Ligting Update Strategy</h4>
<p>Ligting 更新策略</p>
<p>Fix budget</p>
<p>固定预算</p>
<ul>
<li>
<p>1024 x 1024 texels for direct lighting</p>
<p>1024 x 1024 像素用于直接照明</p>
</li>
<li>
<p>512 x 512 texels for indirect lighting</p>
<p>512 x 512 像素用于间接照明</p>
</li>
<li>
<p>Select pages to update based on Priority = LastUsed-LastUpdated</p>
<p>根据优先级 = 上次使用上次更新选择要更新的页面</p>
</li>
</ul>
<p>Priority queue using bucket sort</p>
<p>使用桶排序的优先级队列</p>
<ul>
<li>
<p>128 buckets</p>
<p>128 桶</p>
</li>
<li>
<p>Update buckets with priority until reaching budget</p>
<p>优先更新存储桶，直到达到预算</p>
</li>
</ul>
<h4 id="phase-3%3A-build-a-lot-of-probes-with-different-kinds" tabindex="-1" id="Phase-3-Build-a-lot-of-Probes-with-Different-Kinds">Phase 3: Build a lot of Probes with Different Kinds</h4>
<p>第三阶段：构建大量不同类型的探测器</p>
<h4 id="screen-space-probe" tabindex="-1" id="Screen-Space-Probe">Screen Space Probe</h4>
<p>屏幕空间探测器</p>
<p>Octahedral atlas with border</p>
<p>带边框的八面体图集</p>
<ul>
<li>
<p>Typically 8 x 8 per probe</p>
<p>通常每个探头 8 x 8</p>
</li>
<li>
<p>Uniformly distributed world space directions</p>
<p>均匀分布的世界空间方向</p>
</li>
<li>
<p>Neighbors have matching directions</p>
<p>邻居有匹配的方向</p>
</li>
</ul>
<p>Radiance and HitDistance in 2d atlas</p>
<p>二维图谱中的辐射度和 HitDistance</p>
<p><img src="21.80.webp" alt="webp"></p>
<p>Octahedron mapping</p>
<p>八面体映射</p>
<p><img src="21.81.webp" alt="webp"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function">float2 <span class="hljs-title">unitVectorTo0ctahedron</span><span class="hljs-params">(float3 N)</span></span><br><span class="hljs-function"></span>&#123;<br>    N.xy /= <span class="hljs-built_in">dot</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">abs</span>(N));<br>    <span class="hljs-keyword">if</span>(N.z&lt;= <span class="hljs-number">0</span>)<br>    &#123;<br>    	x_factor = N.x &gt;= <span class="hljs-number">0</span> ? <span class="hljs-number">1.0</span> : <span class="hljs-number">-1.0</span>;<br>        y_factor = N.y &gt;= <span class="hljs-number">0</span> ? <span class="hljs-number">1.0</span> : <span class="hljs-number">-1.0</span>;<br>        N.xy = (<span class="hljs-number">1</span> - <span class="hljs-built_in">abs</span>(N.yx)) * <span class="hljs-built_in">float2</span>(x_factor, y_factor);<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">float2</span>(N.xy);<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="screen-probe-placement" tabindex="-1" id="Screen-Probe-Placement">Screen Probe Placement</h4>
<p>屏幕探头放置</p>
<ul>
<li>
<p>Adaptive placement with Hierarchical Refinement</p>
<p>具有层次细化的自适应布局</p>
</li>
<li>
<p>Iteratively place where interpolation fails</p>
<p>迭代地放置插值失败的位置</p>
</li>
</ul>
<p><img src="21.82.webp" alt="webp"></p>
<h4 id="plane-distance-weighting-of-probe-interpolation" tabindex="-1" id="Plane-distance-weighting-of-Probe-Interpolation">Plane distance weighting of Probe Interpolation</h4>
<p>探针插值的平面距离加权</p>
<p><img src="21.83.webp" alt="webp"></p>
<h4 id="detect-non-interpolatable-cases" tabindex="-1" id="Detect-Non-Interpolatable-Cases">Detect Non-Interpolatable Cases</h4>
<p>检测不可插值的案例</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs C++">float4 PlaneDistances;<br>PlaneDistances.x = <span class="hljs-built_in">abs</span>(<span class="hljs-built_in">dot</span>(<span class="hljs-built_in">float4</span>(Position00, <span class="hljs-number">-1</span>), ScenePlane));<br>PlaneDistances.y = <span class="hljs-built_in">abs</span>(<span class="hljs-built_in">dot</span>(<span class="hljs-built_in">float4</span>(Position10, <span class="hljs-number">-1</span>), ScenePlane));<br>PlaneDistances.z = <span class="hljs-built_in">abs</span>(<span class="hljs-built_in">dot</span>(<span class="hljs-built_in">float4</span>(Position01, <span class="hljs-number">-1</span>), ScenePlane));<br>PlaneDistances.w = <span class="hljs-built_in">abs</span>(<span class="hljs-built_in">dot</span>(<span class="hljs-built_in">float4</span>(Position11, <span class="hljs-number">-1</span>), ScenePlane));<br><br>float4 RelativeDepthDifference = PlaneDistances / SceneDepth;<br><br>Depthweights = CornerDepths &gt; <span class="hljs-number">0</span> ? <span class="hljs-built_in">exp2</span>(<span class="hljs-number">-10000.</span> <span class="hljs-number">0</span>f * (RelativeDepthDifference * RelativeDepthDifference)) : <span class="hljs-number">0</span>;<br><br>InterpolationWeights = <span class="hljs-built_in">float4</span>(<br>    (<span class="hljs-number">1</span>-BilinearWeights.y) * (<span class="hljs-number">1</span>-BilinearWeights.x),<br>    (<span class="hljs-number">1</span>-BilinearWeights.y) * BilinearWeights.x,<br>    BilinearWeights.y * (<span class="hljs-number">1</span> - BilinearWeights.x),<br>    BilinearWeights.y * BilinearWeights.x);<br>InterpolationWeights *= DepthWeights;<br><br><span class="hljs-type">float</span> Epsilon = <span class="hljs-number">.01f</span>;<br>ScreenProbeSample.Weights /= <span class="hljs-built_in">max</span>(<span class="hljs-built_in">dot</span>(ScreenProbeSample.Weights, <span class="hljs-number">1</span>), Epsilon);<br><span class="hljs-type">float</span> LightingIsValid = (<span class="hljs-built_in">dot</span>(ScreenProbeSample.Weights, <span class="hljs-number">.1</span>) &lt; <span class="hljs-number">1.0f</span> - Epsilon) ? <span class="hljs-number">0.0f</span> : <span class="hljs-number">1.0f</span>.<br></code></pre></td></tr></table></figure>
<h4 id="screen-probe-atlas" tabindex="-1" id="Screen-Probe-Atlas">Screen Probe Atlas</h4>
<p>屏幕探针图谱</p>
<ul>
<li>
<p>Atlas have upper limit for real-time</p>
<p>Atlas 有实时上限</p>
</li>
<li>
<p>Place adaptive probes at the bottom of the atlas</p>
<p>将自适应探头放置在图谱底部</p>
</li>
</ul>
<p><img src="21.84.webp" alt="webp"></p>
<p><img src="21.85.webp" alt="webp"></p>
<h4 id="screen-probe-jitter" tabindex="-1" id="Screen-Probe-Jitter">Screen Probe Jitter</h4>
<p>屏幕探头抖动</p>
<ul>
<li>
<p>Place probedirectly on pixels</p>
<p>将探测器直接放置在像素上</p>
</li>
<li>
<p>Temporally jitter placement and direction</p>
<p>时间抖动位置和方向</p>
</li>
<li>
<p>Use Hammersley points in [0, 15]</p>
<p>在 [0,15] 中使用 Hammersley 积分</p>
</li>
</ul>
<p><img src="21.86.webp" alt="webp"></p>
<h3 id="importance-sampling-1" tabindex="-1" id="Importance-Sampling-2">Importance Sampling</h3>
<p>重要性采样</p>
<h4 id="but-too-much-noise-at-%C2%BD-ray-per-pixel" tabindex="-1" id="But-too-much-noise-at-½-ray-per-pixel">But too much noise at ½ ray per pixel</h4>
<p>但每像素 ½ 射线的噪声太大</p>
<p><img src="21.87.webp" alt="webp"></p>
<h4 id="better-sampling--importance-sample-incoming-lighting-and-brdf" tabindex="-1" id="Better-sampling-importance-sample-incoming-lighting-and-BRDF">Better sampling -importance sample incoming lighting and BRDF</h4>
<p>更好的采样-重要样本输入照明和 BRDF</p>
<p><img src="21.88.webp" alt="webp"></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>lim</mi><mrow><mi>N</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow></msub><mfrac><mn>1</mn><mi>N</mi></mfrac><msubsup><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><mfrac><mrow><msub><mi>L</mi><mi>i</mi></msub><mo>(</mo><mi>l</mi><mo>)</mo><msub><mi>f</mi><mi>s</mi></msub><mo>(</mo><mi>l</mi><mo>→</mo><mi>v</mi><mo>)</mo><mi>cos</mi><mo>(</mo><mi>θ</mi><mi>l</mi><mo>)</mo></mrow><mrow><msub><mi>P</mi><mi>k</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\lim_{N\to\infty}\frac1N\sum_{k=1}^N\frac{L_i(l)f_s(l\to v)\cos(\theta l)}{P_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.01em;"></span><span class="strut bottom" style="height:1.4608599999999998em;vertical-align:-0.4508599999999999em;"></span><span class="base textstyle uncramped"><span class="mop"><span class="mop">lim</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mrel">→</span><span class="mord mathrm">∞</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">∑</span><span class="vlist"><span style="top:0.30001em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.364em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.485em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mclose">)</span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">s</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mrel">→</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mop">cos</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">θ</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></p>
<p>We would like to distribute rays proportional to the integrand</p>
<p>我们希望光线的分布与被积函数成正比</p>
<p>How can we estimate these?</p>
<p>我们如何估算这些？</p>
<h4 id="approximate-radiance-importance-from-last-frame-probes" tabindex="-1" id="Approximate-Radiance-Importance-from-Last-Frame-Probes">Approximate Radiance Importance from Last Frame Probes</h4>
<p>最后一帧探测器的近似辐射重要性</p>
<p><img src="21.89.webp" alt="webp"></p>
<p>Incoming Radiance:</p>
<p>入射辐射：</p>
<ul>
<li>
<p>Reproject to last frame and average the four neighboring Screen Probes Radiance</p>
<p>重新投影到最后一帧，并对四个相邻的屏幕探头辐射进行平均</p>
</li>
<li>
<p>No need to do an expensive search, as rays already indexed in octahedral atlas</p>
<p>无需进行昂贵的搜索，因为光线已经在八面体图集中索引</p>
</li>
<li>
<p>Fallback to World Space Probe Radiance ifneighboring probes are occluded</p>
<p>如果相邻探测器被遮挡，则回退到世界空间探测器辐射</p>
</li>
</ul>
<h4 id="accumulate-normal-distribution-nearby" tabindex="-1" id="Accumulate-Normal-Distribution-Nearby">Accumulate Normal Distribution Nearby</h4>
<p>附近累积正态分布</p>
<p><img src="21.90.webp" alt="webp"></p>
<p>BRDF:</p>
<ul>
<li>
<p>For a probe that’s placed on a flat wall, about half of its spherehaving a zero BRDF</p>
<p>对于放置在平坦墙壁上的探头，其球体的大约一半具有零 BRDF</p>
</li>
<li>
<p>Accumulate from pixels that will use this Screen Probe</p>
<p>从将使用此屏幕探测器的像素中累积</p>
</li>
</ul>
<h4 id="nearby-normal-accumulation" tabindex="-1" id="Nearby-Normal-Accumulation">Nearby Normal Accumulation</h4>
<p>附近正常堆积</p>
<ul>
<li>
<p>Gathter 64 neighbor pixels around current probe’s pixel in a 32 x 32 pixelrange</p>
<p>在 32 x 32 像素范围内收集当前探头像素周围的 64 个相邻像素</p>
</li>
<li>
<p>Acceptpixel if its depth weight &gt; 0.1</p>
<p>如果像素的深度权重 &gt; 0.1，则接受像素</p>
</li>
<li>
<p>Accumulate these pixels’ world normal into SH</p>
<p>将这些像素的世界法线累积到 SH 中</p>
</li>
</ul>
<p><img src="21.91.webp" alt="webp"></p>
<h4 id="structured-importance-sampling" tabindex="-1" id="Structured-Importance-Sampling">Structured Importance Sampling</h4>
<p>结构化重要性抽样</p>
<ul>
<li>
<p>Assigns a small number of samples to hierarchically structured areas of the Probability Density Function (PDF)</p>
<p>将少量样本分配给概率密度函数的分层结构区域（PDF）</p>
</li>
<li>
<p>Achieves good global stratification</p>
<p>实现良好的全球分层</p>
</li>
<li>
<p>Sample placement requires offline algorithm</p>
<p>样本放置需要离线算法</p>
</li>
</ul>
<p><img src="21.92.webp" alt="webp"></p>
<p>Maps perfectly to Octahedral mip quadtree!</p>
<p>完美映射到八面体 mip 四叉树！</p>
<p><img src="21.93.webp" alt="webp"></p>
<h4 id="fix-budget-importance-sampling-based-on-lighting-and-brdf" tabindex="-1" id="Fix-Budget-Importance-Sampling-based-on-Lighting-and-BRDF">Fix Budget Importance Sampling based on Lighting and BRDF</h4>
<p>基于照明和 BRDF 的固定预算重要性抽样</p>
<ul>
<li>
<p>Start with uniformly distributed probe ray directions</p>
<p>从均匀分布的探头射线方向开始</p>
</li>
<li>
<p>Fixed probe tracing ray count = 64</p>
<p>固定探头跟踪射线计数 = 64</p>
</li>
<li>
<p>Calculate BRDF PDF * Lighting PDF for each Octahedral texel</p>
<p>计算每个八面体纹理的 BRDF *  Lighting PDF</p>
</li>
<li>
<p>Sort rays by PDF from low to high</p>
<p>按 PDF 从低到高对光线进行排序</p>
</li>
<li>
<p>For every 3 rays with PDF below cull threshold, supersample the matching highest PDF ray</p>
<p>对于 PDF 低于剔除阈值的每 3 条射线，对匹配的最高 PDF 射线进行超采样</p>
</li>
</ul>
<p><img src="21.94.webp" alt="webp"></p>
<p><img src="21.95.webp" alt="webp"></p>
<div class="subfields"><div class="subfield"><p><img src="21.96.webp" alt="webp"></p>
</div>
<div class="subfield"><p><img src="21.97.webp" alt="webp"></p>
</div></div>
<p>​	右边是使用 BRDF 和 Lighting PDF 的效果。</p>
<h3 id="denoising-and-spatial-probe-filtering" tabindex="-1" id="Denoising-and-Spatial-Probe-Filtering">Denoising and Spatial Probe Filtering</h3>
<p>去噪和空间探测滤波</p>
<h4 id="denoise%3A-spatial-filtering-for-probe" tabindex="-1" id="Denoise-Spatial-filtering-for-Probe">Denoise: Spatial filtering for Probe</h4>
<p>去噪：探头的空间滤波</p>
<p>Large spatial filter for cheap</p>
<p>大空间滤波器，成本低</p>
<ul>
<li>
<p>Each probe cover 16 x 16 pixels, 3 x 3 filtering kernelin probe space equals 48 x 48 inscreen space</p>
<p>每个探头覆盖 16 x 16 像素，探头空间中的 3 x 3 滤波核等于屏幕空间中的 48 x 48</p>
</li>
</ul>
<p>Can ignore normal differences between spatial neighbors</p>
<p>可以忽略空间邻居之间的正常差异</p>
<ul>
<li>
<p>Only depth weighting</p>
<p>仅深度加权</p>
</li>
</ul>
<p><img src="21.98.webp" alt="webp"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">float</span> <span class="hljs-title">GetFilterPositionWeight</span><span class="hljs-params">(floatProbeDepth, <span class="hljs-type">float</span> sceneDepth)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">float</span> DepthDifference = <span class="hljs-built_in">abs</span>(ProbeDepth - SceneDepth);<br>    <span class="hljs-type">float</span> RelativeDepthDifference = DepthDifference / sceneDepth;<br>    <span class="hljs-keyword">return</span> ProbeDepth &gt;= <span class="hljs-number">0</span> ? <span class="hljs-built_in">exp2</span>(-spatialFilterPositionweightscale * (RelativeDepthDifference * RelativeDepthDifference)) : <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="denoise%3A-gather-radiance-from-neighbors" tabindex="-1" id="Denoise-Gather-Radiance-from-neighbors">Denoise: Gather Radiance from neighbors</h4>
<p>降噪：从邻居那里收集辐射</p>
<p>Gather radiance from matching Octahedral cell in neighbor probes</p>
<p>在相邻探针中收集匹配八面体细胞的辐射</p>
<p>Error weighting:</p>
<p>错误加权：</p>
<ul>
<li>
<p>Angle error from reprojected neighbor ray hits (less than 10 degree)</p>
<p>重新投影的相邻光线照射的角度误差（小于 10 度）</p>
</li>
<li>
<p>Filters distant lighting, preserves local shadowing</p>
<p>过滤远距离照明，保留局部阴影</p>
</li>
</ul>
<p><img src="21.99.webp" alt="webp"></p>
<p><img src="21.100.webp" alt="webp"></p>
<h4 id="clamp-distance-mismatching" tabindex="-1" id="Clamp-Distance-Mismatching">Clamp Distance Mismatching</h4>
<p>夹紧距离不匹配</p>
<p>Angle error biases toward distant light = leaking</p>
<p>角度误差偏向远光 = 泄漏</p>
<ul>
<li>
<p>Distant light has no parallax and never gets rejected</p>
<p>远光没有视差，永远不会被拒绝</p>
</li>
</ul>
<p>Solution: clamp neighbor hit distance to our own before reprojection</p>
<p>解决方案：在重新投影之前，将邻居的击中距离限制在我们自己的距离</p>
<p><img src="21.101.webp" alt="webp"></p>
<p><img src="21.102.webp" alt="webp"></p>
<h3 id="world-space-probes-and-ray-connecting" tabindex="-1" id="World-Space-Probes-and-Ray-Connecting">World Space Probes and Ray Connecting</h3>
<p>世界空间探测器和射线连接</p>
<h4 id="world-space-radiance-cache" tabindex="-1" id="World-Space-Radiance-Cache">World Space Radiance Cache</h4>
<p>世界空间辐射缓存</p>
<p>Problem: distant lighting</p>
<p>问题：远距离照明</p>
<ul>
<li>
<p>Noise from small bright feature increases with distance</p>
<p>小亮特征的噪声随着距离的增加而增加</p>
</li>
<li>
<p>Long incoherent traces are slow</p>
<p>长的非相干痕迹很慢</p>
</li>
<li>
<p>Distant lighting is changing slowly -opportunity to cache</p>
<p>远距离照明变化缓慢——缓存机会</p>
</li>
<li>
<p>Redundant operations for nearby Screen Probes</p>
<p>附近屏幕探头的冗余操作</p>
</li>
</ul>
<p>Solution: separate sampling for distant Radiance</p>
<p>解决方案：对远距离辐射进行单独采样</p>
<ul>
<li>
<p>World space Radiance Caching for distant lighting</p>
<p>用于远距离照明的世界空间辐射缓存</p>
</li>
<li>
<p>Stable error since world space -easy to hide</p>
<p>自世界空间以来的稳定错误-易于隐藏</p>
</li>
</ul>
<p><img src="21.103.webp" alt="webp"></p>
<p>Placement</p>
<ul>
<li>
<p>4 level clipmaps around camera</p>
<p>相机周围的 4 级 clipmap</p>
</li>
<li>
<p>default resolution is 48^3</p>
<p>默认分辨率为 48^3</p>
</li>
<li>
<p>clipmap0size is 50m^3</p>
<p>clipmap0 的大小为 50m^3</p>
</li>
</ul>
<p>Radiance</p>
<ul>
<li>
<p>32 x 32 atlas a per probe</p>
<p>每 32 x 32 的区域放置一个探头</p>
</li>
</ul>
<p><img src="21.104.webp" alt="webp"></p>
<h4 id="connecting-rays" tabindex="-1" id="Connecting-rays">Connecting rays</h4>
<p>连接射线</p>
<ul>
<li>
<p>How to connect Screen Probe ray and World Probe ray</p>
<p>如何连接 Screen Probe ray 和 World Probe ray</p>
</li>
</ul>
<p><img src="21.105.webp" alt="webp"></p>
<ul>
<li>
<p>World Probe ray must skip the interpolation footprint</p>
<p>World Probe 射线必须跳过插值足迹</p>
</li>
</ul>
<p><img src="21.106.webp" alt="webp"></p>
<ul>
<li>
<p>Screen Probe ray must cover interpolation footprint + skipped distance</p>
<p>屏幕探测光线必须覆盖插值足迹 + 跳过距离</p>
</li>
</ul>
<p><img src="21.107.webp" alt="webp"></p>
<ul>
<li>
<p>Problem: leaking!</p>
<p>问题：泄漏！</p>
</li>
<li>
<p>World probe radiance should have been occluded</p>
<p>世界探测器的辐射应该被遮挡了</p>
<ul>
<li>
<p>But wasn’t due to incorrect parallax</p>
<p>但不是因为视差不正确</p>
</li>
</ul>
</li>
</ul>
<p><img src="21.108.webp" alt="webp"></p>
<ul>
<li>
<p>Solution: simple sphere parallax</p>
<p>解决方案：简单球面视差</p>
</li>
<li>
<p>Reproject Screen Probe ray intersection with World Probe sphere</p>
<p>重新投影屏幕探头射线与 World Probe 球体的交点</p>
</li>
</ul>
<p><img src="21.109.webp" alt="webp"></p>
<h4 id="placement-and-caching" tabindex="-1" id="Placement-and-caching">Placement and caching</h4>
<p>放置和缓存</p>
<ul>
<li>
<p>Mark any position that we will interpolate from later in clipmap indirections</p>
<p>标记我们稍后将在 clipmap 间接中插入的任何位置</p>
</li>
<li>
<p>For each marked world probe:</p>
<p>对于每个标记的世界探测器：</p>
<ul>
<li>
<p>Reuse traces from last frame, or allocate new probe index</p>
<p>重用上一帧的跟踪，或分配新的探测索引</p>
</li>
<li>
<p>Re-trace a subset of cache hits to propagate lighting changes</p>
<p>重新跟踪缓存命中的子集以传播照明变化</p>
</li>
</ul>
</li>
</ul>
<p><img src="21.110.webp" alt="webp"></p>
<p>Place Peobes → Reuse existing probe traces → Generate rays → Trace → Probe space filtering</p>
<p>放置探针 → 重复使用现有的探针痕迹 → 生成射线 → 痕迹 → 探针空间过滤</p>
<ul>
<li>
<p>Without World Space Probes</p>
<p>没有世界空间探针</p>
</li>
</ul>
<p><img src="21.111.webp" alt="webp"></p>
<ul>
<li>
<p>Screen Radiance Cache for the first 2meters</p>
<p>前 2 米的屏幕辐射缓存</p>
</li>
<li>
<p>World Radiance Cache for any lighting further than that.</p>
<p>World Radiance Cache 适用于任何超出此范围的照明。</p>
</li>
</ul>
<p><img src="21.112.webp" alt="webp"></p>
<h3 id="phase-4-%3A-shading-full-pixels-with-screen-space-probes" tabindex="-1" id="Phase-4-Shading-Full-Pixels-with-Screen-Space-Probes">Phase 4 : Shading Full Pixels with Screen Space Probes</h3>
<p>阶段 4：使用屏幕空间探测器对全像素进行着色</p>
<p>Convert Probe Radiance to 3rd order Spherical Harmonic:</p>
<p>将探头辐射转换为三阶球面谐波：</p>
<ul>
<li>
<p>SH is calculated per Screen Probe</p>
<p>SH 按屏幕探头计算</p>
</li>
<li>
<p>Full res pixels load SH coherently</p>
<p>全分辨率像素相干加载 SH</p>
</li>
<li>
<p>SH Diffuse integration cheap and high quality</p>
<p>SH Diffuse 集成价格低廉，质量上乘</p>
</li>
</ul>
<p><img src="21.113.webp" alt="webp"></p>
<p>importance sample the BRDF to get ray directions, and then sample the Radiance Cache.</p>
<p>对 BRDF 进行重要性采样以获取光线方向，然后对辐射缓存进行采样。</p>
<h4 id="final-integration-with-sh" tabindex="-1" id="Final-integration-with-SH">Final integration with SH</h4>
<p>与 SH 的最终整合</p>
<p><img src="21.114.webp" alt="webp"></p>
<h3 id="overall%2C-performance-and-result" tabindex="-1" id="Overall-Performance-and-Result">Overall, Performance and Result</h3>
<p>总体、性能和结果</p>
<h4 id="speed-of-different-tracing-methods" tabindex="-1" id="Speed-of-Different-Tracing-Methods">Speed of Different Tracing Methods</h4>
<p>不同追踪方法的速度</p>
<p><img src="21.115.webp" alt="webp"></p>
<p>Red–Screen Space Trace 红色-屏幕空间轨迹</p>
<p>fail to hit 未能命中↓</p>
<p>Green–Mesh SDF Trace 绿色–网格 SDF 轨迹</p>
<p>fail to hit 未能命中↓</p>
<p>Blue–Global SDF Trace 蓝色–全球 SDF 跟踪</p>
<p><img src="21.116.webp" alt="webp"></p>
<p><img src="21.117.webp" alt="webp"></p>
<div class="subfields"><div class="subfield"><p><img src="21.118.webp" alt="webp"></p>
</div>
<div class="subfield"><p><img src="21.119.webp" alt="webp"></p>
</div></div>
<p>​	右边是打开 SSGI 的效果。</p>
<h4 id="performance" tabindex="-1" id="Performance">Performance</h4>
<p>性能</p>
<p>Playstation 5</p>
<p>1080p internal resolution</p>
<p>1080p 内部分辨率</p>
<p>Temporal Super Resolution to 4k</p>
<p>时间超分辨率 4k</p>
<p><img src="21.120.webp" alt="webp"></p>
<p><img src="21.121.webp" alt="webp"></p>
<div class="subfields"><div class="subfield"><p><img src="21.122.webp" alt="webp"></p>
</div>
<div class="subfield"><p><img src="21.123.webp" alt="webp"></p>
</div></div>
<div class="subfields"><div class="subfield"><p><img src="21.124.webp" alt="webp"></p>
</div>
<div class="subfield"><p><img src="21.125.webp" alt="webp"></p>
</div></div>
<h3 id="conclusion" tabindex="-1" id="Conclusion">Conclusion</h3>
<p>结论</p>
<h4 id="complexity-of-real-rendering" tabindex="-1" id="Complexity-of-Real-Rendering">Complexity of Real Rendering</h4>
<p><img src="21.126.webp" alt="webp"></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mi>o</mi></msub><mo>(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>o</mi></msub><mo>)</mo><mo>=</mo><msub><mi>L</mi><mi>e</mi></msub><mo>(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>o</mi></msub><mo>)</mo><mo>+</mo><msub><mo>∫</mo><mrow><msup><mi>H</mi><mn>2</mn></msup></mrow></msub><msub><mi>f</mi><mi>r</mi></msub><mo>(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>o</mi></msub><mo separator="true">,</mo><msub><mi>ω</mi><mi>i</mi></msub><mo>)</mo><msub><mi>L</mi><mi>i</mi></msub><mo>(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>ω</mi><mi>i</mi></msub><mo>)</mo><mi>cos</mi><msub><mi>θ</mi><mi>i</mi></msub><mi>d</mi><msub><mi>ω</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">L_o(x,\omega_o)=L_e(x,\omega_o)+\int_{H^2}f_r(x,\omega_o,\omega_i)L_i(x,\omega_i)\cos\theta_id\omega_i
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.36em;"></span><span class="strut bottom" style="height:2.27225em;vertical-align:-0.91225em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">e</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mop"><span class="op-symbol large-op mop" style="margin-right:0.44445em;top:-0.0011249999999999316em;">∫</span><span class="vlist"><span style="top:0.91225em;margin-right:0.05em;margin-left:-0.44445em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mop">cos</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">θ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">d</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">ω</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span></span></p>
<p>​	这个方程可以解决所有的渲染问题，但是在实际应用中需要根据性能进行取舍。</p>
<h3 id="references" tabindex="-1" id="References">References</h3>
<p>参考</p>
<h4 id="monte-carlo-integration" tabindex="-1" id="Monte-Carlo-Integration">Monte Carlo Integration</h4>
<ul>
<li>Importace Sampling: <a target="_blank" rel="noopener" href="https://patapom.com/blog/Math/ImportanceSampling/">https://patapom.com/blog/Math/ImportanceSampling/</a></li>
<li>Notes on importance sampling: <a target="_blank" rel="noopener" href="https://www.tobias-franke.eu/log/2014/03/30/notes_on_importance_sampling.html">https://www.tobias-franke.eu/log/2014/03/30/notes_on_importance_sampling.html</a></li>
<li>Chinagraph2020 会前课程 3:<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1my4y1z76s?p=3&amp;vd_source=5e38e5c84aa6ff6cff3b802b3eecb8bc">https://www.bilibili.com/video/BV1my4y1z76s?p=3&amp;vd_source=5e38e5c84aa6ff6cff3b802b3eecb8bc</a></li>
<li>Probabilitydensity function: <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Probability_density_function">https://en.wikipedia.org/wiki/Probability_density_function</a></li>
<li>Microfacet Models for Refraction through Rough Surfaces: <a target="_blank" rel="noopener" href="https://www.cs.cornell.edu/~srm/publications/EGSR07-btdf.pdf">https://www.cs.cornell.edu/~srm/publications/EGSR07-btdf.pdf</a></li>
</ul>
<h4 id="gi" tabindex="-1" id="GI">GI</h4>
<ul>
<li>
<p>SSGI: <a target="_blank" rel="noopener" href="https://www.ea.com/frostbite/news/stochastic-screen-space-reflections">https://www.ea.com/frostbite/news/stochastic-screen-space-reflections</a></p>
</li>
<li>
<p>DDGI: <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/404520592">https://zhuanlan.zhihu.com/p/404520592</a></p>
</li>
<li>
<p>DDGI: <a target="_blank" rel="noopener" href="https://developer.download.nvidia.com/video/gputechconf/gtc/2019/presentation/s9900-irradiance-fields-rtx-diffuse-global-illumination-for-local-and-cloud-graphics.pdf">https://developer.download.nvidia.com/video/gputechconf/gtc/2019/presentation/s9900-irradiance-fields-rtx-diffuse-global-illumination-for-local-and-cloud-graphics.pdf</a></p>
</li>
<li>
<p>DDGI: <a target="_blank" rel="noopener" href="https://www.jcgt.org/published/0008/02/01/paper-lowres.pdf">https://www.jcgt.org/published/0008/02/01/paper-lowres.pdf</a></p>
</li>
<li>
<p>Reflective Shadow Maps: <a target="_blank" rel="noopener" href="https://users.soe.ucsc.edu/~pang/160/s13/proposal/mijallen/proposal/media/p203-dachsbacher.pdf">https://users.soe.ucsc.edu/~pang/160/s13/proposal/mijallen/proposal/media/p203-dachsbacher.pdf</a></p>
</li>
<li>
<p>Light Propagation Volumes: <a target="_blank" rel="noopener" href="https://ericpolman.com/">https://ericpolman.com/</a></p>
</li>
<li>
<p>VXGI: <a target="_blank" rel="noopener" href="https://on-demand.gputechconf.com/gtc/2014/presentations/S4552-rt-voxel-based-global-illumination-gpus.pdf">https://on-demand.gputechconf.com/gtc/2014/presentations/S4552-rt-voxel-based-global-illumination-gpus.pdf</a></p>
</li>
<li>
<p>Lumen: <a target="_blank" rel="noopener" href="https://advances.realtimerendering.com/s2021/Radiance%20Caching%20for%20real-time%20Global%20Illumination%20(SIGGRAPH%202021).pptx">https://advances.realtimerendering.com/s2021/Radiance Caching for real-time Global Illumination (SIGGRAPH 2021).pptx</a></p>
</li>
</ul>
<h4 id="hardware-ray-tracing" tabindex="-1" id="Hardware-Ray-Tracing">Hardware Ray Tracing</h4>
<ul>
<li>Ray Tracing Gems II: <a target="_blank" rel="noopener" href="https://link.springer.com/content/pdf/10.1007/978-1-4842-7185-8.pdf">https://link.springer.com/content/pdf/10.1007/978-1-4842-7185-8.pdf</a></li>
<li>The six levels of ray tracing acceleration: <a target="_blank" rel="noopener" href="https://f.hubspotusercontent10.net/hubfs/2426966/Gated%20Files/imagination-raytracing-primer-sept2020.pdf">https://f.hubspotusercontent10.net/hubfs/2426966/Gated Files/imagination-raytracing-primer-sept2020.pdf</a></li>
<li>Hybrid Rendering for Real-Time Ray Tracing: <a target="_blank" rel="noopener" href="https://link.springer.com/content/pdf/10.1007/978-1-4842-4427-2_25.pdf">https://link.springer.com/content/pdf/10.1007/978-1-4842-4427-2_25.pdf</a></li>
<li>Ray Traced Reflections in ‘Wolfenstein: Youngblood’: <a target="_blank" rel="noopener" href="https://www.gdcvault.com/play/1026723/Ray-Traced-Reflections-in-Wolfenstein">https://www.gdcvault.com/play/1026723/Ray-Traced-Reflections-in-Wolfenstein</a></li>
<li>DirectX Raytracing (DXR) Functional Spec: <a target="_blank" rel="noopener" href="https://microsoft.github.io/DirectX-Specs/d3d/Raytracing.html">https://microsoft.github.io/DirectX-Specs/d3d/Raytracing.html</a></li>
<li><a target="_blank" rel="noopener" href="https://www.khronos.org/blog/vulkan-ray-tracing-final-specification-release">https://www.khronos.org/blog/vulkan-ray-tracing-final-specification-release</a></li>
</ul>
<h4 id="signed-distance-field" tabindex="-1" id="Signed-Distance-Field">Signed Distance Field</h4>
<ul>
<li>Dynamic Occlusion With Signed Distance Fields: <a target="_blank" rel="noopener" href="http://advances.realtimerendering.com/s2015/DynamicOcclusionWithSignedDistanceFields.pdf">http://advances.realtimerendering.com/s2015/DynamicOcclusionWithSignedDistanceFields.pdf</a></li>
<li>Lectrue5 Real-time Environment Mapping: <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1YK4y1T7yY?p=5&amp;vd_source=5e38e5c84aa6ff6cff3b802b3eecb8bc">https://www.bilibili.com/video/BV1YK4y1T7yY?p=5&amp;vd_source=5e38e5c84aa6ff6cff3b802b3eecb8bc</a></li>
<li>DX12 渲染管线(5) -距离场: 建场: <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/89701518?utm_id=0">https://zhuanlan.zhihu.com/p/89701518?utm_id=0</a></li>
<li>GPU Gems 2 -Chapter 8.Per-Pixel Displacement Mapping with Distance Functions: <a target="_blank" rel="noopener" href="https://developer.nvidia.com/gpugems/gpugems2/part-i-geometric-complexity/chapter-8-pixel-displacement-mapping-distance-functions">https://developer.nvidia.com/gpugems/gpugems2/part-i-geometric-complexity/chapter-8-pixel-displacement-mapping-distance-functions</a></li>
<li>Unreal Engine 5.0 Documentation: <a target="_blank" rel="noopener" href="https://docs.unrealengine.com/5.0/en-US/mesh-distance-fields-in-unreal-engine/">https://docs.unrealengine.com/5.0/en-US/mesh-distance-fields-in-unreal-engine/</a></li>
<li>Advances in Real-Time Rendering in Games: Part I -SIGGRAPH 2022: <a target="_blank" rel="noopener" href="https://advances.realtimerendering.com/s2022/index.htmlf">https://advances.realtimerendering.com/s2022/index.htmlf</a></li>
</ul>

            </article>
            
	<div class="rightside">
	
		<div class="rightside-button" id="js-aside">
			<span>
				<img no-lazy src="/images/icon/aside.png" class="rightside-button-icon" alt="Icon">
			</span>
		</div>
		<script>
			$("#js-aside").click(function () {
				onShowAsideButton();
			});
		</script>
	
	<div class="rightside-button" id="js-toggle_theme">
		<span>
			<img no-lazy src="/images/icon/toggle_theme.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	
<script src="/js/plugins/goto_position.js"></script>

	
	<div class="rightside-button" id="js-go_top">
		<span>
			<img no-lazy src="/images/icon/go_top.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>
	<div class="rightside-button" id="js-go_bottom">
		<span>
			<img no-lazy src="/images/icon/go_bottom.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	<script>
		setToggleThemeButtonListener();
	</script>
	<script>
		$('#js-go_top')
		.gotoPosition( {
			speed: 300,
			target: 'top',
		} );
		$('#js-go_bottom')
		.gotoPosition( {
			speed: 300,
			target: 'bottom',
		} );
	</script>
</div>


<div class="post-bottom">
    
        <div class="post-paging">     
            <div class="post-paging-last">
                
                    <a href="/posts/Diary-%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E6%9A%91%E5%81%87/">
                        上一篇：Diary-最后一个暑假
                    </a>
                
            </div>
            <div class="post-paging-next">
                
                    <a href="/posts/GAMES104-Data-Oriented%20Programming%20and%20Job%20System/">
                        下一篇：GAMES104-Data-Oriented Programming and Job System
                    </a>
                
            </div>
        </div>
    
    
    
        
            <div class="giscus comments"></div>
            <script>
                var scriptElement = document.createElement('script');
                scriptElement.src = 'https://giscus.app/client.js';
                scriptElement.setAttribute('data-repo', 'GZ-Metal-Cell/GZ-Metal-Cell.github.io');
                scriptElement.setAttribute('data-repo-id', 'R_kgDOIHLEOQ');
                scriptElement.setAttribute('data-category', 'Announcements');
                scriptElement.setAttribute('data-category-id', 'DIC_kwDOIHLEOc4CcVwP');
                scriptElement.setAttribute('data-mapping', 'title');
                scriptElement.setAttribute('data-strict', '1');
                scriptElement.setAttribute('data-reactions-enabled', '');
                scriptElement.setAttribute('data-emit-metadata', '0');
                scriptElement.setAttribute('data-input-position', 'bottom');
                scriptElement.setAttribute('data-theme', localStorage.getItem('theme') === 'light' ? 'light' : 'dark_high_contrast');
                scriptElement.setAttribute('data-lang', 'zh-CN');
                
                scriptElement.setAttribute('crossorigin', 'anonymous');
                scriptElement.async = true;
                document.head.appendChild(scriptElement);
            </script>
        
    
</div>
        </div>
    </main>
    
        <aside class="main-aside">
    
<script src="/js/widgets/aside.js"></script>

    <script>
        showAside();
    </script>

    <div class="aside-top">
        <div class="aside-top-about aside-card">
            <a href="/about" class="aside-top-about-portrait">
                <img no-lazy src="/about/portrait.png" alt="Q">
            </a>
            <div class="aside-top-about-info">
                <span class="author"> Zi-Zi</span>
                <span class="description">不以物喜，不以己悲。</span>
            </div>              
            <div class="aside-top-about-site">
                <a href="/categories" class="aside-top-about-site-item">
                    <span class="title">类别</span>
                    <span class="count">5</span>
                </a>
                <a href="/tags" class="aside-top-about-site-item">
                    <span class="title">标签</span>
                    <span class="count">119</span>
                </a>
                <a href="/archives" class="aside-top-about-site-item">
                    <span class="title">归档</span>
                    <span class="count">429</span>
                </a>
            </div>
            <div class="aside-top-about-contact">
                
                    
                        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
                            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
                            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
                            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
                            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
                        </a>
                    
                
            </div>
        </div> 

        
            <div class="aside-top-series aside-card">
                <ol class="aside-top-series-content">
                    
                    
                    
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/GAMES104-Basic Elements/">
                                                <span class="text">GAMES104-Basic Elements</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/GAMES104-Rendering/">
                                                <span class="text">GAMES104-Rendering</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/GAMES104-Animation/">
                                                <span class="text">GAMES104-Animation</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/GAMES104-Physics/">
                                                <span class="text">GAMES104-Physics</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/GAMES104-Effects/">
                                                <span class="text">GAMES104-Effects</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/GAMES104-Tool Chains/">
                                                <span class="text">GAMES104-Tool Chains</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/GAMES104-Gameplay/">
                                                <span class="text">GAMES104-Gameplay</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/GAMES104-Online Gaming Architecture/">
                                                <span class="text">GAMES104-Online Gaming Architecture</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/GAMES104-Data-Oriented Programming and Job System/">
                                                <span class="text">GAMES104-Data-Oriented Programming and Job System</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        
                                        <li class="series-item active">
                                            <a class="series-link active" href="/posts/GAMES104-Dynamic Global Illumination and Lumen/">
                                                <span class="text">GAMES104-Dynamic Global Illumination and Lumen</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/GAMES104-GPU-Driven Geometry Pipeline-Nanite/">
                                                <span class="text">GAMES104-GPU-Driven Geometry Pipeline-Nanite</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                </ol>
                <div class="aside-top-series-title">
                    <h1>
                        <a href="/tags/GAMES104">标签：GAMES104</a>
                    </h1>
                    <span id="serial-number">10/11</span>
                </div>
            </div>
            <script>
                activeSeriesItem();
            </script> 
        
    </div>

    <div class="aside-bottom">
        
            <script>
                
                    const tocCollapsed = true;
                
                
                    const tocDepth = 3;
                
                var headerString = '';
                for (let i = 1; i <= tocDepth; i++) {
                    if (i === 1) {
                        headerString += 'h1';
                    } else {
                        headerString += ', h' + i;
                    }
                }
                hbeToc();
            </script>
            <div class="aside-bottom-toc aside-card">
                <div class="aside-bottom-toc-title">
                    <h1>目录</h1>
                    <span class="toc-percentage"></span>
                </div>
                <ol class="aside-bottom-toc-content"></ol>
            </div>
        
    </div>
</aside>
    
</div>
		<footer>
	<div class="content">
		
			<span>©2022-2025&nbsp;By&nbsp;<a href="/about">Zi-Zi</a>.</span>
		
		<span><a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> theme by <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell/hexo-theme-quieter">Quieter</a>.</span>
		
			<span style="display: flex;">
				<img no-lazy alt="icp" src="/images/icp_icon.png" style="width: 16px; height: 16px;">
				<a href="https://icp.gov.moe/?keyword=20241647" target="_blank">萌 ICP 备 20241647 号</a>
			</span>
		
	</div>

	
<script src="/js/plugins/ref.js"></script>

	
<script src="/js/plugins/highlight_tools.js"></script>

	<script>
		const  COPY_ICON = "/images/icon/copy.png";
		const CLOSE_CODE_BLOCK_ICON = "/images/icon/close_code_block.png";
		const HIGHLIGHT_SHRINK = "";
		const HIGHLIGHT_HEIGHT_LIMIT = "";
	</script>

	
	
	<!-- Analytics -->

    
        <!-- Busuanzi Analytics -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
        <!-- Baidu Analytics -->
        <script defer>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?e57cf62289f84322ebff116e8b3d343e";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
    


	

	
		
			
				<link rel="stylesheet" href="/css/plugins/katex/katex.min.css">
				<script src="/js/plugins/copy-tex.js"></script>
			
		
	

    
		
<link rel="stylesheet" href="/css/plugins/textIndent.css">

		
<script src="/js/plugins/textIndent.js"></script>

	

	
	
	
		<script>
			if (typeof init === 'function') {
				init();
			}
		</script>
	

	
		
	

	
		
	

	<!--
		
<script src="/js/plugins/jquery.pjax.min.js"></script>

		<script>
			$(document).pjax('a[target!=_blank]', 'main', {
				fragment: 'main',
				timeout: 8000
			});

			$(document).on('pjax:complete', function() {
			});
		</script> 
	-->
	<script>
		console.log('\n %c Hexo-Quieter 主题 %c https://github.com/GZ-Metal-Cell/hexo-theme-quieter \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
	</script>
</footer>
	</body>

	<!-- Hexo-Quieter 主题  https://github.com/GZ-Metal-Cell/hexo-theme-quieter -->
</html>

