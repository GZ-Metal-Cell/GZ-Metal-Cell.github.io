<!DOCTYPE html>
<html lang=zh-CN data-theme="light">
	
<script src="/js/plugins/toggleTheme.js"></script>

	<script>
		setTheme();
	</script>
	<head>
		
<title>PL-MySQL | Zi-Zi's Journey</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/images/icon/favicon.ico">
<link href="/css/plugins/print.css" media="print" rel="stylesheet" />

<link rel="stylesheet" href="/css/index.css">



<meta name="keywords" content="SQL,">
<meta name="description" content="学习自黑马程序员。">



<script src="/js/plugins/jquery.min.js"></script>


<script src="/js/plugins/hljs.min.js"></script>


<script src="/js/plugins/init.js"></script>


<script src="/js/plugins/hide.js"></script>


<script src="/js/plugins/tabs.js"></script>



    



    
<script src="/js/plugins/alert-title.js"></script>

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-base.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-dark-class.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-light.css">






    

	<meta name="generator" content="Hexo 6.1.0"></head>

	<body>
		<header class="sticky-header">
	<nav>
		<div class="nav-left">
			<a href="/" class="logo">
				<img no-lazy src="/images/headers_icon/logo.webp" alt="Quieter">
			</a>
			<ul class="breadcrumb" id="breadcrumb"></ul>
		</div>
		<div class="nav-right">
			<ul>
				
					<li>
						<a href="/">
						  主页
						</a>
					</li>
				
					<li>
						<a href="/categories">
						  类别
						</a>
					</li>
				
					<li>
						<a href="/tags">
						  标签
						</a>
					</li>
				
					<li>
						<a href="/archives">
						  归档
						</a>
					</li>
				
					<li>
						<a href="/galleries">
						  相册
						</a>
					</li>
				
					<li>
						<a href="/links">
						  链接
						</a>
					</li>
				
					<li>
						<a href="/about">
						  关于
						</a>
					</li>
								  
			</ul>
		</div>
		<div class="nav-right-close">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
				<path fill="none" d="M0 0h24v24H0z" />
				<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
			</svg>
		</div>

		<div class="sidebar">
    <div class="topo">
        <p>Zi-Zi's Journey</p>
    </div>
    <ul>
        
        <li>
            <a href="/">
                主页
            </a>
        </li>
        
        <li>
            <a href="/categories">
                类别
            </a>
        </li>
        
        <li>
            <a href="/tags">
                标签
            </a>
        </li>
        
        <li>
            <a href="/archives">
                归档
            </a>
        </li>
        
        <li>
            <a href="/galleries">
                相册
            </a>
        </li>
        
        <li>
            <a href="/links">
                链接
            </a>
        </li>
        
        <li>
            <a href="/about">
                关于
            </a>
        </li>
        
    </ul>
    <div class="sidebar-footer">
        
        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
        </a>
        
    </div>
</div>
<div class='shelter'>
    <script>
        $(function() {
            $('.nav-right-close > svg').click(function() {
                $('.sidebar').animate({
                    right: "0"
                }, 500);
                $('.shelter').fadeIn("slow");
            
                var element = $('.topo');
                element.addClass('custom-style');
            
                var links = null;
                if ("") {
                    links = "".split(',');
                } else {
                    links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
                }
            
                var randomLink = links[Math.floor(Math.random() * links.length)];
                element.css('background-image', "url('" + randomLink + "')");
            });
          
            $('.shelter').click(function(e) {
                $('.sidebar').animate({
                    right: "-100%"
                }, 500);
                $('.shelter').fadeOut("slow");
            });
        });      
    </script>
</div>
	</nav>

	
		<div class="header-background"></div>
	

	<script>
		const name = 'post';
		const ul = document.querySelectorAll('.nav-right ul')[0];
		const lis = ul.querySelectorAll('li');

		if (name == 'home') {
			lis[0].classList.add('select');
		} else {
			for (let i = 0; i < lis.length; i++) {
				const li = lis[i];
				const a = li.querySelector('a');
				if (name === a.href.split('/')[3]) {
					li.classList.add('select');
				}
			}
		}
	</script>
	
	<script>
		var element = document.querySelector('.header-background');
		if(element) {
			element.classList.add('custom-style');
			var links = null;
			if("")
			{
				links = "".split(',');
			} else
			{
				links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
			}
			var randomLink = links[Math.floor(Math.random() * links.length)];
			element.style.backgroundImage = "url('" + randomLink + "')";
		}
	</script>

	
<script src="/js/plugins/breadcrumb.js"></script>

	<script>
		var menus_title = [];
		
			menus_title.push({home: '主页'});
		
			menus_title.push({categories: '类别'});
		
			menus_title.push({tags: '标签'});
		
			menus_title.push({archives: '归档'});
		
			menus_title.push({galleries: '相册'});
		
			menus_title.push({links: '链接'});
		
			menus_title.push({about: '关于'});
		
		
			
				postsBreadcrumb(
					document.getElementById('breadcrumb'),
					"类别",
					"/categories",
					"学习",
					"/categories/学习",
					1
				);
			
		
	</script>
</header>

<div class="main-wrapper">
    <main class="post">
        <header class="main-header">
	
		
			
				
<link rel="stylesheet" href="/css/plugins/fancybox.css">

				
<script src="/js/plugins/fancybox.umd.js"></script>

				
<script src="/js/plugins/fancybox.js"></script>

			
			<div class="post-header-background-content">
				<ul class="post-header-tag">
					
						
							<li><a href="/tags/SQL"><span>SQL</span></a></li>
						
					
				</ul>
				
				<h1>PL-MySQL</h1>
		
				
					<div class="post-header-desc">
						<svg t="1714702231661" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="1154" xmlns:xlink="http://www.w3.org/1999/xlink"
						width="20" height="20">
						<path
							d="M778.24 117.76A46.08 46.08 0 0 1 824.32 163.84v430.08c0 8.4992-4.13696 16.01536-10.50624 20.6848l-0.24576 0.2048L587.5712 846.09024a35.84 35.84 0 0 1-61.48096-25.06752v-220.9792a46.08 46.08 0 0 1 46.08-46.08l200.94976-0.02048V168.96h-522.24v686.08H389.12c13.25056 0 24.1664 10.07616 25.47712 22.97856l0.12288 2.62144c0 14.1312-11.4688 25.6-25.6 25.6h-143.36A46.08 46.08 0 0 1 199.68 860.16V163.84A46.08 46.08 0 0 1 245.76 117.76h532.48z m-26.78784 487.38304h-174.16192v178.176l174.16192-178.176z m-45.19936-169.94304a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z m0-122.88a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z"
							fill="#ffffff" p-id="1155"></path>
						</svg>
						<p>学习自黑马程序员。</p>
					</div>
				
		
				<div class="post-header-info">
					<svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
					xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
						<path
							d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
							p-id="2902" fill="#ffffff"></path>
					</svg>
					<div class="post-header-info-author">
						<a href="/about">Zi-Zi</a>
					</div>
					
						<div class="post-header-info-categories">
							
								<a href="/categories/学习">学习</a>
							
						</div>
					
					<time>2025/01/22 09:37:00</time>
				</div>
		
				
					<div class="post-header-stat">
						<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
						viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve" width="20" height="20">
							<path fill="#FFFFFF" d="M187.2,165.6c0,2.6-2.1,4.7-4.7,4.7H17.5c-2.6,0-4.7-2.1-4.7-4.7s2.1-4.7,4.7-4.7h165.1
								C185.2,160.9,187.2,163,187.2,165.6z"/>
							<path fill="#FFFFFF" d="M17.5,29.7c2.6,0,4.7,2.1,4.7,4.7v131.2c0,2.6-2.1,4.7-4.7,4.7s-4.7-2.1-4.7-4.7V34.4
								C12.8,31.8,14.9,29.7,17.5,29.7z M77.9,91.5c1.8,1.8,1.8,4.8,0,6.6l-39.8,39.8c-1.9,1.8-4.9,1.7-6.6-0.2c-1.7-1.8-1.7-4.6,0-6.4
								l39.8-39.8C73.1,89.6,76,89.6,77.9,91.5z M169.9,70.2c1.6,2.1,1.1,5-0.9,6.5c0,0,0,0,0,0l-64.2,48.2c-2.1,1.5-5,1.1-6.6-0.9
								c-1.6-2.1-1.1-5,0.9-6.5c0,0,0,0,0,0l64.2-48.2C165.4,67.7,168.3,68.1,169.9,70.2L169.9,70.2z"/>
							<path fill="#FFFFFF" d="M104.6,124.5c-1.8,1.8-4.8,1.8-6.6,0L71.6,98.1c-1.8-1.8-1.8-4.8,0-6.6c1.8-1.8,4.8-1.8,6.6,0l26.3,26.3
								C106.4,119.6,106.4,122.6,104.6,124.5C104.6,124.4,104.6,124.4,104.6,124.5z"/>
						</svg>
		
						
							
<script src="/js/plugins/wordCount.js"></script>

							<p class="post-count">文字数：---</p>
						
		
						
							<p id="busuanzi_container_page_pv" style='display:none;'>阅读数：<span id="busuanzi_value_page_pv"></span></p>
						
					</div>
				
			</div>
		
	
</header>
        <div class="post-content article-container">
            <article class="post-content-info">
                <h1 id="%E6%AD%A3%E6%96%87" tabindex="-1">正文</h1>
<h2 id="day01" tabindex="-1" id="day01">day01</h2>
<h3 id="1.1-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" tabindex="-1" id="1-1-数据库基本概念">1.1 数据库基本概念</h3>
<p>数据库（Database）是按照数据结构来组织、存储和管理数据的建立在计算机存储设备上的仓库。</p>
<p>数据库：存储数据的仓库。</p>
<h4 id="%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E7%B1%BB" tabindex="-1" id="数据库分类">数据库分类</h4>
<ul>
<li>
<p>网络数据库</p>
<ul>
<li>网络数据库是指把数据库技术引入到计算机网络系统中，借助于网络技术将存储于数据库中的大量信息及时发布出去；面计算机网络借助于成熟的数据库技术对网络中的各种数据进行有效管理，并实现用户与网络中的数据库进行实时动态数据交互。</li>
</ul>
</li>
<li>
<p>层级数据库</p>
<ul>
<li>层次结构模型实质上是一种有根结点的定向有序树（在数学中&quot;树&quot;被定义为一个无回的连通图）。</li>
</ul>
</li>
<li>
<p>关系数据库</p>
<ul>
<li><strong>关系数据库</strong>，是建立在<strong>关系模型</strong>基础上的数据库，借助于集合代数等数学概念和方法来处理数据库中的数据。</li>
</ul>
</li>
</ul>
<p>数据库的另外一种区分方式，<strong>基于存储介质</strong>。存储介质分为两种，磁盘和内存。</p>
<ul>
<li>
<p>关系型数据库，存储在磁盘中。</p>
</li>
<li>
<p>非关系型数据库：存储在内存中。</p>
</li>
</ul>
<h4 id="%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93" tabindex="-1" id="关系型数据库">关系型数据库</h4>
<ul>
<li>
<p>基本概念</p>
<ul>
<li>
<p><strong>关系数据库</strong>，是建立在关系模型基础上的数据库，借助于集合代数等数学概念和方法来处理数据库中的数据。现实世界中的各种实体以及实体之间的各种联系均用关系模型来表示。关系模型是由埃德加 · 科德于 1970 年首先提出的，并配合“科德十二定律”。现如今虽然对此模型有一些批评意见，但它还是数据存储的传统标准。关系模型由<strong>关系数据结构</strong>、<strong>关系操作集合</strong>、<strong>关系完整性约束</strong>三部分组成。</p>
</li>
<li>
<p><strong>关系数据结构</strong>：指的数据以什么方式来存储，是一种二维表的形式存储。</p>
<p>本质：二维表</p>
<table>
<thead>
<tr>
<th>姓名</th>
<th>年龄</th>
<th>身高</th>
<th>体重</th>
</tr>
</thead>
<tbody>
<tr>
<td>张三</td>
<td>30</td>
<td>187</td>
<td>70</td>
</tr>
<tr>
<td>李四</td>
<td>40</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>关系操作集合</strong>：如何来关联和管理对应的存储数据，SQL 指令</p>
<p>获取张三的年纪：已知条件为姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">Select</span> 年龄 <span class="hljs-keyword">from</span> 二维表 <span class="hljs-keyword">where</span> 姓名 <span class="hljs-operator">=</span> 张三;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p><strong>关系完整性约束</strong>：数据内部有对应的关联关系，以及数据与数据之间也有对应的关联关系</p>
<ul>
<li>表内约束：对应的具体列只能放对应的数据（不能乱放）</li>
<li>表间约束：自然界各实体都是有着对应的关联关系（外键）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="%E5%85%B8%E5%9E%8B%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93" tabindex="-1" id="典型关系型数据库">典型关系型数据库</h4>
<p>Oracle、DB2、Microsoft SOL Server、Microsoft Access、 MysOL、 SQLite.</p>
<p>小型关系型数据库：Microsoft Access，SQLite</p>
<p>中型关系型数据库：SQLServer，MySQL</p>
<p>大型关系型数据库：Oracle，DB2</p>
<h3 id="1.2-sql-%E4%BB%8B%E7%BB%8D" tabindex="-1" id="1-2-SQL-介绍">1.2 SQL 介绍</h3>
<h4 id="sql-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D" tabindex="-1" id="SQL-基本介绍">SQL 基本介绍</h4>
<p><strong>结构化查询语言（Structured Query Language）<strong>简称 SQL，是一种特殊目的的</strong>编程</strong>语言，是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统;同时也是数据库脚本文件的扩展名。</p>
<p>SQL 就是专门为关系型数据库而设计出来的。</p>
<h4 id="sql-%E5%88%86%E7%B1%BB" tabindex="-1" id="SQL-分类">SQL 分类</h4>
<ul>
<li>
<p>数据查询语言（DQL：Data Query Language）：其语句，也称为“数据检索语句”，用以从表中获得数据，确定数据怎样在应用程序给出。保留字 SELECT 是 DQL（也是所有 SQL）用得最多的动词，其他 DQL 常用的保留字有 WHERE，ORDER BY，GROUP BY 和   HAVING。这些 DQL 保留字常与其他类型的 SQL 语句一起使用。</p>
<p><strong>专门用于查询数据</strong>：代表指令为 select/show</p>
</li>
<li>
<p>数据操作语言（DML：Data ManipulationLanguage）：其语句包括动词 INSERT，UPDATE 和 DELETE。它们分别用于添加，修改和删除表中的行。也称为动作查询语言。</p>
<p><strong>专门用于写数据</strong>：代表指令为 insert，update 和 delete</p>
</li>
<li>
<p>事务处理语言（TPL）：</p>
<p>它的语句能确保被 DML 语句影响的表的所有行及时得以更新。TPL 语句包括 BEGIN，TRANSACTION，COMMIT 和 ROLLBACK。</p>
</li>
<li>
<p>数据控制语言（DCL）：</p>
<p>它的语句通过 GRANT 或 REVOKE 获得许可，确定单个用户和用户组对数据库对象的访问。
某些 RDBMS 可用 GRANT 或 REVOKE 控制对表单个列的访问。</p>
<p><strong>专门用于权限管理</strong>：代表指令为 grant 和 revoke</p>
</li>
<li>
<p>数据定义语言（DDL）：</p>
<p>其语句包括动词 CREATE 和 DROP。在数据库中创建新表或删除表（CREAT TABLE 或 DROPTABLE），为表加入索引等。DDL 包括许多与人数据库目录中获得数据有关的保留字。它也是动作查询的一部分。</p>
<p>专门用于结构管理：代表指令 create 和 drop()</p>
</li>
</ul>
<h3 id="1.3-mysql-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D" tabindex="-1" id="1-3-MySQL-基本介绍">1.3 MySQL 基本介绍</h3>
<p>MySQL 是一个<strong>关系型数据库管理系统</strong>，由瑞典 MySQL AB 公司开发，目前属于 Oracle 旗下产品。MySQL 是最流行的关系型数据库管理系统之一，在 WEB 应用方面，MySQL 是最好的 RDBMS（Relational Database Management System，关系数据库管理系统）应用软件。</p>
<p>AB 公司被 Sun 公司收购 → Oracle 又收购了 sum 公司</p>
<ol>
<li>MySQL 是一种开源免费的数据库产品</li>
<li>MySQL 对 PHP 的支持是最好（wamp 或者 lamp）</li>
<li>MySQL 中用到的操作指令就是 SQL 指令</li>
</ol>
<h4 id="%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2-mysql-%E6%9C%8D%E5%8A%A1" tabindex="-1" id="启动和停止-MySQL-服务">启动和停止 MySQL 服务</h4>
<p>安装 MySQL。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/langjiaohjiopji/article/details/143512551">MySQL完整安装和配置(保姆级教程)_MySQL9.0安装教程-CSDN博客</a></li>
</ul>
<p>MySQL 是一种 C/S 结构：客户端和服务端</p>
<p>服务端对应的软件：MySQLd.exe</p>
<p><img src="day01/01.webp" alt="webp"></p>
<p>确保这个服务被启动。</p>
<h4 id="%E7%99%BB%E5%BD%95%E5%92%8C%E9%80%80%E5%87%BA-mysql-%E7%B3%BB%E7%BB%9F" tabindex="-1" id="登录和退出-MySQL-系统">登录和退出 MySQL 系统</h4>
<p>通过客户端（MySQL.exe）与服务器进行连接认证，就可以进行操作通常，服务端与客户端不在同一台电脑上。</p>
<h4 id="%E7%99%BB%E5%BD%95" tabindex="-1" id="登录">登录</h4>
<p>找到 MySQL.exe（通过 cmd 控制台：如果在安装的时候指定了 MySQL.exe 所在的路径为环境变量，就可以直接访问；如果没有，那么就必须进入到 MySQL.exe 所在路径）</p>
<p>直接打开 <code>MySQL 8.0 Command Line Client</code>。</p>
<p>或者在命令行输入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">MySQL -hlocalhost -P3306 -uroot -p密码<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">MySQL: [Warning] Using a password on the command line interface can be insecure.<br>Welcome to the MySQL monitor.  Commands end with ; or \g.<br>Your MySQL connection id is 22<br>Server version: 8.0.41 MySQL Community Server - GPL<br><br>Copyright (c) 2000, 2025, Oracle and/or its affiliates.<br><br>Oracle is a registered trademark of Oracle Corporation and/or its<br>affiliates. Other names may be trademarks of their respective<br>owners.<br><br>Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.<br></code></pre></td></tr></table></figure>
<p>以密文形式输入密码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">MySQL -hlocalhost -P3306 -uroot -p<br></code></pre></td></tr></table></figure>
<p>默认为 <code>localhost</code> ，可简写为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">MySQL -P3306 -uroot -p<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Enter password: ****<br>Welcome to the MySQL monitor.  Commands end with ; or \g.<br>Your MySQL connection id is 24<br>Server version: 8.0.41 MySQL Community Server - GPL<br><br>Copyright (c) 2000, 2025, Oracle and/or its affiliates.<br><br>Oracle is a registered trademark of Oracle Corporation and/or its<br>affiliates. Other names may be trademarks of their respective<br>owners.<br><br>Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.<br></code></pre></td></tr></table></figure>
<h4 id="%E9%80%80%E5%87%BA" tabindex="-1" id="退出">退出</h4>
<p>断开与服务器的连接：通常 MySQL 提供的服务器数量有限，一旦客户端用完，建议就应该断开连接。</p>
<p>建议方式：使用 SQL 提供的指令</p>
<ul>
<li>
<p><code>Exit;</code>  exit 带分号</p>
</li>
<li>
<p><code>\q;</code>  quit 缩写</p>
</li>
<li>
<p><code>Quit;</code></p>
</li>
</ul>
<h3 id="2.1-mysql-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%9E%B6%E6%9E%84" tabindex="-1" id="2-1-MySQL-服务端架构">2.1 MySQL 服务端架构</h3>
<p>MySQL 服务端架构有以下几层构成：</p>
<ol>
<li>数据库管理系统（最外层）：DBMS，专门管理服务器端的所有内容</li>
<li>数据库（第二层）：DB，专门用于存储数据的仓库（可以有很多个）</li>
<li>二维数据表（第三层）：Table，专门用于存储具体实体的数据</li>
<li>字段（第四层）：Field，具体存储某种类型的数据（实际存储单元）。</li>
</ol>
<p>数据库中常用的几个关键字</p>
<p>Row：行。
Column：列（field）</p>
<h3 id="2.2-sql-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E5%BA%93%E6%93%8D%E4%BD%9C%EF%BC%88%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%89" tabindex="-1" id="2-2-SQL-基本操作——库操作（创建数据库）">2.2 SQL 基本操作——库操作（创建数据库）</h3>
<p>数据库是数据存储的最外层（最大单元）</p>
<h4 id="%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93" tabindex="-1" id="创建数据库">创建数据库</h4>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database 数据库名字 [库选项];<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database myFirstDB;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Query OK, 1 row affected (0.03 sec)<br></code></pre></td></tr></table></figure>
<p><img src="day01/02.webp" alt="webp"></p>
<p>库选项：数据库的相关属性</p>
<p>字符集：charset 字符集，代表着当前数据库下的所有表存储的数据默认指定的字符集（如果当前不指定，那么采用 DBMS 默认的）。</p>
<p>校对集：collate 校对集</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database 数据库名字 charset 字符集名称;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database mydatabase2 charset gbk;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Query OK, 1 row affected (0.01 sec)<br></code></pre></td></tr></table></figure>
<p><img src="day01/03.webp" alt="webp"></p>
<h3 id="2.3-sql-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E5%BA%93%E6%93%8D%E4%BD%9C%EF%BC%88%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%89" tabindex="-1" id="2-3-SQL-基本操作——库操作（显示数据库）">2.3 SQL 基本操作——库操作（显示数据库）</h3>
<ul>
<li>
<p>显示全部</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> databases;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+--------------------+<br>| Database           |<br>+--------------------+<br>| information_schema |<br>| mydatabase2        |<br>| myfirstdb          |<br>| MySQL              |<br>| performance_schema |<br>| sakila             |<br>| sys                |<br>| world              |<br>+--------------------+<br>8 rows in set (0.02 sec)<br></code></pre></td></tr></table></figure>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>系统数据库</strong>：</p>
<ul>
<li><code>information_schema</code>、<code>MySQL</code>、<code>performance_schema</code>、<code>sys</code>。</li>
<li>用于管理和优化 MySQL 服务器。</li>
</ul>
<p><strong>示例数据库</strong>：</p>
<ul>
<li><code>sakila</code> 和 <code>world</code>。</li>
<li>用于学习 SQL 和测试。</li>
</ul>
<p><strong>用户数据库</strong>：</p>
<ul>
<li><code>mydatabase2</code> 和 <code>myfirstdb</code>。</li>
<li>自定义数据存储，由用户自行设计和管理。</li>
</ul>
</div>
</li>
<li>
<p>显示部分</p>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> databases <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;匹配模式&#x27;</span>;<br></code></pre></td></tr></table></figure>
<ul>
<li><code>_</code>：匹配当前位置单个字符</li>
<li><code> %</code>：匹配指定位置多个字符</li>
</ul>
<hr>
<ul>
<li>
<p>获取以 <code>my</code> 开头的全部数据库：<code>'my%'</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> databases <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;my%&#x27;</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------------+<br>| Database (my%) |<br>+----------------+<br>| mydatabase2    |<br>| myfirstdb      |<br>| MySQL          |<br>+----------------+<br>3 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>获取 <code>m</code> 开头，后面第一个字母不确定，最后为 <code>database2</code> 的数据库：<code>'m_database2'</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> databases <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;m_database2&#x27;</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+------------------------+<br>| Database (m_database2) |<br>+------------------------+<br>| mydatabase2            |<br>+------------------------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>获取以 <code>database</code> 结尾的数据库：<code>'%database'</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> databases <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%database2&#x27;</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-----------------------+<br>| Database (%database2) |<br>+-----------------------+<br>| mydatabase2           |<br>+-----------------------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>查看数据库创建语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> database mydatabase2;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------------+--------------------------------------------------------------------------------------------------------+<br>| Database    | Create Database<br>|<br>+-------------+--------------------------------------------------------------------------------------------------------+<br>| mydatabase2 | CREATE DATABASE `mydatabase2` /*!40100 DEFAULT CHARACTER SET gbk */ /*!80016 DEFAULT ENCRYPTION=&#x27;N&#x27; */ |<br>+-------------+--------------------------------------------------------------------------------------------------------+<br>1 row in set (0.01 sec)<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="2.4-sql-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E5%BA%93%E6%93%8D%E4%BD%9C%EF%BC%88%E9%80%89%E6%8B%A9%2B%E4%BF%AE%E6%94%B9%2B%E5%88%A0%E9%99%A4%EF%BC%89" tabindex="-1" id="2-4-SQL-基本操作——库操作（选择-修改-删除）">2.4 SQL 基本操作——库操作（选择+修改+删除）</h3>
<h4 id="%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE%E5%BA%93" tabindex="-1" id="选择数据库">选择数据库</h4>
<p>为什么要选择数据库？因为数据是存储到数据表，表存在数据库下。如果要操作数据，那么必须进入到对应的数据库才行。</p>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">use 数据库名字;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">use myfirstdb;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Database changed<br></code></pre></td></tr></table></figure>
<h4 id="%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93" tabindex="-1" id="修改数据库">修改数据库</h4>
<p>修改数据库字符集（库选项）：字符集和校对集</p>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> database 数据库名字 charset<span class="hljs-operator">=</span>字符集;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> database myfirstdb charset gbk;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Query OK, 1 row affected (0.02 sec)<br></code></pre></td></tr></table></figure>
<p><img src="day01/04.webp" alt="webp"></p>
<p>是否可以修改数据库名字？MySQL 5.5 之前是可以修改的 rename 命令，但是 5.5 之后就不可以。</p>
<h4 id="%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93" tabindex="-1" id="删除数据库">删除数据库</h4>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> database 数据库名;<br></code></pre></td></tr></table></figure>
<p>删除虽简单，但是切记要做好安全操作：确保里面数据没有问题。（重要）</p>
<p>删除数据库之后：对应的存储数据的文件夹也会被删除（opt 文件也被删除）</p>
<p><img src="day01/05.webp" alt="webp"></p>
<h3 id="3.1-sql-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E8%A1%A8%E6%93%8D%E4%BD%9C%EF%BC%88%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8%EF%BC%89" tabindex="-1" id="3-1-SQL-基本操作——表操作（创建数据表）">3.1 SQL 基本操作——表操作（创建数据表）</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 创建数据表</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> class(<br>    <span class="hljs-comment">-- 字段名 字段类型</span><br>    <span class="hljs-comment">-- 字段与表其实是分不开</span><br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>)  <span class="hljs-comment">-- 10 个字符（不能超过）</span><br>)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> teacher(name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>));<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Query OK, 0 rows affected (0.02 sec)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> student(name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>))charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Query OK, 0 rows affected, 1 warning (0.06 sec)<br></code></pre></td></tr></table></figure>
<p><img src="day01/06.webp" alt="webp"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 在 mydatabase2 下创建一个与 teacher 一样的表</span><br>use mydatabase2;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> teacher <span class="hljs-keyword">like</span> myfirstdb.teacher;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Query OK, 0 rows affected (0.03 sec)<br></code></pre></td></tr></table></figure>
<h3 id="3.2-sql-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E8%A1%A8%E6%93%8D%E4%BD%9C%EF%BC%88%E5%A4%9A%E7%BB%B4%E5%BA%A6%E6%98%BE%E7%A4%BA%E8%A1%A8%EF%BC%89" tabindex="-1" id="3-2-SQL-基本操作——表操作（多维度显示表）">3.2 SQL 基本操作——表操作（多维度显示表）</h3>
<h4 id="%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE%E8%A1%A8" tabindex="-1" id="显示数据表">显示数据表</h4>
<p>每当一张数据表创建，那么就会在对应的数据库下创建一些文件（与存储引擎有关），表示数据表的结构</p>
<p><img src="day01/07.webp" alt="webp"></p>
<p><code>ibdata</code> 中存储所有 <code>innodb</code> 存储引擎对应的表数据：</p>
<p><img src="day01/08.webp" alt="webp"></p>
<p>显示所有表，基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> tables;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-----------------------+<br>| Tables_in_mydatabase2 |<br>+-----------------------+<br>| teacher               |<br>+-----------------------+<br>1 row in set (0.01 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E5%8C%B9%E9%85%8D%E6%98%BE%E7%A4%BA%E8%A1%A8" tabindex="-1" id="匹配显示表">匹配显示表</h4>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> tables <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;匹配模式&#x27;</span>;<br></code></pre></td></tr></table></figure>
<h4 id="%E6%98%BE%E7%A4%BA%E8%A1%A8%E7%BB%93%E6%9E%84" tabindex="-1" id="显示表结构">显示表结构</h4>
<p>本质含义：显示表中所包含的字段信息（名字，类型，属性等）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">describe</span> teacher;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------+-------------+------+-----+---------+-------+<br>| Field | Type        | Null | Key | Default | Extra |<br>+-------+-------------+------+-----+---------+-------+<br>| name  | varchar(10) | YES  |     | NULL    |       |<br>+-------+-------------+------+-----+---------+-------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">desc</span> teacher;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------+-------------+------+-----+---------+-------+<br>| Field | Type        | Null | Key | Default | Extra |<br>+-------+-------------+------+-----+---------+-------+<br>| name  | varchar(10) | YES  |     | NULL    |       |<br>+-------+-------------+------+-----+---------+-------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> columns <span class="hljs-keyword">from</span> student;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------+-------------+------+-----+---------+-------+<br>| Field | Type        | Null | Key | Default | Extra |<br>+-------+-------------+------+-----+---------+-------+<br>| name  | varchar(10) | YES  |     | NULL    |       |<br>+-------+-------------+------+-----+---------+-------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<p>MySQL 中有多种语句结束符。</p>
<ul>
<li>
<p><code>;</code> 与 <code>\g</code> 所表示的效果是一样的，都是字段在上排横着，下面跟对应的数据</p>
</li>
<li>
<p><code>\G</code> 字段在左侧竖着，数据在右侧横着</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> columns <span class="hljs-keyword">from</span> student\G<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">*************************** 1. row ***************************<br>  Field: name<br>   Type: varchar(10)<br>   Null: YES<br>    Key:<br>Default: NULL<br>  Extra:<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h3 id="4.1-sql-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E8%A1%A8%E6%93%8D%E4%BD%9C%EF%BC%88%E5%A4%9A%E7%BB%B4%E5%BA%A6%E4%BF%AE%E6%94%B9%E8%A1%A8%EF%BC%89" tabindex="-1" id="4-1-SQL-基本操作——表操作（多维度修改表）">4.1 SQL 基本操作——表操作（多维度修改表）</h3>
<h4 id="%E4%BF%AE%E6%94%B9%E8%A1%A8%E9%80%89%E9%A1%B9" tabindex="-1" id="修改表选项">修改表选项</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> student charset gbk;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Query OK, 0 rows affected (0.03 sec)<br>Records: 0  Duplicates: 0  Warnings: 0<br></code></pre></td></tr></table></figure>
<p><img src="day01/09.webp" alt="webp"></p>
<h4 id="%E9%87%8D%E5%91%BD%E5%90%8D%E8%A1%A8" tabindex="-1" id="重命名表">重命名表</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 数据库中数据表名字通常有前缀；取数据库的前两个字母加上下划线</span><br>rename <span class="hljs-keyword">table</span> student <span class="hljs-keyword">to</span> my_student;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Query OK, 0 rows affected (0.03 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5" tabindex="-1" id="添加字段">添加字段</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 给学生表增加 age 字段</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> my_student <span class="hljs-keyword">add</span> <span class="hljs-keyword">column</span> age <span class="hljs-type">int</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 增加字段：放到第一个字段</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> my_student <span class="hljs-keyword">add</span> id <span class="hljs-type">int</span> <span class="hljs-keyword">first</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">MySQL&gt; desc my_student;<br>+-------+-------------+------+-----+---------+-------+<br>| Field | Type        | Null | Key | Default | Extra |<br>+-------+-------------+------+-----+---------+-------+<br>| id    | int         | YES  |     | NULL    |       |<br>| name  | varchar(10) | YES  |     | NULL    |       |<br>| age   | int         | YES  |     | NULL    |       |<br>+-------+-------------+------+-----+---------+-------+<br>3 rows in set (0.01 sec)<br></code></pre></td></tr></table></figure>
<p><img src="day01/10.webp" alt="webp"></p>
<h4 id="%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84" tabindex="-1" id="修改表结构">修改表结构</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 修改字段名</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> my_student change age nj <span class="hljs-type">int</span>;<br><br><span class="hljs-comment">-- 修改字段类型</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> my_student modify name <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>);<br></code></pre></td></tr></table></figure>
<p><img src="day01/11.webp" alt="webp"></p>
<h4 id="%E5%88%A0%E9%99%A4%E8%A1%A8%E7%BB%93%E6%9E%84" tabindex="-1" id="删除表结构">删除表结构</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 删除字段</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> my_student <span class="hljs-keyword">drop</span> nj;<br><br><span class="hljs-comment">-- 删除表名</span><br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> teacher;<br></code></pre></td></tr></table></figure>
<h3 id="5.1-sql-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%EF%BC%88%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%EF%BC%89" tabindex="-1" id="5-1-SQL-基本操作——数据操作（插入数据）">5.1 SQL 基本操作——数据操作（插入数据）</h3>
<h4 id="%E6%8F%92%E5%85%A5%E6%93%8D%E4%BD%9C" tabindex="-1" id="插入操作">插入操作</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_teacher(<br>	name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>),<br>    age <span class="hljs-type">int</span><br>)charset utf8;<br></code></pre></td></tr></table></figure>
<p>本质含义：将数据以 SQL 的形式存储到指定的数据表（字段）里面</p>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> 表名[(字段列表)] <span class="hljs-keyword">values</span> (对应字段列表);<br></code></pre></td></tr></table></figure>
<p>注意：后面（<code>values</code> 中）对应的值列表只需要与前面的字段列表相对应即可（不一定与表结构完全一致）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 插入数据到数据表</span><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_teacher (name, age) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;Jack&#x27;</span>, <span class="hljs-number">30</span>);<br></code></pre></td></tr></table></figure>
<p>注意：字段列表并不一定非要有所有的表中字段。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_teacher (name) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;Han&#x27;</span>);<br></code></pre></td></tr></table></figure>
<p>基本语法：向表中所有字段插入数据（值列表必须与字段列表一致）。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> 表名 <span class="hljs-keyword">values</span> (对应表结构);<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_teacher <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;LiLei&#x27;</span>, <span class="hljs-number">28</span>);<br></code></pre></td></tr></table></figure>
<h4 id="%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C" tabindex="-1" id="查询操作">查询操作</h4>
<p>查询表中所有数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 获取所有数据</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_teacher;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------+------+<br>| name  | age  |<br>+-------+------+<br>| Jack  |   30 |<br>| Han   | NULL |<br>| LiLei |   28 |<br>+-------+------+<br>3 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<p><img src="day01/12.webp" alt="webp"></p>
<p>查询表中部分字段：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段列表 <span class="hljs-keyword">from</span> 表名;<br></code></pre></td></tr></table></figure>
<p>简单条件查询数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段列表 <span class="hljs-keyword">from</span> 表名 <span class="hljs-keyword">where</span> 字段名 <span class="hljs-operator">=</span> 值;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> name <span class="hljs-keyword">from</span> my_teacher <span class="hljs-keyword">where</span> age <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+------+<br>| name |<br>+------+<br>| Jack |<br>+------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C" tabindex="-1" id="删除操作">删除操作</h4>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> 表名 <span class="hljs-keyword">where</span> 条件;<br><span class="hljs-comment">-- 如果没有 where 条件: 意味着系统会自动删除该表所有数据（慎用）</span><br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 删除年龄为 30 岁的老师</span><br><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> my_teacher <span class="hljs-keyword">where</span> age <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;<br></code></pre></td></tr></table></figure>
<h4 id="%E4%BF%AE%E6%94%B9%E6%93%8D%E4%BD%9C" tabindex="-1" id="修改操作"><strong>修改操作</strong></h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 更新年龄 Han</span><br><span class="hljs-keyword">update</span> my_teacher <span class="hljs-keyword">set</span> age <span class="hljs-operator">=</span> <span class="hljs-number">28</span> <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Han&#x27;</span>;<br></code></pre></td></tr></table></figure>
<h3 id="6.1-%E5%AD%97%E7%AC%A6%E9%9B%86%E2%80%94%E2%80%94%E7%AE%80%E4%BB%8B" tabindex="-1" id="6-1-字符集——简介">6.1 字符集——简介</h3>
<h4 id="%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E6%A6%82%E5%BF%B5" tabindex="-1" id="字符编码概念">字符编码概念</h4>
<p>字符（Character）是各种文字和符号的总称，包括各国家文字、标点符号、图形符号、数字等。</p>
<p>字符编码（character code）是计算机针对各种符号，在计算机中的一种二进制存储代号。</p>
<h4 id="%E5%AD%97%E7%AC%A6%E9%9B%86%E6%A6%82%E5%BF%B5" tabindex="-1" id="字符集概念">字符集概念</h4>
<p>字符集（Character set）是多个字符的集合，字符集种类较多，每个字符集包含的字符个数不同。</p>
<p>常见字符集名称：ASCII 字符集、GB2312 字符集、BIG5 字符集、GB18030 字符集、Unicode 字符集等。计算机要准确的处理各种字符集文字，需要进行字符编码，以便计算机能够识别和存储各种文字。中文文字数目大，而且还分为简体中文和繁体中文两种不同书写规则的文字，而计算机最初是按英语单字节字符设计的，因此，对中文字符进行编码，是中文信息交流的技术基础。</p>
<h3 id="6.2-mysql-%E5%AD%97%E7%AC%A6%E9%9B%86%E8%AE%BE%E7%BD%AE" tabindex="-1" id="6-2-MySQL-字符集设置">6.2 MySQL 字符集设置</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查看系统保存的三种关系处理字符集</span><br><span class="hljs-keyword">show</span> variables <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;character_set%&#x27;</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+--------------------------+---------------------------------------------------------+<br>| Variable_name            | Value                                                   |<br>+--------------------------+---------------------------------------------------------+<br>| character_set_client     | gbk                                                     |<br>| character_set_connection | gbk                                                     |<br>| character_set_database   | gbk                                                     |<br>| character_set_filesystem | binary                                                  |<br>| character_set_results    | gbk                                                     |<br>| character_set_server     | utf8mb4                                                 |<br>| character_set_system     | utf8mb3                                                 |<br>| character_sets_dir       | C:\Program Files\MySQL\MySQL Server 8.0\share\charsets\ |<br>+--------------------------+---------------------------------------------------------+<br></code></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>含义</strong></th>
<th><strong>当前值</strong></th>
<th><strong>解释</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>character_set_client</code></td>
<td><strong>客户端发送到 MySQL</strong> 的数据所使用的字符集</td>
<td><code>gbk</code></td>
<td>客户端发送的数据被认为是 GBK 编码。</td>
</tr>
<tr>
<td><code>character_set_connection</code></td>
<td><strong>客户端与服务器之间的连接数据</strong>转换使用的字符集</td>
<td><code>gbk</code></td>
<td>客户端发送的数据会被解析为 GBK 编码。</td>
</tr>
<tr>
<td><code>character_set_database</code></td>
<td>当前默认数据库使用的字符集</td>
<td><code>gbk</code></td>
<td>数据库存储的数据编码为 GBK。</td>
</tr>
<tr>
<td><code>character_set_filesystem</code></td>
<td>用于处理文件名的字符集（如文件名、目录名）</td>
<td><code>binary</code></td>
<td>文件名按二进制格式存储和处理，不受字符集影响。</td>
</tr>
<tr>
<td><code>character_set_results</code></td>
<td>从<strong>服务器返回给客户端</strong>的数据的字符集</td>
<td><code>gbk</code></td>
<td>查询结果会被转换为 GBK 编码后发送给客户端。</td>
</tr>
<tr>
<td><code>character_set_server</code></td>
<td>服务器端的默认字符集</td>
<td><code>utf8mb4</code></td>
<td>服务器默认使用 UTF-8（支持 4 字节 Unicode）的字符集，适合国际化需求。</td>
</tr>
<tr>
<td><code>character_set_system</code></td>
<td>MySQL 系统表（如 <code>MySQL</code> 数据库中的表）使用的字符集</td>
<td><code>utf8mb3</code></td>
<td>系统表使用 UTF-8（3 字节 Unicode）的字符集。</td>
</tr>
<tr>
<td><code>character_sets_dir</code></td>
<td>字符集定义文件所在的目录路径</td>
<td><code>C:\Program Files\MySQL\MySQL Server 8.0\share\charsets\</code></td>
<td>表示字符集配置文件的存储路径，用于 MySQL 的字符集配置和支持。</td>
</tr>
</tbody>
</table>
<p>修改变量：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> <span class="hljs-type">character</span> <span class="hljs-keyword">set</span> client <span class="hljs-operator">=</span> gbk;<br></code></pre></td></tr></table></figure>
<h2 id="day02" tabindex="-1" id="day02">day02</h2>
<h3 id="1.1-%E5%88%97%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%E6%95%B4%E5%9E%8B" tabindex="-1" id="1-1-列类型——整型">1.1 列类型——整型</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tinyint</td>
<td>迷你整形，系统采用<strong>一</strong>个字节来保存的整形：一个字节=8 位，最大能表示的数值是 0-255</td>
</tr>
<tr>
<td>smallint</td>
<td>小整形，系统采用<strong>两</strong>个字节来保存的整形，能表示 0-65535 之间</td>
</tr>
<tr>
<td>mediumint</td>
<td>中整形，采用<strong>三</strong>个字节来保存数据</td>
</tr>
<tr>
<td>int</td>
<td>整形（标准整形），采用<strong>四</strong>个字节来保存数据。</td>
</tr>
<tr>
<td>bigint</td>
<td>大整形，采用<strong>八</strong>个字节来保存数据。</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 创建数据表</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_int(<br>    int_1 tinyint,<br>    int_2 <span class="hljs-type">smallint</span>,<br>    int_3 mediumint,<br>    int_4 <span class="hljs-type">int</span>,<br>    int_5 <span class="hljs-type">bigint</span><br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_int <span class="hljs-keyword">values</span>(<span class="hljs-number">10</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">100000</span>, <span class="hljs-number">10000000</span>, <span class="hljs-number">1000000000</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Query OK, 0 rows affected, 1 warning (0.04 sec)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_int <span class="hljs-keyword">values</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">ERROR 1264 (22003): Out of range value for column &#x27;int_1&#x27; at row 1<br></code></pre></td></tr></table></figure>
<p>这里数据超出了范围，是因为当前的 <code>tinyint</code> 支持存储了负数，此时存储范围为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mo>−</mo><mn>1</mn><mn>2</mn><mn>7</mn><mo separator="true">,</mo><mn>1</mn><mn>2</mn><mn>8</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">[-127, 128]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">[</span><span class="mord">−</span><span class="mord mathrm">1</span><span class="mord mathrm">2</span><span class="mord mathrm">7</span><span class="mpunct">,</span><span class="mord mathrm">1</span><span class="mord mathrm">2</span><span class="mord mathrm">8</span><span class="mclose">]</span></span></span></span>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">insert into my_int values(-128, 255, 255, 255, 255);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------+-------+--------+----------+------------+<br>| int_1 | int_2 | int_3  | int_4    | int_5      |<br>+-------+-------+--------+----------+------------+<br>|    10 |  1000 | 100000 | 10000000 | 1000000000 |<br>|  -128 |   255 |    255 |      255 |        255 |<br>+-------+-------+--------+----------+------------+<br></code></pre></td></tr></table></figure>
<h3 id="1.2-%E5%88%97%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%E6%98%BE%E7%A4%BA%E9%95%BF%E5%BA%A6%EF%BC%88zerofill%EF%BC%89" tabindex="-1" id="1-2-列类型——显示长度（zerofill）">1.2 列类型——显示长度（zerofill）</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> my_int <span class="hljs-keyword">add</span> int_7 tinyint zerofill <span class="hljs-keyword">first</span>;<br></code></pre></td></tr></table></figure>
<p>这段语句将 tinyint 转为 zerofill 形式，当位数不足时，往前自动补零。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">desc</span> my_int;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------+------------------------------+------+-----+---------+-------+<br>| Field | Type                         | Null | Key | Default | Extra |<br>+-------+------------------------------+------+-----+---------+-------+<br>| int_7 | tinyint(3) unsigned zerofill | YES  |     | NULL    |       |<br>| int_1 | tinyint                      | YES  |     | NULL    |       |<br>| int_2 | smallint                     | YES  |     | NULL    |       |<br>| int_3 | mediumint                    | YES  |     | NULL    |       |<br>| int_4 | int                          | YES  |     | NULL    |       |<br>| int_5 | bigint                       | YES  |     | NULL    |       |<br>+-------+------------------------------+------+-----+---------+-------+<br>6 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<p>其中的 3 表示该类型最大能表示的位数。</p>
<h3 id="1.3-%E5%88%97%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%E5%B0%8F%E6%95%B0%E5%9E%8B%EF%BC%88%E6%B5%AE%E7%82%B9%E6%95%B0%EF%BC%89" tabindex="-1" id="1-3-列类型——小数型（浮点数）">1.3 列类型——小数型（浮点数）</h3>
<p>在 MySQL 中将小数类型分为两类：浮点型和定点型。</p>
<hr>
<p>浮点型又称之为精度类型：是一种有可能丢失精度的数据类型，数据有可能不那么准确（由其是在超出范围的时候）</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>float</td>
<td>float 又称之为单精度类型：系统提供 4 个字节用来存储数据，但是能表示的数据范围比整型大的多，大概是 10^38；只能保证大概 7 个左右的精度（如果数据在 7 位数以内，那么基本是准确的，但是如果超过 7 位数，那么就是不准确的）</td>
</tr>
<tr>
<td>double</td>
<td>double 又称之为双精度：系统用 8 个字节来存储数据，表示的范围更大，10^308 次方，但是精度也只有 15 位左右。</td>
</tr>
</tbody>
</table>
<p>基本语法</p>
<ul>
<li><code>float</code>：表示不指定小数位的浮点数（以默认精度存储）。</li>
<li><code>float(M, D)</code>：表示一共显示 M 个有效数字，其中小数部分占 D 位。（这个定义对存储本身没有影响，只会影响显示格式。）
<ul>
<li><code>float(10, 2)</code>：整数部分为 8 位，小数部分为 2 位。</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_float(<br>	f1 <span class="hljs-type">float</span>,<br>    f2 <span class="hljs-type">float</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>)<br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_float <span class="hljs-keyword">values</span>(<span class="hljs-number">123.123</span>, <span class="hljs-number">12345678.90</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+-------------+<br>| f1      | f2          |<br>+---------+-------------+<br>| 123.123 | 12345679.00 |<br>+---------+-------------+<br></code></pre></td></tr></table></figure>
<p>浮点数可以采用科学计数法来存储数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_float <span class="hljs-keyword">values</span>(<span class="hljs-number">123.123</span>, <span class="hljs-number">10e5</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+-------------+<br>| f1      | f2          |<br>+---------+-------------+<br>| 123.123 | 12345679.00 |<br>| 123.123 |  1000000.00 |<br>+---------+-------------+<br></code></pre></td></tr></table></figure>
<p>浮点数的应用，通常是用来保存一些数量特别大，大到<strong>可以不用那么精确的数据</strong>。</p>
<h3 id="2.1-%E5%88%97%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%E5%B0%8F%E6%95%B0%E5%9E%8B%EF%BC%88%E5%AE%9A%E7%82%B9%E6%95%B0%EF%BC%89" tabindex="-1" id="2-1-列类型——小数型（定点数）">2.1 列类型——小数型（定点数）</h3>
<p>定点数：能够保证数据精确的小数（小数部分可能不精确，超出长度会四舍五入），整数部分一定精确。</p>
<p>Decimal 定点数：系统自动根据存储的数据来分配存储空间，每大概 9 个数就会分配四个字节来进行存储，同时小数和整数部分是分开的。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_decimal(<br>	f1 <span class="hljs-type">float</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>),<br>    d1 <span class="hljs-type">decimal</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>)<br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_decimal <span class="hljs-keyword">values</span>(<span class="hljs-number">12345678.90</span>, <span class="hljs-number">12345678.90</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------------+-------------+<br>| f1          | d1          |<br>+-------------+-------------+<br>| 12345679.00 | 12345678.90 |<br>+-------------+-------------+<br></code></pre></td></tr></table></figure>
<p>定点数如果整数部分进位超出长度也会报错。</p>
<p>定点数的应用：如果涉及到钱的时候有可能使用定点数。</p>
<h3 id="2.2-%E5%88%97%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%9E%8B" tabindex="-1" id="2-2-列类型——时间日期型">2.2 列类型——时间日期型</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>date</td>
<td>日期类型：系统使用三个字节来存储数据，对应的格式为：YYYY-mm-dd，能表示的范围是从 1000-01-01 到 9999-12-12，初始值为 0000-00-00</td>
</tr>
<tr>
<td>time</td>
<td>时间类型：能够表示某个指定的时间，但是系统同样是提供 3 个字节来存储。对应的格式为：HH:ii:ss，但是 MySQL 中的 time 类型能够表示时间范围要大的多，能表示从 -838:59:59~838:59:59，在 MySQL 中具体的用处是用来描述时间段。</td>
</tr>
<tr>
<td>datetime</td>
<td>日期时间类型：就是将前面的 date和 time 合并起来，表示的时间，使用 8 个字节存储数据，格式为 YYYY-mm-dd HH:ii:ss，能表示的区间 1000-01-0100:00:00 到 9999-12-1223:59:59，其可以为 0 值：0000-00-0000:00:00.</td>
</tr>
<tr>
<td>timestamp</td>
<td>时间戳类型：MySQL 中的时间戳只是表示从格林威治时间开始，但是其格式依然是 YYY-mm-dd HH:ll:ss</td>
</tr>
<tr>
<td>year</td>
<td>年类型：占用一个字节来保存，能表示1900~2155年，但是 year 有两种数据插入方式：0~99 和四位数的具体年<br/>year 进行两位数插入的时候，有一个区间划分，零界点为 69 和 70：当输入 69 以下，那么系统时间为 20+ 数字，如果是 70 以上，那配系统时间为 19+ 数字。</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_date(<br>	d1 <span class="hljs-type">date</span>,<br>    d2 <span class="hljs-type">time</span>,<br>    d3 datetime,<br>    d4 <span class="hljs-type">timestamp</span>,<br>    d5 <span class="hljs-keyword">year</span><br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------+-----------+------+-----+---------+-------+<br>| Field | Type      | Null | Key | Default | Extra |<br>+-------+-----------+------+-----+---------+-------+<br>| d1    | date      | YES  |     | NULL    |       |<br>| d2    | time      | YES  |     | NULL    |       |<br>| d3    | datetime  | YES  |     | NULL    |       |<br>| d4    | timestamp | YES  |     | NULL    |       |<br>| d5    | year      | YES  |     | NULL    |       |<br>+-------+-----------+------+-----+---------+-------+<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_date <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;1900-01-01&#x27;</span>, <span class="hljs-string">&#x27;12:12:12&#x27;</span>, <span class="hljs-string">&#x27;1900-01-01 12:12:12&#x27;</span>, <span class="hljs-string">&#x27;1999-01-01 12:12:12&#x27;</span>, <span class="hljs-number">69</span>);<br></code></pre></td></tr></table></figure>
<p>在进行时间类型录入的时候（time）还可以使用一个简单的日期代替时间，在时间格式之前加一个空格，然后指定一个数字（可以是负数）：系统会自动将该数字转换成天数“24 小时，再加上后面的时间。&quot;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_date <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;1900-01-01&#x27;</span>, <span class="hljs-string">&#x27;5 12:12:12&#x27;</span>, <span class="hljs-string">&#x27;1900-01-01 12:12:12&#x27;</span>, <span class="hljs-string">&#x27;1999-01-01 12:12:12&#x27;</span>, <span class="hljs-number">70</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+------------+-----------+---------------------+---------------------+------+<br>| d1         | d2        | d3                  | d4                  | d5   |<br>+------------+-----------+---------------------+---------------------+------+<br>| 2000-01-01 | 12:12:12  | 1900-01-01 12:12:12 | 1999-01-01 12:12:12 | 2069 |<br>| 1900-01-01 | 132:12:12 | 1900-01-01 12:12:12 | 1999-01-01 12:12:12 | 1970 |<br>+------------+-----------+---------------------+---------------------+------+<br></code></pre></td></tr></table></figure>
<h3 id="2.3-%E5%88%97%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%EF%BC%88char-%E5%92%8C-varchar%EF%BC%89" tabindex="-1" id="2-3-列类型——字符串类型（char-和-varchar）">2.3 列类型——字符串类型（char 和 varchar）</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>char</td>
<td>定长字符：指定长度之后，系统一定会分配指定的空间用于存储数据<br/>基本语法：<code>char(L)</code>，<code>L</code> 代表字符数（中文与英文字母一样），<code>L</code> 长度为 <code>0</code> 到 <code>255</code></td>
</tr>
<tr>
<td>varchar</td>
<td>变长字符：指定长度之后，系统会根据实际存储的数据来计算长度，分配合适的长度（数据没有超出长度）。<br/>基本语法：<code>Varchar(L)</code>，<code>L</code> 代表字符数，<code>L</code> 的长度理论值为 <code>0</code> 到 65535<br/>因为 <code>varchar</code> 要记录数据长度（系统根据数据长度自动分配空间），所以每个 varchar 数据产生后，系统都会在数据后面增加 1-2个字节的额外开销：是用来保存数据所占用的空间长度</td>
</tr>
</tbody>
</table>
<p><code>char</code> 和 <code>varchar</code> 数据存储对比（utf8，一个字符都会占用 3 个字节）</p>
<table>
<thead>
<tr>
<th>存储数据</th>
<th>char(2)</th>
<th>varchar(2)</th>
<th>char 所占字节</th>
<th>varchar 所占字节</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>A</td>
<td>A</td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo>×</mo><mn>3</mn><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">2\times3=6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">2</span><span class="mbin">×</span><span class="mord mathrm">3</span><span class="mrel">=</span><span class="mord mathrm">6</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>×</mo><mn>3</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">1\times3+1=4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mbin">×</span><span class="mord mathrm">3</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mrel">=</span><span class="mord mathrm">4</span></span></span></span></td>
</tr>
<tr>
<td>AB</td>
<td>AB</td>
<td>AB</td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo>×</mo><mn>3</mn><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">2\times3=6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">2</span><span class="mbin">×</span><span class="mord mathrm">3</span><span class="mrel">=</span><span class="mord mathrm">6</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo>×</mo><mn>3</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">2\times3+1=7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">2</span><span class="mbin">×</span><span class="mord mathrm">3</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mrel">=</span><span class="mord mathrm">7</span></span></span></span></td>
</tr>
</tbody>
</table>
<p>char 和 varchar 的区别</p>
<ul>
<li><code>char</code> 一定会使用指定的空间，<code>varchar</code> 是根据数据来定空间。</li>
<li><code>char</code> 的数据查询效率比 <code>varchar</code> 高：<code>varchar</code> 是需要通过后面的记录数来计算</li>
</ul>
<hr>
<ul>
<li>如果确定数据一定是占指定长度，那么使用 <code>char</code> 类型；</li>
<li>如果不确定数据到底有多少，那么使用 <code>varchar</code> 类型；</li>
<li>如果数据长度超过 255 个字符，不论是否固定长度，都会使用 <code>text</code>，不再使用 <code>char</code> 和 <code>varchar</code></li>
</ul>
<h3 id="3.1-%E5%88%97%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%EF%BC%88text-%E5%92%8C-enum%EF%BC%89" tabindex="-1" id="3-1-列类型——字符串类型（text-和-enum）">3.1 列类型——字符串类型（text 和 enum）</h3>
<h4 id="text" tabindex="-1" id="Text">Text</h4>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tinytext</td>
<td>系统使用一个字节来保存，实际能够存储的数据为：2^8+1</td>
</tr>
<tr>
<td>text</td>
<td>使用两个字节保存，实际存储为：2^16+2</td>
</tr>
<tr>
<td>mediumtext</td>
<td>使用三个字节保存，实际存储为：2^24+3</td>
</tr>
<tr>
<td>longtext</td>
<td>使用四个字节保存，实际存储为：2^32+4</td>
</tr>
</tbody>
</table>
<p>注意:</p>
<ul>
<li>在选择对应的存储文本的时候，不用刻意去选择 text 类型，系统会自动根据存储的数据长度来选择合适的文本类型。</li>
<li>在选择字符存储的时候，如果数据超过 255 个字符，那么一定选择 text 存储。</li>
</ul>
<h4 id="enum" tabindex="-1" id="Enum">Enum</h4>
<p>枚举类型，在数据插入之前，先设定几个项，这几个项就是可能最终出现的数据结果。</p>
<p>如果确定某个字段的数据只有那么几个值，如性别，男、女、保密，系统就可以在设定字段的时候规定当前字段只能存放固定的几个值:使用枚举，</p>
<p>基本语法：<code>enum(数据值 1,数据值 2...)</code></p>
<p>系统提供了 1 到 2 个字节来存储枚举数据：通过计算 enum 列举的具体值来选择实际的存储空间：如果数据值列表在 255 个以内，那么一个字节就够，如果超过 255 但是小于 65535，那么系统采用两个字节保存。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_enum(<br>	gender enum(<span class="hljs-string">&#x27;男&#x27;</span>, <span class="hljs-string">&#x27;女&#x27;</span>, <span class="hljs-string">&#x27;保密&#x27;</span>)<br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_enum <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;男&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_enum <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;女&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_enum <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;男&#x27;</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+--------+<br>| gender |<br>+--------+<br>| 男     |<br>| 女     |<br>| 男     |<br>+--------+<br></code></pre></td></tr></table></figure>
<p>枚举 enum 的存储原理：实际上字段上所存储的值并不是真正的字符串，而是字符串对应的下标；当系统设定枚举类型的时候，会给枚举中每个元素定义一个下标，这个下标规则从 1 开始：<code>enum(1→'男', 2→'女', 3→'保密')</code></p>
<p>特性：在 MySQL 中系统是自动进行类型转换的：如果数据碰到 <code>“+、-、&quot;、/”</code>系统就会自动将数据转换成数值：而普通字符串转换成数值为 0。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> gender<span class="hljs-operator">+</span><span class="hljs-number">0</span> <span class="hljs-keyword">from</span> my_enum;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+<br>| gender+0 |<br>+----------+<br>|        1 |<br>|        2 |<br>|        1 |<br>+----------+<br>3 rows in set (0.01 sec)<br></code></pre></td></tr></table></figure>
<p>既然实际 enum 字段存储的结果是数值：那么在进行数据插入的时候，就可以使用对应的数值来进行。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_enum <span class="hljs-keyword">values</span>(<span class="hljs-number">3</span>);<br></code></pre></td></tr></table></figure>
<h3 id="3.2-%E5%88%97%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%EF%BC%88set%EF%BC%89" tabindex="-1" id="3-2-列类型——字符串类型（set）">3.2 列类型——字符串类型（set）</h3>
<p>集合：是一种将多个数据选项可以同时保存的数据类型，本质是将指定的项按照对应的二进制位来进行控制：1 表示该选项被选中，0 表示该选项没有被选中。</p>
<p>基本语法：<code>set('值 1','值 2','值 3'....)</code></p>
<p>系统为 set 提供了多个字节进行保存，但是系统会自动计算来选择具体的存储单元。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_set(<br>	hobby <span class="hljs-keyword">set</span>(<span class="hljs-string">&#x27;篮球&#x27;</span>, <span class="hljs-string">&#x27;足球&#x27;</span>, <span class="hljs-string">&#x27;羽毛球&#x27;</span>, <span class="hljs-string">&#x27;乒乓球&#x27;</span>, <span class="hljs-string">&#x27;网球&#x27;</span>, <span class="hljs-string">&#x27;橄榄球&#x27;</span>, <span class="hljs-string">&#x27;冰球&#x27;</span>, <span class="hljs-string">&#x27;高俅&#x27;</span>)<br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_set <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;篮球,乒乓球,冰球&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_set <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;高球,足球,篮球&#x27;</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+------------------+<br>| hobby            |<br>+------------------+<br>| 篮球,乒乓球,冰球 |<br>| 篮球,足球,高俅   |<br>+------------------+<br></code></pre></td></tr></table></figure>
<p>注意：数字插入的前提是对应的二进制位上都有对应的数据项</p>
<p>Set 集合的意义：</p>
<ul>
<li>规范数据</li>
<li>节省存储空间</li>
</ul>
<h3 id="3.3-%E5%88%97%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94mysql-%E8%AE%B0%E5%BD%95%E9%95%BF%E5%BA%A6%EF%BC%88varchar-%E6%9C%80%E5%A4%A7%E9%95%BF%E5%BA%A6%EF%BC%89" tabindex="-1" id="3-3-列类型——MySQL-记录长度（varchar-最大长度）">3.3 列类型——MySQL 记录长度（varchar 最大长度）</h3>
<ul>
<li>utf8 65535 / 3 = 21845 如果采用 varchar 存储：需要 2 个额外的字节来保存长度</li>
<li>gbk 65535 / 2 = 32767 | 1 如果采用 varchar 存储：需要额外 2 个字节</li>
</ul>
<h3 id="4.1-%E5%88%97%E5%B1%9E%E6%80%A7%E2%80%94%E2%80%94%E7%AE%80%E5%8D%95%E5%B1%9E%E6%80%A7" tabindex="-1" id="4-1-列属性——简单属性">4.1 列属性——简单属性</h3>
<h4 id="null-%E5%B1%9E%E6%80%A7" tabindex="-1" id="Null-属性">Null 属性</h4>
<p>NULL 属性：代表字段为空</p>
<p>如果对应的值为 YES 表示该字段可以为 NULL</p>
<p>注意：</p>
<ol>
<li>在设计表的时候，尽量不要让数据为空。</li>
<li>MySQL 的记录长度为 65535 个字节，如果一个表中有字段允许为 NULL，那么系统就会设计保留一个字节来存储 NULL，最终有效存储长度为 65534 个字节。</li>
</ol>
<h4 id="%E9%BB%98%E8%AE%A4%E5%80%BC" tabindex="-1" id="默认值">默认值</h4>
<p>Default：默认值，当字段被设计的时候，如果允许默认条件下，用户不进行数据的插入，那么就可以使用事先准备好的数据来填充：通常填充的是 NULL。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_default(<br>	name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  <span class="hljs-comment">-- 不能为空</span><br>    age <span class="hljs-type">int</span> <span class="hljs-keyword">default</span> <span class="hljs-number">18</span>  <span class="hljs-comment">-- 表示，如果当前字段在进行数据插入时没有提供，那么就使用 18</span><br>) charset utf8;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_default(name) <span class="hljs-keyword">value</span>(<span class="hljs-string">&#x27;Tom&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_default <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;Jack&#x27;</span>, <span class="hljs-keyword">default</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+------+------+<br>| name | age  |<br>+------+------+<br>| Tom  |   18 |<br>| Jack |   18 |<br>+------+------+<br></code></pre></td></tr></table></figure>
<h4 id="%E5%88%97%E6%8F%8F%E8%BF%B0" tabindex="-1" id="列描述">列描述</h4>
<p>列描述：comment，是专门用于给开发人员进行维护的一个注释说明</p>
<p>基本语法：<code>comment '字段描述';</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_comment(<br>	name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;当前时用户名，不能为空&#x27;</span>,<br>    pass <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;密码不能为空&#x27;</span><br>)charset utf8;<br></code></pre></td></tr></table></figure>
<p><img src="day02/01.webp" alt="webp"></p>
<p>查看 comment：必须通过查看表创建语句。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_comment;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+<br>| Table      | Create Table<br>                                                                                |<br>+------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+<br>| my_comment | CREATE TABLE `my_comment` (<br>  `name` varchar(10) NOT NULL COMMENT &#x27;当前时用户名，不能为空&#x27;,<br>  `pass` varchar(50) NOT NULL COMMENT &#x27;密码不能为空&#x27;<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 |<br>+------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+<br></code></pre></td></tr></table></figure>
<h3 id="4.2-%E5%88%97%E5%B1%9E%E6%80%A7%E2%80%94%E2%80%94%E4%B8%BB%E9%94%AE" tabindex="-1" id="4-2-列属性——主键">4.2 列属性——主键</h3>
<p>顾名思义：主要的键，primary key，在一张表中，有且只有一个字段，里面的值具有唯一性</p>
<h4 id="%E5%88%9B%E5%BB%BA%E4%B8%BB%E9%94%AE" tabindex="-1" id="创建主键">创建主键</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_pri1(<br>	username <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">primary</span> key<br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">desc</span> my_pri1;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+-------------+------+-----+---------+-------+<br>| Field    | Type        | Null | Key | Default | Extra |<br>+----------+-------------+------+-----+---------+-------+<br>| username | varchar(10) | NO   | PRI | NULL    |       |<br>+----------+-------------+------+-----+---------+-------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_pri2(<br>	username <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>),<br>    <span class="hljs-keyword">primary</span> key(username)<br>)charset utf8;<br></code></pre></td></tr></table></figure>
<h4 id="%E8%A1%A8%E5%90%8E%E5%A2%9E%E5%8A%A0" tabindex="-1" id="表后增加">表后增加</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_pri3(<br>	username <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>)<br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> my_pri3 <span class="hljs-keyword">add</span> <span class="hljs-keyword">primary</span> key(username);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+-------------+------+-----+---------+-------+<br>| Field    | Type        | Null | Key | Default | Extra |<br>+----------+-------------+------+-----+---------+-------+<br>| username | varchar(10) | NO   | PRI | NULL    |       |<br>+----------+-------------+------+-----+---------+-------+<br></code></pre></td></tr></table></figure>
<h4 id="%E5%88%A0%E9%99%A4%E4%B8%BB%E9%94%AE" tabindex="-1" id="删除主键">删除主键</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> my_pri3 <span class="hljs-keyword">drop</span> <span class="hljs-keyword">primary</span> key;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+-------------+------+-----+---------+-------+<br>| Field    | Type        | Null | Key | Default | Extra |<br>+----------+-------------+------+-----+---------+-------+<br>| username | varchar(10) | NO   |     | NULL    |       |<br>+----------+-------------+------+-----+---------+-------+<br></code></pre></td></tr></table></figure>
<h4 id="%E5%A4%8D%E5%90%88%E4%B8%BB%E9%94%AE" tabindex="-1" id="复合主键">复合主键</h4>
<p>案例：有一张学生选修课表:一个学生可以选修多个选修课，一个选修课也可以由多个学生来选：但是一个学生在一个选修课中只有一个成绩。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_score(<br>	student_no <span class="hljs-type">char</span>(<span class="hljs-number">10</span>),<br>    course_no <span class="hljs-type">char</span>(<span class="hljs-number">10</span>),<br>    score tinyint <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>    <span class="hljs-keyword">primary</span> key(student_no, course_no)<br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+------------+----------+------+-----+---------+-------+<br>| Field      | Type     | Null | Key | Default | Extra |<br>+------------+----------+------+-----+---------+-------+<br>| student_no | char(10) | NO   | PRI | NULL    |       |<br>| course_no  | char(10) | NO   | PRI | NULL    |       |<br>| score      | tinyint  | NO   |     | NULL    |       |<br>+------------+----------+------+-----+---------+-------+<br></code></pre></td></tr></table></figure>
<p>主键一旦增加，那么对对应的字段有数据要求：</p>
<ol>
<li>当前字段对应的数据不能为空；</li>
<li>当前字段对应的数据不能有任何重复</li>
</ol>
<h4 id="%E4%B8%BB%E9%94%AE%E5%88%86%E7%B1%BB" tabindex="-1" id="主键分类">主键分类</h4>
<p>主键分类采用的是主键所对应的字段的业务意义分类</p>
<p>业务主键：主键所在的字段，具有业务意义（学生 ID，课程 ID）</p>
<p>逻辑主键：自然增长的整型（应用广泛）</p>
<h3 id="5.1-%E5%88%97%E5%B1%9E%E6%80%A7%E2%80%94%E2%80%94%E8%87%AA%E5%A2%9E%E9%95%BF%EF%BC%88%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%EF%BC%89" tabindex="-1" id="5-1-列属性——自增长（基本使用）">5.1 列属性——自增长（基本使用）</h3>
<p>自动增长：<code>auto_increment</code>，当给定某个字段该属性之后，该列的数据在没有提供确定数据的时候，系统会根据之前已经存在的数据进行自动增加后，填充数据。</p>
<p>通常自动增长用于逻辑主键。</p>
<h4 id="%E5%8E%9F%E7%90%86" tabindex="-1" id="原理">原理</h4>
<p>自动增长的原理：</p>
<ol>
<li>在系统中有维护一组数据，用来保存当前使用了自动增长属性的字段，记住当前对应的数据值，再给定一个指定的步长</li>
<li>当用户进行数据插入的时候，如果没有给定值，系统在原始值上再加上步长变成新的数据</li>
<li>自动增长的触发：给定属性的字段没有提供值</li>
<li>自动增长只适用于数值</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_auto(<br>	id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;用户名&#x27;</span>,<br>    pass <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;密码&#x27;</span><br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------+-------------+------+-----+---------+----------------+<br>| Field | Type        | Null | Key | Default | Extra          |<br>+-------+-------------+------+-----+---------+----------------+<br>| id    | int         | NO   | PRI | NULL    | auto_increment |<br>| name  | varchar(10) | NO   |     | NULL    |                |<br>| pass  | varchar(50) | NO   |     | NULL    |                |<br>+-------+-------------+------+-----+---------+----------------+<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_auto <span class="hljs-keyword">values</span>(<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;Tom&#x27;</span>, <span class="hljs-string">&#x27;123456&#x27;</span>);<br></code></pre></td></tr></table></figure>
<h4 id="%E4%BF%AE%E6%94%B9%E8%87%AA%E5%8A%A8%E5%A2%9E%E9%95%BF" tabindex="-1" id="修改自动增长">修改自动增长</h4>
<p>查看自增长：自增长一旦触发使用之后，会自动的在表选项中增加一个选项（一张表最多只能拥有一个自增长）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_auto;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+<br>| Table   | Create Table<br><br>     |<br>+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+<br>| my_auto | CREATE TABLE `my_auto` (<br>  `id` int NOT NULL AUTO_INCREMENT,<br>  `name` varchar(10) NOT NULL COMMENT &#x27;用户名&#x27;,<br>  `pass` varchar(50) NOT NULL COMMENT &#x27;密码&#x27;,<br>  PRIMARY KEY (`id`)<br>) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb3 |<br>+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h3 id="5.2-%E5%88%97%E5%B1%9E%E6%80%A7%E2%80%94%E2%80%94%E8%87%AA%E5%A2%9E%E9%95%BF%EF%BC%88%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%EF%BC%89" tabindex="-1" id="5-2-列属性——自增长（高级使用）">5.2 列属性——自增长（高级使用）</h3>
<h4 id="%E5%88%A0%E9%99%A4%E8%87%AA%E5%8A%A8%E5%A2%9E%E9%95%BF" tabindex="-1" id="删除自动增长">删除自动增长</h4>
<p>删除自增长：就是在字段属性之后不再保留 <code>auto increment</code>，当用户修改自增长所在字段时，如果没有看到 <code>auto_increment</code> 属性，系统会自动清除该自增长。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> my_auto modify id <span class="hljs-type">int</span>;<br></code></pre></td></tr></table></figure>
<h4 id="%E5%88%9D%E5%A7%8B%E8%AE%BE%E7%BD%AE" tabindex="-1" id="初始设置">初始设置</h4>
<p>在系统中，有一组变量用来维护自增长的初始值（<code>auto_increment_increment</code>）和步长（<code>auto_increment_offset</code>）。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> variables <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;auto_increment%&#x27;</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+--------------------------+-------+<br>| Variable_name            | Value |<br>+--------------------------+-------+<br>| auto_increment_increment | 1     |<br>| auto_increment_offset    | 1     |<br>+--------------------------+-------+<br>2 rows in set, 1 warning (0.02 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E7%BB%86%E8%8A%82%E9%97%AE%E9%A2%98" tabindex="-1" id="细节问题">细节问题</h4>
<ul>
<li>一张表只有一个自增长：自增长会上升到表选项中</li>
<li>如果数据插入中没有触发自增长（给定了数据），那么自增长不会表现</li>
</ul>
<h3 id="5.3-%E5%88%97%E5%B1%9E%E6%80%A7%E2%80%94%E2%80%94%E5%94%AF%E4%B8%80%E9%94%AE" tabindex="-1" id="5-3-列属性——唯一键">5.3 列属性——唯一键</h3>
<h4 id="%E5%94%AF%E4%B8%80%E9%94%AE" tabindex="-1" id="唯一键">唯一键</h4>
<p>唯一键：unique key，用来保证对应的字段中的数据唯一的。</p>
<p>主键也可以用来保证字段数据唯一性，但是一张表只有一个主键。</p>
<ul>
<li>唯一键在一张表中可以有多个。</li>
<li>唯一键允许字段数据为 NULL，NULL 可以有多个（NULL 不参与比较）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_unique1(<br>	id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment,<br>    username <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">unique</span><br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_unique2(<br>	id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment,<br>    username <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>),<br>    <span class="hljs-keyword">unique</span> key(username)<br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_unique3(<br>	id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment,<br>    username <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>)<br>)charset utf8;<br><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> my_unique3 <span class="hljs-keyword">add</span> <span class="hljs-keyword">unique</span> key(username);<br></code></pre></td></tr></table></figure>
<p>唯一键效果：在不为空的情况下，不允许重复。</p>
<h4 id="%E5%88%A0%E9%99%A4%E5%94%AF%E4%B8%80%E9%94%AE" tabindex="-1" id="删除唯一键">删除唯一键</h4>
<p>删除的基本语法：<code>alter table 表名 drop index 唯一键名字;</code></p>
<h4 id="%E5%A4%8D%E5%90%88%E5%94%AF%E4%B8%80%E9%94%AE" tabindex="-1" id="复合唯一键">复合唯一键</h4>
<p>唯一键与主键一样可以使用多个字段来共同保证唯一性；</p>
<p>一般主键都是单一字段（逻辑主键），而其他需要唯一性的内容都是由唯一键来处理。</p>
<h3 id="6.1-%E8%A1%A8%E5%85%B3%E7%B3%BB%E2%80%94%E2%80%94%E4%B8%80%E5%AF%B9%E4%B8%80" tabindex="-1" id="6-1-表关系——一对一">6.1 表关系——一对一</h3>
<p>表关系：表与表之间（实体）有什么样的关系，每种关系应该如何设计表结构。</p>
<hr>
<p>一对一：一张表中的一条记录与另外一张表中最多有一条明确的关系：通常，此设计方案保证两张表中使用同样的主键即可</p>
<p>学生表</p>
<table>
<thead>
<tr>
<th>学生 ID（PRI）</th>
<th>姓名</th>
<th>年龄</th>
<th>性别</th>
<th>籍贯</th>
<th>婚否</th>
<th>住址</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>表的使用过程中：常用的信息会经常去查询，而不常用的信息偶尔才会用到。</p>
<p>解决方案：将两张表拆分，常见的放一张表，不常见的放一张表</p>
<p>常用表</p>
<table>
<thead>
<tr>
<th>学生 ID（PRI）</th>
<th>姓名</th>
<th>年龄</th>
<th>性别</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>不常用表</p>
<table>
<thead>
<tr>
<th>学生 ID（PRI）</th>
<th>籍贯</th>
<th>婚否</th>
<th>住址</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="6.2-%E8%A1%A8%E5%85%B3%E7%B3%BB%E2%80%94%E2%80%94%E4%B8%80%E5%AF%B9%E5%A4%9A%EF%BC%88%E5%A4%9A%E5%AF%B9%E4%B8%80%EF%BC%89" tabindex="-1" id="6-2-表关系——一对多（多对一）">6.2 表关系——一对多（多对一）</h3>
<p>一对多，通常也叫作多对一的关系。通常一对多的关系设计的方案，在“多”关系的表中去维护一个字段，这个字段是“一”关系的主键。</p>
<p>母亲表</p>
<table>
<thead>
<tr>
<th>母亲 ID</th>
<th>姓名</th>
<th>年龄</th>
<th>身高</th>
</tr>
</thead>
<tbody>
<tr>
<td>M1</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>M2</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>孩子表</p>
<table>
<thead>
<tr>
<th>孩子 ID</th>
<th>姓名</th>
<th>年龄</th>
<th>身高</th>
<th>母亲 ID</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="6.3-%E8%A1%A8%E5%85%B3%E7%B3%BB%E2%80%94%E2%80%94%E5%A4%9A%E5%AF%B9%E5%A4%9A" tabindex="-1" id="6-3-表关系——多对多">6.3 表关系——多对多</h3>
<p>多对多：一张表中的一条记录在另外一张表中可以匹配到多条记录，反过来也一样。</p>
<p>多对多的关系如果按照多对一的关系维护：就会出现一个字段中有多个其他表的主键，在访问的时候就会带来不便。</p>
<p>既然通过两张表自己增加字段解决不聊问题，那么就通过第三张表来解决。</p>
<p><img src="day02/02.webp" alt="webp"></p>
<p>多对多解决方案：增加一个中间表，让中间表与对应的其他表形成两个多对一的关系：多对一的解决方案是在“多”表中增加“一”表对应的主键字段。</p>
<h2 id="day03" tabindex="-1" id="day03">day03</h2>
<h3 id="1.1-%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE" tabindex="-1" id="1-1-高级操作——新增数据">1.1 高级操作——新增数据</h3>
<h4 id="%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%8F%92%E5%85%A5" tabindex="-1" id="多数据插入">多数据插入</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_gbk(<br>	name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>)<br>)charset utf8;<br></code></pre></td></tr></table></figure>
<p>一次添加多行数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_gbk <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;张三&#x27;</span>), (<span class="hljs-string">&#x27;李四&#x27;</span>), (<span class="hljs-string">&#x27;王五&#x27;</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+------+<br>| name |<br>+------+<br>| 张三 |<br>| 李四 |<br>| 王五 |<br>+------+<br></code></pre></td></tr></table></figure>
<h4 id="%E4%B8%BB%E9%94%AE%E5%86%B2%E7%AA%81" tabindex="-1" id="主键冲突">主键冲突</h4>
<p>主键冲突：在有的表中，使用的是业务主键（字段有业务含义），但是往往在进行数据插入的时候，又不确定数据表中是否已经存在对应的主键。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_student(<br>	stu_id <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">primary</span> key comment <span class="hljs-string">&#x27;主键, 学生 ID&#x27;</span>,<br>    stu_name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;学生姓名&#x27;</span><br>)charset utf8;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_student <span class="hljs-keyword">values</span><br>(<span class="hljs-string">&#x27;stu0001&#x27;</span>, <span class="hljs-string">&#x27;张三&#x27;</span>),<br>(<span class="hljs-string">&#x27;stu0002&#x27;</span>, <span class="hljs-string">&#x27;李四&#x27;</span>),<br>(<span class="hljs-string">&#x27;stu0003&#x27;</span>, <span class="hljs-string">&#x27;王五&#x27;</span>),<br>(<span class="hljs-string">&#x27;stu0004&#x27;</span>, <span class="hljs-string">&#x27;钱六&#x27;</span>);<br></code></pre></td></tr></table></figure>
<p>主键冲突更新：</p>
<p>类似插入数据语法，如果插入的过程中主键冲突，那么采用更新方法。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_student <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;stu0004&#x27;</span>, <span class="hljs-string">&#x27;小婷&#x27;</span>) <span class="hljs-keyword">on</span> duplicate key <span class="hljs-keyword">update</span> stu_name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;小婷&#x27;</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+<br>| stu_id  | stu_name |<br>+---------+----------+<br>| stu0001 | 张三     |<br>| stu0002 | 李四     |<br>| stu0003 | 王五     |<br>| stu0004 | 小婷     |<br>+---------+----------+<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">replace <span class="hljs-keyword">into</span> my_student <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;stu0001&#x27;</span>, <span class="hljs-string">&#x27;夏洛&#x27;</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+<br>| stu_id  | stu_name |<br>+---------+----------+<br>| stu0001 | 夏洛     |<br>| stu0002 | 李四     |<br>| stu0003 | 王五     |<br>| stu0004 | 小婷     |<br>+---------+----------+<br></code></pre></td></tr></table></figure>
<h4 id="%E8%A0%95%E8%99%AB%E5%A4%8D%E5%88%B6" tabindex="-1" id="蠕虫复制">蠕虫复制</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_simple(<br>	name <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span><br>)charset utf8;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_simple <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;a&#x27;</span>), (<span class="hljs-string">&#x27;b&#x27;</span>), (<span class="hljs-string">&#x27;c&#x27;</span>), (<span class="hljs-string">&#x27;d&#x27;</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">OK, 4 rows affected in 4ms<br></code></pre></td></tr></table></figure>
<p>蠕虫复制：一分为二，成倍的增加。从已有的数据中获取数据，并且将获取到的数据插入到数据表中。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_simple(name) <span class="hljs-keyword">select</span> name <span class="hljs-keyword">from</span> my_simple;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">OK, 4 rows affected in 3.999ms<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_simple(name) <span class="hljs-keyword">select</span> name <span class="hljs-keyword">from</span> my_simple;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">OK, 4 rows affected in 3.999ms<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_simple(name) <span class="hljs-keyword">select</span> name <span class="hljs-keyword">from</span> my_simple;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">OK, 8 rows affected in 3.504ms<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_simple(name) <span class="hljs-keyword">select</span> name <span class="hljs-keyword">from</span> my_simple;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">OK, 16 rows affected in 3.107ms<br></code></pre></td></tr></table></figure>
<p>注意：</p>
<ul>
<li>蠕虫复制的确通常是重复数据，没有太大业务意义：可以在短期内快速增加表的数据量从而可以测试表的压力，还可以通过大量数据来测试表的效率（索引）</li>
<li>蠕虫复制虽好，但是要注意主键冲突。</li>
</ul>
<h3 id="1.2-%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE" tabindex="-1" id="1-2-高级操作——更新数据">1.2 高级操作——更新数据</h3>
<p>在更新数据的时候，特别要注意：通常一定是跟随条件更新：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">update</span> 表名 <span class="hljs-keyword">set</span> 字段名 <span class="hljs-operator">=</span> 新值 <span class="hljs-keyword">where</span> 判断条件;<br></code></pre></td></tr></table></figure>
<p>如果没有条件，是全表更新数据。但是可以使用 limit 来显示更新的数量：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">update</span> 表名 <span class="hljs-keyword">set</span> 字段名 <span class="hljs-operator">=</span> 新值 [<span class="hljs-keyword">where</span> 判断条件] limit 数量;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">update</span> my_simple <span class="hljs-keyword">set</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;e&#x27;</span> <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;a&#x27;</span> limit <span class="hljs-number">4</span>;  <span class="hljs-comment">-- 将所有的 a 改为 e</span><br></code></pre></td></tr></table></figure>
<h3 id="1.3-%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE" tabindex="-1" id="1-3-高级操作——删除数据">1.3 高级操作——删除数据</h3>
<ul>
<li>删除数据的时候尽量不要全部删除，应该使用 <code>where</code> 进行判定；</li>
<li>删除数据的时候可以使用 <code>limit</code> 来限制要删除的具体数量；</li>
<li><code>delete</code> 删除数据的时候无法重置 <code>auto_increment</code></li>
</ul>
<h3 id="2.1-%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%EF%BC%88where-%E5%89%8D%EF%BC%89" tabindex="-1" id="2-1-高级操作——查询数据（where-前）">2.1 高级操作——查询数据（where 前）</h3>
<h4 id="%E5%8D%95%E8%A1%A8%E6%95%B0%E6%8D%AE" tabindex="-1" id="单表数据">单表数据</h4>
<p>完整的查询指令：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">select</span> 选项 字段列表 <span class="hljs-keyword">from</span> 数据源 <span class="hljs-keyword">where</span> 条件 <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> 分组 <span class="hljs-keyword">having</span> 条件 <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 排序 limit 限制;<br></code></pre></td></tr></table></figure>
<p>Select 选项：系统该如何对待查询得到的结果</p>
<p>All：默认的，表示保存所有的记录。</p>
<h4 id="%E5%A4%9A%E8%A1%A8%E6%95%B0%E6%8D%AE" tabindex="-1" id="多表数据">多表数据</h4>
<p>字段列表：有的时候需要从多张表获取数据，在获取数据的时候，可能存在不同表中有同名的字段，需要将同名的字段命名成不同名的:别名 alias。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_int, my_set;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------+-------+-------+--------+----------+------------+------------------+<br>| int_7 | int_1 | int_2 | int_3  | int_4    | int_5      | hobby            |<br>+-------+-------+-------+--------+----------+------------+------------------+<br>|  NULL |  -128 |   255 |    255 |      255 |        255 | 篮球,乒乓球,冰球 |<br>|  NULL |    10 |  1000 | 100000 | 10000000 | 1000000000 | 篮球,乒乓球,冰球 |<br>|  NULL |  -128 |   255 |    255 |      255 |        255 | 篮球,足球,高俅   |<br>|  NULL |    10 |  1000 | 100000 | 10000000 | 1000000000 | 篮球,足球,高俅   |<br>+-------+-------+-------+--------+----------+------------+------------------+<br>4 rows in set (0.01 sec)<br></code></pre></td></tr></table></figure>
<p>结果：两张表的记录数相乘，字段数拼接。</p>
<p>本质：从第一张表取出一条记录，去拼凑第二张表的所有记录，保留所有结果。得到的结果在数学上有一个专业的说法：笛卡尔积，这个结果出了给数据库造成压力，没有其他意义：应该尽量避免出现笛卡尔积。</p>
<h4 id="%E5%8A%A8%E6%80%81%E6%95%B0%E6%8D%AE" tabindex="-1" id="动态数据">动态数据</h4>
<p>From 后面跟的数据不是一个实体表,而是一个从表中查询出来得到的二维结果表（子查询）。</p>
<p>基本语法：<code>from (select 字段列表 from 表) as 别名;</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> (<span class="hljs-keyword">select</span> int_1, int_2 <span class="hljs-keyword">from</span> my_int) <span class="hljs-keyword">as</span> int_my;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------+-------+<br>| int_1 | int_2 |<br>+-------+-------+<br>|    10 |  1000 |<br>|  -128 |   255 |<br>+-------+-------+<br>2 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h3 id="2.2-%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%EF%BC%88group-by-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%EF%BC%89" tabindex="-1" id="2-2-高级操作——查询数据（group-by-聚合函数）">2.2 高级操作——查询数据（group by 聚合函数）</h3>
<p>Group by 表示分组的含义：根据指定的字段，将数据进行分组:分组的目标是为了统计</p>
<h4 id="%E5%88%86%E7%BB%84%E7%BB%9F%E8%AE%A1" tabindex="-1" id="分组统计">分组统计</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> stu_id;  <span class="hljs-comment">-- 根据班级 ID 进行分组</span><br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+<br>| stu_id  | stu_name |<br>+---------+----------+<br>| stu0001 | 夏洛     |<br>| stu0002 | 李四     |<br>| stu0003 | 王五     |<br>| stu0004 | 小婷     |<br>+---------+----------+<br>4 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<p>Group by 是为了分组后进行数据统计的，如果只是想看数据显示，那么 group by 没什么含义：group by 将数据按照指定的字段分组之后，只会保留每组的第一条记录。</p>
<p>利用一些统计函数：（聚合函数）</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>count()</td>
<td>统计每组中的数量，如果统计目标是字段，那么不统计为空 NULL 字段</td>
</tr>
<tr>
<td>avg()</td>
<td>求平均值</td>
</tr>
<tr>
<td>sum()</td>
<td>求和</td>
</tr>
<tr>
<td>max()</td>
<td>求最大值</td>
</tr>
<tr>
<td>min()</td>
<td>求最小值</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> my_student;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> my_student (<br>    stu_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>),<br>    stu_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>),<br>    class_id <span class="hljs-type">INT</span>,<br>    stu_age <span class="hljs-type">INT</span>,<br>    stu_height <span class="hljs-type">INT</span><br>) <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8;<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> my_student (stu_id, stu_name, class_id, stu_age, stu_height)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;stu0001&#x27;</span>, <span class="hljs-string">&#x27;夏洛&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">18</span>, <span class="hljs-number">185</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> my_student (stu_id, stu_name, class_id, stu_age, stu_height)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;stu0002&#x27;</span>, <span class="hljs-string">&#x27;张四&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">28</span>, <span class="hljs-number">165</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> my_student (stu_id, stu_name, class_id, stu_age, stu_height)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;stu0003&#x27;</span>, <span class="hljs-string">&#x27;张五&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-number">22</span>, <span class="hljs-number">187</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> my_student (stu_id, stu_name, class_id, stu_age, stu_height)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;stu0004&#x27;</span>, <span class="hljs-string">&#x27;小婷&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-number">25</span>, <span class="hljs-number">189</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 使用聚合函数：按照班级统计每班人数，最大年龄，最矮的身高，平均年龄</span><br><span class="hljs-keyword">select</span> class_id, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>), <span class="hljs-built_in">max</span>(stu_age), <span class="hljs-built_in">min</span>(stu_height), <span class="hljs-built_in">avg</span>(stu_age) <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> class_id;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+----------+--------------+-----------------+--------------+<br>| class_id | count(*) | max(stu_age) | min(stu_height) | avg(stu_age) |<br>+----------+----------+--------------+-----------------+--------------+<br>|        1 |        2 |           28 |             165 |      23.0000 |<br>|        2 |        2 |           25 |             187 |      23.5000 |<br>+----------+----------+--------------+-----------------+--------------+<br>2 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E5%A4%9A%E5%88%86%E7%BB%84" tabindex="-1" id="多分组">多分组</h4>
<p>将数据按照某个字段进行分组之后，对已经分组的数据进行再次分组</p>
<p>基本语法：<code>group by 字段1,字段2;</code></p>
<p>先按照字段 1 进行排序，之后将结果再按照字段 2 进行排序，以此类推。</p>
<h4 id="%E5%88%86%E7%BB%84%E6%8E%92%E5%BA%8F" tabindex="-1" id="分组排序">分组排序</h4>
<p>MySQL 中，分组默认有排序的功能:按照分组字段进行排序，默认是升序</p>
<p>基本语法：<code>groupby字段 [ascldesc]，字段 [ascldesc];</code></p>
<h4 id="%E5%9B%9E%E6%BA%AF%E7%BB%9F%E8%AE%A1" tabindex="-1" id="回溯统计">回溯统计</h4>
<p>当分组进行多分组之后，往上统计的过程中，需要进行层层上报，将这种层层上报统计的过程称之为回溯统计；每一次分组向上统计的过程都会产生一次新的统计数据，而且当前数据对应的分组字段为 NULL。</p>
<p>基本语法：<code>group by 字段 [asc|desc] with rollup;</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> class_id, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> class_id;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+----------+<br>| class_id | count(*) |<br>+----------+----------+<br>|        1 |        2 |<br>|        2 |        2 |<br>+----------+----------+<br>2 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> class_id, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> class_id <span class="hljs-keyword">with</span> <span class="hljs-keyword">rollup</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+----------+<br>| class_id | count(*) |<br>+----------+----------+<br>|        1 |        2 |<br>|        2 |        2 |<br>|     NULL |        4 |<br>+----------+----------+<br>3 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> class_id, stu_age, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> class_id, stu_age <span class="hljs-keyword">with</span> <span class="hljs-keyword">rollup</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+---------+----------+<br>| class_id | stu_age | count(*) |<br>+----------+---------+----------+<br>|        1 |      18 |        1 |<br>|        1 |      28 |        1 |<br>|        1 |    NULL |        2 |<br>|        2 |      22 |        1 |<br>|        2 |      25 |        1 |<br>|        2 |    NULL |        2 |<br>|     NULL |    NULL |        4 |<br>+----------+---------+----------+<br>7 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h3 id="3.2-%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%EF%BC%88having%2Borderby%2Blimit%EF%BC%89" tabindex="-1" id="3-2-高级操作——查询数据（having-orderby-limit）">3.2 高级操作——查询数据（having+orderby+limit）</h3>
<h4 id="having" tabindex="-1" id="Having">Having</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> class_id, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">as</span> number <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> class_id <span class="hljs-keyword">having</span> number<span class="hljs-operator">&gt;=</span><span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+--------+<br>| class_id | number |<br>+----------+--------+<br>|        1 |      2 |<br>|        2 |      2 |<br>+----------+--------+<br>2 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<p>Having 在 group by 分组之后，可以使用聚合函数或者字段别名（where 是从表中取出数据别名是在数据进入到内存之后才有的）</p>
<p>强调：having 是在 group by 之后，group by 是在 where 之后：where 的时候表示将数据从磁盘拿到内存，where 之后的所有操作都是内存操作。</p>
<h4 id="order-by" tabindex="-1" id="Order-by">Order by</h4>
<p>Order by 排序：根据校对规则对数据进行排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> stu_height <span class="hljs-keyword">asc</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height |<br>+---------+----------+----------+---------+------------+<br>| stu0002 | 张四     |        1 |      28 |        165 |<br>| stu0001 | 夏洛     |        1 |      18 |        185 |<br>| stu0003 | 张五     |        2 |      22 |        187 |<br>| stu0004 | 小婷     |        2 |      25 |        189 |<br>+---------+----------+----------+---------+------------+<br>4 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h4 id="limit" tabindex="-1" id="Limit">Limit</h4>
<p><code>limit 分页，偏移量;</code></p>
<p>如果分页数不够，系统不会强求。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student limit <span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height |<br>+---------+----------+----------+---------+------------+<br>| stu0001 | 夏洛     |        1 |      18 |        185 |<br>| stu0002 | 张四     |        1 |      28 |        165 |<br>+---------+----------+----------+---------+------------+<br>2 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<p>Limit 通常在查询的时候如果限定为一条记录的时候，使用的比较多:有时候获取多条记录并不能解决业务问题，但是会增加服务器的压力。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student limit <span class="hljs-number">2</span>, <span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height |<br>+---------+----------+----------+---------+------------+<br>| stu0003 | 张五     |        2 |      22 |        187 |<br>| stu0004 | 小婷     |        2 |      25 |        189 |<br>+---------+----------+----------+---------+------------+<br>2 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h3 id="4.1-%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E8%BF%90%E7%AE%97%E7%AC%A6" tabindex="-1" id="4-1-高级操作——运算符">4.1 高级操作——运算符</h3>
<h4 id="%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6" tabindex="-1" id="算术运算符">算术运算符</h4>
<p><code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>%</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> ysf1(<br>	int_1 <span class="hljs-type">int</span>,<br>    int_2 <span class="hljs-type">int</span>,<br>    int_3 <span class="hljs-type">int</span>,<br>    int_4 <span class="hljs-type">int</span><br>) charset utf8;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> ysf1 <span class="hljs-keyword">value</span>(<span class="hljs-number">100</span>, <span class="hljs-number">-100</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">default</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> int_1 <span class="hljs-operator">+</span> int_2, int_1 <span class="hljs-operator">-</span> int_2, int_1 <span class="hljs-operator">*</span> int_2, int_1 <span class="hljs-operator">/</span> int_2 <span class="hljs-keyword">from</span> ysf1;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------------+---------------+---------------+---------------+<br>| int_1 + int_2 | int_1 - int_2 | int_1 * int_2 | int_1 / int_2 |<br>+---------------+---------------+---------------+---------------+<br>|             0 |           200 |        -10000 |       -1.0000 |<br>+---------------+---------------+---------------+---------------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6" tabindex="-1" id="比较运算符">比较运算符</h4>
<p><code>&gt;</code> 、<code>&gt;=</code>、<code>&lt;</code>、<code>&lt;=</code>、<code>=</code> 、<code>&lt;&gt;</code></p>
<ul>
<li><code>=</code>：在 MySQL 中，没有对应的 <code>==</code> 比较符号，就是使用<code>=</code> 来进行相等判断</li>
<li><code>&lt;=&gt;</code>：相等比较。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-number">1</span>, <span class="hljs-number">0.02</span> <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-----------+------------+<br>| &#x27;1&#x27; &lt;=&gt; 1 | 0.02 &lt;=&gt; 0 |<br>+-----------+------------+<br>|         1 |          0 |<br>+-----------+------------+<br>1 row in set (0.01 sec)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">where</span> stu_age <span class="hljs-keyword">between</span> <span class="hljs-number">20</span> <span class="hljs-keyword">and</span> <span class="hljs-number">30</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height |<br>+---------+----------+----------+---------+------------+<br>| stu0002 | 张四     |        1 |      28 |        165 |<br>| stu0003 | 张五     |        2 |      22 |        187 |<br>| stu0004 | 小婷     |        2 |      25 |        189 |<br>+---------+----------+----------+---------+------------+<br>3 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">where</span> stu_age <span class="hljs-operator">&gt;=</span> <span class="hljs-number">20</span> <span class="hljs-keyword">and</span> stu_age <span class="hljs-operator">&lt;=</span> <span class="hljs-number">30</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height |<br>+---------+----------+----------+---------+------------+<br>| stu0002 | 张四     |        1 |      28 |        165 |<br>| stu0003 | 张五     |        2 |      22 |        187 |<br>| stu0004 | 小婷     |        2 |      25 |        189 |<br>+---------+----------+----------+---------+------------+<br>3 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查找身高高于 170 的或者年龄大于 20 岁的学生</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">where</span> stu_height <span class="hljs-operator">&gt;=</span> <span class="hljs-number">170</span> <span class="hljs-keyword">or</span> stu_age <span class="hljs-operator">&gt;=</span> <span class="hljs-number">20</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height |<br>+---------+----------+----------+---------+------------+<br>| stu0001 | 夏洛     |        1 |      18 |        185 |<br>| stu0002 | 张四     |        1 |      28 |        165 |<br>| stu0003 | 张五     |        2 |      22 |        187 |<br>| stu0004 | 小婷     |        2 |      25 |        189 |<br>+---------+----------+----------+---------+------------+<br>4 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h4 id="is-%E8%BF%90%E7%AE%97%E7%AC%A6" tabindex="-1" id="Is-运算符">Is 运算符</h4>
<p>ls 是专门用来判断字段是否为 NULL 的运算符</p>
<p>基本语法：<code>is null/is not null</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_int <span class="hljs-keyword">where</span> int_7 <span class="hljs-keyword">is</span> <span class="hljs-keyword">null</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------+-------+-------+--------+----------+------------+<br>| int_7 | int_1 | int_2 | int_3  | int_4    | int_5      |<br>+-------+-------+-------+--------+----------+------------+<br>|  NULL |    10 |  1000 | 100000 | 10000000 | 1000000000 |<br>|  NULL |  -128 |   255 |    255 |      255 |        255 |<br>+-------+-------+-------+--------+----------+------------+<br>2 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h4 id="like-%E8%BF%90%E7%AE%97%E7%AC%A6" tabindex="-1" id="Like-运算符">Like 运算符</h4>
<p>Like 运算符：是用来进行模糊匹配</p>
<p>基本语法：<code>like '匹配模式;</code></p>
<p>匹配模式中，有两种占位符：</p>
<ul>
<li>
<p><code>_</code>：匹配对应的单个字符</p>
</li>
<li>
<p><code>%</code>：匹配多个字符</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">where</span> stu_name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;小%&#x27;</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height |<br>+---------+----------+----------+---------+------------+<br>| stu0004 | 小婷     |        2 |      25 |        189 |<br>+---------+----------+----------+---------+------------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h3 id="4.2-%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2" tabindex="-1" id="4-2-联合查询">4.2 联合查询</h3>
<h4 id="%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" tabindex="-1" id="基本概念">基本概念</h4>
<p>联合查询是可合并多个相似的<strong>选择查询</strong>的结果集。等同于将一个表追加到另一个表，从而实现将两个表的查询组合到一起，使用谓词为 UNION 或 UNION ALL。</p>
<p>联合查询：将多个查询的结果合并到一起（纵向合并）：字段数不变，多个查询的记录数合并。</p>
<h4 id="%E5%BA%94%E7%94%A8%E6%9F%A5%E8%AF%A2" tabindex="-1" id="应用查询">应用查询</h4>
<ul>
<li>将同一张表中不同的结果（需要对应多条查询语句来实现），合并到一起展示数据</li>
<li>最常见：在数据量大的情况下，会对表进行分表操作，需要对每张表进行部分数据统计使用联合查询来讲数据存放到一起显示。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">(<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">where</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;男&#x27;</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> stu_height <span class="hljs-keyword">asc</span>)<br><span class="hljs-keyword">union</span><br>(<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">where</span> gender <span class="hljs-operator">=</span><span class="hljs-string">&#x27;女&#x27;</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> stu_height <span class="hljs-keyword">desc</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">(<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">where</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;男&#x27;</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> stu_height <span class="hljs-keyword">asc</span>)<br><span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span><br>(<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">where</span> gender <span class="hljs-operator">=</span><span class="hljs-string">&#x27;女&#x27;</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> stu_height <span class="hljs-keyword">desc</span>);<br></code></pre></td></tr></table></figure>
<p>order by 在联合查询中若要生效，必须配合使用 limit；而 limit 后面必须跟对应的限制数量（通常可以使用一个较大的值，大于对应表的记录数）</p>
<h3 id="5.1-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94%E6%A6%82%E5%BF%B5%EF%BC%88%E5%88%86%E7%B1%BB%EF%BC%89" tabindex="-1" id="5-1-连接查询——概念（分类）">5.1 连接查询——概念（分类）</h3>
<p>连接查询：将多张表连到一起进行查询（会导致记录数行和字段数列发生改变）</p>
<h4 id="%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%84%8F%E4%B9%89" tabindex="-1" id="连接查询的意义">连接查询的意义</h4>
<p>在关系型数据库设计过程中，实体（表）与实体之间是存在很多联系的。在关系型数据库表的设计过程中，遵循着关系来设计：一对一，一对多和多对多，通常在实际操作的过程中，需要利用这层关系来保证数据的完整性。</p>
<h4 id="%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E5%88%86%E7%B1%BB" tabindex="-1" id="连接查询分类">连接查询分类</h4>
<p>连接查询一共有以下几类:</p>
<p>交叉连接</p>
<p>内连接</p>
<p>外连接：左外连接（左连接）和右外连接（右连接）。</p>
<p>自然连接</p>
<h3 id="5.2-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94%E4%BA%A4%E5%8F%89%E8%BF%9E%E6%8E%A5" tabindex="-1" id="5-2-连接查询——交叉连接">5.2 连接查询——交叉连接</h3>
<p>交叉连接：将两张表的数据与另外一张表彼此交叉</p>
<ul>
<li>从第一张表依次取出每一条记录</li>
<li>取出每一条记录之后，与另外一张表的全部记录挨个匹配</li>
<li>没有任何匹配条件，所有的结果都会进行保留</li>
<li>记录数 = 第一张表记录数 * 第二张表记录数；字段数 = 第一张表字段数 + 第二张表字段数（笛卡尔积）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">cross</span> <span class="hljs-keyword">join</span> my_int;<br></code></pre></td></tr></table></figure>
<p>交叉连接产生的结果是笛卡尔积，没有实际应用。</p>
<h3 id="5.3-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94%E5%86%85%E8%BF%9E%E6%8E%A5" tabindex="-1" id="5-3-连接查询——内连接">5.3 连接查询——内连接</h3>
<p>内连接：inner join，从一张表中职出所有的记录去另外一张表中匹配:利用匹配条件进行匹配，成功了则保留，失败了放弃。</p>
<ul>
<li>从第一张表中职出一条记录，然后去另外一张表中进行匹配</li>
<li>利用匹配条件进行匹配；
<ul>
<li>匹配成功：保留，继续向下匹配</li>
<li>匹配失败：向下继续，如果全表匹配失败，结束</li>
</ul>
</li>
<li>因为表的设计通常容易产生同名字段，尤其是 ID，所以为了避免重名出现错误，通常使用 <code>表名.字段名</code>，来确保唯一性</li>
<li>通常，如果条件中使用到对应的表名，而表名通常比较长，所以可以通过表别名来简化</li>
<li>内连接匹配的时候，必须保证匹配到才会保存</li>
<li>内连接因为不强制必须使用匹配条件（on）因此可以在数据匹配完成之后，使用 where 条件来限制，效果与 on 一样（建议使用 on）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> my_class;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> my class <span class="hljs-keyword">on</span> class id <span class="hljs-operator">=</span> id;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> my_class <span class="hljs-keyword">on</span> my_student.class_id <span class="hljs-operator">=</span> my_class.id;<br></code></pre></td></tr></table></figure>
<p>内连接通常是在对数据有精确要求的地方使用：必须保证两种表中都能进行数据匹配。</p>
<h3 id="6.1-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94%E5%A4%96%E8%BF%9E%E6%8E%A5" tabindex="-1" id="6-1-连接查询——外连接">6.1 连接查询——外连接</h3>
<p>外链接：<code>outer join</code>，按照某一张表作为主表（表中所有记录在最后都会保留），根据条件去连接另外一张表，以而得到目标数据。</p>
<p>外连接分为两种：左外连接（left join），右外连接（right join）</p>
<ul>
<li>
<p>左连接：左表是主表</p>
</li>
<li>
<p>右连接：右表是主表</p>
</li>
</ul>
<h4 id="%E5%8E%9F%E7%90%86-1" tabindex="-1" id="原理-2">原理</h4>
<ul>
<li>确定连接主表：左连接就是 left join 左边的表为主表；right join 就是右边为主表</li>
<li>拿主表的每一条记录，去匹配另外一张表（从表）的每一条记录</li>
<li>如果满足匹配条件：保留，不满足即不保留。</li>
<li>如果主表记录在从表中一条都没有匹配成功，那么也要保留该记录：从表对应的字段值都未 NULL</li>
</ul>
<h4 id="%E8%AF%AD%E6%B3%95" tabindex="-1" id="语法">语法</h4>
<p>基本语法：</p>
<p>左连接：<code>主表 left join 从表 on 连接条件;</code></p>
<p>右连接：<code>从表 right join 主表 on 连接条件;</code></p>
<p>左连接对应的主表数据在左边，右连接对应的主表数据在右边；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my student <span class="hljs-keyword">as</span> s <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> my_class c <span class="hljs-keyword">on</span> s.class id <span class="hljs-operator">=</span> c.id;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">as</span> s <span class="hljs-keyword">right</span> <span class="hljs-keyword">join</span> my_class <span class="hljs-keyword">as</span> c <span class="hljs-keyword">on</span> s.class_id <span class="hljs-operator">=</span> c.id;<br></code></pre></td></tr></table></figure>
<h4 id="%E7%89%B9%E7%82%B9" tabindex="-1" id="特点">特点</h4>
<ul>
<li>外连接中主表数据记录一定会保存：连接之后不会出现记录数少于主表（内连接可能）</li>
<li>左连接和有连接其实可以互相转换，但是数据对应的位置（表顺序）会改变</li>
</ul>
<h4 id="%E5%BA%94%E7%94%A8" tabindex="-1" id="应用">应用</h4>
<p>非常常用的一种获取的数据方式：作为数据获取对应主表以及其他数据（关联）</p>
<h3 id="6.2-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94using-%E5%85%B3%E9%94%AE%E5%AD%97" tabindex="-1" id="6-2-连接查询——using-关键字">6.2 连接查询——using 关键字</h3>
<p>是在连接查询中用来代替对应的 on 关键字的，进行条件匹配。</p>
<h4 id="%E5%8E%9F%E7%90%86-2" tabindex="-1" id="原理-3">原理</h4>
<ul>
<li>在连接查询时，使用 on 的地方用 using 代替</li>
<li>使用 using 的前提是对应的两张表连接的字段是同名（类似自然连接自动匹配）</li>
<li>如果使用 using 关键字，那么对应的同名字段，最终在结果中只会保留一个。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> my_class <span class="hljs-keyword">using</span>(class_id);<br></code></pre></td></tr></table></figure>
<h2 id="day4" tabindex="-1" id="day4">day4</h2>
<h3 id="1.1-%E5%AD%90%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94%E6%A6%82%E5%BF%B5%E5%92%8C%E5%88%86%E7%B1%BB" tabindex="-1" id="1-1-子查询——概念和分类">1.1 子查询——概念和分类</h3>
<h4 id="%E5%AD%90%E6%9F%A5%E8%AF%A2%E6%A6%82%E5%BF%B5" tabindex="-1" id="子查询概念">子查询概念</h4>
<p>子查询：sub query</p>
<p>子查询是一种常用计算机语言 SELECT-SQL 语言中<strong>嵌套查询下层的程序模块</strong>。当一个查询是另一个查询的条件时，称之为子查询。</p>
<p>子查询:指在一条 select 语句中，嵌入了另外一条 select 语句，那么被嵌入的 select 语句称之为子查询语句。</p>
<h4 id="%E4%B8%BB%E6%9F%A5%E8%AF%A2%E6%A6%82%E5%BF%B5" tabindex="-1" id="主查询概念">主查询概念</h4>
<p>主查询：主要的查询对象，第一条 select 语句，确定的用户所有获取的数据目标（数据源）已经要具体得到的字段信息。</p>
<h4 id="%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%92%8C%E4%B8%BB%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%85%B3%E7%B3%BB" tabindex="-1" id="子查询和主查询的关系">子查询和主查询的关系</h4>
<ol>
<li>子查询是嵌入到主查询中的</li>
<li>子查询的辅助主查询的：要么作为条件，要么作为数据源</li>
<li>子查询其实可以独立存在：是一条完整的 select 语句。</li>
</ol>
<h4 id="%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%88%86%E7%B1%BB" tabindex="-1" id="子查询分类">子查询分类</h4>
<p>按功能分：</p>
<ul>
<li>标量子查询：子查询返回的结果是一个数据（一行一列）</li>
<li>列子查询：返回的结果是一列（一列多行）</li>
<li>行子查询：返回的结果是一行（一行多列）</li>
<li>表子查询：返回的结果是多行多列（多行多列）</li>
<li>Exists 子查询：返回的结果 1 或者 0（类似布尔操作）</li>
</ul>
<p>按位置分：</p>
<ul>
<li>Where 子查询：子查询出现的位置在 where 条件中</li>
<li>From 子查询：子查询出现的位置在 from 数据源中（做数据源）</li>
</ul>
<h3 id="1.2-%E5%AD%90%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94%E6%A0%87%E9%87%8F%E5%AD%90%E6%9F%A5%E8%AF%A2" tabindex="-1" id="1-2-子查询——标量子查询">1.2 子查询——标量子查询</h3>
<h4 id="%E6%A6%82%E5%BF%B5" tabindex="-1" id="概念">概念</h4>
<p>标量子查询：子查询得到结果是一个数据（一行一列）</p>
<h4 id="%E8%AF%AD%E6%B3%95-1" tabindex="-1" id="语法-2">语法</h4>
<p>基本语法：select * from 数据源 where 条件判断 =/&lt;&gt;(select 字段名 from 数据源 where 条件判断);</p>
<p>（子查询得到的结果只有一个值）</p>
<h4 id="%E7%A4%BA%E4%BE%8B" tabindex="-1" id="示例">示例</h4>
<p>在 <code>my_student</code> 表结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+--------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height | gender |<br>+---------+----------+----------+---------+------------+--------+<br>| stu0001 | 夏洛     |        1 |      18 |        185 | 男     |<br>| stu0002 | 张四     |        1 |      28 |        165 | 女     |<br>| stu0003 | 张五     |        2 |      22 |        187 | 男     |<br>| stu0004 | 小婷     |        2 |      32 |        189 | 女     |<br>| stu0005 | 小猪     |        1 |      30 |        173 | 女     |<br>| stu0006 | 小狗     |        2 |      18 |        170 | 男     |<br>| stu0007 | 小江     |        1 |      25 |        178 | 女     |<br>+---------+----------+----------+---------+------------+--------+<br></code></pre></td></tr></table></figure>
<p><code>my_class</code> 表结构如下的情况下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+------+<br>| class_id | name |<br>+----------+------+<br>|        1 | 1班  |<br>|        2 | 2班  |<br>|        3 | 3班  |<br>+----------+------+<br></code></pre></td></tr></table></figure>
<p>通过班级 ID 获取班级名字（标量子查询实现）：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_class <span class="hljs-keyword">where</span> class_id <span class="hljs-operator">=</span> (<span class="hljs-keyword">select</span> class_id <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">where</span> stu_name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;小猪&#x27;</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+------+<br>| class_id | name |<br>+----------+------+<br>|        1 | 1班  |<br>+----------+------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h3 id="1.3-%E5%AD%90%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2" tabindex="-1" id="1-3-子查询——列子查询">1.3 子查询——列子查询</h3>
<h4 id="%E6%A6%82%E5%BF%B5-1" tabindex="-1" id="概念-2">概念</h4>
<p>列子查询：子查询得到的结果是一列数据（一列多行）</p>
<h4 id="%E8%AF%AD%E6%B3%95-2" tabindex="-1" id="语法-3">语法</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">主查询 <span class="hljs-keyword">where</span> 条件 <span class="hljs-keyword">in</span> (列子查询);<br></code></pre></td></tr></table></figure>
<h4 id="%E7%A4%BA%E4%BE%8B-1" tabindex="-1" id="示例-2">示例</h4>
<p>想获取已经有学生在班的所有班级名字</p>
<ol>
<li>找出学生表中所有的班级 ID</li>
<li>找出班级表中对应的名字</li>
</ol>
<p>列子查询实现</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> name <span class="hljs-keyword">from</span> my_class <span class="hljs-keyword">where</span> class_id <span class="hljs-keyword">in</span> (<span class="hljs-keyword">select</span> class_id <span class="hljs-keyword">from</span> my_student);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+------+<br>| name |<br>+------+<br>| 1班  |<br>| 2班  |<br>+------+<br>2 rows in set (0.01 sec)<br></code></pre></td></tr></table></figure>
<h3 id="2.1-%E5%AD%90%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2" tabindex="-1" id="2-1-子查询——行子查询">2.1 子查询——行子查询</h3>
<p>需求：获取班级上年龄最大，且身高最高的学生</p>
<ol>
<li>求出班级年龄最大的值；</li>
<li>求出班级身高最高值；</li>
<li>求出对应的学生</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">where</span> (stu_age, stu_height) <span class="hljs-operator">=</span> (<span class="hljs-keyword">select</span> <span class="hljs-built_in">max</span>(stu_age), <span class="hljs-built_in">max</span>(stu_height) <span class="hljs-keyword">from</span> my_student);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+--------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height | gender |<br>+---------+----------+----------+---------+------------+--------+<br>| stu0004 | 小婷     |        2 |      32 |        189 | 女     |<br>+---------+----------+----------+---------+------------+--------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h3 id="2.2-%E5%AD%90%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94%E8%A1%A8%E5%AD%90%E6%9F%A5%E8%AF%A2" tabindex="-1" id="2-2-子查询——表子查询">2.2 子查询——表子查询</h3>
<h4 id="%E6%A6%82%E5%BF%B5-2" tabindex="-1" id="概念-3">概念</h4>
<p>表子查询：子查询返回的结果是多行多列,表子查询与行子查询非常相似，只是行子查询需要产生行元素，而表子查询没有。</p>
<p>行子查询是用于 where 条件判断：where 子查询</p>
<p>表子查询是用于 from 数据源：from 子查询</p>
<h4 id="%E8%AF%AD%E6%B3%95-3" tabindex="-1" id="语法-4">语法</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段表 <span class="hljs-keyword">from</span> (表子查询) [<span class="hljs-keyword">where</span>] [<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span>] [<span class="hljs-keyword">having</span>] [<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span>] [limit];<br></code></pre></td></tr></table></figure>
<h4 id="%E7%A4%BA%E4%BE%8B-2" tabindex="-1" id="示例-3">示例</h4>
<ol>
<li>获取每个班上最高身高的学生（一个）</li>
<li>将每个班最高的学生排在最前面：<code>order by</code></li>
<li>再针对结果进行 <code>group by</code>：保留每组第一个</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SET</span> SESSION sql_mode<span class="hljs-operator">=</span>(<span class="hljs-keyword">SELECT</span> REPLACE(@<span class="hljs-variable">@sql_mode</span>, <span class="hljs-string">&#x27;ONLY_FULL_GROUP_BY&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>));<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> (<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> stu_height <span class="hljs-keyword">desc</span>) <span class="hljs-keyword">as</span> temp <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> class_id;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+--------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height | gender |<br>+---------+----------+----------+---------+------------+--------+<br>| stu0001 | 夏洛     |        1 |      18 |        185 | 男     |<br>| stu0003 | 张五     |        2 |      22 |        187 | 男     |<br>+---------+----------+----------+---------+------------+--------+<br>2 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h3 id="2.3-%E5%AD%90%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94exists-%E5%AD%90%E6%9F%A5%E8%AF%A2" tabindex="-1" id="2-3-子查询——exists-子查询">2.3 子查询——exists 子查询</h3>
<h4 id="%E6%A6%82%E5%BF%B5-3" tabindex="-1" id="概念-4">概念</h4>
<p>Exists 子查询：查询返回的结果只有 0 或者 1，1 代表成立，0 代表不成立</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_class <span class="hljs-keyword">as</span> c <span class="hljs-keyword">where</span> <span class="hljs-keyword">exists</span>(<span class="hljs-keyword">select</span> stu_id <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">as</span> s <span class="hljs-keyword">where</span> s.class_id <span class="hljs-operator">=</span> c.class_id);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+------+<br>| class_id | name |<br>+----------+------+<br>|        1 | 1班  |<br>|        2 | 2班  |<br>+----------+------+<br>2 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h3 id="3.1-%E5%AD%90%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94%E7%89%B9%E5%AE%9A%E5%85%B3%E9%94%AE%E5%AD%97" tabindex="-1" id="3-1-子查询——特定关键字">3.1 子查询——特定关键字</h3>
<h4 id="in" tabindex="-1" id="In">In</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">主查询 <span class="hljs-keyword">where</span> 条件 <span class="hljs-keyword">in</span> (列子查询);<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">where</span> class_id <span class="hljs-keyword">in</span> (<span class="hljs-keyword">select</span> class_id <span class="hljs-keyword">from</span> my_class);<br></code></pre></td></tr></table></figure>
<h4 id="any" tabindex="-1" id="Any">Any</h4>
<p>任意一个</p>
<ul>
<li><code>any(列子查询)</code>：条件在查询结果中有任意一个匹配即可，可等价于 <code>in</code></li>
<li><code>&lt;&gt;and(列子查询)</code>：条件在查询结果中不等于任意一个</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">where</span> class_id <span class="hljs-operator">=</span> <span class="hljs-keyword">any</span>(<span class="hljs-keyword">select</span> class_id <span class="hljs-keyword">from</span> my_class);<br></code></pre></td></tr></table></figure>
<h4 id="some" tabindex="-1" id="Some">Some</h4>
<p>与 any 完全一样：在国外，some 与 any 的正面含义一致，但是否定就大不相同：not any 与 not  some</p>
<p>开发者为了让对应的使用者不要在语法上纠结：重新设计了 some</p>
<h4 id="all" tabindex="-1" id="All">All</h4>
<ul>
<li><code>=all(列子查询)</code>：等于里面所有</li>
<li><code>&lt;&gt;al(列子查询)</code>：不等于其中所有</li>
</ul>
<h3 id="3.2-%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%BF%98%E5%8E%9F%E2%80%94%E2%80%94%E6%95%B4%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%BF%98%E5%8E%9F" tabindex="-1" id="3-2-数据备份与还原——整库备份与还原">3.2 数据备份与还原——整库备份与还原</h3>
<p>整库数据备份也叫 SQL 数据备份：备份的结果都是 SQL 指令</p>
<p>在 MySQL 中提供了一个专门用于备份 SQL 的客户端：<code>MySQLdump.exe</code></p>
<h4 id="%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" tabindex="-1" id="应用场景">应用场景</h4>
<p>SQL 备份是一种 MySQL 中非常常见的备份与还原方式，SQL 备份不只是备份数据，还备份对应的 SQL 指令（表结构）：即便是数据库遭到毁灭性的破坏（数据库被删），那么利用 SQL 备份依然可以实现数据还原。</p>
<p>SQL 备份因为需要备份结构，因此产生的备份文件特别大，因此不适合特大型数据备份，也不适合数据变换频繁型数据库备份</p>
<h4 id="%E5%BA%94%E7%94%A8%E6%96%B9%E6%A1%88" tabindex="-1" id="应用方案">应用方案</h4>
<p>SQL 备份用到的是专门的备份客户端，因此还没与数据库服务器进行连接。</p>
<p>备份可以有三种形式：</p>
<ol>
<li>
<p>整库备份（只需要提供数据库名字）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">MySQLdump.exe -hlocalhost -P3306 -uroot -p mydatabase2 &gt; d:/mydatabase2.sql<br></code></pre></td></tr></table></figure>
<p>获得 <code>MySQLdump.exe -hlocalhost -P3306 -uroot -p mydatabase2 &gt; d:/mydatabase2.sql</code>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- MySQL dump 10.13  Distrib 8.0.41, for Win64 (x86_64)</span><br><span class="hljs-comment">--</span><br><span class="hljs-comment">-- Host: localhost    Database: mydatabase2</span><br><span class="hljs-comment">-- ------------------------------------------------------</span><br><span class="hljs-comment">-- Server version	8.0.41</span><br><br><span class="hljs-comment">/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */</span>;<br><span class="hljs-comment">/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */</span>;<br><span class="hljs-comment">/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */</span>;<br><span class="hljs-comment">/*!50503 SET NAMES utf8mb4 */</span>;<br><span class="hljs-comment">/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */</span>;<br><span class="hljs-comment">/*!40103 SET TIME_ZONE=&#x27;+00:00&#x27; */</span>;<br><span class="hljs-comment">/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */</span>;<br><span class="hljs-comment">/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */</span>;<br><span class="hljs-comment">/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE=&#x27;NO_AUTO_VALUE_ON_ZERO&#x27; */</span>;<br><span class="hljs-comment">/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */</span>;<br><br><span class="hljs-comment">--</span><br><span class="hljs-comment">-- Table structure for table `teacher`</span><br><span class="hljs-comment">--</span><br><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `teacher`;<br><span class="hljs-comment">/*!40101 SET @saved_cs_client     = @@character_set_client */</span>;<br><span class="hljs-comment">/*!50503 SET character_set_client = utf8mb4 */</span>;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `teacher` (<br>  `name` <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span><br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>gbk;<br><span class="hljs-comment">/*!40101 SET character_set_client = @saved_cs_client */</span>;<br><br><span class="hljs-comment">--</span><br><span class="hljs-comment">-- Dumping data for table `teacher`</span><br><span class="hljs-comment">--</span><br><br>LOCK TABLES `teacher` WRITE;<br><span class="hljs-comment">/*!40000 ALTER TABLE `teacher` DISABLE KEYS */</span>;<br><span class="hljs-comment">/*!40000 ALTER TABLE `teacher` ENABLE KEYS */</span>;<br>UNLOCK TABLES;<br><span class="hljs-comment">/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */</span>;<br><br><span class="hljs-comment">/*!40101 SET SQL_MODE=@OLD_SQL_MODE */</span>;<br><span class="hljs-comment">/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */</span>;<br><span class="hljs-comment">/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */</span>;<br><span class="hljs-comment">/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */</span>;<br><span class="hljs-comment">/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */</span>;<br><span class="hljs-comment">/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */</span>;<br><span class="hljs-comment">/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */</span>;<br><br><span class="hljs-comment">-- Dump completed on 2025-02-01 10:46:20</span><br></code></pre></td></tr></table></figure>
</li>
<li>
<p>单表备份：数据库后面跟一张表</p>
</li>
<li>
<p>度表备份：数据库后跟多张表</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">MySQLdump.exe -hlocalhost -P3306 -uroot -p myfirstdb my_student my_int &gt; d:/student_int.sql<br></code></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="%E6%95%B0%E6%8D%AE%E8%BF%98%E5%8E%9F" tabindex="-1" id="数据还原">数据还原</h4>
<p>MySQL 提供了多种方式来实现：</p>
<p>MySQLdump 备份的数据中没有关于数据库本身的操作，都是针对表级别的操作：当进行数据（SQL 还原），必须指定数据库</p>
<ol>
<li>
<p>利用 MySQL.exe 客户端：没有登录之前，可以直接用该客户端进行数据还原</p>
<p><code>MySQL.exe-hPup 数据库 &lt; 文件位置</code></p>
</li>
<li>
<p>在 SQL 指令，提供了一种导入 SQL 指令的方式。必须先进入到对应的数据库。</p>
<p><code>Source &quot;SQL 文件位置&quot;;</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">MySQL -uroot -p myfirstdb &lt; d:/student_int.sql<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>人为操作：打开备份文件，复制所有 SQL 指令,然后到 MySQL.exe 客户端中去粘贴执行。（不推荐）。</p>
</li>
</ol>
<h3 id="3.3-%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E2%80%94%E2%80%94%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86" tabindex="-1" id="3-3-用户权限管理——用户管理">3.3 用户权限管理——用户管理</h3>
<h4 id="%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7" tabindex="-1" id="创建用户">创建用户</h4>
<p>在 MySQL 中，对用的用户管理中，是由对应的 Host 和 User 共同组成主键来区分用户。</p>
<p>User：代表用户的用户名</p>
<p>Host：代表本质是允许访问的客户端（IP 或者主机地址）。如果 host 使用*代表所有的用户（客户端）都可以访问</p>
<p>理论上讲可以采用两种方式创建用户：</p>
<ol>
<li>直接使用 root 用户在 MySQL.user 表中插入记录（不推荐）</li>
<li>专门创建用户的 SQL 指令。基本语法：<code>create user 用户名 identified by '明文密码';</code></li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 创建用户</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;user1&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> identified <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;123456&#x27;</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 简化创建用户信息</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> user2;<br></code></pre></td></tr></table></figure>
<h4 id="%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7" tabindex="-1" id="删除用户">删除用户</h4>
<p>注意：MySQL 中 user 是带着 host 本身的（具有唯一性）</p>
<p>基本语法：<code>drop user 用户名 @host;</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">user</span> user2;<br></code></pre></td></tr></table></figure>
<h4 id="%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81" tabindex="-1" id="修改用户密码">修改用户密码</h4>
<p>MySQL 中提供了多种修改的方式：基本上都必须使用对应提供的一个系统函数: <code>password()</code>，需要靠该函数对密码进行加密处理。</p>
<ol>
<li>
<p>使用专门的修改密码的指令</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> password <span class="hljs-keyword">for</span> 用户 <span class="hljs-operator">=</span> password(<span class="hljs-string">&#x27;新的明文密码&#x27;</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> password <span class="hljs-keyword">for</span> <span class="hljs-string">&#x27;user1&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> <span class="hljs-operator">=</span> password(<span class="hljs-string">&#x27;654321&#x27;</span>);<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>使用更新语句 update 来修改表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">update</span> MySQL.user <span class="hljs-keyword">set</span> password <span class="hljs-operator">=</span> password(<span class="hljs-string">&#x27;新的明文密码&#x27;</span>) <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">and</span> host<span class="hljs-operator">=</span><span class="hljs-string">&#x27;&#x27;</span>;<br></code></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="4.1-%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E2%80%94%E2%80%94%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86" tabindex="-1" id="4-1-用户权限管理——权限管理">4.1 用户权限管理——权限管理</h3>
<h4 id="%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86" tabindex="-1" id="权限管理">权限管理</h4>
<p>再 MySQL 中将权限管理分为三类：</p>
<ol>
<li>数据权限：增删改查（select/update/delete/insert）</li>
<li>结构权限：结构操作（create/drop）</li>
<li>管理权限：权限管理（create user/grant/revoke）</li>
</ol>
<h4 id="%E6%8E%88%E4%BA%88%E6%9D%83%E9%99%90%EF%BC%9Agrant" tabindex="-1" id="授予权限：grant">授予权限：grant</h4>
<p>将权限分配给指定的用户。</p>
<p>基本语法：<code>grant 权限列表 on 数据库/\*.表名/\*to 用户;</code></p>
<p>权限列表：使用逗号分隔，但是可以使用 all privileges 代表全部权限。<code>数据库.表名</code>：可以是单表（<code>数据库名字.表名</code>），可以是具体某个数据库（<code>数据库.</code>），也可以整库（<code>*.*</code>）</p>
<h4 id="%E5%8F%96%E6%B6%88%E6%9D%83%E9%99%90%EF%BC%9Arevoke" tabindex="-1" id="取消权限：revoke">取消权限：revoke</h4>
<p>权限回收：将权限从用户手中收回</p>
<p>基本语法：<code>revoke 权限列表/all privileges on 数据库/*.表/* from 用户;</code></p>
<h4 id="%E5%88%B7%E6%96%B0%E6%9D%83%E9%99%90%EF%BC%9Aflush" tabindex="-1" id="刷新权限：flush">刷新权限：flush</h4>
<p>Flush：刷新，将当前对用户的权限操作，进行一个刷新，将操作的具体内容同步到对应的
表中。</p>
<p>基本语法：<code>flush privileges;</code></p>
<h3 id="4.2-%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E2%80%94%E2%80%94%E5%AF%86%E7%A0%81%E4%B8%A2%E5%A4%B1%E6%89%BE%E5%9B%9E" tabindex="-1" id="4-2-用户权限管理——密码丢失找回">4.2 用户权限管理——密码丢失找回</h3>
<p>如果忘记了 root 用户密码，就需要去找回或者重置 root 用户密码</p>
<ol>
<li>
<p>停止服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">net stop MySQL<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>重新启动服务（启动服务器但是跳过权限）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">MySQLd.exe --skip-grant-tables<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>当前启动的服务器没有权限概念：非常危险，任何客户端，不需要任何用户信息都可以直接登录，而且是 root 权限：新开客户端，使用 MySQL.exe 登录即可</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">MySQL<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>修改 root 用户密码：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">update</span> MySQL.user <span class="hljs-keyword">set</span> password <span class="hljs-operator">=</span> password(<span class="hljs-string">&#x27;root&#x27;</span>) <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;root&#x27;</span> <span class="hljs-keyword">and</span> host<span class="hljs-operator">=</span><span class="hljs-string">&#x27;localhost&#x27;</span>;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>关闭服务器（结束 <code>MySQLd.exe</code> 这个进程），重启服务</p>
</li>
</ol>
<h3 id="4.3-%E5%A4%96%E9%94%AE%E2%80%94%E2%80%94%E6%A6%82%E5%BF%B5%EF%BC%88%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%EF%BC%89" tabindex="-1" id="4-3-外键——概念（基本操作）">4.3 外键——概念（基本操作）</h3>
<h4 id="%E5%A2%9E%E5%8A%A0%E5%A4%96%E9%94%AE" tabindex="-1" id="增加外键">增加外键</h4>
<p>MySQL 中提供了两种方式增加外键</p>
<ol>
<li>
<p>方案 1：在创建表的时候增加外键（类似主键）。</p>
<p>基本语法：在字段之后增加一条语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">[<span class="hljs-keyword">constraint</span> `外键名`]<span class="hljs-keyword">foreign</span> key(外键字段) <span class="hljs-keyword">references</span> 主表(主键);<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_foreign(<br>	id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>    class_id <span class="hljs-type">int</span>,  <span class="hljs-comment">-- 关联班级 my_class</span><br>    <span class="hljs-keyword">foreign</span> key(class_id) <span class="hljs-keyword">references</span> my_class(class_id)  <span class="hljs-comment">-- 增加外键</span><br>)charset utf8;<br><br><span class="hljs-keyword">desc</span> my_foreign;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------+-------------+------+-----+---------+----------------+<br>| Field    | Type        | Null | Key | Default | Extra          |<br>+----------+-------------+------+-----+---------+----------------+<br>| id       | int         | NO   | PRI | NULL    | auto_increment |<br>| name     | varchar(10) | NO   |     | NULL    |                |<br>| class_id | int         | YES  | MUL | NULL    |                |<br>+----------+-------------+------+-----+---------+----------------+<br>3 rows in set (0.01 sec)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 修改 my_student 表，将 class_id 设为外键字段</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> my_student <span class="hljs-keyword">add</span> <span class="hljs-keyword">constraint</span> `student_class_ibfk_1` <span class="hljs-keyword">foreign</span> key(class_id) <span class="hljs-keyword">references</span> my_class(class_id);<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>方案 2：在创建表后增加外键。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">Alter</span> <span class="hljs-keyword">table</span> 从表 <span class="hljs-keyword">add</span> [<span class="hljs-keyword">constraint</span>`外键名`]<span class="hljs-keyword">foreign</span> key(外键字段) <span class="hljs-keyword">references</span> 主表(主键);<br></code></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="%E4%BF%AE%E6%94%B9-%26-%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE" tabindex="-1" id="修改-删除外键">修改 &amp; 删除外键</h4>
<p>外键不允许修改，只能先删除后增加</p>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> 从表 <span class="hljs-keyword">drop</span> <span class="hljs-keyword">foreign</span> key 外键名字;<br></code></pre></td></tr></table></figure>
<h4 id="%E5%A4%96%E9%94%AE%E5%9F%BA%E6%9C%AC%E8%A6%81%E6%B1%82" tabindex="-1" id="外键基本要求">外键基本要求</h4>
<ol>
<li>外键字段需要保证与关联的主表的主键字段类型完全一致；</li>
<li>基本属性也要相同，</li>
<li>如果是在表后增加外键，对数据还有一定的要求（从表数据与主表的关联关系）</li>
<li>外键只能使用 innodb 存储引擎：myisam 不支持</li>
</ol>
<h3 id="5.1-%E5%A4%96%E9%94%AE%E2%80%94%E2%80%94%E7%BA%A6%E6%9D%9F" tabindex="-1" id="5-1-外键——约束">5.1 外键——约束</h3>
<h4 id="%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F" tabindex="-1" id="外键约束">外键约束</h4>
<p>外键约束：通过建立外键关系之后，对主表和从表都会有一定的数据约束效率。</p>
<h4 id="%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" tabindex="-1" id="约束的基本概念">约束的基本概念</h4>
<ol>
<li>当一个外键产生时：外键所在的表（从表）会受制于主表数据的存在从而导致数据不能进行某些不符合规范的操作（不能插入主表不存在的数据）</li>
<li>如果一张表被其他表外键引入，那么该表的数据操作就不能随意：必须保证从表数据的有效性（不能随便删除一个被从表引入的记录）</li>
</ol>
<h4 id="%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%E7%9A%84%E6%A6%82%E5%BF%B5" tabindex="-1" id="外键约束的概念">外键约束的概念</h4>
<p>可以在创建外键的时候，对外键约束进行选择性的操作。</p>
<p>基本语法:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">add</span> <span class="hljs-keyword">foreign</span> key(外键字段)<span class="hljs-keyword">references</span> 主表(主键) <span class="hljs-keyword">on</span> 约束模式;<br></code></pre></td></tr></table></figure>
<p>约束模式有三种：</p>
<ol>
<li><code>district</code>：严格模式，默认的，不允许操作。</li>
<li><code>cascade</code>：级联模式，一起操作，主表变化，从表数据跟着变化</li>
<li><code>set null</code>：置空模式，主表变化（删除），从表对应记录设置为空：前提是从表中对应的外键字段允许为空</li>
</ol>
<p>外键约束主要约束的对象是主表操作：从表就是不能插入主表不存在的数据。</p>
<p>通常在进行约束时候的时候，需要指定操作：update 和 delete</p>
<p>常用的约束模式：<code>on update cascade, on delete set null</code>，更新级联，删除置空</p>
<h4 id="%E7%BA%A6%E6%9D%9F%E4%BD%9C%E7%94%A8" tabindex="-1" id="约束作用">约束作用</h4>
<p>保证数据的完整性：主表与从表的数据要一致。</p>
<p>正是因为外键有非常强大的数据约束作用，而且可能导致数据在后台变化的不可控。导致程序在进行设计开发逻辑的时候，没有办法去很好的把握数据（业务），所以外键比较少使用。</p>
<h3 id="5.2-%E8%A7%86%E5%9B%BE%E2%80%94%E2%80%94%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" tabindex="-1" id="5-2-视图——基本操作">5.2 视图——基本操作</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 创建视图</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> student_class_v <span class="hljs-keyword">as</span><br><span class="hljs-keyword">select</span> s.<span class="hljs-operator">*</span>, c.name <span class="hljs-keyword">from</span> my_student <span class="hljs-keyword">as</span> s <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span><br>my_class <span class="hljs-keyword">as</span> c<br><span class="hljs-keyword">on</span><br>s.class_id <span class="hljs-operator">=</span> c.class_id;<br></code></pre></td></tr></table></figure>
<h4 id="%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE" tabindex="-1" id="使用视图">使用视图</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> student_class_v;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+--------+------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height | gender | name |<br>+---------+----------+----------+---------+------------+--------+------+<br>| stu0001 | 夏洛     |        1 |      18 |        185 | 男     | 1班  |<br>| stu0002 | 张四     |        1 |      28 |        165 | 女     | 1班  |<br>| stu0003 | 张五     |        2 |      22 |        187 | 男     | 2班  |<br>| stu0004 | 小婷     |        2 |      32 |        189 | 女     | 2班  |<br>| stu0005 | 小猪     |        1 |      30 |        173 | 女     | 1班  |<br>| stu0006 | 小狗     |        2 |      18 |        170 | 男     | 2班  |<br>| stu0007 | 小江     |        1 |      25 |        178 | 女     | 1班  |<br>+---------+----------+----------+---------+------------+--------+------+<br>7 rows in set (0.01 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E4%BF%AE%E6%94%B9%E8%A7%86%E5%9B%BE" tabindex="-1" id="修改视图">修改视图</h4>
<p>修改视图：本质是修改视图对应的查询语句</p>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">view</span> 视图名字 <span class="hljs-keyword">as</span> 新 <span class="hljs-keyword">select</span> 指令;<br></code></pre></td></tr></table></figure>
<h4 id="%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE" tabindex="-1" id="删除视图">删除视图</h4>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">view</span> 视图名字;<br></code></pre></td></tr></table></figure>
<h3 id="5.3-%E4%BA%8B%E5%8A%A1%E5%AE%89%E5%85%A8%E2%80%94%E2%80%94%E6%A6%82%E5%BF%B5" tabindex="-1" id="5-3-事务安全——概念">5.3 事务安全——概念</h3>
<h4 id="%E4%BA%8B%E5%8A%A1%E6%A6%82%E5%BF%B5" tabindex="-1" id="事务概念">事务概念</h4>
<p>事务（Transaction）是访问并可能更新数据库中各种数据项的一个程序执行单元（unit）。事务通常由高级数据库操纵语言或编程语言书写的用户程序的执行所引起。事务由事务开始（begin transaction）和事务结束（end transaction）之间执行的全体操作组成。</p>
<h4 id="%E4%BA%8B%E5%8A%A1%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86" tabindex="-1" id="事务基本原理">事务基本原理</h4>
<p>基本原理：MySQL 允许将事务统一进行管理（存储引擎INNODB），将用户所做的操作，暂时保存起来，不直接放到数据表（更新），等到用于确认结果之后再进行操作。</p>
<p><img src="day04/01.webp" alt="webp"></p>
<p>事务在 MySQL 中通常是自动提交的，但是也可以使用手动事务。</p>
<h4 id="%E8%87%AA%E5%8A%A8%E4%BA%8B%E5%8A%A1" tabindex="-1" id="自动事务">自动事务</h4>
<p>自动事务：autocommit，当客户端发送一条 SQL 指令（写操作：增删改）给服务器的时候服务器在执行之后，不用等待用户反馈结果，会自动将结果同步到数据表。</p>
<p>证明：利用两个客户端，一个客户端执行 SQL 指令，另外一个客户端查看执行结果。</p>
<p>关闭自动事务：关闭之后系统就不再帮助用户提交结果了。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> autocommit <span class="hljs-operator">=</span> off;<br></code></pre></td></tr></table></figure>
<p>一旦自动事务关闭，那么需要用户提供同步的命令</p>
<p>Commit：提交（同步到数据表：事务也会被清空）</p>
<p>Rollback：回滚（清空之前的操作，不要了）</p>
<p>事务没有提交的对比查看：在执行事务端的客户端中，系统在进行数据查看的时候会利用事务日志中保存的结果对数据进行加工。</p>
<p>通常，我们不会关闭自动事务：这样操作太麻烦。因此只会在需要使用事务处理的时候，才会进行操作（手动事务）</p>
<h3 id="6.2-%E4%BA%8B%E5%8A%A1%E5%AE%89%E5%85%A8%E2%80%94%E2%80%94%E6%89%8B%E5%8A%A8%E4%BA%8B%E5%8A%A1" tabindex="-1" id="6-2-事务安全——手动事务">6.2 事务安全——手动事务</h3>
<p>手动事务：不管是开始还是过程还是结束都需要用户（程序员），手动的发送事务操作指令来实现。</p>
<p>手动事务对应的命令：</p>
<ol>
<li><code>start transacion;</code> 开启事务：从这条语句开始，后面的所有语句都不会直接写入到数据表（保存在事务日志中）</li>
<li>事务处理：多个写指令构成。</li>
<li>事务提交：commit/rollback，到这个时候所有的事务才算结束。</li>
</ol>
<h4 id="%E5%BC%80%E5%90%AF%E4%BA%8B%E5%8A%A1" tabindex="-1" id="开启事务">开启事务</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">start</span> transaction;<br></code></pre></td></tr></table></figure>
<h4 id="%E6%89%A7%E8%A1%8C%E4%BA%8B%E5%8A%A1" tabindex="-1" id="执行事务">执行事务</h4>
<p>将多个连续的但是是一个整体的 SQL 指令，逐一执行</p>
<h4 id="%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1" tabindex="-1" id="提交事务">提交事务</h4>
<p>确认提交：<code>commit</code>，数据写到数据表（清空）</p>
<p>回滚操作：<code>rollback</code>，所有数据无效并清空</p>
<h4 id="%E5%9B%9E%E6%BB%9A%E7%82%B9" tabindex="-1" id="回滚点">回滚点</h4>
<p>回滚点：<code>savepoint</code>，当有一系列事务操作时，而其中的步骤如果成功了，没有必要重新来过可以在某个点（成功），设置一个记号（回滚点），然后如果后面有失败，那么可以回到这个记号位置。</p>
<p>增加回滚点：<code>savepoint 回滚点名字;</code> 字母数字和下划线构成。</p>
<p>回到回滚点：<code>rollbackt o 回滚点名字;</code> 那个记号（回滚点）之后的所有操作没有了</p>
<p>注意：在一个事务处理中，如果有很多个步骤，那么可以设置多个回滚点。但是如果回到了前面的回滚点，后面的回滚点就失效；</p>
<h3 id="6.3-%E4%BA%8B%E5%8A%A1%E5%AE%89%E5%85%A8%E2%80%94%E2%80%94%E7%89%B9%E6%80%A7" tabindex="-1" id="6-3-事务安全——特性">6.3 事务安全——特性</h3>
<p>事务应该具有 4 个属性：原子性、一致性、隔离性、持久性。这四个属性通常称为 ACID 特性。</p>
<ul>
<li>
<p>原子性（atomicity）。一个事务是一个不可分割的工作单位,事务中包括的诸操作要么都做,要么都不做。
事务从 start transaction 起到提交事务（comit 或者 rollback），要么所有的操作都成功，要么就是所有的操作都失败;</p>
</li>
<li>
<p>一致性（consistency）。事务必须是使数据库从一个一致性状态变到另一个一致性状态。一致性与原子性是密切相关的。</p>
<p>数据表中的数据修改，要么是所有操作一次性修改，要么是根本不动</p>
</li>
<li>
<p>隔离性（isolation）。一个事务的执行不能被其他事务干扰。即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。如果一个客户端在使用事务操作一个数据（可能是一行/整表）的时候，另外一个客户端不能对该数据进行操作。</p>
<p>什么时候是行被隔离？什么时候是正表被隔离？</p>
<p>说明：如果条件中使用了索引（主键），那么系统是根据主键直接找到某条记录，这个时候与其他记录无关，那么只隔离一条记录；反之，如果说系统是通过全表检索（每一条记录都去检查：没有索引），被检索的所有数据都会被锁定（整表）</p>
</li>
<li>
<p>持久性（durability）。持久性也称永久性（permanence），指一个事务一旦提交，它对数据库中数据的改变就应该是永久性的。接下来的其他操作或故障不应该对其有任何影响。</p>
</li>
</ul>
<h2 id="day5" tabindex="-1" id="day5">day5</h2>
<h3 id="1.1-%E5%8F%98%E9%87%8F%E2%80%94%E2%80%94%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F" tabindex="-1" id="1-1-变量——系统变量">1.1 变量——系统变量</h3>
<p>MySQL 本质是一种编程语言，需要很多变量来保存数据。MySQL 中很多的属性控制都是通过 MySQL 中固有的变量来实现的。</p>
<h4 id="%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F" tabindex="-1" id="系统变量">系统变量</h4>
<p>系统内部定义的变量，<strong>系统变量针对所有用户（MySQL 客户端）有效。</strong></p>
<p>查看系统所有变量：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> VARIABLES;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">657 rows in set, 1 warning (0.01 sec)<br></code></pre></td></tr></table></figure>
<p>MySQL 允许用户使用 select 查询变量的数据值（系统变量）</p>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> @@变量名;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> @<span class="hljs-variable">@version</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-----------+<br>| @@version |<br>+-----------+<br>| 8.0.41    |<br>+-----------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<p>修改系统变量：分为两种修改方式</p>
<ol>
<li>
<p>局部修改（会话级别）：只针对当前自己客户端当次连接有效</p>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> 变量名<span class="hljs-operator">=</span>新值;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>全局修改：针对所有的客户端，“所有时刻”都有效</p>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span> 变量名 <span class="hljs-operator">=</span> 值;<br><span class="hljs-keyword">set</span> @<span class="hljs-variable">@global</span>.变量名 <span class="hljs-operator">=</span> 值;<br></code></pre></td></tr></table></figure>
</li>
</ol>
<p>全局修改之后：所有连接的客户端并没发现改变？全局修改只针对新客户端生效（正在连着的无效）</p>
<p>注意：如果想要本次连接对应的变量修改有效，那么不能使用全局修改，只能使用会话级别修改</p>
<h3 id="1.2-%E5%8F%98%E9%87%8F%E2%80%94%E2%80%94%E4%BC%9A%E8%AF%9D%E5%8F%98%E9%87%8F-%26-%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F" tabindex="-1" id="1-2-变量——会话变量-局部变量">1.2 变量——会话变量 &amp; 局部变量</h3>
<h4 id="%E4%BC%9A%E8%AF%9D%E5%8F%98%E9%87%8F" tabindex="-1" id="会话变量">会话变量</h4>
<p>会话变量也称之为用户变量，会话变量跟 MySQL 客户端是绑定的，设置的变量，只对当前用户使用的客户端生效。</p>
<p>定义用户变量：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> @变量名 <span class="hljs-operator">=</span> 值;<br></code></pre></td></tr></table></figure>
<p>在 MySQL 中因为没有比较符号 <code>==</code>，所以是用 <code>=</code> 代替比较符号，有时候在赋值的时候，会报错。</p>
<p>MySQL 为了避免系统分不清是赋值还是比较，特定增加一个变量的赋值符号 <code>:=</code>。</p>
<p>MySQL  是专门存储数据的：允许将数据从表中取出存储到变量中，查询得到的数据必须只能是行数据（一个变量对应一个字段值）。MySQL 没有数组。</p>
<ol>
<li>
<p>赋值且査看赋值过程：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> @变量<span class="hljs-number">1</span> <span class="hljs-operator">=</span> 字段 <span class="hljs-number">1</span>,@变量 <span class="hljs-number">2</span> <span class="hljs-operator">=</span> 字段 <span class="hljs-number">2</span> <span class="hljs-keyword">from</span> 数据表 <span class="hljs-keyword">where</span> 条件;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>只赋值，不看过程：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段 <span class="hljs-number">1</span>, 字段 <span class="hljs-number">2.</span>. <span class="hljs-keyword">from</span> 数据源 <span class="hljs-keyword">where</span> 条件 <span class="hljs-keyword">into</span> @变量 <span class="hljs-number">1</span>, @变量 <span class="hljs-number">2.</span>.<br></code></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F" tabindex="-1" id="局部变量">局部变量</h4>
<p>作用范围在 <code>begin</code> 到 <code>end</code> 语句块之间。在该语句块里设置的变量，<code>declare</code> 语句专门用于定义局部变量。</p>
<ol>
<li>局部变量是使用 declare 关键字声明</li>
<li>局部变量 <code>declare</code> 语句出现的位置一定是在 <code>begin</code> 和 <code>end</code> 之间（<code>begin end</code> 是在大型语句块中使用：函数/存储过程/触发器）</li>
<li>声明语法：<code>declare 变量名 数据类型 [属性];</code></li>
</ol>
<h3 id="2.1-%E6%B5%81%E7%A8%8B%E7%BB%93%E6%9E%84%E2%80%94%E2%80%94if-%E5%88%86%E6%94%AF" tabindex="-1" id="2-1-流程结构——if-分支">2.1 流程结构——if 分支</h3>
<h4 id="%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95" tabindex="-1" id="基本语法">基本语法</h4>
<p><code>If</code> 在 MySQL 中有两种基本用法、</p>
<p>用在 select 查询当中，当做一种条件来进行判断。基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">if(条件,为真结果,为假结果)<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span>, if(stu_age <span class="hljs-operator">&gt;</span> <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;符合&#x27;</span>, <span class="hljs-string">&#x27;不符合&#x27;</span>) <span class="hljs-keyword">as</span> judge <span class="hljs-keyword">from</span> my_student;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+--------+--------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height | gender | judge  |<br>+---------+----------+----------+---------+------------+--------+--------+<br>| stu0001 | 夏洛     |        1 |      18 |        185 | 男     | 不符合 |<br>| stu0002 | 张四     |        1 |      28 |        165 | 女     | 符合   |<br>| stu0003 | 张五     |        2 |      22 |        187 | 男     | 符合   |<br>| stu0004 | 小婷     |        2 |      32 |        189 | 女     | 符合   |<br>| stu0005 | 小猪     |        1 |      30 |        173 | 女     | 符合   |<br>| stu0006 | 小狗     |        2 |      18 |        170 | 男     | 不符合 |<br>| stu0007 | 小江     |        1 |      25 |        178 | 女     | 符合   |<br>+---------+----------+----------+---------+------------+--------+--------+<br>7 rows in set (0.03 sec)<br></code></pre></td></tr></table></figure>
<p>用在复杂的语句块中（函数/存储过程/触发器）。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">if 条件表达式 <span class="hljs-keyword">then</span><br>	满足条件要执行的语句<br><span class="hljs-keyword">end</span> if;<br></code></pre></td></tr></table></figure>
<h4 id="%E5%A4%8D%E5%90%88%E8%AF%AD%E6%B3%95" tabindex="-1" id="复合语法">复合语法</h4>
<p>复合语法：代码的判断存在两面性，两面都有对应的代码执行。</p>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">if 条件表达式 <span class="hljs-keyword">then</span><br>	满徐条件要执行的语句<br><span class="hljs-keyword">else</span><br>	不满足条件要执行的语句<br><span class="hljs-keyword">end</span> if;<br></code></pre></td></tr></table></figure>
<h3 id="2.2-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E2%80%94%E2%80%94while-%E5%BE%AA%E7%8E%AF" tabindex="-1" id="2-2-流程控制——while-循环">2.2 流程控制——while 循环</h3>
<h4 id="%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-1" tabindex="-1" id="基本语法-2">基本语法</h4>
<p>循环体都是需要在大型代码块中使用</p>
<p>基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">while 条件 do<br>	要循环执行的代码<br><span class="hljs-keyword">End</span> while;<br></code></pre></td></tr></table></figure>
<h4 id="%E7%BB%93%E6%9E%84%E6%A0%87%E8%AF%86%E7%AC%A6" tabindex="-1" id="结构标识符">结构标识符</h4>
<p>结构标识符：为某些特定的结构进行命名，然后为的是在某些地方使用名字。</p>
<p>基本语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">标识名字:while 条件 do<br>	循环体<br><span class="hljs-keyword">end</span> while [标识名字];<br></code></pre></td></tr></table></figure>
<p>标识符的存在主要是为了循环体中使用循环控制。在 MySQL 中没有 <code>continue</code> 和 <code>break</code>，有自己的关键字替代。</p>
<p><code>lterate</code>：迭代，就是以下的代码不执行，重新开始循环（continue）</p>
<p><code>leave</code>：离开，整个循环终止（break）</p>
<h3 id="2.3-%E5%87%BD%E6%95%B0%E2%80%94%E2%80%94%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0" tabindex="-1" id="2-3-函数——内置函数">2.3 函数——内置函数</h3>
<h4 id="%E5%87%BD%E6%95%B0" tabindex="-1" id="函数">函数</h4>
<p>在 MySQL 中，函数分为两类：系统函数（内置函数）和自定义函数</p>
<h4 id="%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0" tabindex="-1" id="内置函数">内置函数</h4>
<p>字符串函数：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Char_length()</code></td>
<td>判断字符串的字符数。</td>
</tr>
<tr>
<td><code>Length()</code></td>
<td>判断字符串的字节数（与字符集）</td>
</tr>
<tr>
<td><code>Concat()</code></td>
<td>连接字符串</td>
</tr>
<tr>
<td><code>Instr()</code></td>
<td>判断字符在目标字符串中是否存在，存在返回其位置，不存在返回 0</td>
</tr>
<tr>
<td><code>Lcase()</code></td>
<td>全部小写</td>
</tr>
<tr>
<td><code>Left()</code></td>
<td>从左侧指定位置开始截取字符串</td>
</tr>
<tr>
<td><code>Ltrim()</code></td>
<td>消除左边对应的空格</td>
</tr>
<tr>
<td><code>Mid()</code></td>
<td>从中间指定位置开始截取，如果不指定截取长度，直接到最后</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> lcase(<span class="hljs-string">&#x27;aBcD&#x27;</span>), <span class="hljs-keyword">left</span>(<span class="hljs-string">&#x27;你好中国&#x27;</span>, <span class="hljs-number">2</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------------+---------------------+<br>| lcase(&#x27;aBcD&#x27;) | left(&#x27;你好中国&#x27;, 2) |<br>+---------------+---------------------+<br>| abcd          | 你好                |<br>+---------------+---------------------+<br>1 row in set (0.01 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0" tabindex="-1" id="时间函数">时间函数</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Now()</code></td>
<td>返回当前时间，日期 时间</td>
</tr>
<tr>
<td><code>Curdate()</code></td>
<td>返回当前日期</td>
</tr>
<tr>
<td><code>Curtime()</code></td>
<td>返回当前时间</td>
</tr>
<tr>
<td><code>Datediff()</code></td>
<td>判断两个日期之间的天数差距，参数日期必须使用字符串格式（用引号）</td>
</tr>
<tr>
<td><code>Date_add(日期, interval 时间数字 type)</code></td>
<td>进行时间的增加<br/>Type:day/hour/minute/second</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> date_add(<span class="hljs-string">&#x27;2000-10-10&#x27;</span>, <span class="hljs-type">interval</span> <span class="hljs-number">10</span> <span class="hljs-keyword">day</span>), date_add(<span class="hljs-string">&#x27;2000-10-10&#x27;</span>, <span class="hljs-type">interval</span> <span class="hljs-number">10</span> <span class="hljs-keyword">year</span>), date_add(<span class="hljs-string">&#x27;2000-10-10&#x27;</span>, <span class="hljs-type">interval</span> <span class="hljs-number">10</span> <span class="hljs-keyword">second</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-----------------------------------------+------------------------------------------+--------------------------------------------+<br>| date_add(&#x27;2000-10-10&#x27;, interval 10 day) | date_add(&#x27;2000-10-10&#x27;, interval 10 year) | date_add(&#x27;2000-10-10&#x27;, interval 10 second) |<br>+-----------------------------------------+------------------------------------------+--------------------------------------------+<br>| 2000-10-20                              | 2010-10-10                               | 2000-10-10 00:00:10<br>          |<br>+-----------------------------------------+------------------------------------------+--------------------------------------------+<br>1 row in set (0.01 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E5%85%B6%E4%BB%96%E5%87%BD%E6%95%B0" tabindex="-1" id="其他函数">其他函数</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MD5()</code></td>
<td>对数据进行 md5 加密（MySQL 中的 md5 与其他任何地方的 md5 加密出来的内容是完全相同的）</td>
</tr>
<tr>
<td><code>Version()</code></td>
<td>获取版本号</td>
</tr>
<tr>
<td><code>Database()</code></td>
<td>显示当前所在数据库</td>
</tr>
<tr>
<td><code>UUID()</code></td>
<td>生成一个唯一标识符（自增长）：自增长是单表唯一，UUID 是整库（数据唯一同时空间唯一）</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> MD5(<span class="hljs-string">&#x27;123456&#x27;</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+----------------------------------+<br>| MD5(&#x27;123456&#x27;)                    |<br>+----------------------------------+<br>| e10adc3949ba59abbe56e057f20f883e |<br>+----------------------------------+<br>1 row in set (0.01 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0" tabindex="-1" id="数学函数">数学函数</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Abs()</code></td>
<td>绝对值</td>
</tr>
<tr>
<td><code>Ceiling()</code></td>
<td>向上取整</td>
</tr>
<tr>
<td><code>Floor()</code></td>
<td>向下取整</td>
</tr>
<tr>
<td><code>Pow()</code></td>
<td>求指数，谁的多少次方</td>
</tr>
<tr>
<td><code>Rand()</code></td>
<td>获取一个随机数（0-1 之间）</td>
</tr>
<tr>
<td><code>Round()</code></td>
<td>四舍五入函数</td>
</tr>
</tbody>
</table>
<h3 id="3.1-%E5%87%BD%E6%95%B0%E2%80%94%E2%80%94%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0" tabindex="-1" id="3-1-函数——自定义函数">3.1 函数——自定义函数</h3>
<p>自定义函数：用户自己定义的函数。</p>
<p>函数：实现某种功能的语句块（由多条语句组成）</p>
<ol>
<li>函数内部的每条指令都是一个独立的个体：需要符合语句定义规范：需要语句结束符分号；</li>
<li>函数是一个整体，而且函数是在调用的时候才会被执行，那么当设计函数的时候，意味着整体不能被中断；</li>
<li>MySQL 一旦见到语句结束符分号，就会自动开始执行</li>
</ol>
<p>解决方案：在定义函数之前，尝试修改临时的语句结束符</p>
<p>基本语法：<code>delimiter</code></p>
<p>修改临时语句结束符：<code>delimiter 新符号 [可以使用系统非内置即可$$]</code></p>
<p>中间为正常 SQL 指令：使用分号结束（系统不会执行：不认识分号）</p>
<p>使用新符号结束。</p>
<p>修改回语句结束符：<code>delimiter;</code></p>
<h4 id="%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0" tabindex="-1" id="创建函数">创建函数</h4>
<p>自定义函数包含几个要素：function 关键字，函数名，参数(形参和实参[可选])，确认函数返回值类型，函数体，返回值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql">DELIMITER $$<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> my_func1() <br><span class="hljs-keyword">RETURNS</span> <span class="hljs-type">INT</span> <br><span class="hljs-keyword">DETERMINISTIC</span> <br><span class="hljs-keyword">NO</span> <span class="hljs-keyword">SQL</span> <br><span class="hljs-keyword">BEGIN</span><br>    <span class="hljs-keyword">RETURN</span> <span class="hljs-number">10</span>;<br><span class="hljs-keyword">END</span> $$<br><br>DELIMITER ;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> my_func2() <span class="hljs-keyword">returns</span> <span class="hljs-type">int</span><br><span class="hljs-keyword">NO</span> <span class="hljs-keyword">SQL</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> my_func3(int_1 <span class="hljs-type">int</span>, int_2 <span class="hljs-type">int</span>) <span class="hljs-keyword">returns</span> <span class="hljs-type">int</span><br><span class="hljs-keyword">NO</span> <span class="hljs-keyword">SQL</span><br><span class="hljs-keyword">return</span> int_1 <span class="hljs-operator">+</span> int_2;<br></code></pre></td></tr></table></figure>
<p>查看函数的创建语句：<code>show create function 函数名字;</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> my_func1\G;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">*************************** 1. row ***************************<br>            Function: my_func1<br>            sql_mode: ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION<br>     Create Function: CREATE DEFINER=`root`@`localhost` FUNCTION `my_func1`() RETURNS int<br>    NO SQL<br>    DETERMINISTIC<br>BEGIN<br>    RETURN 10;<br>END<br>character_set_client: gbk<br>collation_connection: gbk_chinese_ci<br>  Database Collation: gbk_chinese_ci<br>1 row in set (0.01 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0" tabindex="-1" id="调用函数">调用函数</h4>
<p>自定义函数的调用与内置函数的调用是一样的：<code>select 函数名(实参列表);</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> my_func1(), my_func2(), my_func3(<span class="hljs-number">100</span>, <span class="hljs-number">1000</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+------------+------------+---------------------+<br>| my_func1() | my_func2() | my_func3(100, 1000) |<br>+------------+------------+---------------------+<br>|         10 |        100 |                1100 |<br>+------------+------------+---------------------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" tabindex="-1" id="注意事项">注意事项</h4>
<ol>
<li>自定义函数是属于用户级别的：只有当前客户端对应的数据库中可以使用。</li>
<li>可以在不同的数据库下看到对应的函数，但是不可以调用</li>
<li>自定义函数：通常是为了将多行代码集合到一起解决一个重复性的问题</li>
<li>函数因为必须规范返回值：那么在函数内部不能使用 select 指令：select 一旦执行就会得到一个结果（result set）：<code>select 字段 into @变量;</code>（唯一可用）</li>
</ol>
<h3 id="3.2-%E5%87%BD%E6%95%B0%E5%92%8C%E6%B5%81%E7%A8%8B%E7%BB%93%E6%9E%84%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B" tabindex="-1" id="3-2-函数和流程结构综合案例">3.2 函数和流程结构综合案例</h3>
<p>需求：从 1 开始，直到用户传入的对应的值为止，自动求和：凡是 5 的倍数都不要</p>
<p>设计：</p>
<ol>
<li>创建函数</li>
<li>需要一个形参：确定要累加到什么位置</li>
<li>需要定义一个变量来保存对应的结果</li>
<li>内部需要一个循环来实现迭代累加。</li>
<li>循环内部需要进行条件判断控制：5 的倍数</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sql">DELIMITER $$<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> my_sum(end_value <span class="hljs-type">INT</span>) <span class="hljs-keyword">RETURNS</span> <span class="hljs-type">INT</span><br><span class="hljs-keyword">DETERMINISTIC</span><br><span class="hljs-keyword">NO</span> <span class="hljs-keyword">SQL</span><br><span class="hljs-keyword">BEGIN</span><br>    <span class="hljs-keyword">DECLARE</span> res <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">DECLARE</span> i <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>;<br><br>    mywhile: WHILE i <span class="hljs-operator">&lt;=</span> end_value DO<br>        IF i <span class="hljs-operator">%</span> <span class="hljs-number">5</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span><br>            <span class="hljs-keyword">SET</span> i <span class="hljs-operator">=</span> i <span class="hljs-operator">+</span> <span class="hljs-number">1</span>;<br>            ITERATE mywhile;<br>        <span class="hljs-keyword">END</span> IF;<br>        <span class="hljs-keyword">SET</span> res <span class="hljs-operator">=</span> res <span class="hljs-operator">+</span> i;<br>        <span class="hljs-keyword">SET</span> i <span class="hljs-operator">=</span> i <span class="hljs-operator">+</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">END</span> WHILE mywhile;<br><br>    <span class="hljs-keyword">RETURN</span> res;  <span class="hljs-comment">-- 添加 RETURN 语句</span><br><span class="hljs-keyword">END</span> $$<br><br>DELIMITER ;<br></code></pre></td></tr></table></figure>
<p>调用函数：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> my_sum(<span class="hljs-number">10</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+------------+<br>| my_sum(10) |<br>+------------+<br>|         40 |<br>+------------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h3 id="4.1-%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F" tabindex="-1" id="4-1-变量作用域">4.1 变量作用域</h3>
<p>变量作用域：变量能够使用的区域范围。</p>
<h4 id="%E5%B1%80%E9%83%A8%E4%BD%9C%E7%94%A8%E5%9F%9F" tabindex="-1" id="局部作用域">局部作用域</h4>
<p>使用 declare 关键字声明（在结构体内：函数/存储过程/触发器），而且只能在结构体内部使用</p>
<p>declare 关键字声明的变量没有任何符号修饰，就是普通字符串，如果在外部访问该变量，系统会自动认为是字段</p>
<h4 id="%E4%BC%9A%E8%AF%9D%E4%BD%9C%E7%94%A8%E5%9F%9F" tabindex="-1" id="会话作用域">会话作用域</h4>
<p>用户定义的，使用@符号定义的变量，使用 set 关键字</p>
<p>会话作用域：在当前用户当次连接有效，只要在本连接之中，任何地方都可以使用（可以在结构内部，也可以跨库）。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SET</span> <span class="hljs-variable">@name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;张三&#x27;</span>;<br><br>DELIMITER $$<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> my_func4() <span class="hljs-keyword">RETURNS</span> <span class="hljs-type">CHAR</span>(<span class="hljs-number">10</span>)<br><span class="hljs-keyword">DETERMINISTIC</span><br><span class="hljs-keyword">NO</span> <span class="hljs-keyword">SQL</span><br><span class="hljs-keyword">BEGIN</span><br>    <span class="hljs-keyword">RETURN</span> <span class="hljs-variable">@name</span>;<br><span class="hljs-keyword">END</span> $$<br><br>DELIMITER ;<br><br><span class="hljs-keyword">SELECT</span> my_func4();<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+------------+<br>| my_func4() |<br>+------------+<br>| 张三       |<br>+------------+<br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E5%85%A8%E5%B1%80%E4%BD%9C%E7%94%A8%E5%9F%9F" tabindex="-1" id="全局作用域">全局作用域</h4>
<p>所有的客户端所有的连接都有效：需要使用全局符号来定义</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span> 变量名 <span class="hljs-operator">=</span> 值;<br><span class="hljs-keyword">set</span> @<span class="hljs-variable">@global</span>.变量名 <span class="hljs-operator">=</span> 值;<br></code></pre></td></tr></table></figure>
<p>通常，在 SQL 编程的时候，不会使用自定义变量来控制全局。一般都是定义会话变量或者在结构中使用局部变量来解决问题。</p>
<h3 id="4.2-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E2%80%94%E2%80%94%E6%A6%82%E5%BF%B5" tabindex="-1" id="4-2-存储过程——概念">4.2 存储过程——概念</h3>
<h4 id="%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E6%A6%82%E5%BF%B5" tabindex="-1" id="存储过程概念">存储过程概念</h4>
<p>存储过程（Stored Procedure）是在大型数据库系统中，一组为了完成特定功能的 SQL 语句集，存储在数据库中，经过第一次编译后再次调用不需要再次编译（效率比较高），用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行它。存储过程是数据库中的一个重要对象（针对 SQL 编程而言）。</p>
<p>存储过程：简称过程</p>
<h4 id="%E4%B8%8E%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB" tabindex="-1" id="与函数的区别">与函数的区别</h4>
<p>相同点</p>
<ul>
<li>存储过程和函数目的都是为了可重复地执行操作数据库的 SQL 语句的集合。</li>
<li>存储过程函数都是一次编译，后续执行。</li>
</ul>
<p>不同点</p>
<ul>
<li>标识符不同。函数的标识符为 FUNCTION，过程为：PROCEDURE。</li>
<li>函数中有返回值，且必须返回，而过程没有返回值。</li>
<li>过程无返回值类型，不能将结果直接赋值给变量；函数有返回值类型，调用时，除在 select
中，必须将返回值赋给变量。</li>
<li>函数可以在 select 语句中直接使用，而过程不能。</li>
</ul>
<h3 id="4.3-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E2%80%94%E2%80%94%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" tabindex="-1" id="4-3-存储过程——基本操作">4.3 存储过程——基本操作</h3>
<h4 id="%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B" tabindex="-1" id="创建过程">创建过程</h4>
<p>基本语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> 过程名字([参数列表])<br><span class="hljs-keyword">begin</span><br>	过程体<br><span class="hljs-keyword">end</span><br>结束符<br></code></pre></td></tr></table></figure>
<p>如果过程体中只有一条指令，那么可以省略 <code>begin</code> 和 <code>end</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> my_pro1()<br>	<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> my_student;<br></code></pre></td></tr></table></figure>
<p>过程基本上也可以完成函数对应的所有功能。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter $$<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> my_pro2()<br><span class="hljs-keyword">begin</span><br>	<span class="hljs-keyword">declare</span> i <span class="hljs-type">int</span> <span class="hljs-keyword">default</span> <span class="hljs-number">1</span>;<br>	<span class="hljs-keyword">set</span> <span class="hljs-variable">@sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>	while i <span class="hljs-operator">&lt;=</span> <span class="hljs-number">100</span> do<br>		<span class="hljs-keyword">set</span> <span class="hljs-variable">@sum</span> <span class="hljs-operator">=</span> <span class="hljs-variable">@sum</span> <span class="hljs-operator">+</span> i;<br>		<span class="hljs-keyword">set</span> i <span class="hljs-operator">=</span> i <span class="hljs-operator">+</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">end</span> while;<br><span class="hljs-keyword">end</span><br>$$<br>delimiter ;<br></code></pre></td></tr></table></figure>
<h4 id="%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B" tabindex="-1" id="调用过程">调用过程</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">call</span> my_pro1();<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+---------+----------+----------+---------+------------+--------+<br>| stu_id  | stu_name | class_id | stu_age | stu_height | gender |<br>+---------+----------+----------+---------+------------+--------+<br>| stu0001 | 夏洛     |        1 |      18 |        185 | 男     |<br>| stu0002 | 张四     |        1 |      28 |        165 | 女     |<br>| stu0003 | 张五     |        2 |      22 |        187 | 男     |<br>| stu0004 | 小婷     |        2 |      32 |        189 | 女     |<br>| stu0005 | 小猪     |        1 |      30 |        173 | 女     |<br>| stu0006 | 小狗     |        2 |      18 |        170 | 男     |<br>| stu0007 | 小江     |        1 |      25 |        178 | 女     |<br>+---------+----------+----------+---------+------------+--------+<br>7 rows in set (0.00 sec)<br><br>Query OK, 0 rows affected (0.02 sec)<br></code></pre></td></tr></table></figure>
<h4 id="%E5%88%A0%E9%99%A4%E8%BF%87%E7%A8%8B" tabindex="-1" id="删除过程">删除过程</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">procedure</span> my_pro1;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Query OK, 0 rows affected (0.01 sec)<br></code></pre></td></tr></table></figure>
<h3 id="5.1-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E2%80%94%E2%80%94%E5%BD%A2%E5%8F%82%E7%B1%BB%E5%9E%8B" tabindex="-1" id="5-1-存储过程——形参类型">5.1 存储过程——形参类型</h3>
<p>存储过程也允许提供参数（形参和实参）：存储的参数也和函数一样，需要指定其类型。</p>
<p>但是存储过程对参数还有额外的要求：自己的参数分类</p>
<h4 id="in-1" tabindex="-1" id="In-2">In</h4>
<p>表示参数从外部传入到里面使用（过程内部使用）：可以是直接数据也可以是保存数据的变量</p>
<h4 id="out" tabindex="-1" id="Out">Out</h4>
<p>表示参数是从过程里面把数据保存到变量中，交给外部使用：传入的必须是变量</p>
<p>如果说传入的 out 变量本身在外部有数据，那么在进入过程之后，第一件事就是被清空，设为 NULL</p>
<h4 id="inout" tabindex="-1" id="Inout">Inout</h4>
<p>数据可以从外部传入到过程内部使用，同时内部操作之后，又会将数据返还给外部。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> <span class="hljs-variable">@n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">set</span> <span class="hljs-variable">@n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;<br><span class="hljs-keyword">set</span> <span class="hljs-variable">@n3</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;<br><br>delimiter $$<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> my_pro3(<span class="hljs-keyword">in</span> int_1 <span class="hljs-type">int</span>, <span class="hljs-keyword">out</span> int_2 <span class="hljs-type">int</span>, <span class="hljs-keyword">inout</span> int_3 <span class="hljs-type">int</span>)<br><span class="hljs-keyword">begin</span><br>	<span class="hljs-keyword">select</span> int_1, int_2, int_3;<br>	<span class="hljs-keyword">set</span> int_1 <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>	<span class="hljs-keyword">set</span> int_2 <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>	<span class="hljs-keyword">set</span> int_3 <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;<br>	<br>	<span class="hljs-keyword">select</span> int_1, int_2, int_3;<br>	<span class="hljs-keyword">select</span> <span class="hljs-variable">@n1</span>, <span class="hljs-variable">@n2</span>, <span class="hljs-variable">@n3</span>;<br>	<br>	<span class="hljs-keyword">set</span> <span class="hljs-variable">@n1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;a&#x27;</span>;<br>	<span class="hljs-keyword">set</span> <span class="hljs-variable">@n2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;b&#x27;</span>;<br>	<span class="hljs-keyword">set</span> <span class="hljs-variable">@n3</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;c&#x27;</span>;<br>	<br>	<span class="hljs-keyword">select</span> <span class="hljs-variable">@n1</span>, <span class="hljs-variable">@n2</span>, <span class="hljs-variable">@n3</span>;<br><span class="hljs-keyword">end</span><br>$$<br>delimiter ;<br></code></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CALL</span> my_pro3(<span class="hljs-variable">@n1</span>, <span class="hljs-variable">@n2</span>, <span class="hljs-variable">@n3</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">+-------+-------+-------+<br>| int_1 | int_2 | int_3 |<br>+-------+-------+-------+<br>|     1 |  NULL |     3 |<br>+-------+-------+-------+<br>1 row in set (0.00 sec)<br><br>+-------+-------+-------+<br>| int_1 | int_2 | int_3 |<br>+-------+-------+-------+<br>|    10 |   100 |  1000 |<br>+-------+-------+-------+<br>1 row in set (0.01 sec)<br><br>+------+------+------+<br>| @n1  | @n2  | @n3  |<br>+------+------+------+<br>|    1 |    2 |    3 |<br>+------+------+------+<br>1 row in set (0.01 sec)<br><br>+------+------+------+<br>| @n1  | @n2  | @n3  |<br>+------+------+------+<br>| a    | b    | c    |<br>+------+------+------+<br>1 row in set (0.01 sec)<br><br>Query OK, 0 rows affected (0.01 sec)<br></code></pre></td></tr></table></figure>
<h3 id="5.2-%E8%A7%A6%E5%8F%91%E5%99%A8%E2%80%94%E2%80%94%E6%A6%82%E5%BF%B5" tabindex="-1" id="5-2-触发器——概念">5.2 触发器——概念</h3>
<h4 id="%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-1" tabindex="-1" id="基本概念-2">基本概念</h4>
<p>触发器是一种特殊类型的存储过程，它不同于我们前面介绍过的存储过程。触发器主要是通过事件进行触发而被执行的，而存储过程可以通过存储过程名字而被直接调用。</p>
<h4 id="%E4%BD%9C%E7%94%A8" tabindex="-1" id="作用">作用</h4>
<ol>
<li>可在写入数据表前，强制检验或转换数据。（保证数据安全）</li>
<li>触发器发生错误时，异动的结果会被撤销。（如果触发器执行错误，那么前面用户已经执行成功的操作也会被撤销，事务安全）</li>
<li>部分数据库管理系统可以针对数据定义语言（DDL）使用触发器，称为 DDL 触发器</li>
<li>可依照特定的情况，替换异动的指令（INSTEAD OF）（MySQL 不支持）。</li>
</ol>
<h4 id="%E4%BC%98%E7%82%B9" tabindex="-1" id="优点">优点</h4>
<ol>
<li>触发器可通过数据库中的相关表实现级联更改。（如果某张表的数据改变，可以利用触发器来实现其他表的无痕操作[用户不知道]）</li>
<li>保证数据安全：进行安全校验</li>
</ol>
<h4 id="%E7%BC%BA%E7%82%B9" tabindex="-1" id="缺点">缺点</h4>
<ol>
<li>对触发器过分的依赖，势必影响数据库的结构，同时增加了维护的复杂程度。</li>
<li>造成数据在程序层面不可控。（PHP 层）</li>
</ol>
<h4 id="%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-2" tabindex="-1" id="基本语法-3">基本语法</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> 触发器名字 触发时期 触发事件 <span class="hljs-keyword">on</span> 表 foreach <span class="hljs-type">row</span><br><span class="hljs-keyword">begin</span><br><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure>
<p>触发对象：<code>on 表 for each row</code>，触发器绑定实质是表中的所有行，因此当每一行发生指定的改变的时候，就会触发触发器。</p>
<h4 id="%E8%A7%A6%E5%8F%91%E6%97%B6%E6%9C%BA" tabindex="-1" id="触发时机">触发时机</h4>
<p>触发时机：每张表中对应的行都会有不同的状态，当 SQL 指令发生的时候，都会令行中数据发生改变，每一行总会有两种状态：数据操作前和操作后，</p>
<p>Before：在表中数据发生改变前的状态
After：在表中数据已经发生改变后的状态。</p>
<h4 id="%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6" tabindex="-1" id="触发事件">触发事件</h4>
<p>触发事件：MySQL 中触发器针对的目标是数据发生改变，对应的操作只有写操作（增删改）</p>
<ul>
<li>Insert：插入操作</li>
<li>Update：更新操作</li>
<li>Delete：删除操作</li>
</ul>
<h4 id="%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-1" tabindex="-1" id="注意事项-2">注意事项</h4>
<p>一张表中，每一个触发时机绑定的触发事件对应的触发器类型只能有一个：一张表中只能有一个对应 after insert 触发器</p>
<p>因此，一张表中最多的触发器只能有 6 个：</p>
<ul>
<li><code>before insert</code></li>
<li><code>before update</code></li>
<li><code>before delete</code></li>
<li><code>after insert</code></li>
<li><code>after update</code></li>
<li><code>after delete</code></li>
</ul>
<h3 id="6.1-%E8%A7%A6%E5%8F%91%E5%99%A8%E2%80%94%E2%80%94%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" tabindex="-1" id="6-1-触发器——基本操作">6.1 触发器——基本操作</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_goods(<br>	id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>    inv <span class="hljs-type">int</span><br>)charset utf8;<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_orders(<br>	id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment,<br>    goods_id <span class="hljs-type">int</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>    goods_num <span class="hljs-type">int</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span><br>)charset utf8;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> my_goods <span class="hljs-keyword">values</span>(<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;手机&#x27;</span>, <span class="hljs-number">1000</span>), (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;电脑&#x27;</span>, <span class="hljs-number">500</span>), (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;游戏机&#x27;</span>, <span class="hljs-number">100</span>);<br><br><span class="hljs-comment">-- 创建触发器：如果订单表发生数据插入，对应的商品就应该减少库存</span><br>delimiter $$<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> after_insert_order_t after <span class="hljs-keyword">insert</span> <span class="hljs-keyword">on</span> my_orders <span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><br>	<span class="hljs-keyword">update</span> my_goods <span class="hljs-keyword">set</span> inv <span class="hljs-operator">=</span> inv <span class="hljs-operator">-</span> <span class="hljs-number">1</span> <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">end</span><br>$$<br>delimiter ;<br></code></pre></td></tr></table></figure>
<h3 id="6.2-%E8%A7%A6%E5%8F%91%E5%99%A8%E2%80%94%E2%80%94%E5%BA%94%E7%94%A8" tabindex="-1" id="6-2-触发器——应用">6.2 触发器——应用</h3>
<h4 id="%E8%AE%B0%E5%BD%95%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%9Anew%E3%80%81old" tabindex="-1" id="记录关键字：new、old">记录关键字：new、old</h4>
<p>触发器针对的是数据表中的每条记录（每行），每行在数据操作前后都有一个对应的状态触发器在执行之前就将对应的状态获取到了，将没有操作之前的状态（数据）都保存到 old 关键字中，而操作后的状态都放到 new 中。</p>
<p>在触发器中，可以通过 old 和 new 来获取绑定表中对应的记录数据。</p>
<p>基本语法：<code>关键字.字段名</code></p>
<p>Old 和 new 并不是所有触发器都有：</p>
<p>Insert：插入前全为空，没有 old</p>
<p>Delete：清空数据，没有 new</p>

            </article>
            
	<div class="rightside">
	
		<div class="rightside-button" id="js-aside">
			<span>
				<img no-lazy src="/images/icon/aside.png" class="rightside-button-icon" alt="Icon">
			</span>
		</div>
		<script>
			$("#js-aside").click(function () {
				onShowAsideButton();
			});
		</script>
	
	<div class="rightside-button" id="js-toggle_theme">
		<span>
			<img no-lazy src="/images/icon/toggle_theme.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	
<script src="/js/plugins/goto_position.js"></script>

	
	<div class="rightside-button" id="js-go_top">
		<span>
			<img no-lazy src="/images/icon/go_top.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>
	<div class="rightside-button" id="js-go_bottom">
		<span>
			<img no-lazy src="/images/icon/go_bottom.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	<script>
		setToggleThemeButtonListener();
	</script>
	<script>
		$('#js-go_top')
		.gotoPosition( {
			speed: 300,
			target: 'top',
		} );
		$('#js-go_bottom')
		.gotoPosition( {
			speed: 300,
			target: 'bottom',
		} );
	</script>
</div>


<div class="post-bottom">
    
        <div class="post-paging">     
            <div class="post-paging-last">
                
                    <a href="/posts/Al-LeetCode/">
                        上一篇：Al-LeetCode
                    </a>
                
            </div>
            <div class="post-paging-next">
                
                    <a href="/posts/Web-Vue3-%E5%B0%8F%E5%85%94%E9%B2%9C%E5%84%BF/">
                        下一篇：Web-Vue3-小兔鲜儿
                    </a>
                
            </div>
        </div>
    
    
    
        
            <div class="giscus comments"></div>
            <script>
                var scriptElement = document.createElement('script');
                scriptElement.src = 'https://giscus.app/client.js';
                scriptElement.setAttribute('data-repo', 'GZ-Metal-Cell/GZ-Metal-Cell.github.io');
                scriptElement.setAttribute('data-repo-id', 'R_kgDOIHLEOQ');
                scriptElement.setAttribute('data-category', 'Announcements');
                scriptElement.setAttribute('data-category-id', 'DIC_kwDOIHLEOc4CcVwP');
                scriptElement.setAttribute('data-mapping', 'title');
                scriptElement.setAttribute('data-strict', '1');
                scriptElement.setAttribute('data-reactions-enabled', '');
                scriptElement.setAttribute('data-emit-metadata', '0');
                scriptElement.setAttribute('data-input-position', 'bottom');
                scriptElement.setAttribute('data-theme', localStorage.getItem('theme') === 'light' ? 'light' : 'dark_high_contrast');
                scriptElement.setAttribute('data-lang', 'zh-CN');
                
                scriptElement.setAttribute('crossorigin', 'anonymous');
                scriptElement.async = true;
                document.head.appendChild(scriptElement);
            </script>
        
    
</div>
        </div>
    </main>
    
        <aside class="main-aside">
    
<script src="/js/widgets/aside.js"></script>

    <script>
        showAside();
    </script>

    <div class="aside-top">
        <div class="aside-top-about aside-card">
            <a href="/about" class="aside-top-about-portrait">
                <img no-lazy src="/about/portrait.png" alt="Q">
            </a>
            <div class="aside-top-about-info">
                <span class="author"> Zi-Zi</span>
                <span class="description">不以物喜，不以己悲。</span>
            </div>              
            <div class="aside-top-about-site">
                <a href="/categories" class="aside-top-about-site-item">
                    <span class="title">类别</span>
                    <span class="count">5</span>
                </a>
                <a href="/tags" class="aside-top-about-site-item">
                    <span class="title">标签</span>
                    <span class="count">120</span>
                </a>
                <a href="/archives" class="aside-top-about-site-item">
                    <span class="title">归档</span>
                    <span class="count">434</span>
                </a>
            </div>
            <div class="aside-top-about-contact">
                
                    
                        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
                            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
                            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
                            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
                            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
                        </a>
                    
                
            </div>
        </div> 

        
    </div>

    <div class="aside-bottom">
        
            <script>
                
                    const tocCollapsed = true;
                
                
                    const tocDepth = 6;
                
                var headerString = '';
                for (let i = 1; i <= tocDepth; i++) {
                    if (i === 1) {
                        headerString += 'h1';
                    } else {
                        headerString += ', h' + i;
                    }
                }
                hbeToc();
            </script>
            <div class="aside-bottom-toc aside-card">
                <div class="aside-bottom-toc-title">
                    <h1>目录</h1>
                    <span class="toc-percentage"></span>
                </div>
                <ol class="aside-bottom-toc-content"></ol>
            </div>
        
    </div>
</aside>
    
</div>
		<footer>
	<div class="content">
		
			<span>©2022-2025&nbsp;By&nbsp;<a href="/about">Zi-Zi</a>.</span>
		
		<span><a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> theme by <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell/hexo-theme-quieter">Quieter</a>.</span>
		
			<span style="display: flex;">
				<img no-lazy alt="icp" src="/images/icp_icon.png" style="width: 16px; height: 16px;">
				<a href="https://icp.gov.moe/?keyword=20241647" target="_blank">萌 ICP 备 20241647 号</a>
			</span>
		
	</div>

	
<script src="/js/plugins/ref.js"></script>

	
<script src="/js/plugins/highlight_tools.js"></script>

	<script>
		const  COPY_ICON = "/images/icon/copy.png";
		const CLOSE_CODE_BLOCK_ICON = "/images/icon/close_code_block.png";
		const HIGHLIGHT_SHRINK = "";
		const HIGHLIGHT_HEIGHT_LIMIT = "";
	</script>

	
	
	<!-- Analytics -->

    
        <!-- Busuanzi Analytics -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
        <!-- Baidu Analytics -->
        <script defer>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?e57cf62289f84322ebff116e8b3d343e";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
    


	

	
		
			
				<link rel="stylesheet" href="/css/plugins/katex/katex.min.css">
				<script src="/js/plugins/copy-tex.js"></script>
			
		
	

    
		
<link rel="stylesheet" href="/css/plugins/textIndent.css">

		
<script src="/js/plugins/textIndent.js"></script>

	

	
	
	
		<script>
			if (typeof init === 'function') {
				init();
			}
		</script>
	

	
		
	

	

	<!--
		
<script src="/js/plugins/jquery.pjax.min.js"></script>

		<script>
			$(document).pjax('a[target!=_blank]', 'main', {
				fragment: 'main',
				timeout: 8000
			});

			$(document).on('pjax:complete', function() {
			});
		</script> 
	-->
	<script>
		console.log('\n %c Hexo-Quieter 主题 %c https://github.com/GZ-Metal-Cell/hexo-theme-quieter \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
	</script>
</footer>
	</body>

	<!-- Hexo-Quieter 主题  https://github.com/GZ-Metal-Cell/hexo-theme-quieter -->
</html>

