<!DOCTYPE html>
<html lang=zh-CN data-theme="light">
	
<script src="/js/plugins/toggleTheme.js"></script>

	<script>
		setTheme();
	</script>
	<head>
		
<title>Web-Vue3-小兔鲜儿 | Zi-Zi's Journey</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/images/icon/favicon.ico">
<link href="/css/plugins/print.css" media="print" rel="stylesheet" />

<link rel="stylesheet" href="/css/index.css">



<meta name="keywords" content="前端,Vue,">
<meta name="description" content="学习自黑马程序员。">



<script src="/js/plugins/jquery.min.js"></script>


<script src="/js/plugins/hljs.min.js"></script>


<script src="/js/plugins/init.js"></script>


<script src="/js/plugins/hide.js"></script>


<script src="/js/plugins/tabs.js"></script>



    



    
<script src="/js/plugins/alert-title.js"></script>

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-base.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-dark-class.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-light.css">




    
        
            <link rel="stylesheet" type="text/css" href="/css/subfields.css">
        
            <link href="/css/fontawesome/css/all.min.css" rel="stylesheet">
        
            <link rel="stylesheet" type="text/css" href="/css/codeFileTools.css">
        
            <link rel="stylesheet" href="/css/jsTreeList.css"/>
        
            <link rel="stylesheet" href="/js/jsTree/dist/themes/default/style.min.css"/>
        
            <link rel="stylesheet" href="/css/codeFileTree.css"/>
        
            <script src="/js/jsTree/dist/jstree.min.js"></script>
        
            <script src="/js/highlightjs.js"></script>
        
            <script src="/js/highlightjs-line-numbers.min.js"></script>
        
            <script src="/js/codeFile.js"></script>
        
            <script src="/js/codeFileTools.js"></script>
        
            <script src="/js/codeFileTree.js"></script>
        
    



    

	<meta name="generator" content="Hexo 6.1.0"></head>

	<body>
		<header class="sticky-header">
	<nav>
		<div class="nav-left">
			<a href="/" class="logo">
				<img no-lazy src="/images/headers_icon/logo.webp" alt="Quieter">
			</a>
			<ul class="breadcrumb" id="breadcrumb"></ul>
		</div>
		<div class="nav-right">
			<ul>
				
					<li>
						<a href="/">
						  主页
						</a>
					</li>
				
					<li>
						<a href="/categories">
						  类别
						</a>
					</li>
				
					<li>
						<a href="/tags">
						  标签
						</a>
					</li>
				
					<li>
						<a href="/archives">
						  归档
						</a>
					</li>
				
					<li>
						<a href="/galleries">
						  相册
						</a>
					</li>
				
					<li>
						<a href="/links">
						  链接
						</a>
					</li>
				
					<li>
						<a href="/about">
						  关于
						</a>
					</li>
								  
			</ul>
		</div>
		<div class="nav-right-close">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
				<path fill="none" d="M0 0h24v24H0z" />
				<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
			</svg>
		</div>

		<div class="sidebar">
    <div class="topo">
        <p>Zi-Zi's Journey</p>
    </div>
    <ul>
        
        <li>
            <a href="/">
                主页
            </a>
        </li>
        
        <li>
            <a href="/categories">
                类别
            </a>
        </li>
        
        <li>
            <a href="/tags">
                标签
            </a>
        </li>
        
        <li>
            <a href="/archives">
                归档
            </a>
        </li>
        
        <li>
            <a href="/galleries">
                相册
            </a>
        </li>
        
        <li>
            <a href="/links">
                链接
            </a>
        </li>
        
        <li>
            <a href="/about">
                关于
            </a>
        </li>
        
    </ul>
    <div class="sidebar-footer">
        
        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
        </a>
        
    </div>
</div>
<div class='shelter'>
    <script>
        $(function() {
            $('.nav-right-close > svg').click(function() {
                $('.sidebar').animate({
                    right: "0"
                }, 500);
                $('.shelter').fadeIn("slow");
            
                var element = $('.topo');
                element.addClass('custom-style');
            
                var links = null;
                if ("") {
                    links = "".split(',');
                } else {
                    links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
                }
            
                var randomLink = links[Math.floor(Math.random() * links.length)];
                element.css('background-image', "url('" + randomLink + "')");
            });
          
            $('.shelter').click(function(e) {
                $('.sidebar').animate({
                    right: "-100%"
                }, 500);
                $('.shelter').fadeOut("slow");
            });
        });      
    </script>
</div>
	</nav>

	
		<div class="header-background"></div>
	

	<script>
		const name = 'post';
		const ul = document.querySelectorAll('.nav-right ul')[0];
		const lis = ul.querySelectorAll('li');

		if (name == 'home') {
			lis[0].classList.add('select');
		} else {
			for (let i = 0; i < lis.length; i++) {
				const li = lis[i];
				const a = li.querySelector('a');
				if (name === a.href.split('/')[3]) {
					li.classList.add('select');
				}
			}
		}
	</script>
	
	<script>
		var element = document.querySelector('.header-background');
		if(element) {
			element.classList.add('custom-style');
			var links = null;
			if("")
			{
				links = "".split(',');
			} else
			{
				links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
			}
			var randomLink = links[Math.floor(Math.random() * links.length)];
			element.style.backgroundImage = "url('" + randomLink + "')";
		}
	</script>

	
<script src="/js/plugins/breadcrumb.js"></script>

	<script>
		var menus_title = [];
		
			menus_title.push({home: '主页'});
		
			menus_title.push({categories: '类别'});
		
			menus_title.push({tags: '标签'});
		
			menus_title.push({archives: '归档'});
		
			menus_title.push({galleries: '相册'});
		
			menus_title.push({links: '链接'});
		
			menus_title.push({about: '关于'});
		
		
			
				postsBreadcrumb(
					document.getElementById('breadcrumb'),
					"类别",
					"/categories",
					"学习",
					"/categories/学习",
					1
				);
			
		
	</script>
</header>

<div class="main-wrapper">
    <main class="post">
        <header class="main-header">
	
		
			
				
<link rel="stylesheet" href="/css/plugins/fancybox.css">

				
<script src="/js/plugins/fancybox.umd.js"></script>

				
<script src="/js/plugins/fancybox.js"></script>

			
			<div class="post-header-background-content">
				<ul class="post-header-tag">
					
						
							<li><a href="/tags/前端"><span>前端</span></a></li>
						
							<li><a href="/tags/Vue"><span>Vue</span></a></li>
						
					
				</ul>
				
				<h1>Web-Vue3-小兔鲜儿</h1>
		
				
					<div class="post-header-desc">
						<svg t="1714702231661" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="1154" xmlns:xlink="http://www.w3.org/1999/xlink"
						width="20" height="20">
						<path
							d="M778.24 117.76A46.08 46.08 0 0 1 824.32 163.84v430.08c0 8.4992-4.13696 16.01536-10.50624 20.6848l-0.24576 0.2048L587.5712 846.09024a35.84 35.84 0 0 1-61.48096-25.06752v-220.9792a46.08 46.08 0 0 1 46.08-46.08l200.94976-0.02048V168.96h-522.24v686.08H389.12c13.25056 0 24.1664 10.07616 25.47712 22.97856l0.12288 2.62144c0 14.1312-11.4688 25.6-25.6 25.6h-143.36A46.08 46.08 0 0 1 199.68 860.16V163.84A46.08 46.08 0 0 1 245.76 117.76h532.48z m-26.78784 487.38304h-174.16192v178.176l174.16192-178.176z m-45.19936-169.94304a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z m0-122.88a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z"
							fill="#ffffff" p-id="1155"></path>
						</svg>
						<p>学习自黑马程序员。</p>
					</div>
				
		
				<div class="post-header-info">
					<svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
					xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
						<path
							d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
							p-id="2902" fill="#ffffff"></path>
					</svg>
					<div class="post-header-info-author">
						<a href="/about">Zi-Zi</a>
					</div>
					
						<div class="post-header-info-categories">
							
								<a href="/categories/学习">学习</a>
							
						</div>
					
					<time>2025/01/12 08:58:00</time>
				</div>
		
				
					<div class="post-header-stat">
						<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
						viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve" width="20" height="20">
							<path fill="#FFFFFF" d="M187.2,165.6c0,2.6-2.1,4.7-4.7,4.7H17.5c-2.6,0-4.7-2.1-4.7-4.7s2.1-4.7,4.7-4.7h165.1
								C185.2,160.9,187.2,163,187.2,165.6z"/>
							<path fill="#FFFFFF" d="M17.5,29.7c2.6,0,4.7,2.1,4.7,4.7v131.2c0,2.6-2.1,4.7-4.7,4.7s-4.7-2.1-4.7-4.7V34.4
								C12.8,31.8,14.9,29.7,17.5,29.7z M77.9,91.5c1.8,1.8,1.8,4.8,0,6.6l-39.8,39.8c-1.9,1.8-4.9,1.7-6.6-0.2c-1.7-1.8-1.7-4.6,0-6.4
								l39.8-39.8C73.1,89.6,76,89.6,77.9,91.5z M169.9,70.2c1.6,2.1,1.1,5-0.9,6.5c0,0,0,0,0,0l-64.2,48.2c-2.1,1.5-5,1.1-6.6-0.9
								c-1.6-2.1-1.1-5,0.9-6.5c0,0,0,0,0,0l64.2-48.2C165.4,67.7,168.3,68.1,169.9,70.2L169.9,70.2z"/>
							<path fill="#FFFFFF" d="M104.6,124.5c-1.8,1.8-4.8,1.8-6.6,0L71.6,98.1c-1.8-1.8-1.8-4.8,0-6.6c1.8-1.8,4.8-1.8,6.6,0l26.3,26.3
								C106.4,119.6,106.4,122.6,104.6,124.5C104.6,124.4,104.6,124.4,104.6,124.5z"/>
						</svg>
		
						
							
<script src="/js/plugins/wordCount.js"></script>

							<p class="post-count">文字数：---</p>
						
		
						
							<p id="busuanzi_container_page_pv" style='display:none;'>阅读数：<span id="busuanzi_value_page_pv"></span></p>
						
					</div>
				
			</div>
		
	
</header>
        <div class="post-content article-container">
            <article class="post-content-info">
                <h1 id="%E8%B5%84%E6%BA%90" tabindex="-1">资源</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Ac411K7EQ/">黑马程序员前端Vue3小兔鲜电商项目实战，vue3全家桶从入门到实战电商项目一套通关_哔哩哔哩_bilibili</a></li>
<li><a target="_blank" rel="noopener" href="https://apifox.cn/apidoc/shared-fa9274ac-362e-4905-806b-6135df6aa90e/api-24942683">登录-用户名密码 - 黑马前端</a></li>
</ul>
<h1 id="%E6%AD%A3%E6%96%87" tabindex="-1">正文</h1>
<h2 id="day01-vue3-%E5%85%A5%E9%97%A8" tabindex="-1" id="day01-Vue3-入门">day01 Vue3 入门</h2>
<h3 id="02.-%E8%AE%A4%E8%AF%86-vue3" tabindex="-1" id="02-认识-Vue3">02. 认识 Vue3</h3>
<p>​	用 Vue2 写一个点击按钮自增：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;button @click=&quot;addCount&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>    data() &#123;<br>        return &#123;<br>            count: 0<br>        &#125;<br>    &#125;,<br>    methods: &#123;<br>        addCount() &#123;<br>            this.count++<br>        &#125;<br>    &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>​	用 Vue3 写一个点击按钮自增：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;button @click=&quot;addCount&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>    import &#123; ref &#125; from &#x27;vue&#x27;;<br>    const count = ref(0);<br>    const addCount = () =&gt; &#123; count.value++; &#125;;<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure>
<p>​	Vue3 与 Vue2 相比：代码量变少了，分散式维护转为集中式维护</p>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>Vue3</strong></p>
<ul>
<li>更容易维护
<ul>
<li>组合式 API</li>
<li>更好的 TypeScript 支持</li>
</ul>
</li>
<li>更快的速度
<ul>
<li>重写 diff 算法</li>
<li>模版编译优化</li>
<li>更高效的组件初始化</li>
</ul>
</li>
<li>更小的体积
<ul>
<li>良好的 TreeShaking</li>
<li>按需引入</li>
</ul>
</li>
<li>更优的数据响应式
<ul>
<li>Proxy</li>
</ul>
</li>
</ul>
</div>
<h3 id="03.-%E4%BD%BF%E7%94%A8-create-vue-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE" tabindex="-1" id="03-使用-create-vue-创建项目">03. 使用 create-vue 创建项目</h3>
<p>​	Vue3 使用了新的脚手架工具：</p>
<blockquote>
<p>create-vue 是 Vue <strong>官方新的脚手架工具</strong>，底层切换到了 <strong>vite（下一代前端工具链）</strong>，为开发提供极速响应。</p>
<p><img src="01/01.webp" alt="webp"></p>
</blockquote>
<p>​	执行命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm init vue@latest<br></code></pre></td></tr></table></figure>
<p><img src="01/02.webp" alt="webp"></p>
<p>​	安装之：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd vue3-project<br>npm install<br></code></pre></td></tr></table></figure>
<p>​	运行之：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm run dev<br></code></pre></td></tr></table></figure>
<p><img src="01/03.webp" alt="webp"></p>
<h3 id="04.-%E7%86%9F%E6%82%89%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E5%92%8C%E5%85%B3%E9%94%AE%E6%96%87%E4%BB%B6" tabindex="-1" id="04-熟悉项目目录和关键文件">04. 熟悉项目目录和关键文件</h3>
<p>关键文件：</p>
<ol>
<li><code>vite.config.js</code> - 项目的配置文件 <strong>基于 vite 的配置</strong></li>
<li><code>package.json</code> - 项目包文件 <strong>核心依赖项变成了 <code>Vue3.x</code> 和 <code>vite</code></strong></li>
<li><code>main.js</code>-入口文件 <strong><code>createApp</code> 函数创建应用实例</strong></li>
<li><code>app.vue</code> - 根组件 <strong>SFC 单文件组件 script-template-style</strong>
<ul>
<li>变化一：脚本 script 和模板 template 顺序调整</li>
<li>变化二：模板 template 不再要求唯一根元素</li>
<li>变化三：脚本 script 添加 setup 标识支持组合式 API</li>
</ul>
</li>
<li><code>index.html</code> - 单页入口 <strong>提供 id 为 app 的挂载点</strong></li>
</ol>
<h3 id="05.-%E7%BB%84%E5%90%88%E5%BC%8F-api-%E5%85%A5%E5%8F%A3-setup" tabindex="-1" id="05-组合式-API-入口-setup">05. 组合式 API 入口-setup</h3>
<p>​	如此编写代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	const message = &#x27;this is a message&#x27;;<br>	const logMessage = () =&gt; &#123;<br>		console.log(message);<br>	&#125;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&#123;&#123; message &#125;&#125;<br>	&lt;button @click=&quot;logMessage&quot;&gt;Log Message&lt;/button&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p><img src="01/04.webp" alt="webp"></p>
<p>​	使用 setup 这一语法糖能够大大减少代码量：</p>
<p><img src="01/05.webp" alt="webp"></p>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<ul>
<li>
<p><code>setup</code> 选项的执行时机？</p>
<ul>
<li>
<p><code>beforeCreate</code> 钩子之前 自动执行</p>
<p><img src="01/06.webp" alt="webp"></p>
</li>
</ul>
</li>
<li>
<p><code>setup</code>  写代码的特点是什么</p>
<ul>
<li>定义数据+函数 然后以对象方式 <code>return</code></li>
</ul>
</li>
<li>
<p><code>&lt;script setup&gt;</code> 解决了什么问题？</p>
<ul>
<li>经过语法糖的封装更简单的使用组合式 API</li>
</ul>
</li>
<li>
<p><code>setup</code> 中的 <code>this</code> 还指向组件实例吗？指向 <code>undefined</code></p>
</li>
</ul>
</div>
<h3 id="06.-%E7%BB%84%E5%90%88%E5%BC%8F-api-reactive-%E5%92%8C-ref-%E5%87%BD%E6%95%B0" tabindex="-1" id="06-组合式-API-reactive-和-ref-函数">06. 组合式 API-reactive 和 ref 函数</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>reactive()</strong></p>
<p><strong>作用：<strong>接受</strong>对象类型数据的参数传入</strong>并返回一个<strong>响应式的对象</strong></p>
<p><strong>核心步骤：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	// 导入<br>    import &#123; reactive &#125; from &#x27;vue&#x27;;<br>    // 执行函数 传入函数 变量接收<br>    const state = reactive(对象类型数据);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<ol>
<li>从 vue 包中<strong>导入 reactive 函数</strong></li>
<li>在 <code>&lt;script setup&gt;</code> 中<strong>执行 reactive 函数</strong>并传入<strong>类型为对象</strong>的初始值，并使用变量接收返回值</li>
</ol>
</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import &#123; reactive &#125; from &#x27;vue&#x27;;<br>	const state = reactive(&#123;<br>		count: 0<br>	&#125;);<br><br>	const setCount = () =&gt; &#123;<br>		state.count++;<br>	&#125;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&lt;button @click=&quot;setCount()&quot;&gt;&#123;&#123; state.count &#125;&#125;&lt;/button&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>ref()</strong></p>
<p><strong>作用：<strong>接收</strong>简单类型或者对象类型的数据</strong>传入并返回一个<strong>响应式的对象</strong></p>
<p><strong>核心步骤：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	// 导入<br>    import &#123; ref &#125; from &#x27;vue&#x27;;<br>    // 执行函数 传入函数 变量接收<br>    const count = ref(对象类型数据);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<ol>
<li>从 vue 包中<strong>导入 ref 函数</strong></li>
<li>在 <code>&lt;script setup&gt;</code> 中<strong>执行 ref 函数</strong>并传入初始值，使用<strong>变量接收</strong> ref 函数的返回值</li>
</ol>
</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import &#123; ref &#125; from &#x27;vue&#x27;;<br>	const count = ref(0);<br><br>	const setCount = () =&gt; &#123;<br>		count.value++;<br>	&#125;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&lt;button @click=&quot;setCount()&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="07.-%E7%BB%84%E5%90%88%E5%BC%8F-api-computed" tabindex="-1" id="07-组合式-API-computed">07. 组合式 API-computed</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>computed 计算属性函数</strong></p>
<p>计算属性基本思想和 Vue2 的完全一致，组合式 API 下的计算属性只是修改了写法</p>
<p>核心步骤：</p>
<ol>
<li><strong>导入</strong> <code>computed</code> 函数</li>
<li><strong>执行函数</strong> 在回调参数中 <strong><code>return</code> 基于响应式数据做计算的值</strong>，用<strong>变量接收</strong></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	// 导入<br>    import &#123; computed &#125; from &#x27;vue&#x27;;<br>    // 执行函数 变量接受 在回调参数中 return 计算值<br>    const computedState = computed(() =&gt; &#123;<br>		return 基于响应式数据做计算之后的值;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import &#123; ref, computed &#125; from &#x27;vue&#x27;;<br>	const list = ref([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);<br><br>	const computedList = computed(() =&gt; &#123;<br>		return list.value.filter((item) =&gt; item &gt; 2);<br>	&#125;)<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&lt;div&gt;<br>		原始响应式数组 - &#123;&#123; list &#125;&#125;<br>		&lt;br&gt;<br>		计算响应式数组 - &#123;&#123; computedList &#125;&#125;<br>	&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">原始响应式数组 - [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ]<br>计算响应式数组 - [ 3, 4, 5, 6, 7, 8, 9, 10 ]<br></code></pre></td></tr></table></figure>
<h3 id="08.-%E7%BB%84%E5%90%88%E5%BC%8F-api-watch-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E5%92%8C%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C" tabindex="-1" id="08-组合式-API-watch-基本使用和立即执行">08. 组合式 API-watch-基本使用和立即执行</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>watch 函数</strong></p>
<p>作用：侦听<strong>一个或者多个数据</strong>的变化，数据变化时执行回调函数</p>
<p>俩个额外参数：</p>
<ol>
<li>immediate（立即执行）</li>
<li>deep（深度侦听）</li>
</ol>
<p><strong>基础使用-侦听单个数据</strong></p>
<ol>
<li><strong>导入 watch</strong> 函数</li>
<li><strong>执行 watch</strong> 函数传入要侦听的响应式数据**（ref 对象）**和回调函数</li>
</ol>
</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import &#123; ref, watch &#125; from &#x27;vue&#x27;;<br>	const count = ref(0);<br>	const setCount = () =&gt; &#123;<br>		count.value++;<br>	&#125;<br>	watch(count, (newVal, oldVal) =&gt; &#123;<br>		console.log(`count 值改变了，新值：$&#123;newVal&#125;, 旧值：$&#123;oldVal&#125;`);<br>	&#125;);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&lt;button @click=&quot;setCount&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>基础使用-侦听多个数据</strong></p>
<p>说明：同时侦听多个响应式数据的变化，<strong>不管哪个数据变化都需要执行回调</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import &#123; ref, watch &#125; from &#x27;vue&#x27;;<br>	const count = ref(0);<br>	const name = ref(&#x27;cp&#x27;);<br>	const setCount = () =&gt; &#123;<br>		count.value++;<br>	&#125;<br>	const setName = () =&gt; &#123;<br>		name.value = &#x27;pc&#x27;;<br>	&#125;<br>	watch([count, name], ([newCount, newName], [oldCount, oldName]) =&gt; &#123;<br>		console.log(`count: $&#123;newCount&#125;, name: $&#123;newName&#125;, oldCount: $&#123;oldCount&#125;, oldName: $&#123;oldName&#125;`);<br>	&#125;);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&lt;button @click=&quot;setCount&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;<br>	&lt;button @click=&quot;setName&quot;&gt;&#123;&#123; name &#125;&#125;&lt;/button&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</div>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>immediate</strong></p>
<p>说明：在侦听器创建时<strong>立即触发回调</strong>，响应式数据变化之后继续执行回调</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import &#123; ref, watch &#125; from &#x27;vue&#x27;;<br>	const count = ref(0);<br>	watch(count, (newVal, oldVal) =&gt; &#123;<br>		console.log(`count 值改变了，新值：$&#123;newVal&#125;, 旧值：$&#123;oldVal&#125;`);<br>	&#125;, &#123; immediate: true &#125;);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&lt;div&gt;<br>		原始响应式数组 - &#123;&#123; list &#125;&#125;<br>		&lt;br&gt;<br>		计算响应式数组 - &#123;&#123; computedList &#125;&#125;<br>	&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">count 值改变了，新值：0, 旧值：undefined<br></code></pre></td></tr></table></figure>
</div>
<h3 id="09.-%E7%BB%84%E5%90%88%E5%BC%8F-api-watch-%E6%B7%B1%E5%BA%A6%E4%BE%A6%E5%90%AC%E5%92%8C%E7%B2%BE%E7%A1%AE%E4%BE%A6%E5%90%AC" tabindex="-1" id="09-组合式-API-watch-深度侦听和精确侦听">09. 组合式 API-watch-深度侦听和精确侦听</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>deep</strong></p>
<p>**默认机制：**通过 watch 监听的 ref <strong>对象</strong>默认是浅层侦听的，直接修改嵌套的对象属性不会触发回调执行，需要开启 <code>deep</code> 选项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import &#123; ref, watch &#125; from &#x27;vue&#x27;;<br>	const state = ref(&#123;count: 0&#125;);<br>	const changeStateByCount = () =&gt; &#123;<br>		state.value.count++;<br>	&#125;<br>	watch(state, () =&gt; &#123;<br>		console.log(&#x27;state changed: &#x27;, state.value.count);<br>	&#125;, &#123; deep: true &#125;)<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&lt;div&gt;<br>		&#123;&#123; state.count &#125;&#125;<br>		&lt;button @click=&quot;changeStateByCount&quot;&gt;+&lt;/button&gt;<br>	&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p><img src="01/08.webp" alt="webp"></p>
</div>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>精确侦听对象的某个属性</strong></p>
<p>需求：在不开启 deep 的前提下，侦听 age 的变化，只有 age 变化时才执行回调</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import &#123; ref, watch &#125; from &#x27;vue&#x27;;<br>	const state = ref(&#123;name: &#x27;chaichai&#x27;, age: 18&#125;);<br>	const changeName = () =&gt; &#123;<br>		state.value.name = &#x27;chaichai-teacher&#x27;;<br>	&#125;<br>	const changeAge = () =&gt; &#123;<br>		state.value.age = 20;<br>	&#125;<br>	watch(() =&gt; state.value.age, () =&gt; &#123; console.log(&#x27;age changed&#x27;); &#125;);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&lt;div&gt;<br>		&lt;div&gt;当前 name -- &#123;&#123; state.name &#125;&#125;&lt;/div&gt;<br>		&lt;div&gt;当前 age -- &#123;&#123; state.age &#125;&#125;&lt;/div&gt;<br>		&lt;div&gt;<br>			&lt;button @click=&quot;changeName&quot;&gt;修改 name&lt;/button&gt;<br>			&lt;button @click=&quot;changeAge&quot;&gt;修改 age&lt;/button&gt;<br>		&lt;/div&gt;<br>	&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</div>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<ol>
<li>
<p>作为 <code>watch</code> 函数的第一个参数，<code>ref</code> 对象需要添加 <code>.value</code> 吗？</p>
<p><strong>不需要，watch 会自动读取</strong></p>
</li>
<li>
<p><code>watch</code> 只能侦听单个数据吗？</p>
<p><strong>单个或者多个</strong></p>
</li>
<li>
<p>不开启 <code>deep</code>，直接修改嵌套属性能触发回调吗？</p>
<p><strong>不能，默认是浅层侦听</strong></p>
</li>
<li>
<p>不开启 <code>deep</code>，想在某个层次比较深的属性变化时执行回调怎么做？</p>
<p><strong>可以把第一个参数写成函数的写法，返回要监听的具体属性</strong></p>
</li>
</ol>
</div>
<h3 id="10.-%E7%BB%84%E5%90%88%E5%BC%8F-api-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0" tabindex="-1" id="10-组合式-API-生命周期函数">10. 组合式 API-生命周期函数</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>Vue3 的生命周期 API（选项式 VS 组合式）</strong></p>
<table>
<thead>
<tr>
<th>选项式 API</th>
<th>组合式 API</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>beforeCreate</code> / <code>created</code></td>
<td><code>setup</code></td>
<td>组件实例初始化阶段的钩子函数，<code>beforeCreate</code> 在组件实例创建之前触发，<code>created</code> 在实例创建后触发。可以在这里初始化数据或调用 API。</td>
</tr>
<tr>
<td><code>beforeMount</code></td>
<td><code>onBeforeMount</code></td>
<td>在虚拟 DOM 初次渲染完成并插入到页面之前触发，适合做一些即将渲染的 DOM 操作。</td>
</tr>
<tr>
<td><code>mounted</code></td>
<td><code>onMounted</code></td>
<td>在组件挂载到页面之后触发，常用于操作已经渲染的 DOM 或者发起网络请求。</td>
</tr>
<tr>
<td><code>beforeUpdate</code></td>
<td><code>onBeforeUpdate</code></td>
<td>在响应式数据更新并即将触发 DOM 更新前调用，可以在这里访问旧的 DOM 状态。</td>
</tr>
<tr>
<td><code>updated</code></td>
<td><code>onUpdated</code></td>
<td>在组件数据更新并重新渲染 DOM 后触发，可用于获取更新后的 DOM 状态。</td>
</tr>
<tr>
<td><code>beforeUnmount</code></td>
<td><code>onBeforeUnmount</code></td>
<td>在组件实例即将销毁之前调用，可用于清理事件监听器或定时器等资源。</td>
</tr>
<tr>
<td><code>unmounted</code></td>
<td><code>onUnmounted</code></td>
<td>在组件实例销毁之后调用，可用于进一步清理或日志记录。</td>
</tr>
</tbody>
</table>
<p><strong>生命周期函数基本使用</strong></p>
<ol>
<li>导入生命周期函数</li>
<li>执行生命周期函数 传入回调</li>
</ol>
<p><strong>执行多次</strong></p>
<p>​	生命周期函数是可以执行多次的，多次执行时传入的回调会在时机成熟时依次执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import &#123; onMounted &#125; from &#x27;vue&#x27;;<br>	onMounted(() =&gt; &#123;<br>		console.log(&#x27;mounted&#x27;, 1);<br>	&#125;);<br>	onMounted(() =&gt; &#123;<br>		console.log(&#x27;mounted&#x27;, 2);<br>	&#125;);<br>	onMounted(() =&gt; &#123;<br>		console.log(&#x27;mounted&#x27;, 3);<br>	&#125;);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&lt;div&gt;<br>	&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">mounted 1<br>mounted 2<br>mounted 3<br></code></pre></td></tr></table></figure>
<ol>
<li>
<p>组合式 API 中生命周期函数的格式是什么？</p>
<p><strong>on + 生命周期名字</strong></p>
</li>
<li>
<p>组合式 API 中可以使用 <code>onCreated</code> 吗？</p>
<p><strong>没有这个钩子函数，直接写到 setup 中</strong></p>
</li>
<li>
<p>组合式 API 中组件卸载完毕时执行哪个函数？</p>
<p><code>onUnmounted</code></p>
</li>
</ol>
</div>
<h3 id="11.-%E7%BB%84%E5%90%88%E5%BC%8F-api-%E4%B8%8B%E7%9A%84%E7%88%B6%E5%AD%90%E9%80%9A%E4%BF%A1-%E7%88%B6%E4%BC%A0%E5%AD%90" tabindex="-1" id="11-组合式-API-下的父子通信-父传子">11. 组合式 API 下的父子通信-父传子</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>组合式 API 下的父传子</strong></p>
<p>基本思想</p>
<ol>
<li>
<p>父组件中给子组件绑定属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import &#123; ref &#125; from &#x27;vue&#x27;;<br>	import SonCom from &#x27;./components/son-com.vue&#x27;;<br>	const count = ref(100);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&lt;div class=&quot;father&quot;&gt;<br>		&lt;h2&gt;父组件 App&lt;/h2&gt;<br>		&lt;SonCom :count=&quot;count&quot; message=&quot;来自父组件的消息&quot;/&gt;<br>	&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>子组件内部通过 <code>props</code> 选项接收</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>const props = defineProps(&#123;<br>    message: String,<br>    count: Number<br>&#125;)<br>&lt;/script&gt;<br>                                                <br>&lt;template&gt;<br>    &lt;div class=&quot;son&quot;&gt;<br>        &lt;h3&gt;子组件&lt;/h3&gt;<br>        &lt;div&gt;<br>            父组件传入的数据 - &#123;&#123; message &#125;&#125; - 父组件传入的计数 - &#123;&#123; count &#125;&#125;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">父组件 App<br>子组件<br>父组件传入的数据 - 来自父组件的消息 - 父组件传入的计数 - 100<br></code></pre></td></tr></table></figure>
</div>
<h3 id="12.-%E7%BB%84%E5%90%88%E5%BC%8F-api-%E4%B8%8B%E7%9A%84%E7%88%B6%E5%AD%90%E9%80%9A%E4%BF%A1-%E5%AD%90%E4%BC%A0%E7%88%B6" tabindex="-1" id="12-组合式-API-下的父子通信-子传父">12. 组合式 API 下的父子通信-子传父</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>组合式 API 下的子传父</strong></p>
<p>基本思想</p>
<ol>
<li>
<p>父组件中给<strong>子组件标签通过@绑定事件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import SonCom from &#x27;./components/son-com.vue&#x27;;<br>	const getMessage = (msg) =&gt; &#123;<br>		console.log(msg);<br>	&#125;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&lt;sonCom @get-message=&quot;getMessage&quot;/&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>子组件内部通过 <strong>$emit 方法触发事件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>const emit = defineEmits([&#x27;get-message&#x27;]);<br>const sendMsg = () =&gt; &#123;<br>    emit(&#x27;get-message&#x27;, &#x27;hello&#x27;);<br>&#125;<br>&lt;/script&gt;<br>                                                <br>&lt;template&gt;<br>    &lt;button @click=&quot;sendMsg&quot;&gt;sendMsg&lt;/button&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
</ol>
</div>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>父传子</strong></p>
<ol>
<li>
<p>父传子的过程中通过什么方式接收props？</p>
<p><code>defineProps(&#123;属性名:类型&#125;)</code></p>
</li>
<li>
<p>setup 语法糖中如何使用父组件传过来的数据？</p>
<p><code>const props=defineProps(&#123;属性名: 类型&#125;)</code></p>
</li>
</ol>
<p><strong>子传父</strong></p>
<ol>
<li>
<p>子传父的过程中通过什么方式得到 emit 方法？</p>
<p><code>defineEmits(['事件名称'])</code></p>
</li>
</ol>
</div>
<h3 id="13.-%E7%BB%84%E5%90%88%E5%BC%8F-api-%E6%A8%A1%E6%9D%BF%E5%BC%95%E7%94%A8" tabindex="-1" id="13-组合式-API-模板引用">13. 组合式 API-模板引用</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>模板引用的概念</strong></p>
<p>​	通过 <strong>ref 标识</strong>获取真实的 <strong>dom 对象或者组件实例对象</strong></p>
<p><strong>如何使用（以获取dom为例 组件同理）</strong></p>
<ol>
<li>调用 ref 函数生成一个 ref 对象</li>
<li>通过 ref 标识绑定 ref 对象到标签</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br>	import SonCom from &#x27;./components/son-com.vue&#x27;;<br><br>	const h1Ref = ref(null);<br>	const comRef = ref(null);<br><br>	onMounted(() =&gt; &#123;<br>		console.log(h1Ref.value);<br>		console.log(comRef.value);<br>	&#125;);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	&lt;h1 ref=&quot;h1Ref&quot;&gt;我是 dom 标签 h1&lt;/h1&gt;<br>	&lt;SonCom ref=&quot;comRef&quot;/&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p><strong>defineExpose()</strong></p>
<p>​	默认情况下在 <code>&lt;script setup&gt;</code> 语法糖下组件内部的属性和方法是不开放给父组件访问的，可以通过 defineExpose 编译宏<strong>指定哪些属性和方法允许访问</strong>。</p>
</div>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<ol>
<li>
<p>获取模板引用的时机是什么？</p>
<p><strong>组件挂载完毕</strong></p>
</li>
<li>
<p>defineExpose 编译宏的作用是什么？</p>
<p><strong>显式暴露组件内部的属性和方法</strong></p>
</li>
</ol>
</div>
<h3 id="14.-%E7%BB%84%E5%90%88%E5%BC%8F-api-provide-%E5%92%8C-inject" tabindex="-1" id="14-组合式-API-provide-和-inject">14. 组合式 API-provide 和 inject</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>作用和场景</strong></p>
<p>​	顶层组件向任意的底层组件<strong>传递数据和方法</strong>，实现<strong>跨层组件通信</strong></p>
<p><img src="01/10.webp" alt="webp"></p>
<p><strong>跨层传递普通数据</strong></p>
<ol>
<li>
<p>顶层组件通过 <strong>provide 函数提供</strong>数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>	import &#123; ref, provide &#125; from &#x27;vue&#x27;;<br>    import RoomMsgItem from &#x27;./room-msg-item.vue&#x27;;<br>    // 组件嵌套关系：<br>    // RoomPage -&gt; RoomMsgItem -&gt; RoomMsgComment<br><br>    // 1. 顶层组件提供数据<br>    provide(&#x27;data-key&#x27;, &#x27;this is room data&#x27;)<br><br>    // 2. 传递响应式数据<br>    const count = ref(0);<br>    provide(&#x27;count-key&#x27;, count)<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div&gt;顶层组件&lt;RoomMsgItem /&gt;&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>中层组件啥也不做</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>    import RoomMsgComment from &#x27;./room-msg-comment.vue&#x27;;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div&gt;中层组件&lt;RoomMsgComment /&gt;&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>底层组件通过 <strong>inject 函数获取</strong>数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>    import &#123; inject &#125; from &#x27;vue&#x27;;<br>                                                <br>    const roomData = inject(&#x27;data-key&#x27;);<br>                                                <br>    const countData = inject(&#x27;count-key&#x27;);<br>&lt;/script&gt;<br>                                                <br>&lt;template&gt;<br>    &lt;div class=&quot;comment&quot;&gt;<br>        底层组件<br>        &lt;div&gt;<br>            来自顶层组件中的数据为：&#123;&#123; roomData &#125;&#125;<br>        &lt;/div&gt;<br>        &lt;div&gt;<br>            来自顶层组件中的响应式数据：&#123;&#123; countData &#125;&#125;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">顶层组件<br>中层组件<br>底层组件<br>来自顶层组件中的数据为：this is room data<br>来自顶层组件中的响应式数据：0<br></code></pre></td></tr></table></figure>
</div>
<h3 id="15-16.-vue3-%E7%BB%BC%E5%90%88%E5%B0%8F%E6%A1%88%E4%BE%8B" tabindex="-1" id="15-16-Vue3-综合小案例">15-16. Vue3 综合小案例</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>项目地址</strong>
git clone <a target="_blank" rel="noopener" href="http://git.itcast.cn/heimaqianduan/vue3-basic-project.git">http://git.itcast.cn/heimaqianduan/vue3-basic-project.git</a></p>
<ol>
<li>模版已经配置好了案例必须的安装包</li>
<li>案例用到的接口在 README.MD文件 中</li>
<li>案例项目有俩个分支，main 主分支为开发分支，complete 分支为完成版分支供开发完参考</li>
</ol>
</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br>import axios from &#x27;axios&#x27;;<br>import Edit from &#x27;./components/Edit.vue&#x27;;<br><br>// TODO: 列表渲染<br>const tableData = ref([]);<br><br>onMounted(() =&gt; &#123;<br>    updateData();<br>&#125;);<br><br>const updateData = () =&gt; &#123;<br>    axios.get(&#x27;/list&#x27;)<br>        .then(response =&gt; &#123;<br>            tableData.value = response.data;<br>        &#125;)<br>        .catch(error =&gt; &#123;<br>            console.error(&#x27;Error fetching data:&#x27;, error);<br>        &#125;);<br>&#125;<br><br>// TODO: 删除功能<br>const handleDelete = (row) =&gt; &#123;<br>    console.log(row);<br>    axios.delete(`/del/$&#123;row.id&#125;`);<br>    updateData();<br>&#125;;<br><br>// TODO: 编辑功能<br>const edit = ref(null);<br>const handleEdit = (row) =&gt; &#123;<br>    console.log(row)<br>    edit.value.openDialog(row);<br>&#125;;<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;app&quot;&gt;<br>        &lt;el-table :data=&quot;tableData&quot;&gt;<br>            &lt;el-table-column label=&quot;ID&quot; prop=&quot;id&quot;&gt;&lt;/el-table-column&gt;<br>            &lt;el-table-column label=&quot;姓名&quot; prop=&quot;name&quot; width=&quot;150&quot;&gt;&lt;/el-table-column&gt;<br>            &lt;el-table-column label=&quot;籍贯&quot; prop=&quot;place&quot;&gt;&lt;/el-table-column&gt;<br>            &lt;el-table-column label=&quot;操作&quot; width=&quot;150&quot;&gt;<br>                &lt;template #default=&quot;&#123; row &#125;&quot;&gt;<br>                    &lt;el-button type=&quot;primary&quot; @click=&quot;handleEdit(row)&quot; link&gt;编辑&lt;/el-button&gt;<br>                    &lt;el-button type=&quot;danger&quot; @click=&quot;handleDelete(row)&quot; link&gt;删除&lt;/el-button&gt;<br>                &lt;/template&gt;<br>            &lt;/el-table-column&gt;<br>        &lt;/el-table&gt;<br>    &lt;/div&gt;<br>    &lt;Edit ref=&quot;edit&quot; @get-message=&quot;updateData&quot; /&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped&gt;<br>.app &#123;<br>    width: 980px;<br>    margin: 100px auto 0;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>// TODO: 编辑<br>import &#123; ref &#125; from &#x27;vue&#x27;<br>// 弹框开关<br>const dialogVisible = ref(false)<br><br>const form = ref(&#123;<br>    id: &#x27;&#x27;,<br>    name: &#x27;&#x27;,<br>    place: &#x27;&#x27;<br>&#125;);<br><br>const openDialog = (data) =&gt; &#123;<br>    console.log(&#x27;open dialog&#x27;)<br>    form.value = data;<br>    dialogVisible.value = true;<br>&#125;;<br><br>defineExpose(&#123;<br>    openDialog<br>&#125;);<br><br>const emit = defineEmits([&#x27;get-message&#x27;]);<br><br>const onConfirm = () =&gt; &#123;<br>    console.log(&#x27;onConfirm&#x27;, form.value);<br>    dialogVisible.value = false;<br>    axios.patch(`/edit/$&#123;form.value.id&#125;`, &#123;<br>        name: form.value.name,<br>        place: form.value.place,<br>    &#125;)<br>    emit(&#x27;get-message&#x27;);<br>&#125;<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;el-dialog v-model=&quot;dialogVisible&quot; title=&quot;编辑&quot; width=&quot;400px&quot;&gt;<br>        &lt;el-form label-width=&quot;50px&quot;&gt;<br>            &lt;el-form-item label=&quot;姓名&quot;&gt;<br>                &lt;el-input v-model=&quot;form.name&quot; placeholder=&quot;请输入姓名&quot; /&gt;<br>            &lt;/el-form-item&gt;<br>            &lt;el-form-item label=&quot;籍贯&quot;&gt;<br>                &lt;el-input v-model=&quot;form.place&quot; placeholder=&quot;请输入籍贯&quot; /&gt;<br>            &lt;/el-form-item&gt;<br>        &lt;/el-form&gt;<br>        &lt;template #footer&gt;<br>            &lt;span class=&quot;dialog-footer&quot;&gt;<br>                &lt;el-button @click=&quot;dialogVisible = false&quot;&gt;取消&lt;/el-button&gt;<br>                &lt;el-button type=&quot;primary&quot; @click=&quot;onConfirm&quot;&gt;确认&lt;/el-button&gt;<br>            &lt;/span&gt;<br>        &lt;/template&gt;<br>    &lt;/el-dialog&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped&gt;<br>.el-input &#123;<br>    width: 290px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<h2 id="day02" tabindex="-1" id="day02">day02</h2>
<h3 id="01.-pinia-%E6%B7%BB%E5%8A%A0-pinia-%E5%88%B0-vue-%E9%A1%B9%E7%9B%AE" tabindex="-1" id="01-Pinia-添加-pinia-到-vue-项目">01. Pinia-添加 pinia 到 vue 项目</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>什么是 Pinia</strong></p>
<p>Pinia 是 Vue 的专属的最新<strong>状态管理库</strong>，是 Vuex 状态管理工具的替代品</p>
<ol>
<li>提供更加简单的 API（去掉了 mutation）</li>
<li>提供符合组合式风格的 API（和 Vue3 新语法统一）</li>
<li>去掉了 modules 的概念，每一个 store 都是一个独立的模块</li>
<li>搭配 TypeScript 一起使用提供可靠的类型推断</li>
</ol>
</div>
<p>​	根据 <a target="_blank" rel="noopener" href="https://pinia.vuejs.org/zh/getting-started.html">开始 | Pinia</a> 里的教程给一个 vue 项目添加 pinia。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install pinia<br></code></pre></td></tr></table></figure>
<p>​	创建一个 pinia 实例 (根 store) 并将其传递给应用（修改 <code>main.js</code>）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./assets/main.css&#x27;</span><br><br><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; createPinia &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br><span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br><br>app.<span class="hljs-title function_">use</span>(pinia)<br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>
<h3 id="02.-pinia-counter-%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8" tabindex="-1" id="02-Pinia-counter-基础使用">02. Pinia-counter 基础使用</h3>
<p><strong>定义 store（创建 <code>stores/counter.js</code>）：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;counter&#x27;</span>, &#123;<br>    <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> &#125;<br>    &#125;,<br>    <span class="hljs-attr">actions</span>: &#123;<br>        <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++<br>        &#125;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
<p><strong><code>App.vue</code> 中使用 store：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; useCounterStore &#125; from &#x27;./stores/counter&#x27;;<br><br>const counter = useCounterStore();<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;button @click=&quot;counter.increment()&quot;&gt;&#123;&#123; counter.count &#125;&#125;&lt;/button&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="03.-pinia-getters-%E5%92%8C%E5%BC%82%E6%AD%A5-action" tabindex="-1" id="03-Pinia-getters-和异步-action">03. Pinia-getters 和异步 action</h3>
<p><strong>编辑 <code>stores/counter.js</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-keyword">import</span> &#123; computed, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">API_URL</span> = <span class="hljs-string">&#x27;http://geek.itheima.net/v1_0/channels&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;counter&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>        count.<span class="hljs-property">value</span>++;<br>    &#125;<br>    <span class="hljs-keyword">const</span> doubleCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>);<br><br>    <span class="hljs-keyword">const</span> list = <span class="hljs-title function_">ref</span>([]);<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getList</span> = <span class="hljs-keyword">async</span>(<span class="hljs-params"></span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">API_URL</span>);<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);<br>        list.<span class="hljs-property">value</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">channels</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        count,<br>        increment,<br>        doubleCount,<br>        getList,<br>        list<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
<p><code>App.vue</code> 中使用 <code>v-for</code> 渲染经 <code>axios</code> 获得的列表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; onMounted &#125; from &#x27;vue&#x27;;<br>import &#123; useCounterStore &#125; from &#x27;./stores/counter&#x27;;<br><br>const counter = useCounterStore();<br><br>onMounted(() =&gt; &#123;<br>    counter.getList();<br>    console.log(counter.list.value)<br>&#125;);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;button @click=&quot;counter.increment()&quot;&gt;&#123;&#123; counter.count &#125;&#125;&lt;/button&gt;<br>    &lt;div&gt;&#123;&#123; counter.doubleCount &#125;&#125;&lt;/div&gt;<br>    &lt;li v-for=&quot;item in counter.list&quot; :key=&quot;item.id&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/li&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p><img src="02/01.webp" alt="webp"></p>
<h3 id="04.-pinia-storetorefs-%E5%92%8C%E8%B0%83%E8%AF%95" tabindex="-1" id="04-Pinia-storeToRefs-和调试">04. Pinia-storeToRefs 和调试</h3>
<ul>
<li>
<p>使用 <code>storeToRefs</code> 对变量进行解构赋值。</p>
</li>
<li>
<p>使用方法包裹对函数进行解构赋值。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; onMounted &#125; from &#x27;vue&#x27;;<br>import &#123; useCounterStore &#125; from &#x27;./stores/counter&#x27;;<br>import &#123; storeToRefs &#125; from &#x27;pinia&#x27;;<br><br>const counter = useCounterStore();<br>const &#123;count, doubleCount, list&#125; = storeToRefs(counter);<br>const &#123; getList, increment &#125; = counter;<br><br>onMounted(() =&gt; &#123;<br>    getList();<br>    <br>&#125;);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;button @click=&quot;increment()&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;<br>    &lt;div&gt;&#123;&#123; doubleCount &#125;&#125;&lt;/div&gt;<br>    &lt;li v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/li&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="05.-%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5-%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C-git-%E7%AE%A1%E7%90%86" tabindex="-1" id="05-项目起步-项目初始化和-git-管理">05. 项目起步-项目初始化和 git 管理</h3>
<p><img src="02/02.webp" alt="webp"></p>
<p>​	以此法创建一个 <code>vue-rabbit</code> 项目。</p>
<p>​	调整 src 目录：</p>
<ul>
<li><code>src</code>
<ul>
<li><code>apis</code>：API 接口文件夹</li>
<li><code>assets</code></li>
<li><code>components</code></li>
<li><code>composables</code>：组合函数文件夹</li>
<li><code>directives</code>：全局指令文件夹</li>
<li><code>router</code></li>
<li><code>stores</code></li>
<li><code>styles</code>：全局样式文件夹</li>
<li><code>utils</code>：工具函数文件夹</li>
<li><code>views</code></li>
</ul>
</li>
</ul>
<p>接着使用 <strong>git 管理项目</strong></p>
<p>​	基于 <code>create-vue</code> 创建出来的项目默认没有初始化 git 仓库，需要我们手动初始化</p>
<p>执行命令并完成首次提交</p>
<ol>
<li><code>git init</code></li>
<li><code>git add .</code></li>
<li><code>git commit -m “init&quot;</code></li>
</ol>
<h3 id="06.-%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5-%E5%88%AB%E5%90%8D%E8%B7%AF%E5%BE%84%E8%81%94%E6%83%B3%E8%AE%BE%E7%BD%AE" tabindex="-1" id="06-项目起步-别名路径联想设置">06. 项目起步-别名路径联想设置</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>什么是别名路径联想提示</strong></p>
<p>在编写代码的过程中，一旦 <strong>输入 @/</strong>，VSCode 会立刻 <strong>联想出 src 下的所有子目录和文件</strong>，统一文件路径访问不容易出错。</p>
<p><strong>如何进行配置</strong></p>
<ol>
<li>
<p>在项目的<strong>根目录下</strong>新增 <code>jsconfig.json</code> 文件</p>
</li>
<li>
<p>添加 json 格式的配置项，如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;@/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;./src/*&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
</li>
</ol>
<p>配置完成：</p>
<p><img src="02/03.webp" alt="webp"></p>
</div>
<p>​	提交修改：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">git add .<br>git commit -m &quot;完成别名联想设置&quot;<br></code></pre></td></tr></table></figure>
<h3 id="07.-%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5-elementplus-%E8%87%AA%E5%8A%A8%E6%8C%89%E9%9C%80%E5%AF%BC%E5%85%A5%E9%85%8D%E7%BD%AE" tabindex="-1" id="07-项目起步-elementPlus-自动按需导入配置">07. 项目起步-elementPlus 自动按需导入配置</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>小兔鲜项目的组件分类</strong></p>
<p>小兔鲜项目 UI 组件</p>
<ul>
<li>通用型组件（ElementPlus）：Dialog 模态框</li>
<li>业务定制化组件（手写）：商品热榜组件</li>
</ul>
<p><strong>添加 ElementPlus 到项目（按需导入）</strong></p>
<ul>
<li>
<p>看文档 <a target="_blank" rel="noopener" href="https://element-plus.org/zh-CN/guide/quickstart.html">快速开始 | Element Plus</a></p>
<ul>
<li>
<p>安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install element-plus --save<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>配置按需引入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install -D unplugin-vue-components unplugin-auto-import<br></code></pre></td></tr></table></figure>
<p>配置 <code>vite.config.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; fileURLToPath, <span class="hljs-variable constant_">URL</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;node:url&#x27;</span><br><br><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span><br><span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vitejs/plugin-vue&#x27;</span><br><span class="hljs-keyword">import</span> vueDevTools <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite-plugin-vue-devtools&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">AutoImport</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-auto-import/vite&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Components</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-vue-components/vite&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ElementPlusResolver</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-vue-components/resolvers&#x27;</span><br><br><span class="hljs-comment">// https://vite.dev/config/</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-attr">plugins</span>: [<br>    <span class="hljs-title function_">vue</span>(),<br>    <span class="hljs-title function_">vueDevTools</span>(),<br>        <span class="hljs-title class_">AutoImport</span>(&#123;<br>      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">ElementPlusResolver</span>()],<br>    &#125;),<br>    <span class="hljs-title class_">Components</span>(&#123;<br>      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">ElementPlusResolver</span>()],<br>    &#125;),<br>  ],<br>  <span class="hljs-attr">resolve</span>: &#123;<br>    <span class="hljs-attr">alias</span>: &#123;<br>      <span class="hljs-string">&#x27;@&#x27;</span>: <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">&#x27;./src&#x27;</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>))<br>    &#125;,<br>  &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>测试组件</p>
<p><img src="02/04.webp" alt="webp"></p>
</li>
</ul>
</li>
</ul>
</div>
<h3 id="08.-%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5-elementplus-%E4%B8%BB%E9%A2%98%E8%89%B2%E5%AE%9A%E5%88%B6" tabindex="-1" id="08-项目起步-elementPlus-主题色定制">08. 项目起步-elementPlus 主题色定制</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>为什么需要主题定制</strong></p>
<p>小免鲜主题色和 elementPlus 默认的主题色存在冲突，通过定制主题让 elementPlus 的主题色和小免鲜项目保持一致</p>
<p><img src="02/05.webp" alt="webp"></p>
<p><strong>如何定制（scss 变量替换方案）</strong></p>
<ul>
<li>
<p>安装 scss：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm i sass -D<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>准备定制样式文件：</p>
<p><code>styles/element/index.scss</code>：</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@forward</span> <span class="hljs-string">&#x27;element-plus/theme-chalk/src/common/var.scss&#x27;</span> with (<br>    <span class="hljs-variable">$colors</span>: (<br>        <span class="hljs-string">&#x27;primary&#x27;</span>: (<br>            <span class="hljs-string">&#x27;base&#x27;</span>: <span class="hljs-number">#27ba9b</span>,<br>        ),<br>        <span class="hljs-string">&#x27;success&#x27;</span>: (<br>            <span class="hljs-string">&#x27;base&#x27;</span>: <span class="hljs-number">#1dc779</span>,<br>        ),<br>        <span class="hljs-string">&#x27;warning&#x27;</span>: (<br>            <span class="hljs-string">&#x27;base&#x27;</span>: <span class="hljs-number">#ffb302</span>,<br>        ),<br>        <span class="hljs-string">&#x27;danger&#x27;</span>: (<br>            <span class="hljs-string">&#x27;base&#x27;</span>: <span class="hljs-number">#e26237</span>,<br>        ),<br>        <span class="hljs-string">&#x27;error&#x27;</span>: (<br>            <span class="hljs-string">&#x27;base&#x27;</span>: <span class="hljs-number">#cf4444</span>,<br>        )<br>    )<br>);<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>对 ElementPlus 样式进行覆盖</p>
<p>通知 Element 采用 scss 语言 -&gt; 导入定制 scss 文件覆盖</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; fileURLToPath, <span class="hljs-variable constant_">URL</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;node:url&#x27;</span><br>                            <br><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span><br><span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vitejs/plugin-vue&#x27;</span><br><span class="hljs-keyword">import</span> vueDevTools <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite-plugin-vue-devtools&#x27;</span><br>                            <br><span class="hljs-keyword">import</span> <span class="hljs-title class_">AutoImport</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-auto-import/vite&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Components</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-vue-components/vite&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ElementPlusResolver</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-vue-components/resolvers&#x27;</span><br>                            <br><span class="hljs-comment">// https://vite.dev/config/</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-attr">plugins</span>: [<br>    <span class="hljs-title function_">vue</span>(),<br>    <span class="hljs-title function_">vueDevTools</span>(),<br>        <span class="hljs-title class_">AutoImport</span>(&#123;<br>      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">ElementPlusResolver</span>()],<br>    &#125;),<br>    <span class="hljs-title class_">Components</span>(&#123;<br>      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">ElementPlusResolver</span>(&#123; <span class="hljs-attr">importStyle</span>: <span class="hljs-string">&#x27;sass&#x27;</span> &#125;)],<br>    &#125;),<br>  ],<br>  <span class="hljs-attr">resolve</span>: &#123;<br>    <span class="hljs-attr">alias</span>: &#123;<br>      <span class="hljs-string">&#x27;@&#x27;</span>: <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">&#x27;./src&#x27;</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>))<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-attr">css</span>: &#123;<br>    <span class="hljs-attr">preprocessorOptions</span>: &#123;<br>      <span class="hljs-attr">scss</span>: &#123;<br>        <span class="hljs-attr">additionalData</span>: <span class="hljs-string">`@use &quot;@/styles/element/index.scss&quot; as *;`</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="02/06.webp" alt="webp"></p>
</div>
<h3 id="09.-%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5-axios-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE" tabindex="-1" id="09-项目起步-axios-基础配置">09. 项目起步-axios 基础配置</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>axios 基础配置</strong></p>
<ol>
<li>
<p>安装 axios</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm i axios<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>配置基础实例（统一接口配置）</p>
<p><img src="02/07.webp" alt="webp"></p>
<p><code>utils/http.js</code> 中创建 axios 实例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span>;<br>                                          <br><span class="hljs-comment">// 创建 axios 实例</span><br><span class="hljs-keyword">const</span> http = axios.<span class="hljs-title function_">create</span>(&#123;<br>    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net&#x27;</span>,<br>    <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span><br>&#125;);<br>                                          <br><span class="hljs-comment">// 请求拦截器：在请求发送前修改配置，常用于添加身份验证或全局请求设置。</span><br>http.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> &#123;<br>    <span class="hljs-comment">// 在发送请求之前做某事</span><br>    <span class="hljs-keyword">return</span> config;<br>&#125;, <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>    <span class="hljs-comment">// 请求错误时做些事</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);<br>&#125;);<br>                                          <br><span class="hljs-comment">// 响应拦截器：在接收到响应后统一处理结果，常用于错误处理或数据格式转换。</span><br>http.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-property">result</span> &#123;<br>    <span class="hljs-comment">// 对响应数据做点什么</span><br>    <span class="hljs-keyword">return</span> response;<br>&#125;, <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>    <span class="hljs-comment">// 响应错误时做点什么</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);<br>&#125;);<br>                                          <br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> http;<br></code></pre></td></tr></table></figure>
<p><code>apis/testAPI.js</code> 中创建 API：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> httpInstance <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/http&#x27;</span>;<br>                                          <br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getCategory</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;home/category/head&#x27;</span><br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>main.js</code> 中测试接口函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; createPinia &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br>                                          <br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br>                                          <br><span class="hljs-keyword">import</span> &#123; getCategory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/testAPI&#x27;</span>;<br><span class="hljs-title function_">getCategory</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);<br>&#125;);<br>                                          <br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br>                                          <br>app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createPinia</span>())<br>app.<span class="hljs-title function_">use</span>(router)<br>                                          <br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>
</li>
</ol>
</div>
<p>如果项目里面不同的业务模块需要的接口基地址不同，该如何来做？</p>
<p>​	<code>axios.create()</code> 方法可以执行多次，每次执行就会生成一个新的实例，比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> http1 = axios.<span class="hljs-title function_">create</span>(&#123; <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;url1&#x27;</span>&#125;)<br><span class="hljs-keyword">const</span> http2 = axios.<span class="hljs-title function_">create</span>(&#123; <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;url2&#x27;</span>&#125;)<br></code></pre></td></tr></table></figure>
<h3 id="10.-%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5-%E9%A1%B9%E7%9B%AE%E6%95%B4%E4%BD%93%E8%B7%AF%E7%94%B1%E8%AE%BE%E8%AE%A1" tabindex="-1" id="10-项目起步-项目整体路由设计">10. 项目起步-项目整体路由设计</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>设计首页和登录页的路由（一级路由）</strong></p>
<p>路由设计原则：找内容切换的区域，如果是<strong>页面整体切换</strong>，则为一级路由</p>
<p>创建：</p>
<p><code>App.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;RouterView/&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<ul>
<li>
<p><code>views</code></p>
<ul>
<li>
<p><code>Category</code></p>
<ul>
<li>
<p><code>index.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;我是 Category 页&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><code>Home</code></p>
<ul>
<li>
<p><code>index.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;我是 Home 页&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>Layout</p>
<ul>
<li>
<p><code>index.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;我是首页&lt;/div&gt;<br>    &lt;RouterView/&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>Login</p>
<ul>
<li>
<p><code>index.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;我是登录页&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>配置路由 <code>router/index.js</code>：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// createRouter: 创建 router 实例对象</span><br><span class="hljs-comment">// createWebHistory: 创建 history 模式的路由</span><br><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Layout</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Layout/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Login</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Login/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Home/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Category</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Category/index.vue&#x27;</span><br><br><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br>    <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>),<br>    <span class="hljs-attr">routes</span>: [<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;home&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">Layout</span>,<br>            <span class="hljs-attr">children</span>: [<br>                &#123;<br>                    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>                    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span><br>                &#125;,<br>                &#123;<br>                    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;category&#x27;</span>,<br>                    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Category</span><br>                &#125;<br>            ]<br>        &#125;,<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">Login</span><br>        &#125;,<br>    ],<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure>
<p>此时服务器 <code>http://localhost:5173/</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">我是首页<br>我是 Home 页<br></code></pre></td></tr></table></figure>
<p><code>http://localhost:5173/login</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">我是登录页<br></code></pre></td></tr></table></figure>
<p><code>http://localhost:5173/category</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">我是首页<br>我是 Category 页<br></code></pre></td></tr></table></figure>
</div>
<h3 id="11.-%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%BC%95%E5%85%A5%E5%92%8C-errorlen-%E5%AE%89%E8%A3%85" tabindex="-1" id="11-项目起步-静态资源引入和-ErrorLen-安装">11. 项目起步-静态资源引入和 ErrorLen 安装</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>图片资源和样式资源</strong></p>
<p><strong>资源说明</strong></p>
<ol>
<li>实际工作中的图片资源通常由 UI 设计师 提供，常见的图片格式有 png, svg 等都是由 UI 切图交给前端</li>
<li>样式资源通常是指项目初始化的时候进行样式重置，常见的比如开源的 normalize.css 或者手写</li>
</ol>
<p><strong>资源操作</strong></p>
<ol>
<li>
<p>图片资源-把 <strong>images 文件夹放到 assets</strong> 目录下</p>
</li>
<li>
<p>样式资源-把 <strong>common.scss 文件放到 styles</strong> 目录下</p>
<p>然后在 <code>main.js</code> 中引入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;@/styles/common.scss&#x27;</span><br></code></pre></td></tr></table></figure>
</li>
</ol>
</div>
<p>​	然后推荐安装 error lens 插件。</p>
<h3 id="13.-layout-%E9%9D%99%E6%80%81%E6%A8%A1%E7%89%88%E7%BB%93%E6%9E%84%E6%90%AD%E5%BB%BA" tabindex="-1" id="13-Layout-静态模版结构搭建">13. Layout-静态模版结构搭建</h3>
<p>​	配置好：</p>
<ul>
<li>
<p><code>views</code></p>
<ul>
<li>
<p><code>Layout</code></p>
<ul>
<li>
<p><code>index.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import LayoutNav from &#x27;./components/LayoutNav.vue&#x27;<br>import LayoutHeader from &#x27;./components/LayoutHeader.vue&#x27;<br>import LayoutFooter from &#x27;./components/LayoutFooter.vue&#x27;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;LayoutNav /&gt;<br>  &lt;LayoutHeader /&gt;<br>  &lt;RouterView /&gt;<br>  &lt;LayoutFooter /&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p><code>components</code></p>
<ul>
<li>
<p><code>LayoutFooter.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;footer class=&quot;app_footer&quot;&gt;<br>    &lt;!-- 联系我们 --&gt;<br>    &lt;div class=&quot;contact&quot;&gt;<br>      &lt;div class=&quot;container&quot;&gt;<br>        &lt;dl&gt;<br>          &lt;dt&gt;客户服务&lt;/dt&gt;<br>          &lt;dd&gt;&lt;i class=&quot;iconfont icon-kefu&quot;&gt;&lt;/i&gt; 在线客服&lt;/dd&gt;<br>          &lt;dd&gt;&lt;i class=&quot;iconfont icon-question&quot;&gt;&lt;/i&gt; 问题反馈&lt;/dd&gt;<br>        &lt;/dl&gt;<br>        &lt;dl&gt;<br>          &lt;dt&gt;关注我们&lt;/dt&gt;<br>          &lt;dd&gt;&lt;i class=&quot;iconfont icon-weixin&quot;&gt;&lt;/i&gt; 公众号&lt;/dd&gt;<br>          &lt;dd&gt;&lt;i class=&quot;iconfont icon-weibo&quot;&gt;&lt;/i&gt; 微博&lt;/dd&gt;<br>        &lt;/dl&gt;<br>        &lt;dl&gt;<br>          &lt;dt&gt;下载APP&lt;/dt&gt;<br>          &lt;dd class=&quot;qrcode&quot;&gt;&lt;img src=&quot;@/assets/images/qrcode.jpg&quot; /&gt;&lt;/dd&gt;<br>          &lt;dd class=&quot;download&quot;&gt;<br>            &lt;span&gt;扫描二维码&lt;/span&gt;<br>            &lt;span&gt;立马下载APP&lt;/span&gt;<br>            &lt;a href=&quot;javascript:;&quot;&gt;下载页面&lt;/a&gt;<br>          &lt;/dd&gt;<br>        &lt;/dl&gt;<br>        &lt;dl&gt;<br>          &lt;dt&gt;服务热线&lt;/dt&gt;<br>          &lt;dd class=&quot;hotline&quot;&gt;400-0000-000 &lt;small&gt;周一至周日 8:00-18:00&lt;/small&gt;&lt;/dd&gt;<br>        &lt;/dl&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>    &lt;!-- 其它 --&gt;<br>    &lt;div class=&quot;extra&quot;&gt;<br>      &lt;div class=&quot;container&quot;&gt;<br>        &lt;div class=&quot;slogan&quot;&gt;<br>          &lt;a href=&quot;javascript:;&quot;&gt;<br>            &lt;i class=&quot;iconfont icon-footer01&quot;&gt;&lt;/i&gt;<br>            &lt;span&gt;价格亲民&lt;/span&gt;<br>          &lt;/a&gt;<br>          &lt;a href=&quot;javascript:;&quot;&gt;<br>            &lt;i class=&quot;iconfont icon-footer02&quot;&gt;&lt;/i&gt;<br>            &lt;span&gt;物流快捷&lt;/span&gt;<br>          &lt;/a&gt;<br>          &lt;a href=&quot;javascript:;&quot;&gt;<br>            &lt;i class=&quot;iconfont icon-footer03&quot;&gt;&lt;/i&gt;<br>            &lt;span&gt;品质新鲜&lt;/span&gt;<br>          &lt;/a&gt;<br>        &lt;/div&gt;<br>        &lt;!-- 版权信息 --&gt;<br>        &lt;div class=&quot;copyright&quot;&gt;<br>          &lt;p&gt;<br>            &lt;a href=&quot;javascript:;&quot;&gt;关于我们&lt;/a&gt;<br>            &lt;a href=&quot;javascript:;&quot;&gt;帮助中心&lt;/a&gt;<br>            &lt;a href=&quot;javascript:;&quot;&gt;售后服务&lt;/a&gt;<br>            &lt;a href=&quot;javascript:;&quot;&gt;配送与验收&lt;/a&gt;<br>            &lt;a href=&quot;javascript:;&quot;&gt;商务合作&lt;/a&gt;<br>            &lt;a href=&quot;javascript:;&quot;&gt;搜索推荐&lt;/a&gt;<br>            &lt;a href=&quot;javascript:;&quot;&gt;友情链接&lt;/a&gt;<br>          &lt;/p&gt;<br>          &lt;p&gt;CopyRight © 小兔鲜儿&lt;/p&gt;<br>        &lt;/div&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  &lt;/footer&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.app_footer &#123;<br>  overflow: hidden;<br>  background-color: #f5f5f5;<br>  padding-top: 20px;<br><br>  .contact &#123;<br>    background: #fff;<br><br>    .container &#123;<br>      padding: 60px 0 40px 25px;<br>      display: flex;<br>    &#125;<br><br>    dl &#123;<br>      height: 190px;<br>      text-align: center;<br>      padding: 0 72px;<br>      border-right: 1px solid #f2f2f2;<br>      color: #999;<br><br>      &amp;:first-child &#123;<br>        padding-left: 0;<br>      &#125;<br><br>      &amp;:last-child &#123;<br>        border-right: none;<br>        padding-right: 0;<br>      &#125;<br>    &#125;<br><br>    dt &#123;<br>      line-height: 1;<br>      font-size: 18px;<br>    &#125;<br><br>    dd &#123;<br>      margin: 36px 12px 0 0;<br>      float: left;<br>      width: 92px;<br>      height: 92px;<br>      padding-top: 10px;<br>      border: 1px solid #ededed;<br><br>      .iconfont &#123;<br>        font-size: 36px;<br>        display: block;<br>        color: #666;<br>      &#125;<br><br>      &amp;:hover &#123;<br>        .iconfont &#123;<br>          color: $xtxColor;<br>        &#125;<br>      &#125;<br><br>      &amp;:last-child &#123;<br>        margin-right: 0;<br>      &#125;<br>    &#125;<br><br>    .qrcode &#123;<br>      width: 92px;<br>      height: 92px;<br>      padding: 7px;<br>      border: 1px solid #ededed;<br>    &#125;<br><br>    .download &#123;<br>      padding-top: 5px;<br>      font-size: 14px;<br>      width: auto;<br>      height: auto;<br>      border: none;<br><br>      span &#123;<br>        display: block;<br>      &#125;<br><br>      a &#123;<br>        display: block;<br>        line-height: 1;<br>        padding: 10px 25px;<br>        margin-top: 5px;<br>        color: #fff;<br>        border-radius: 2px;<br>        background-color: $xtxColor;<br>      &#125;<br>    &#125;<br><br>    .hotline &#123;<br>      padding-top: 20px;<br>      font-size: 22px;<br>      color: #666;<br>      width: auto;<br>      height: auto;<br>      border: none;<br><br>      small &#123;<br>        display: block;<br>        font-size: 15px;<br>        color: #999;<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  .extra &#123;<br>    background-color: #333;<br>  &#125;<br><br>  .slogan &#123;<br>    height: 178px;<br>    line-height: 58px;<br>    padding: 60px 100px;<br>    border-bottom: 1px solid #434343;<br>    display: flex;<br>    justify-content: space-between;<br><br>    a &#123;<br>      height: 58px;<br>      line-height: 58px;<br>      color: #fff;<br>      font-size: 28px;<br><br>      i &#123;<br>        font-size: 50px;<br>        vertical-align: middle;<br>        margin-right: 10px;<br>        font-weight: 100;<br>      &#125;<br><br>      span &#123;<br>        vertical-align: middle;<br>        text-shadow: 0 0 1px #333;<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  .copyright &#123;<br>    height: 170px;<br>    padding-top: 40px;<br>    text-align: center;<br>    color: #999;<br>    font-size: 15px;<br><br>    p &#123;<br>      line-height: 1;<br>      margin-bottom: 20px;<br>    &#125;<br><br>    a &#123;<br>      color: #999;<br>      line-height: 1;<br>      padding: 0 10px;<br>      border-right: 1px solid #999;<br><br>      &amp;:last-child &#123;<br>        border-right: none;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p><code>LayoutHeader.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;header class=&#x27;app-header&#x27;&gt;<br>    &lt;div class=&quot;container&quot;&gt;<br>      &lt;h1 class=&quot;logo&quot;&gt;<br>        &lt;RouterLink to=&quot;/&quot;&gt;小兔鲜&lt;/RouterLink&gt;<br>      &lt;/h1&gt;<br>      &lt;ul class=&quot;app-header-nav&quot;&gt;<br>        &lt;li class=&quot;home&quot;&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;首页&lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>        &lt;li&gt; &lt;RouterLink to=&quot;/&quot;&gt;居家&lt;/RouterLink&gt; &lt;/li&gt;<br>        &lt;li&gt; &lt;RouterLink to=&quot;/&quot;&gt;美食&lt;/RouterLink&gt; &lt;/li&gt;<br>        &lt;li&gt; &lt;RouterLink to=&quot;/&quot;&gt;服饰&lt;/RouterLink&gt; &lt;/li&gt;<br>      &lt;/ul&gt;<br>      &lt;div class=&quot;search&quot;&gt;<br>        &lt;i class=&quot;iconfont icon-search&quot;&gt;&lt;/i&gt;<br>        &lt;input type=&quot;text&quot; placeholder=&quot;搜一搜&quot;&gt;<br>      &lt;/div&gt;<br>      &lt;!-- 头部购物车 --&gt;<br>      <br>    &lt;/div&gt;<br>  &lt;/header&gt;<br>&lt;/template&gt;<br><br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.app-header &#123;<br>  background: #fff;<br><br>  .container &#123;<br>    display: flex;<br>    align-items: center;<br>  &#125;<br><br>  .logo &#123;<br>    width: 200px;<br><br>    a &#123;<br>      display: block;<br>      height: 132px;<br>      width: 100%;<br>      text-indent: -9999px;<br>      background: url(&#x27;@/assets/images/logo.png&#x27;) no-repeat center 18px / contain;<br>    &#125;<br>  &#125;<br><br>  .app-header-nav &#123;<br>    width: 820px;<br>    display: flex;<br>    padding-left: 40px;<br>    position: relative;<br>    z-index: 998;<br>  <br>    li &#123;<br>      margin-right: 40px;<br>      width: 38px;<br>      text-align: center;<br>  <br>      a &#123;<br>        font-size: 16px;<br>        line-height: 32px;<br>        height: 32px;<br>        display: inline-block;<br>  <br>        &amp;:hover &#123;<br>          color: $xtxColor;<br>          border-bottom: 1px solid $xtxColor;<br>        &#125;<br>      &#125;<br>  <br>      .active &#123;<br>        color: $xtxColor;<br>        border-bottom: 1px solid $xtxColor;<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  .search &#123;<br>    width: 170px;<br>    height: 32px;<br>    position: relative;<br>    border-bottom: 1px solid #e7e7e7;<br>    line-height: 32px;<br><br>    .icon-search &#123;<br>      font-size: 18px;<br>      margin-left: 5px;<br>    &#125;<br><br>    input &#123;<br>      width: 140px;<br>      padding-left: 5px;<br>      color: #666;<br>    &#125;<br>  &#125;<br><br>  .cart &#123;<br>    width: 50px;<br><br>    .curr &#123;<br>      height: 32px;<br>      line-height: 32px;<br>      text-align: center;<br>      position: relative;<br>      display: block;<br><br>      .icon-cart &#123;<br>        font-size: 22px;<br>      &#125;<br><br>      em &#123;<br>        font-style: normal;<br>        position: absolute;<br>        right: 0;<br>        top: 0;<br>        padding: 1px 6px;<br>        line-height: 1;<br>        background: $helpColor;<br>        color: #fff;<br>        font-size: 12px;<br>        border-radius: 10px;<br>        font-family: Arial;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p><code>LayoutNav.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;nav class=&quot;app-topnav&quot;&gt;<br>    &lt;div class=&quot;container&quot;&gt;<br>      &lt;ul&gt;<br>        &lt;template v-if=&quot;true&quot;&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;&lt;i class=&quot;iconfont icon-user&quot;&gt;&lt;/i&gt;周杰伦&lt;/a&gt;&lt;/li&gt;<br>          &lt;li&gt;<br>            &lt;el-popconfirm title=&quot;确认退出吗?&quot; confirm-button-text=&quot;确认&quot; cancel-button-text=&quot;取消&quot;&gt;<br>              &lt;template #reference&gt;<br>                &lt;a href=&quot;javascript:;&quot;&gt;退出登录&lt;/a&gt;<br>              &lt;/template&gt;<br>            &lt;/el-popconfirm&gt;<br>          &lt;/li&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;我的订单&lt;/a&gt;&lt;/li&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;会员中心&lt;/a&gt;&lt;/li&gt;<br>        &lt;/template&gt;<br>        &lt;template v-else&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;请先登录&lt;/a&gt;&lt;/li&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;帮助中心&lt;/a&gt;&lt;/li&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;关于我们&lt;/a&gt;&lt;/li&gt;<br>        &lt;/template&gt;<br>      &lt;/ul&gt;<br>    &lt;/div&gt;<br>  &lt;/nav&gt;<br>&lt;/template&gt;<br><br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.app-topnav &#123;<br>  background: #333;<br>  ul &#123;<br>    display: flex;<br>    height: 53px;<br>    justify-content: flex-end;<br>    align-items: center;<br>    li &#123;<br>      a &#123;<br>        padding: 0 15px;<br>        color: #cdcdcd;<br>        line-height: 1;<br>        display: inline-block;<br><br>        i &#123;<br>          font-size: 14px;<br>          margin-right: 2px;<br>        &#125;<br><br>        &amp;:hover &#123;<br>          color: $xtxColor;<br>        &#125;<br>      &#125;<br><br>      ~li &#123;<br>        a &#123;<br>          border-left: 2px solid #666;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="02/09.webp" alt="webp"></p>
<h3 id="14.-layout-%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87%E5%BC%95%E5%85%A5" tabindex="-1" id="14-Layout-字体图标引入">14. Layout-字体图标引入</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>如何引入</strong></p>
<p>​	阿里的字体图标库支持多种引入方式，小免鲜项目里采用的是 <strong>font-class 引用</strong>的方式，<code>index.html</code> 下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/favicon.ico&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;//at.alicdn.com/t/font_2143783_iq6z4ey5vu.css&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vite App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/src/main.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><code>//at.alicdn.com/t/font_2143783_iq6z4ey5vu.css</code> 这个地址的创建方法：</p>
<ul>
<li>
<p>从 <a target="_blank" rel="noopener" href="https://www.iconfont.cn/">iconfont-阿里巴巴矢量图标库</a> 找到喜欢的图表，添加入库：</p>
<p><img src="02/10.webp" alt="webp"></p>
</li>
<li>
<p>从库中生成 <code>Font class</code> 连接：</p>
<p><img src="02/11.webp" alt="webp"></p>
</li>
</ul>
</div>
<h3 id="15.-layout-%E4%B8%80%E7%BA%A7%E5%AF%BC%E8%88%AA%E6%B8%B2%E6%9F%93" tabindex="-1" id="15-Layout-一级导航渲染">15. Layout-一级导航渲染</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>功能描述</strong></p>
<p>使用后端接口渲染渲染一级路由导航</p>
<p>实现步骤</p>
<ol>
<li>根据接口文档封装接口函数</li>
<li>发送请求获取数据列表</li>
<li><code>v-for</code> 渲染页面</li>
</ol>
<p>编辑 <code>apis/layout.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> httpInstance <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/http&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getCategoryAPI</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;home/category/head&#x27;</span><br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
<p>使用 <code>v-for</code> 将接收到的数据渲染到 <code>LayoutHeader.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>    import &#123; getCategoryAPI &#125; from &#x27;@/apis/testAPI&#x27;;<br>    import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br><br>    const categoryList = ref([]);<br>    const getCategory = async () =&gt; &#123;<br>        const res = await getCategoryAPI();<br>        categoryList.value = res.result;<br>    &#125;<br><br>    onMounted(() =&gt; &#123;<br>        getCategory();<br>    &#125;);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;header class=&#x27;app-header&#x27;&gt;<br>    &lt;div class=&quot;container&quot;&gt;<br>      &lt;h1 class=&quot;logo&quot;&gt;<br>        &lt;RouterLink to=&quot;/&quot;&gt;小兔鲜&lt;/RouterLink&gt;<br>      &lt;/h1&gt;<br>      &lt;ul class=&quot;app-header-nav&quot;&gt;<br>        &lt;li class=&quot;home&quot; v-for=&quot;item in categoryList&quot; :key=&quot;item.id&quot;&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>      &lt;/ul&gt;<br>      &lt;div class=&quot;search&quot;&gt;<br>        &lt;i class=&quot;iconfont icon-search&quot;&gt;&lt;/i&gt;<br>        &lt;input type=&quot;text&quot; placeholder=&quot;搜一搜&quot;&gt;<br>      &lt;/div&gt;<br>      &lt;!-- 头部购物车 --&gt;<br>      <br>    &lt;/div&gt;<br>  &lt;/header&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p>移除 <code>main.js</code> 中先前测试 axios 部分的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; createPinia &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;@/styles/common.scss&#x27;</span><br><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br><br>app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createPinia</span>())<br>app.<span class="hljs-title function_">use</span>(router)<br><br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>
<p><img src="02/12.webp" alt="webp"></p>
</div>
<h3 id="16.-layout-%E5%90%B8%E9%A1%B6%E5%AF%BC%E8%88%AA%E4%BA%A4%E4%BA%92%E5%AE%9E%E7%8E%B0" tabindex="-1" id="16-Layout-吸顶导航交互实现">16. Layout-吸顶导航交互实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>吸顶交互</strong></p>
<p>要求：浏览器在上下滚动的过程中，如果距离顶部的滚动距离大于 78px，吸顶导航显示，小于 78px 隐藏</p>
<ul>
<li>
<p>准备吸顶导航组件 <code>components/LayoutFixed.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>  <br>&lt;/script&gt;<br>  <br>&lt;template&gt;<br>  &lt;div class=&quot;app-header-sticky&quot;&gt;<br>    &lt;div class=&quot;container&quot;&gt;<br>      &lt;RouterLink class=&quot;logo&quot; to=&quot;/&quot; /&gt;<br>      &lt;!-- 导航区域 --&gt;<br>      &lt;ul class=&quot;app-header-nav &quot;&gt;<br>        &lt;li class=&quot;home&quot;&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;首页&lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>        &lt;li&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;居家&lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>        &lt;li&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;美食&lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>        &lt;li&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;服饰&lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>        &lt;li&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;母婴&lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>        &lt;li&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;个护&lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>        &lt;li&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;严选&lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>        &lt;li&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;数码&lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>        &lt;li&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;运动&lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>        &lt;li&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;杂项&lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>      &lt;/ul&gt;<br>  <br>      &lt;div class=&quot;right&quot;&gt;<br>        &lt;RouterLink to=&quot;/&quot;&gt;品牌&lt;/RouterLink&gt;<br>        &lt;RouterLink to=&quot;/&quot;&gt;专题&lt;/RouterLink&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.app-header-sticky &#123;<br>  width: 100%;<br>  height: 80px;<br>  position: fixed;<br>  left: 0;<br>  top: 0;<br>  z-index: 999;<br>  background-color: #fff;<br>  border-bottom: 1px solid #e4e4e4;<br>  // 此处为关键样式!!!<br>  // 状态一：往上平移自身高度 + 完全透明<br>  transform: translateY(-100%);<br>  opacity: 0;<br><br>  // 状态二：移除平移 + 完全不透明<br>  &amp;.show &#123;<br>    transition: all 0.3s linear;<br>    transform: none;<br>    opacity: 1;<br>  &#125;<br>    <br>  .container &#123;<br>    display: flex;<br>    align-items: center;<br>  &#125;<br>    <br>  .logo &#123;<br>    width: 200px;<br>    height: 80px;<br>    background: url(&quot;@/assets/images/logo.png&quot;) no-repeat right 2px;<br>    background-size: 160px auto;<br>  &#125;<br>    <br>  .right &#123;<br>    width: 220px;<br>    display: flex;<br>    text-align: center;<br>    padding-left: 40px;<br>    border-left: 2px solid $xtxColor;<br>    <br>    a &#123;<br>      width: 38px;<br>      margin-right: 40px;<br>      font-size: 16px;<br>      line-height: 1;<br>    <br>      &amp;:hover &#123;<br>        color: $xtxColor;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br><br>.app-header-nav &#123;<br>  width: 820px;<br>  display: flex;<br>  padding-left: 40px;<br>  position: relative;<br>  z-index: 998;<br><br>  li &#123;<br>    margin-right: 40px;<br>    width: 38px;<br>    text-align: center;<br>    <br>    a &#123;<br>      font-size: 16px;<br>      line-height: 32px;<br>      height: 32px;<br>      display: inline-block;<br>    <br>      &amp;:hover &#123;<br>        color: $xtxColor;<br>        border-bottom: 1px solid $xtxColor;<br>      &#125;<br>    &#125;<br>    <br>    .active &#123;<br>      color: $xtxColor;<br>      border-bottom: 1px solid $xtxColor;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>获取滚动数据：</p>
<p>从 vueuse 中获取相关函数，安装这个库：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm i @vueuse/core<br></code></pre></td></tr></table></figure>
<p>在 <code>LayoutFixed.vue</code> 中实现这个逻辑：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>    import &#123; useScroll &#125; from &#x27;@vueuse/core&#x27;;<br>    const &#123; y &#125; = useScroll(window);<br>&lt;/script&gt;<br>                          <br>&lt;template&gt;<br>  &lt;div class=&quot;app-header-sticky&quot; :class=&quot;&#123; show: y &gt; 78 &#125;&quot;&gt;<br>  ...<br></code></pre></td></tr></table></figure>
</li>
</ul>
</div>
<h3 id="17.-layout-pinia-%E4%BC%98%E5%8C%96%E9%87%8D%E5%A4%8D%E8%AF%B7%E6%B1%82" tabindex="-1" id="17-Layout-Pinia-优化重复请求">17. Layout-Pinia 优化重复请求</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><img src="02/13.webp" alt="webp"></p>
<p>​	从 pinia 中获取数据，分发给各个组件。</p>
<p>创建 <code>stores/category.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; getCategoryAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/layout&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCategoryStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;category&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> categoryList = <span class="hljs-title function_">ref</span>([]);<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getCategory</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getCategoryAPI</span>();<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);<br>        categoryList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> &#123;<br>        categoryList,<br>        getCategory<br>    &#125;;<br>&#125;);<br></code></pre></td></tr></table></figure>
<p><code>Layout/index.vue</code> 中通过 <code>onMounted()</code> 获取数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import LayoutNav from &#x27;./components/LayoutNav.vue&#x27;<br>import LayoutHeader from &#x27;./components/LayoutHeader.vue&#x27;<br>import LayoutFooter from &#x27;./components/LayoutFooter.vue&#x27;<br>import LayoutFixed from &#x27;./components/LayoutFixed.vue&#x27;;<br><br>import &#123; useCategoryStore &#125; from &#x27;@/stores/category&#x27;;<br>import &#123; onMounted &#125; from &#x27;vue&#x27;;<br>const categoryStore = useCategoryStore();<br><br>onMounted(()=&gt; &#123;<br>    categoryStore.getCategory();<br>    console.log(categoryStore)<br>&#125;);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;LayoutFixed /&gt;<br>    &lt;LayoutNav /&gt;<br>    &lt;LayoutHeader /&gt;<br>    &lt;RouterView /&gt;<br>    &lt;LayoutFooter /&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<div class="tabs" id="layout_017"><div class="nav-tabs"><button type="button" class="tab active" data-href="layout_017-1">Layout/components/LayoutFixed.vue</button><button type="button" class="tab" data-href="layout_017-2">Layout/components/LayoutHeader.vue</button></div><div class="tab-contents"><div class="tab-item-content active" id="layout_017-1"><blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; useScroll &#125; from &#x27;@vueuse/core&#x27;;<br>import &#123; useCategoryStore &#125; from &#x27;@/stores/category&#x27;;<br><br>const &#123; y &#125; = useScroll(window);<br>const categoryStore = useCategoryStore();<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;app-header-sticky&quot; :class=&quot;&#123; show: y &gt; 78 &#125;&quot;&gt;<br>        &lt;div class=&quot;container&quot;&gt;<br>            &lt;RouterLink class=&quot;logo&quot; to=&quot;/&quot; /&gt;<br>            &lt;!-- 导航区域 --&gt;<br>            &lt;ul class=&quot;app-header-nav &quot;&gt;<br>                &lt;li class=&quot;home&quot;&gt;<br>                    &lt;RouterLink to=&quot;/&quot;&gt;首页&lt;/RouterLink&gt;<br>                &lt;/li&gt;<br>                &lt;li class=&quot;home&quot; v-for=&quot;item in categoryStore.categoryList &quot; :key=&quot;item.id&quot;&gt;<br>                    &lt;RouterLink to=&quot;/&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/RouterLink&gt;<br>                &lt;/li&gt;<br>            &lt;/ul&gt;<br><br>            &lt;div class=&quot;right&quot;&gt;<br>                &lt;RouterLink to=&quot;/&quot;&gt;品牌&lt;/RouterLink&gt;<br>                &lt;RouterLink to=&quot;/&quot;&gt;专题&lt;/RouterLink&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</blockquote></div><div class="tab-item-content" id="layout_017-2"><blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; useCategoryStore &#125; from &#x27;@/stores/category&#x27;;<br><br>const categoryStore = useCategoryStore();<br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>    &lt;header class=&#x27;app-header&#x27;&gt;<br>        &lt;div class=&quot;container&quot;&gt;<br>            &lt;h1 class=&quot;logo&quot;&gt;<br>                &lt;RouterLink to=&quot;/&quot;&gt;小兔鲜&lt;/RouterLink&gt;<br>            &lt;/h1&gt;<br>            &lt;ul class=&quot;app-header-nav&quot;&gt;<br>                &lt;li class=&quot;home&quot; v-for=&quot;item in categoryStore.categoryList &quot; :key=&quot;item.id&quot;&gt;<br>                    &lt;RouterLink to=&quot;/&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/RouterLink&gt;<br>                &lt;/li&gt;<br>            &lt;/ul&gt;<br>            &lt;div class=&quot;search&quot;&gt;<br>                &lt;i class=&quot;iconfont icon-search&quot;&gt;&lt;/i&gt;<br>                &lt;input type=&quot;text&quot; placeholder=&quot;搜一搜&quot;&gt;<br>            &lt;/div&gt;<br>            &lt;!-- 头部购物车 --&gt;<br><br>        &lt;/div&gt;<br>    &lt;/header&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</blockquote></div></div></div>
</div>
<h2 id="day03" tabindex="-1" id="day03">day03</h2>
<h3 id="01.-home-%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84%E6%8B%86%E5%88%86%E5%92%8C%E5%88%86%E7%B1%BB%E5%AE%9E%E7%8E%B0" tabindex="-1" id="01-Home-整体结构拆分和分类实现">01. Home-整体结构拆分和分类实现</h3>
<p>分析主页结构：</p>
<p><img src="03/01.webp" alt="webp"></p>
<p>创建如下文件：</p>
<ul>
<li>
<p><code>Home</code></p>
<ul>
<li>
<p><code>index.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import HomeCategory from &#x27;./components/HomeCategory.vue&#x27;<br>import HomeBanner from &#x27;./components/HomeBanner.vue&#x27;<br>import HomeNew from &#x27;./components/HomeNew.vue&#x27;<br>import HomeHot from &#x27;./components/HomeHot.vue&#x27;<br>import homeProduct from &#x27;./components/HomeProduct.vue&#x27;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;div class=&quot;container&quot;&gt;<br>    &lt;HomeCategory /&gt;<br>    &lt;HomeBanner /&gt;<br>  &lt;/div&gt;<br>  &lt;HomeNew /&gt;<br>  &lt;HomeHot /&gt;<br>  &lt;homeProduct /&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p><code>components</code></p>
<ul>
<li>
<p><code>HomeBanner.vue</code></p>
</li>
<li>
<p><code>HomeCategory.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;div class=&quot;home-category&quot;&gt;<br>    &lt;ul class=&quot;menu&quot;&gt;<br>      &lt;li v-for=&quot;item in 9&quot; :key=&quot;item&quot;&gt;<br>        &lt;RouterLink to=&quot;/&quot;&gt;居家&lt;/RouterLink&gt;<br>        &lt;RouterLink v-for=&quot;i in 2&quot; :key=&quot;i&quot; to=&quot;/&quot;&gt;南北干货&lt;/RouterLink&gt;<br>        &lt;!-- 弹层layer位置 --&gt;<br>        &lt;div class=&quot;layer&quot;&gt;<br>          &lt;h4&gt;分类推荐 &lt;small&gt;根据您的购买或浏览记录推荐&lt;/small&gt;&lt;/h4&gt;<br>          &lt;ul&gt;<br>            &lt;li v-for=&quot;i in 5&quot; :key=&quot;i&quot;&gt;<br>              &lt;RouterLink to=&quot;/&quot;&gt;<br>                &lt;img alt=&quot;&quot; /&gt;<br>                &lt;div class=&quot;info&quot;&gt;<br>                  &lt;p class=&quot;name ellipsis-2&quot;&gt;<br>                    男士外套<br>                  &lt;/p&gt;<br>                  &lt;p class=&quot;desc ellipsis&quot;&gt;男士外套，冬季必选&lt;/p&gt;<br>                  &lt;p class=&quot;price&quot;&gt;&lt;i&gt;¥&lt;/i&gt;200.00&lt;/p&gt;<br>                &lt;/div&gt;<br>              &lt;/RouterLink&gt;<br>            &lt;/li&gt;<br>          &lt;/ul&gt;<br>        &lt;/div&gt;<br>      &lt;/li&gt;<br>    &lt;/ul&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.home-category &#123;<br>  width: 250px;<br>  height: 500px;<br>  background: rgba(0, 0, 0, 0.8);<br>  position: relative;<br>  z-index: 99;<br><br>  .menu &#123;<br>    li &#123;<br>      padding-left: 40px;<br>      height: 55px;<br>      line-height: 55px;<br><br>      &amp;:hover &#123;<br>        background: $xtxColor;<br>      &#125;<br><br>      a &#123;<br>        margin-right: 4px;<br>        color: #fff;<br><br>        &amp;:first-child &#123;<br>          font-size: 16px;<br>        &#125;<br>      &#125;<br><br>      .layer &#123;<br>        width: 990px;<br>        height: 500px;<br>        background: rgba(255, 255, 255, 0.8);<br>        position: absolute;<br>        left: 250px;<br>        top: 0;<br>        display: none;<br>        padding: 0 15px;<br><br>        h4 &#123;<br>          font-size: 20px;<br>          font-weight: normal;<br>          line-height: 80px;<br><br>          small &#123;<br>            font-size: 16px;<br>            color: #666;<br>          &#125;<br>        &#125;<br><br>        ul &#123;<br>          display: flex;<br>          flex-wrap: wrap;<br><br>          li &#123;<br>            width: 310px;<br>            height: 120px;<br>            margin-right: 15px;<br>            margin-bottom: 15px;<br>            border: 1px solid #eee;<br>            border-radius: 4px;<br>            background: #fff;<br><br>            &amp;:nth-child(3n) &#123;<br>              margin-right: 0;<br>            &#125;<br><br>            a &#123;<br>              display: flex;<br>              width: 100%;<br>              height: 100%;<br>              align-items: center;<br>              padding: 10px;<br><br>              &amp;:hover &#123;<br>                background: #e3f9f4;<br>              &#125;<br><br>              img &#123;<br>                width: 95px;<br>                height: 95px;<br>              &#125;<br><br>              .info &#123;<br>                padding-left: 10px;<br>                line-height: 24px;<br>                overflow: hidden;<br><br>                .name &#123;<br>                  font-size: 16px;<br>                  color: #666;<br>                &#125;<br><br>                .desc &#123;<br>                  color: #999;<br>                &#125;<br><br>                .price &#123;<br>                  font-size: 22px;<br>                  color: $priceColor;<br><br>                  i &#123;<br>                    font-size: 16px;<br>                  &#125;<br>                &#125;<br>              &#125;<br>            &#125;<br>          &#125;<br>        &#125;<br>      &#125;<br><br>      // 关键样式  hover状态下的layer盒子变成block<br>      &amp;:hover &#123;<br>        .layer &#123;<br>          display: block;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p><code>HomeHot.vue</code></p>
</li>
<li>
<p><code>HomeNew.vue</code></p>
</li>
<li>
<p><code>HomeProduct.vue</code></p>
</li>
</ul>
</li>
</ul>
<p><strong>分类实现</strong></p>
<p>准备模板 → 使用 Pinia 中的数据渲染</p>
<p><img src="03/02.webp" alt="webp"></p>
</li>
</ul>
<p>分析 Pinia 中获得的数据，设计 <code>HomeCategory.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; useCategoryStore &#125; from &#x27;@/stores/category&#x27;;<br><br>const categoryStore = useCategoryStore();<br><br>console.log(&quot;categoryStore.categoryList&quot;, categoryStore.categoryList);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;div class=&quot;home-category&quot;&gt;<br>    &lt;ul class=&quot;menu&quot;&gt;<br>      &lt;li v-for=&quot;item in categoryStore.categoryList&quot; :key=&quot;item.id&quot;&gt;<br>        &lt;RouterLink to=&quot;/&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/RouterLink&gt;<br>        &lt;RouterLink v-for=&quot;i in item.children.slice(0, 2)&quot; :key=&quot;i&quot; to=&quot;/&quot;&gt;&#123;&#123; i.name &#125;&#125;&lt;/RouterLink&gt;<br>        &lt;!-- 弹层layer位置 --&gt;<br>        &lt;div class=&quot;layer&quot;&gt;<br>          &lt;h4&gt;分类推荐 &lt;small&gt;根据您的购买或浏览记录推荐&lt;/small&gt;&lt;/h4&gt;<br>          &lt;ul&gt;<br>            &lt;li v-for=&quot;i in item.goods&quot; :key=&quot;i.id&quot;&gt;<br>              &lt;RouterLink to=&quot;/&quot;&gt;<br>                &lt;img :src=&quot;i.picture&quot; /&gt;<br>                &lt;div class=&quot;info&quot;&gt;<br>                  &lt;p class=&quot;name ellipsis-2&quot;&gt;<br>                    &#123;&#123; i.name &#125;&#125;<br>                  &lt;/p&gt;<br>                  &lt;p class=&quot;desc ellipsis&quot;&gt;&#123;&#123; i.desc&#125;&#125;&lt;/p&gt;<br>                  &lt;p class=&quot;price&quot;&gt;&lt;i&gt;¥&lt;/i&gt;&#123;&#123; i.price &#125;&#125;&lt;/p&gt;<br>                &lt;/div&gt;<br>              &lt;/RouterLink&gt;<br>            &lt;/li&gt;<br>          &lt;/ul&gt;<br>        &lt;/div&gt;<br>      &lt;/li&gt;<br>    &lt;/ul&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p><img src="03/03.webp" alt="webp"></p>
<h3 id="02.-home-banner-%E8%BD%AE%E6%92%AD%E5%9B%BE%E5%AE%9E%E7%8E%B0" tabindex="-1" id="02-Home-banner-轮播图实现">02. Home-banner 轮播图实现</h3>
<p><strong>轮播图实现</strong></p>
<ul>
<li>
<p>准备模板</p>
</li>
<li>
<p>熟悉 elementPlus 相关组件</p>
<p>根据 <a target="_blank" rel="noopener" href="https://element-plus.org/zh-CN/component/carousel.html">Carousel 走马灯 | Element Plus</a> 写出走马灯的代码（<code>HomeBanner.vue</code>）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;div class=&quot;home-banner&quot;&gt;<br>    &lt;el-carousel height=&quot;500px&quot;&gt;<br>      &lt;el-carousel-item v-for=&quot;item in 4&quot; :key=&quot;item&quot;&gt;<br>        &lt;img src=&quot;http://yjy-xiaotuxian-dev.oss-cn-beijing.aliyuncs.com/picture/2021-04-15/6d202d8e-bb47-4f92-9523-f32ab65754f4.jpg&quot; alt=&quot;&quot;&gt;<br>      &lt;/el-carousel-item&gt;<br>    &lt;/el-carousel&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.home-banner &#123;<br>  width: 1240px;<br>  height: 500px;<br>  position: absolute;<br>  left: 0;<br>  top: 0;<br>  z-index: 98;<br><br>  img &#123;<br>    width: 100%;<br>    height: 500px;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>获取接口数据</p>
<p><code>apis/home.js</code> 中获取 API：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> httpInstance <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@utils/http&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getCategoryAPI</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;home/banner&#x27;</span><br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>渲染组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getBannerAPI &#125; from &#x27;@/apis/home&#x27;;<br>import &#123; ref, onMounted &#125; from &#x27;vue&#x27;;<br><br>const bannerList = ref([]);<br><br>const getBanner = async () =&gt; &#123;<br>    const res = await getBannerAPI();<br>    console.log(&quot;res&quot;, res);<br>    bannerList.value = res.result;<br>    console.log(&quot;bannerList.value&quot;, bannerList.value);<br>&#125;<br><br>onMounted(() =&gt; &#123;<br>    getBanner();<br>&#125;)<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;div class=&quot;home-banner&quot;&gt;<br>    &lt;el-carousel height=&quot;500px&quot;&gt;<br>      &lt;el-carousel-item v-for=&quot;item in bannerList&quot; :key=&quot;item.id&quot;&gt;<br>        &lt;img :src=&quot;item.imgUrl&quot; alt=&quot;&quot;&gt;<br>      &lt;/el-carousel-item&gt;<br>    &lt;/el-carousel&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="03.-home-%E9%9D%A2%E6%9D%BF%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85" tabindex="-1" id="03-Home-面板组件封装">03. Home-面板组件封装</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>场景说明</strong></p>
<p>问：组件封装解决了什么问题？</p>
<p>答：1. 复用问题 2. 业务维护问题</p>
<p>新鲜好物和人气推荐模块，在<strong>结构上非常相似</strong>，只是内容不同，通过组件封装可以<strong>实现复用结构</strong>的效果</p>
<p><img src="03/04.webp" alt="webp"></p>
<p><strong>组件封装</strong></p>
<p>核心思路：把可复用的结构只写一次，把<strong>可能发生变化的部分抽象成组件参数（props/插槽）</strong></p>
<p><strong>实现步骤</strong></p>
<ol>
<li>
<p>不做任何抽象，准备静态模版</p>
<p>创建一个 <code>Home/components/HomePanel.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>                                    <br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>  &lt;div class=&quot;home-panel&quot;&gt;<br>    &lt;div class=&quot;container&quot;&gt;<br>      &lt;div class=&quot;head&quot;&gt;<br>         &lt;!-- 主标题和副标题 --&gt;<br>        &lt;h3&gt;<br>          新鲜好物&lt;small&gt;新鲜出炉 品质靠谱&lt;/small&gt;<br>        &lt;/h3&gt;<br>      &lt;/div&gt;<br>      &lt;!-- 主体内容区域 --&gt;<br>      &lt;div&gt; 主体内容 &lt;/div&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.home-panel &#123;<br>  background-color: #fff;<br><br>  .head &#123;<br>    padding: 40px 0;<br>    display: flex;<br>    align-items: flex-end;<br>                                                <br>    h3 &#123;<br>      flex: 1;<br>      font-size: 32px;<br>      font-weight: normal;<br>      margin-left: 6px;<br>      height: 35px;<br>      line-height: 35px;<br>                                                <br>      small &#123;<br>        font-size: 16px;<br>        color: #999;<br>        margin-left: 20px;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>抽象可变的部分</p>
<ul>
<li>主标题和副标题是<strong>纯文本</strong>，可以抽象成 <strong>prop</strong> 传入</li>
<li>主体内容是<strong>复杂的模版</strong>，抽象成插槽传入</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>defineProps(&#123;<br>    title: &#123;<br>        type: String,<br>    &#125;,<br>    subTitle: &#123;<br>        type: String,<br>    &#125;<br>&#125;);<br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>  &lt;div class=&quot;home-panel&quot;&gt;<br>    &lt;div class=&quot;container&quot;&gt;<br>      &lt;div class=&quot;head&quot;&gt;<br>         &lt;!-- 主标题和副标题 --&gt;<br>        &lt;h3&gt;<br>          &#123;&#123; title &#125;&#125;&lt;small&gt;&#123;&#123; subTitle&#125;&#125;&lt;/small&gt;<br>        &lt;/h3&gt;<br>      &lt;/div&gt;<br>      &lt;!-- 主体内容区域 --&gt;<br>      &lt;slot/&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
</li>
</ol>
<p>使用这个面板组件（<code>Home/index.vue</code>）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import HomeCategory from &#x27;./components/HomeCategory.vue&#x27;<br>import HomeBanner from &#x27;./components/HomeBanner.vue&#x27;<br>import HomeNew from &#x27;./components/HomeNew.vue&#x27;<br>import HomeHot from &#x27;./components/HomeHot.vue&#x27;<br>import homeProduct from &#x27;./components/HomeProduct.vue&#x27;<br>import HomePanel from &#x27;./components/HomePanel.vue&#x27;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;container&quot;&gt;<br>        &lt;HomeCategory /&gt;<br>        &lt;HomeBanner /&gt;<br>    &lt;/div&gt;<br>    &lt;HomeNew /&gt;<br>    &lt;HomeHot /&gt;<br>    &lt;homeProduct /&gt;<br>    &lt;HomePanel title=&quot;新鲜好物&quot;&gt;<br>        &lt;div&gt;我是新鲜好物的插槽内容&lt;/div&gt;<br>    &lt;/HomePanel&gt;<br>    &lt;HomePanel title=&quot;人气推荐&quot;&gt;<br>        &lt;div&gt;我是人气推荐的插槽内容&lt;/div&gt;<br>    &lt;/HomePanel&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p><img src="03/05.webp" alt="webp"></p>
</div>
<h3 id="04.-home-%E6%96%B0%E9%B2%9C%E5%A5%BD%E7%89%A9%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0" tabindex="-1" id="04-Home-新鲜好物业务实现">04. Home-新鲜好物业务实现</h3>
<p><strong>准备模板（HomePanel 组件）</strong></p>
<p><code>HomeNew.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;div&gt;&lt;/div&gt;<br>  &lt;!-- 下面是插槽主体内容模版<br>  &lt;ul class=&quot;goods-list&quot;&gt;<br>    &lt;li v-for=&quot;item in newList&quot; :key=&quot;item.id&quot;&gt;<br>      &lt;RouterLink to=&quot;/&quot;&gt;<br>        &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot; /&gt;<br>        &lt;p class=&quot;name&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/p&gt;<br>        &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; item.price &#125;&#125;&lt;/p&gt;<br>      &lt;/RouterLink&gt;<br>    &lt;/li&gt;<br>  &lt;/ul&gt;<br>  --&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.goods-list &#123;<br>  display: flex;<br>  justify-content: space-between;<br>  height: 406px;<br><br>  li &#123;<br>    width: 306px;<br>    height: 406px;<br><br>    background: #f0f9f4;<br>    transition: all .5s;<br><br>    &amp;:hover &#123;<br>      transform: translate3d(0, -3px, 0);<br>      box-shadow: 0 3px 8px rgb(0 0 0 / 20%);<br>    &#125;<br><br>    img &#123;<br>      width: 306px;<br>      height: 306px;<br>    &#125;<br><br>    p &#123;<br>      font-size: 22px;<br>      padding-top: 12px;<br>      text-align: center;<br>      text-overflow: ellipsis;<br>      overflow: hidden;<br>      white-space: nowrap;<br>    &#125;<br><br>    .price &#123;<br>      color: $priceColor;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<p>设置 <code>apis/home.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> httpInstance <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/http&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getBannerAPI</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;home/banner&#x27;</span><br>    &#125;)<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>: 获取新鲜好物</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> &#123;<span class="hljs-type">*</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">findNewAPI</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;home/new&#x27;</span><br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>使用这个 API：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import HomePanel from &#x27;./HomePanel.vue&#x27;;<br>import &#123; findNewAPI &#125; from &#x27;@/apis/home&#x27;;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br><br>const newList = ref([]);<br><br>const getNewList = async () =&gt; &#123;<br>    const res = await findNewAPI();<br>    newList.value = res.result;<br>    console.log(&quot;res&quot;, res);<br>&#125;<br><br>onMounted(() =&gt; &#123;<br>    getNewList();<br>&#125;);<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;HomePanel title=&quot;新品推荐&quot; sub-title=&quot;新鲜出炉 品质靠谱&quot;&gt;<br>        &lt;ul class=&quot;goods-list&quot;&gt;<br>            &lt;li v-for=&quot;item in newList&quot; :key=&quot;item.id&quot;&gt;<br>                &lt;RouterLink to=&quot;/&quot;&gt;<br>                    &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot; /&gt;<br>                    &lt;p class=&quot;name&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/p&gt;<br>                    &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; item.price &#125;&#125;&lt;/p&gt;<br>                &lt;/RouterLink&gt;<br>            &lt;/li&gt;<br>        &lt;/ul&gt;<br>    &lt;/HomePanel&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p><img src="03/06.webp" alt="webp"></p>
<h3 id="05.-home-%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD%E6%8C%87%E4%BB%A4%E5%AE%9E%E7%8E%B0" tabindex="-1" id="05-Home-图片懒加载指令实现">05. Home-图片懒加载指令实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>场景和指令用法</strong></p>
<p>场景：电商网站的首页通常会很长，用户不一定能访问到<strong>页面靠下面的图片</strong>，这类图片通过懒加载优化手段可以做到<strong>只有进入视口区域才发送图片请求</strong>。</p>
<p>指令用法：<code>&lt;img v-img-lazy=&quot;item.picture&quot;/&gt;</code></p>
<p>在图片 img 身上绑定指令，该图片只有在正式进入到视口区域时才会发送图片网络请求。</p>
<p><strong>实现思路和步骤</strong></p>
<p>核心原理：图片进入视口才发送资源请求</p>
<ol>
<li>
<p>熟悉指令语法</p>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/reusability/custom-directives">自定义指令 | Vue.js</a></p>
<p>在 <code>main.js</code> 中注册这个指令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 定义全局指令</span><br>app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;img-lazy&#x27;</span>, &#123;<br>    <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(el, binding)<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
<p><code>apis/home.js</code> 中设置 API：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getHotAPI</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;home/hot&#x27;</span><br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>在 <code>Home/components/HomeHot.vue</code> 中使用 <code>v-img-lazy</code> 这个自定义指令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import HomePanel from &#x27;./HomePanel.vue&#x27;<br>import &#123; getHotAPI &#125; from &#x27;@/apis/home&#x27;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;<br>const hotList = ref([])<br>const getHotList = async () =&gt; &#123;<br>  const res = await getHotAPI()<br>  hotList.value = res.result<br>&#125;<br><br>onMounted(() =&gt; &#123;<br>    getHotList()<br>&#125;);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;HomePanel title=&quot;人气推荐&quot; sub-title=&quot;人气爆款 不容错过&quot;&gt;<br>      &lt;ul class=&quot;goods-list&quot;&gt;<br>        &lt;li v-for=&quot;item in hotList&quot; :key=&quot;item.id&quot;&gt;<br>          &lt;RouterLink to=&quot;/&quot;&gt;<br>            &lt;img v-img-lazy=&quot;item.picture&quot; alt=&quot;&quot;&gt;<br>            &lt;p class=&quot;name&quot;&gt;&#123;&#123; item.title &#125;&#125;&lt;/p&gt;<br>            &lt;p class=&quot;desc&quot;&gt;&#123;&#123; item.alt &#125;&#125;&lt;/p&gt;<br>          &lt;/RouterLink&gt;<br>        &lt;/li&gt;<br>      &lt;/ul&gt;<br>  &lt;/HomePanel&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.goods-list &#123;<br>  display: flex;<br>  justify-content: space-between;<br>  height: 426px;<br><br>  li &#123;<br>    width: 306px;<br>    height: 406px;<br>    transition: all .5s;<br><br>    &amp;:hover &#123;<br>      transform: translate3d(0, -3px, 0);<br>      box-shadow: 0 3px 8px rgb(0 0 0 / 20%);<br>    &#125;<br><br>    img &#123;<br>      width: 306px;<br>      height: 306px;<br>    &#125;<br><br>    p &#123;<br>      font-size: 22px;<br>      padding-top: 12px;<br>      text-align: center;<br>    &#125;<br><br>    .desc &#123;<br>      color: #999;<br>      font-size: 18px;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>判断图片是否进入视口（<code>vueUse</code>）</p>
</li>
<li>
<p>测试图片监控是否生效</p>
</li>
<li>
<p>如果图片进入视口，发送图片资源请（<code>img.src=url</code>）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript">app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;img-lazy&#x27;</span>, &#123;<br>    <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(el, binding);<br>        <span class="hljs-comment">// el: 指令所在元素</span><br>        <span class="hljs-comment">// binding: 指令绑定的数据对象</span><br>        <span class="hljs-title function_">useIntersectionObserver</span>(el, <span class="hljs-function">(<span class="hljs-params">[&#123; isIntersecting &#125;]</span>) =&gt;</span> &#123;<br>            <span class="hljs-keyword">if</span> (isIntersecting) &#123;<br>                <span class="hljs-comment">// 处理元素进入视口的逻辑</span><br>                <span class="hljs-comment">// 例如：加载图片</span><br>                el.<span class="hljs-property">src</span> = binding.<span class="hljs-property">value</span>;<br>            &#125;<br>        &#125;);<br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>测试图片资源是否发出</p>
</li>
</ol>
<p><img src="03/07.webp" alt="webp"></p>
</div>
<h3 id="06.-home-%E6%87%92%E5%8A%A0%E8%BD%BD%E6%8C%87%E4%BB%A4%E4%BC%98%E5%8C%96" tabindex="-1" id="06-Home-懒加载指令优化">06. Home-懒加载指令优化</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>逻辑书写位置不合理</strong></p>
<p>问：懒加载指令的逻辑直接写到入口文件中，合理吗？</p>
<p>答：不合理，入口文件通常只做一些初始化的事情，不应该包含太多的逻辑代码，可以通过插件的方法把<strong>懒加载指令封装为插件</strong>，<code>main.js</code> <strong>入口文件只需要负责注册插件即可</strong>。</p>
<hr>
<p>创建 <code>src/directives/index.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; useIntersectionObserver &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@vueuse/core&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> lazyPlugin = &#123;<br>    <span class="hljs-title function_">install</span>(<span class="hljs-params">app</span>) &#123;<br>        app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;img-lazy&#x27;</span>, &#123;<br>            <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(el, binding);<br>                <span class="hljs-comment">// el: 指令所在元素</span><br>                <span class="hljs-comment">// binding: 指令绑定的数据对象</span><br>                <span class="hljs-title function_">useIntersectionObserver</span>(el, <span class="hljs-function">(<span class="hljs-params">[&#123; isIntersecting &#125;]</span>) =&gt;</span> &#123;<br>                    <span class="hljs-keyword">if</span> (isIntersecting) &#123;<br>                        <span class="hljs-comment">// 处理元素进入视口的逻辑</span><br>                        <span class="hljs-comment">// 例如：加载图片</span><br>                        el.<span class="hljs-property">src</span> = binding.<span class="hljs-property">value</span>;<br>                    &#125;<br>                &#125;);<br>            &#125;<br>        &#125;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>main.js</code> 中使用这个插件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; createPinia &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;@/styles/common.scss&#x27;</span><br><span class="hljs-keyword">import</span> &#123; lazyPlugin &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/directives&#x27;</span><br><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br><br>app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createPinia</span>())<br>app.<span class="hljs-title function_">use</span>(router)<br>app.<span class="hljs-title function_">use</span>(lazyPlugin)<br><br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>
</div>
<h3 id="07.-home-product-%E4%BA%A7%E5%93%81%E5%88%97%E8%A1%A8%E5%AE%9E%E7%8E%B0" tabindex="-1" id="07-Home-Product-产品列表实现">07. Home-Product 产品列表实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>Product 产品列表</strong></p>
<p>Product 产品列表是一个常规的列表渲染，实现步骤如下：</p>
<ol>
<li>熟悉并准备静态模板</li>
<li>封装接口</li>
<li>获取数据渲染模板</li>
<li>图片懒加载</li>
</ol>
<p><code>src/apis/home.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getGoodsAPI</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;home/goods&#x27;</span><br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Home/components/HomeProduct.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import HomePanel from &#x27;./HomePanel.vue&#x27;<br>import &#123; getGoodsAPI &#125; from &#x27;@/apis/home&#x27;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;<br>const goodsProduct = ref([])<br>const getGoodsList = async () =&gt; &#123;<br>  const res = await getGoodsAPI()<br>  goodsProduct.value = res.result<br>&#125;<br><br>onMounted(()=&gt;&#123;<br>    getGoodsList();<br>&#125;);<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;div class=&quot;home-product&quot;&gt;<br>    &lt;HomePanel :title=&quot;cate.name&quot; v-for=&quot;cate in goodsProduct&quot; :key=&quot;cate.id&quot;&gt;<br>      &lt;div class=&quot;box&quot;&gt;<br>        &lt;RouterLink class=&quot;cover&quot; to=&quot;/&quot;&gt;<br>          &lt;img v-img-lazy=&quot;cate.picture&quot; /&gt;<br>          &lt;strong class=&quot;label&quot;&gt;<br>            &lt;span&gt;&#123;&#123; cate.name &#125;&#125;馆&lt;/span&gt;<br>            &lt;span&gt;&#123;&#123; cate.saleInfo &#125;&#125;&lt;/span&gt;<br>          &lt;/strong&gt;<br>        &lt;/RouterLink&gt;<br>        &lt;ul class=&quot;goods-list&quot;&gt;<br>          &lt;li v-for=&quot;good in cate.goods&quot; :key=&quot;good.id&quot;&gt;<br>            &lt;RouterLink to=&quot;/&quot; class=&quot;goods-item&quot;&gt;<br>              &lt;img v-img-lazy=&quot;good.picture&quot; alt=&quot;&quot; /&gt;<br>              &lt;p class=&quot;name ellipsis&quot;&gt;&#123;&#123; good.name &#125;&#125;&lt;/p&gt;<br>              &lt;p class=&quot;desc ellipsis&quot;&gt;&#123;&#123; good.desc &#125;&#125;&lt;/p&gt;<br>              &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; good.price &#125;&#125;&lt;/p&gt;<br>            &lt;/RouterLink&gt;<br>          &lt;/li&gt;<br>        &lt;/ul&gt;<br>      &lt;/div&gt;<br>    &lt;/HomePanel&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.home-product &#123;<br>  background: #fff;<br>  margin-top: 20px;<br>  .sub &#123;<br>    margin-bottom: 2px;<br><br>    a &#123;<br>      padding: 2px 12px;<br>      font-size: 16px;<br>      border-radius: 4px;<br><br>      &amp;:hover &#123;<br>        background: $xtxColor;<br>        color: #fff;<br>      &#125;<br><br>      &amp;:last-child &#123;<br>        margin-right: 80px;<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  .box &#123;<br>    display: flex;<br><br>    .cover &#123;<br>      width: 240px;<br>      height: 610px;<br>      margin-right: 10px;<br>      position: relative;<br><br>      img &#123;<br>        width: 100%;<br>        height: 100%;<br>      &#125;<br><br>      .label &#123;<br>        width: 188px;<br>        height: 66px;<br>        display: flex;<br>        font-size: 18px;<br>        color: #fff;<br>        line-height: 66px;<br>        font-weight: normal;<br>        position: absolute;<br>        left: 0;<br>        top: 50%;<br>        transform: translate3d(0, -50%, 0);<br><br>        span &#123;<br>          text-align: center;<br><br>          &amp;:first-child &#123;<br>            width: 76px;<br>            background: rgba(0, 0, 0, 0.9);<br>          &#125;<br><br>          &amp;:last-child &#123;<br>            flex: 1;<br>            background: rgba(0, 0, 0, 0.7);<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>    .goods-list &#123;<br>      width: 990px;<br>      display: flex;<br>      flex-wrap: wrap;<br><br>      li &#123;<br>        width: 240px;<br>        height: 300px;<br>        margin-right: 10px;<br>        margin-bottom: 10px;<br><br>        &amp;:nth-last-child(-n + 4) &#123;<br>          margin-bottom: 0;<br>        &#125;<br><br>        &amp;:nth-child(4n) &#123;<br>          margin-right: 0;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>    .goods-item &#123;<br>      display: block;<br>      width: 220px;<br>      padding: 20px 30px;<br>      text-align: center;<br>      transition: all .5s;<br><br>      &amp;:hover &#123;<br>        transform: translate3d(0, -3px, 0);<br>        box-shadow: 0 3px 8px rgb(0 0 0 / 20%);<br>      &#125;<br><br>      img &#123;<br>        width: 160px;<br>        height: 160px;<br>      &#125;<br><br>      p &#123;<br>        padding-top: 10px;<br>      &#125;<br><br>      .name &#123;<br>        font-size: 16px;<br>      &#125;<br><br>      .desc &#123;<br>        color: #999;<br>        height: 29px;<br>      &#125;<br><br>      .price &#123;<br>        color: $priceColor;<br>        font-size: 20px;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</div>
<h3 id="08.-home-goodsitem-%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85" tabindex="-1" id="08-Home-GoodsItem-组件封装">08. Home-GoodsItem 组件封装</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>为什么要封装 Goodsltem 组件</strong></p>
<p>在小兔鲜项目的很多个业务模块中都需要用到同样的商品展示模块，没必要重复定义，封装起来，<strong>方便复用</strong></p>
<p><strong>如何封装</strong></p>
<p>核心思想：把要显示的<strong>数据对象设计为 props 参数</strong>，传入什么数据对象就显示什么数据</p>
<p><code>GoodsItem.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; onMounted &#125; from &#x27;vue&#x27;;<br><br>defineProps(&#123;<br>    goods: &#123;<br>        type: Object,<br>        default: () =&gt; &#123; &#125;<br>    &#125;<br>&#125;)<br>onMounted(() =&gt; &#123;<br>    console.log(goods);<br>&#125;);<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;RouterLink to=&quot;/&quot; class=&quot;goods-item&quot;&gt;<br>        &lt;img :src=&quot;goods.picture&quot; alt=&quot;&quot; /&gt;<br>        &lt;p class=&quot;name ellipsis&quot;&gt;&#123;&#123; goods.name &#125;&#125;&lt;/p&gt;<br>        &lt;p class=&quot;desc ellipsis&quot;&gt;&#123;&#123; goods.desc &#125;&#125;&lt;/p&gt;<br>        &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; goods.price &#125;&#125;&lt;/p&gt;<br>    &lt;/RouterLink&gt;<br>&lt;/template&gt;<br><br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.goods-item &#123;<br>    display: block;<br>    width: 220px;<br>    padding: 20px 30px;<br>    text-align: center;<br>    transition: all .5s;<br><br>    &amp;:hover &#123;<br>        transform: translate3d(0, -3px, 0);<br>        box-shadow: 0 3px 8px rgb(0 0 0 / 20%);<br>    &#125;<br><br>    img &#123;<br>        width: 160px;<br>        height: 160px;<br>    &#125;<br><br>    p &#123;<br>        padding-top: 10px;<br>    &#125;<br><br>    .name &#123;<br>        font-size: 16px;<br>    &#125;<br><br>    .desc &#123;<br>        color: #999;<br>        height: 29px;<br>    &#125;<br><br>    .price &#123;<br>        color: $priceColor;<br>        font-size: 20px;<br>    &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<p><code>HomeProduct.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import HomePanel from &#x27;./HomePanel.vue&#x27;<br>import &#123; getGoodsAPI &#125; from &#x27;@/apis/home&#x27;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;<br>import GoodsItem from &#x27;./GoodsItem.vue&#x27;<br>const goodsProduct = ref([])<br>const getGoods = async () =&gt; &#123;<br>    const res = await getGoodsAPI()<br>    goodsProduct.value = res.result<br>&#125;<br><br>onMounted(() =&gt; &#123;<br>    getGoods();<br>&#125;);<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;home-product&quot;&gt;<br>        &lt;HomePanel :title=&quot;cate.name&quot; v-for=&quot;cate in goodsProduct&quot; :key=&quot;cate.id&quot;&gt;<br>            &lt;div class=&quot;box&quot;&gt;<br>                &lt;RouterLink class=&quot;cover&quot; to=&quot;/&quot;&gt;<br>                    &lt;img :src=&quot;cate.picture&quot; /&gt;<br>                    &lt;strong class=&quot;label&quot;&gt;<br>                        &lt;span&gt;&#123;&#123; cate.name &#125;&#125;馆&lt;/span&gt;<br>                        &lt;span&gt;&#123;&#123; cate.saleInfo &#125;&#125;&lt;/span&gt;<br>                    &lt;/strong&gt;<br>                &lt;/RouterLink&gt;<br>                &lt;ul class=&quot;goods-list&quot;&gt;<br>                    &lt;li v-for=&quot;goods in cate.goods&quot; :key=&quot;goods.id&quot;&gt;<br>                        &lt;RouterLink to=&quot;/&quot; class=&quot;goods-item&quot;&gt;<br>                            &lt;GoodsItem :goods=&quot;goods&quot; /&gt;<br>                        &lt;/RouterLink&gt;<br>                    &lt;/li&gt;<br>                &lt;/ul&gt;<br>            &lt;/div&gt;<br>        &lt;/HomePanel&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.home-product &#123;<br>  background: #fff;<br>  margin-top: 20px;<br>  .sub &#123;<br>    margin-bottom: 2px;<br><br>    a &#123;<br>      padding: 2px 12px;<br>      font-size: 16px;<br>      border-radius: 4px;<br><br>      &amp;:hover &#123;<br>        background: $xtxColor;<br>        color: #fff;<br>      &#125;<br><br>      &amp;:last-child &#123;<br>        margin-right: 80px;<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  .box &#123;<br>    display: flex;<br><br>    .cover &#123;<br>      width: 240px;<br>      height: 610px;<br>      margin-right: 10px;<br>      position: relative;<br><br>      img &#123;<br>        width: 100%;<br>        height: 100%;<br>      &#125;<br><br>      .label &#123;<br>        width: 188px;<br>        height: 66px;<br>        display: flex;<br>        font-size: 18px;<br>        color: #fff;<br>        line-height: 66px;<br>        font-weight: normal;<br>        position: absolute;<br>        left: 0;<br>        top: 50%;<br>        transform: translate3d(0, -50%, 0);<br><br>        span &#123;<br>          text-align: center;<br><br>          &amp;:first-child &#123;<br>            width: 76px;<br>            background: rgba(0, 0, 0, 0.9);<br>          &#125;<br><br>          &amp;:last-child &#123;<br>            flex: 1;<br>            background: rgba(0, 0, 0, 0.7);<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>    .goods-list &#123;<br>      width: 990px;<br>      display: flex;<br>      flex-wrap: wrap;<br><br>      li &#123;<br>        width: 240px;<br>        height: 300px;<br>        margin-right: 10px;<br>        margin-bottom: 10px;<br><br>        &amp;:nth-last-child(-n + 4) &#123;<br>          margin-bottom: 0;<br>        &#125;<br><br>        &amp;:nth-child(4n) &#123;<br>          margin-right: 0;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>    .goods-item &#123;<br>      display: block;<br>      width: 220px;<br>      padding: 20px 30px;<br>      text-align: center;<br>      transition: all .5s;<br><br>      &amp;:hover &#123;<br>        transform: translate3d(0, -3px, 0);<br>        box-shadow: 0 3px 8px rgb(0 0 0 / 20%);<br>      &#125;<br><br>      img &#123;<br>        width: 160px;<br>        height: 160px;<br>      &#125;<br><br>      p &#123;<br>        padding-top: 10px;<br>      &#125;<br><br>      .name &#123;<br>        font-size: 16px;<br>      &#125;<br><br>      .desc &#123;<br>        color: #999;<br>        height: 29px;<br>      &#125;<br><br>      .price &#123;<br>        color: $priceColor;<br>        font-size: 20px;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</div>
<h3 id="09.-%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB-%E6%95%B4%E4%BD%93%E8%AE%A4%E8%AF%86%E5%92%8C%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE" tabindex="-1" id="09-一级分类-整体认识和路由配置">09. 一级分类-整体认识和路由配置</h3>
<p>修改 <code>router/index.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// createRouter: 创建 router 实例对象</span><br><span class="hljs-comment">// createWebHistory: 创建 history 模式的路由</span><br><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Layout</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Layout/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Login</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Login/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Home/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Category</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Category/index.vue&#x27;</span><br><br><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br>    <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>),<br>    <span class="hljs-attr">routes</span>: [<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;home&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">Layout</span>,<br>            <span class="hljs-attr">children</span>: [<br>                &#123;<br>                    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>                    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span><br>                &#125;,<br>                &#123;<br>                    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;category/:id&#x27;</span>,<br>                    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Category</span><br>                &#125;<br>            ]<br>        &#125;,<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">Login</span><br>        &#125;,<br>    ],<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure>
<p>修改 <code>LayoutHeader.vue</code> 和 <code>LayoutFixed.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;RouterLink :to=&quot;`/category/$&#123;item.id&#125;`&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/RouterLink&gt;<br></code></pre></td></tr></table></figure>
<h3 id="10.-%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB-%E9%9D%A2%E5%8C%85%E5%B1%91%E5%AF%BC%E8%88%AA%E6%B8%B2%E6%9F%93" tabindex="-1" id="10-一级分类-面包屑导航渲染">10. 一级分类-面包屑导航渲染</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>面包屑导航渲染</strong></p>
<ol>
<li>
<p>准备组件模板</p>
<p><code>views/Category/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>                                    <br>&lt;/script&gt;<br>                                    <br>&lt;template&gt;<br>  &lt;div class=&quot;top-category&quot;&gt;<br>    &lt;div class=&quot;container m-top-20&quot;&gt;<br>      &lt;!-- 面包屑 --&gt;<br>      &lt;div class=&quot;bread-container&quot;&gt;<br>        &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;<br>          &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;<br>          &lt;el-breadcrumb-item&gt;居家&lt;/el-breadcrumb-item&gt;<br>        &lt;/el-breadcrumb&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.top-category &#123;<br>  h3 &#123;<br>    font-size: 28px;<br>    color: #666;<br>    font-weight: normal;<br>    text-align: center;<br>    line-height: 100px;<br>  &#125;<br><br>  .sub-list &#123;<br>    margin-top: 20px;<br>    background-color: #fff;<br>                                                <br>    ul &#123;<br>      display: flex;<br>      padding: 0 32px;<br>      flex-wrap: wrap;<br>                                                <br>      li &#123;<br>        width: 168px;<br>        height: 160px;<br><br><br>        a &#123;<br>          text-align: center;<br>          display: block;<br>          font-size: 16px;<br>                                                <br>          img &#123;<br>            width: 100px;<br>            height: 100px;<br>          &#125;<br>                                                <br>          p &#123;<br>            line-height: 40px;<br>          &#125;<br>                                                <br>          &amp;:hover &#123;<br>            color: $xtxColor;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>                                                <br>  .ref-goods &#123;<br>    background-color: #fff;<br>    margin-top: 20px;<br>    position: relative;<br>                                                <br>    .head &#123;<br>      .xtx-more &#123;<br>        position: absolute;<br>        top: 20px;<br>        right: 20px;<br>      &#125;<br>                                                <br>      .tag &#123;<br>        text-align: center;<br>        color: #999;<br>        font-size: 20px;<br>        position: relative;<br>        top: -20px;<br>      &#125;<br>    &#125;<br>                                                <br>    .body &#123;<br>      display: flex;<br>      justify-content: space-around;<br>      padding: 0 40px 30px;<br>    &#125;<br>  &#125;<br>                                                <br>  .bread-container &#123;<br>    padding: 25px 0;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>封装接口函数</p>
<p><code>src/apis/category.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> httpInstance <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/http&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getCategoryAPI</span>(<span class="hljs-params">id</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/category&#x27;</span>,<br>        <span class="hljs-attr">params</span>: &#123;<br>            id<br>        &#125;<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>调用接口获取数据（使用路由参数）</p>
</li>
<li>
<p>渲染模板</p>
<p><code>views/Category/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getCategoryAPI &#125; from &#x27;@/apis/category&#x27;;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br>import &#123; useRoute &#125; from &#x27;vue-router&#x27;;<br>                                    <br>const categoryData = ref([]);<br>                                    <br>const route = useRoute();<br>                                    <br>const getCategory = async () =&gt; &#123;<br>  const res = await getCategoryAPI(route.params.id);<br>  categoryData.value = res.result;<br>  console.log(categoryData.value);<br>&#125;<br>                                    <br>onMounted(() =&gt; &#123;<br>  getCategory();<br>&#125;)<br>&lt;/script&gt;<br>                                    <br>&lt;template&gt;<br>  &lt;div class=&quot;top-category&quot;&gt;<br>    &lt;div class=&quot;container m-top-20&quot;&gt;<br>      &lt;!-- 面包屑 --&gt;<br>      &lt;div class=&quot;bread-container&quot;&gt;<br>        &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;<br>          &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;<br>          &lt;el-breadcrumb-item&gt;&#123;&#123;categoryData.name&#125;&#125;&lt;/el-breadcrumb-item&gt;<br>        &lt;/el-breadcrumb&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.top-category &#123;<br>  h3 &#123;<br>    font-size: 28px;<br>    color: #666;<br>    font-weight: normal;<br>    text-align: center;<br>    line-height: 100px;<br>  &#125;<br><br>  .sub-list &#123;<br>    margin-top: 20px;<br>    background-color: #fff;<br>                                                <br>    ul &#123;<br>      display: flex;<br>      padding: 0 32px;<br>      flex-wrap: wrap;<br>                                                <br>      li &#123;<br>        width: 168px;<br>        height: 160px;<br><br><br>        a &#123;<br>          text-align: center;<br>          display: block;<br>          font-size: 16px;<br>                                                <br>          img &#123;<br>            width: 100px;<br>            height: 100px;<br>          &#125;<br>                                                <br>          p &#123;<br>            line-height: 40px;<br>          &#125;<br>                                                <br>          &amp;:hover &#123;<br>            color: $xtxColor;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>                                                <br>  .ref-goods &#123;<br>    background-color: #fff;<br>    margin-top: 20px;<br>    position: relative;<br>                                                <br>    .head &#123;<br>      .xtx-more &#123;<br>        position: absolute;<br>        top: 20px;<br>        right: 20px;<br>      &#125;<br>                                                <br>      .tag &#123;<br>        text-align: center;<br>        color: #999;<br>        font-size: 20px;<br>        position: relative;<br>        top: -20px;<br>      &#125;<br>    &#125;<br>                                                <br>    .body &#123;<br>      display: flex;<br>      justify-content: space-around;<br>      padding: 0 40px 30px;<br>    &#125;<br>  &#125;<br>                                                <br>  .bread-container &#123;<br>    padding: 25px 0;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
</ol>
</div>
<h3 id="11.-%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB-%E8%BD%AE%E6%92%AD%E5%9B%BE%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0" tabindex="-1" id="11-一级分类-轮播图功能实现">11. 一级分类-轮播图功能实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>分类轮播图实现</strong></p>
<p>分类轮播图和首页轮播图的区别只有一个，<strong>接口参数不同</strong>，其余逻辑完成一致</p>
<p><strong>请求参数</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>位置</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>distributionSite</td>
<td>query</td>
<td>string</td>
<td>否</td>
<td>示例值：1<br/>说明：广告区域展示位置（投放位置，1 为首页，2 为分类商品页）默认是 1</td>
</tr>
</tbody>
</table>
<p><strong>改造先前的接口（适配参数）</strong></p>
<p><code>src/apis/home.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getBannerAPI</span>(<span class="hljs-params">params = &#123;&#125;</span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; distribution = <span class="hljs-string">&#x27;1&#x27;</span>&#125; = params;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">`home/banner`</span>,<br>        <span class="hljs-attr">params</span>: &#123;<br>            distribution<br>        &#125;<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>迁移首页轮播图逻辑</strong></p>
<p><code>views/Category/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getBannerAPI &#125; from &#x27;@/apis/home&#x27;;<br>import &#123; ref, onMounted &#125; from &#x27;vue&#x27;;<br><br>const bannerList = ref([]);<br><br>const getBanner = async () =&gt; &#123;<br>    const res = await getBannerAPI();<br>    bannerList.value = res.result;<br>&#125;<br><br>onMounted(() =&gt; &#123;<br>    getBanner();<br>&#125;)<br><br>&lt;/script&gt;<br><br><br><br>&lt;template&gt;<br>  &lt;div class=&quot;home-banner&quot;&gt;<br>    &lt;el-carousel height=&quot;500px&quot;&gt;<br>      &lt;el-carousel-item v-for=&quot;item in bannerList&quot; :key=&quot;item.id&quot;&gt;<br>        &lt;img :src=&quot;item.imgUrl&quot; alt=&quot;&quot;&gt;<br>      &lt;/el-carousel-item&gt;<br>    &lt;/el-carousel&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br><br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.home-banner &#123;<br>  width: 1240px;<br>  height: 500px;<br>  position: absolute;<br>  left: 0;<br>  top: 0;<br>  z-index: 98;<br><br>  img &#123;<br>    width: 100%;<br>    height: 500px;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</div>
<h3 id="12.-%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB-%E6%BF%80%E6%B4%BB%E7%8A%B6%E6%80%81%E6%8E%A7%E5%88%B6%E5%92%8C%E5%88%86%E7%B1%BB%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93" tabindex="-1" id="12-一级分类-激活状态控制和分类列表渲染">12. 一级分类-激活状态控制和分类列表渲染</h3>
<p><strong>激活状态显示：</strong></p>
<p>RouterLink 组件默认支持激活样式显示的类名，只需要给 <strong><code>active-class</code> 属性设置对应的类名</strong>即可</p>
<p><code>views/Layout/components/LayoutHeader.vue</code> 和 <code>LayoutFixed.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;RouterLink active-class=&quot;active&quot; :to=&quot;`/category/$&#123;item.id&#125;`&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/RouterLink&gt;<br></code></pre></td></tr></table></figure>
<p><strong>分类列表渲染</strong></p>
<p>分类的数据已经在面包屑导航实现的时候获取到了，只需要通过 <code>v-for</code> 遍历出来即可</p>
<p><strong>准备分类模板：</strong></p>
<p><strong>v-for 遍历已有数据</strong></p>
<p><code>views/Category/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getCategoryAPI &#125; from &#x27;@/apis/category&#x27;;<br>import &#123; getBannerAPI &#125; from &#x27;@/apis/home&#x27;;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br>import &#123; useRoute &#125; from &#x27;vue-router&#x27;;<br>import GoodsItem from &#x27;../Home/components/GoodsItem.vue&#x27;;<br><br>const bannerList = ref([]);<br><br>const getBanner = async () =&gt; &#123;<br>    const res = await getBannerAPI();<br>    bannerList.value = res.result;<br>&#125;<br><br>const categoryData = ref([]);<br><br>const route = useRoute();<br><br>const getCategory = async () =&gt; &#123;<br>    const res = await getCategoryAPI(route.params.id);<br>    categoryData.value = res.result;<br>    console.log(categoryData.value);<br>&#125;<br><br>onMounted(() =&gt; &#123;<br>    getCategory();<br>    getBanner();<br>&#125;)<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;top-category&quot;&gt;<br>        &lt;div class=&quot;container m-top-20&quot;&gt;<br>            &lt;!-- 面包屑 --&gt;<br>            &lt;div class=&quot;bread-container&quot;&gt;<br>                &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;<br>                    &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;<br>                    &lt;el-breadcrumb-item&gt;&#123;&#123; categoryData.name &#125;&#125;&lt;/el-breadcrumb-item&gt;<br>                &lt;/el-breadcrumb&gt;<br>            &lt;/div&gt;<br>            &lt;!-- 轮播图 --&gt;<br>            &lt;div class=&quot;home-banner&quot;&gt;<br>                &lt;el-carousel height=&quot;500px&quot;&gt;<br>                    &lt;el-carousel-item v-for=&quot;item in bannerList&quot; :key=&quot;item.id&quot;&gt;<br>                        &lt;img :src=&quot;item.imgUrl&quot; alt=&quot;&quot;&gt;<br>                    &lt;/el-carousel-item&gt;<br>                &lt;/el-carousel&gt;<br>            &lt;/div&gt;<br>            &lt;!-- 分类商品 --&gt;<br>            &lt;div class=&quot;sub-list&quot;&gt;<br>                &lt;h3&gt;全部分类&lt;/h3&gt;<br>                &lt;ul&gt;<br>                    &lt;li v-for=&quot;i in categoryData.children&quot; :key=&quot;i.id&quot;&gt;<br>                        &lt;RouterLink to=&quot;/&quot;&gt;<br>                            &lt;img :src=&quot;i.picture&quot; /&gt;<br>                            &lt;p&gt;&#123;&#123; i.name &#125;&#125;&lt;/p&gt;<br>                        &lt;/RouterLink&gt;<br>                    &lt;/li&gt;<br>                &lt;/ul&gt;<br>            &lt;/div&gt;<br>            &lt;div class=&quot;ref-goods&quot; v-for=&quot;item in categoryData.children&quot; :key=&quot;item.id&quot;&gt;<br>                &lt;div class=&quot;head&quot;&gt;<br>                    &lt;h3&gt;- &#123;&#123; item.name &#125;&#125;-&lt;/h3&gt;<br>                &lt;/div&gt;<br>                &lt;div class=&quot;body&quot;&gt;<br>                    &lt;GoodsItem v-for=&quot;good in item.goods&quot; :goods=&quot;good&quot; :key=&quot;good.id&quot; /&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.top-category &#123;<br>    h3 &#123;<br>        font-size: 28px;<br>        color: #666;<br>        font-weight: normal;<br>        text-align: center;<br>        line-height: 100px;<br>    &#125;<br><br>    .sub-list &#123;<br>        margin-top: 20px;<br>        background-color: #fff;<br><br>        ul &#123;<br>            display: flex;<br>            padding: 0 32px;<br>            flex-wrap: wrap;<br><br>            li &#123;<br>                width: 168px;<br>                height: 160px;<br><br><br>                a &#123;<br>                    text-align: center;<br>                    display: block;<br>                    font-size: 16px;<br><br>                    img &#123;<br>                        width: 100px;<br>                        height: 100px;<br>                    &#125;<br><br>                    p &#123;<br>                        line-height: 40px;<br>                    &#125;<br><br>                    &amp;:hover &#123;<br>                        color: $xtxColor;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    .ref-goods &#123;<br>        background-color: #fff;<br>        margin-top: 20px;<br>        position: relative;<br><br>        .head &#123;<br>            .xtx-more &#123;<br>                position: absolute;<br>                top: 20px;<br>                right: 20px;<br>            &#125;<br><br>            .tag &#123;<br>                text-align: center;<br>                color: #999;<br>                font-size: 20px;<br>                position: relative;<br>                top: -20px;<br>            &#125;<br>        &#125;<br><br>        .body &#123;<br>            display: flex;<br>            justify-content: space-around;<br>            padding: 0 40px 30px;<br>        &#125;<br>    &#125;<br><br>    .bread-container &#123;<br>        padding: 25px 0;<br>    &#125;<br>&#125;<br><br>.home-banner &#123;<br>    width: 1240px;<br>    height: 500px;<br>    margin: 0 auto;<br><br>    img &#123;<br>        width: 100%;<br>        height: 500px;<br>    &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<h3 id="13.-%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB-%E8%A7%A3%E5%86%B3%E8%B7%AF%E7%94%B1%E7%BC%93%E5%AD%98%E9%97%AE%E9%A2%98" tabindex="-1" id="13-一级分类-解决路由缓存问题">13. 一级分类-解决路由缓存问题</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<ol>
<li>
<p>路由缓存问题产生的原因是什么？</p>
<p>路由只有参数变化时，会复用组件实例</p>
<blockquote>
<p>​	使用带有参数的路由时需要注意的是，当用户从 <code>/users/johnny</code> 导航到 <code>/users/jolyne</code> 时，相同的组件实例将被重复使用。因为两个路由都渲染同个组件，比起销毁再创建，复用则显得更加高效。不过，这也意味着<strong>组件的生命周期钩子不会被调用</strong>。</p>
</div>
</li>
<li>
<p>俩种方案都可以解决路由缓存问题，如何选择呢？</p>
<ul>
<li>
<p>在意性能问题，选择 <code>onBeforeUpdate</code>，精细化控制：</p>
<p><code>views/Category/index.vue</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getCategory</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">id=route.params.id</span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getCategoryAPI</span>(id);<br>    categoryData.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>;<br>&#125;<br><br><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">getCategory</span>();<br>    <span class="hljs-title function_">getBanner</span>();<br>&#125;)<br><br><span class="hljs-title function_">onBeforeRouteUpdate</span>(<span class="hljs-function">(<span class="hljs-params">to</span>) =&gt;</span> &#123;<br>    <span class="hljs-title function_">getCategory</span>(to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>不在意性能问题，选择 <code>key</code>，简单粗暴。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;RouterView :key=&quot;$route.fullPath&quot;/&gt;<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
</blockquote>
<h3 id="14.-%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB-%E4%BD%BF%E7%94%A8%E9%80%BB%E8%BE%91%E5%87%BD%E6%95%B0%E6%8B%86%E5%88%86%E4%B8%9A%E5%8A%A1" tabindex="-1" id="14-一级分类-使用逻辑函数拆分业务">14. 一级分类-使用逻辑函数拆分业务</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>概念理解</strong></p>
<p>基于逻辑函数拆分业务是指把<strong>同一个组件中独立的业务代码通过函数做封装处理</strong>，提升<strong>代码的可维护性</strong></p>
<p><img src="03/08.webp" alt="webp"></p>
<p><strong>具体怎么做</strong></p>
<p>实现步骤：</p>
<ol>
<li>按照业务声明以 <strong><code>use</code> 打头</strong>的逻辑函数</li>
<li>把<strong>独立的业务逻辑</strong>封装到各个函数内部</li>
<li>函数内部把组件中需要用到的数据或者方法 <strong>return 出去</strong></li>
<li>在<strong>组件中调用函数</strong>把数据或者方法组合回来使用</li>
</ol>
</div>
<p>创建 <code>views/Category/composables/useBanner.js</code> 和 <code>views/Category/composables/useCategory.js</code>：</p>
<div class="tabs" id="category_014"><div class="nav-tabs"><button type="button" class="tab active" data-href="category_014-1">views/Category/index.vue</button><button type="button" class="tab" data-href="category_014-2">views/Category/composables/useBanner.js</button><button type="button" class="tab" data-href="category_014-3">views/Category/composables/useCategory.js</button></div><div class="tab-contents"><div class="tab-item-content active" id="category_014-1"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import GoodsItem from &#x27;../Home/components/GoodsItem.vue&#x27;;<br>import &#123; useBanner&#125; from &#x27;./composables/useBanner&#x27;;<br>import &#123; useCategory &#125; from &#x27;./composables/useCategory&#x27;;<br><br>const &#123; bannerList &#125; = useBanner();<br>const &#123; categoryData &#125; = useCategory();<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></div><div class="tab-item-content" id="category_014-2"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; getBannerAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/home&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useBanner</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> bannerList = <span class="hljs-title function_">ref</span>([]);<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getBanner</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getBannerAPI</span>();<br>        bannerList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>;<br>    &#125;<br>    <br>    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-title function_">getBanner</span>();<br>    &#125;);<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        bannerList<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></div><div class="tab-item-content" id="category_014-3"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; getCategoryAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/category&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; onBeforeRouteUpdate, useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useCategory</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>();<br><br>    <span class="hljs-keyword">const</span> categoryData = <span class="hljs-title function_">ref</span>([]);<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getCategory</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">id = route.params.id</span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getCategoryAPI</span>(id);<br>        categoryData.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>;<br>    &#125;<br><br>    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-title function_">getCategory</span>();<br>    &#125;);<br><br>    <span class="hljs-title function_">onBeforeRouteUpdate</span>(<span class="hljs-function">(<span class="hljs-params">to</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">getCategory</span>(to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>);<br>    &#125;);<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        categoryData<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></div></div></div>
<h2 id="day04" tabindex="-1" id="day04">day04</h2>
<h3 id="01.-%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB-%E6%95%B4%E4%BD%93%E8%AE%A4%E8%AF%86%E5%92%8C%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE" tabindex="-1" id="01-二级分类-整体认识和路由配置">01. 二级分类-整体认识和路由配置</h3>
<p><strong>创建路由组件</strong></p>
<p>创建 <code>src/views/SubCategory/index.vue</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br><br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;div class=&quot;container &quot;&gt;<br>    &lt;!-- 面包屑 --&gt;<br>    &lt;div class=&quot;bread-container&quot;&gt;<br>      &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;<br>        &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;<br>        &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;居家<br>        &lt;/el-breadcrumb-item&gt;<br>        &lt;el-breadcrumb-item&gt;居家生活用品&lt;/el-breadcrumb-item&gt;<br>      &lt;/el-breadcrumb&gt;<br>    &lt;/div&gt;<br>    &lt;div class=&quot;sub-container&quot;&gt;<br>      &lt;el-tabs&gt;<br>        &lt;el-tab-pane label=&quot;最新商品&quot; name=&quot;publishTime&quot;&gt;&lt;/el-tab-pane&gt;<br>        &lt;el-tab-pane label=&quot;最高人气&quot; name=&quot;orderNum&quot;&gt;&lt;/el-tab-pane&gt;<br>        &lt;el-tab-pane label=&quot;评论最多&quot; name=&quot;evaluateNum&quot;&gt;&lt;/el-tab-pane&gt;<br>      &lt;/el-tabs&gt;<br>      &lt;div class=&quot;body&quot;&gt;<br>         &lt;!-- 商品列表--&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br><br>&lt;/template&gt;<br><br><br><br>&lt;style lang=&quot;scss&quot; scoped&gt;<br>.bread-container &#123;<br>  padding: 25px 0;<br>  color: #666;<br>&#125;<br><br>.sub-container &#123;<br>  padding: 20px 10px;<br>  background-color: #fff;<br><br>  .body &#123;<br>    display: flex;<br>    flex-wrap: wrap;<br>    padding: 0 10px;<br>  &#125;<br><br>  .goods-item &#123;<br>    display: block;<br>    width: 220px;<br>    margin-right: 20px;<br>    padding: 20px 30px;<br>    text-align: center;<br><br>    img &#123;<br>      width: 160px;<br>      height: 160px;<br>    &#125;<br><br>    p &#123;<br>      padding-top: 10px;<br>    &#125;<br><br>    .name &#123;<br>      font-size: 16px;<br>    &#125;<br><br>    .desc &#123;<br>      color: #999;<br>      height: 29px;<br>    &#125;<br><br>    .price &#123;<br>      color: $priceColor;<br>      font-size: 20px;<br>    &#125;<br>  &#125;<br><br>  .pagination-container &#123;<br>    margin-top: 20px;<br>    display: flex;<br>    justify-content: center;<br>  &#125;<br><br><br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<p><strong>配置路由关系</strong></p>
<p>修改 <code>src/router/index.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// createRouter: 创建 router 实例对象</span><br><span class="hljs-comment">// createWebHistory: 创建 history 模式的路由</span><br><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Layout</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Layout/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Login</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Login/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Home/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Category</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Category/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">SubCategory</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/SubCategory/index.vue&#x27;</span><br><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br>    <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>),<br>    <span class="hljs-attr">routes</span>: [<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;home&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">Layout</span>,<br>            <span class="hljs-attr">children</span>: [<br>                &#123;<br>                    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>                    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span><br>                &#125;,<br>                &#123;<br>                    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;category/:id&#x27;</span>,<br>                    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Category</span><br>                &#125;,<br>                &#123;<br>                  <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;subcategory/sub/:id&#x27;</span>,<br>                  <span class="hljs-attr">component</span>: <span class="hljs-title class_">SubCategory</span><br>                &#125;<br>            ]<br>        &#125;,<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">Login</span><br>        &#125;,<br>    ],<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure>
<p><strong>修改模板实现跳转</strong></p>
<p>修改 <code>src/views/Category/index.vue</code>（分类商品下）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;RouterLink :to=&quot;`/category/sub/$&#123;i.id&#125;`&quot;&gt;<br></code></pre></td></tr></table></figure>
<p><img src="04/01.webp" alt="webp"></p>
<h3 id="02.-%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB-%E9%9D%A2%E5%8C%85%E5%B1%91%E5%AF%BC%E8%88%AA%E5%AE%9E%E7%8E%B0" tabindex="-1" id="02-二级分类-面包屑导航实现">02. 二级分类-面包屑导航实现</h3>
<p><strong>封装接口</strong></p>
<p>给 <code>src/apis/category.js</code> 里加一个 <code>getCategoryFilterAPI</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getCategoryFilterAPI</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/category/sub/filter&#x27;</span>,<br>        <span class="hljs-attr">params</span>: &#123;<br>            id<br>        &#125;<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>调用接口渲染模板</strong></p>
<p>修改 <code>SubCategory/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getCategoryFilterAPI &#125; from &#x27;@/apis/category&#x27;;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br>import &#123; useRoute &#125; from &#x27;vue-router&#x27;;<br><br>const categoryData = ref(&#123;&#125;);<br>const router = useRoute();<br>const getCategoryData = async () =&gt; &#123;<br>    const res = await getCategoryFilterAPI(router.params.id);<br>    categoryData.value = res.result;<br>    console.log(categoryData.value);<br>&#125;<br><br>onMounted(() =&gt; getCategoryData());<br><br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p><strong>测试跳转</strong></p>
<p>修改 <code>SubCategory/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div class=&quot;container &quot;&gt;<br>        &lt;!-- 面包屑 --&gt;<br>        &lt;div class=&quot;bread-container&quot;&gt;<br>            &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;<br>                &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;<br>                &lt;el-breadcrumb-item :to=&quot;&#123; path: `/category/$&#123;categoryData.parentId&#125;` &#125;&quot;&gt;&#123;&#123; categoryData.parentName &#125;&#125;&lt;/el-breadcrumb-item&gt;<br>                &lt;el-breadcrumb-item :to=&quot;&#123; path: `/category/$&#123;categoryData.id&#125;` &#125;&quot;&gt;&#123;&#123; categoryData.name &#125;&#125;&lt;/el-breadcrumb-item&gt;<br>            &lt;/el-breadcrumb&gt;<br>        &lt;/div&gt;<br>        &lt;div class=&quot;sub-container&quot;&gt;<br>            &lt;el-tabs&gt;<br>                &lt;el-tab-pane label=&quot;最新商品&quot; name=&quot;publishTime&quot;&gt;&lt;/el-tab-pane&gt;<br>                &lt;el-tab-pane label=&quot;最高人气&quot; name=&quot;orderNum&quot;&gt;&lt;/el-tab-pane&gt;<br>                &lt;el-tab-pane label=&quot;评论最多&quot; name=&quot;evaluateNum&quot;&gt;&lt;/el-tab-pane&gt;<br>            &lt;/el-tabs&gt;<br>            &lt;div class=&quot;body&quot;&gt;<br>                &lt;!-- 商品列表--&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br><br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="03.-%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB-%E5%9F%BA%E7%A1%80%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E5%AE%9E%E7%8E%B0" tabindex="-1" id="03-二级分类-基础商品列表实现">03. 二级分类-基础商品列表实现</h3>
<p><strong>实现基础列表渲染（基础参数）</strong></p>
<p>给 <code>src/apis/category.js</code> 里加一个 <code>getSubCategoryAPI</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getSubCategoryAPI</span> = (<span class="hljs-params">data</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/category/goods/temporary&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>        data<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>添加额外参数实现筛选功能</strong></p>
<p>修改 <code>SubCategory/index.vue</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; getCategoryFilterAPI, getSubCategoryAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/category&#x27;</span>;<br><br>...<br><br><span class="hljs-comment">// 获取基础列表数据渲染</span><br><span class="hljs-keyword">const</span> goodsList = <span class="hljs-title function_">ref</span>([]);<br><span class="hljs-keyword">const</span> reqData = <span class="hljs-title function_">ref</span>(&#123;<br>    <span class="hljs-attr">categoryId</span>: router.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>,<br>    <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">pageSize</span>: <span class="hljs-number">20</span>,<br>    <span class="hljs-attr">sortField</span>: <span class="hljs-string">&#x27;publishTime&#x27;</span>,<br>&#125;);<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">getGoodsList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getSubCategoryAPI</span>(reqData.<span class="hljs-property">value</span>);<br>    goodsList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>.<span class="hljs-property">items</span>;<br>&#125;<br><br><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getGoodsList</span>());<br></code></pre></td></tr></table></figure>
<p>商品列表中添加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;GoodsItem v-for=&quot;goods in goodsList&quot; :goods=&quot;goods&quot; :key=&quot;goods.id&quot;&gt;&lt;/GoodsItem&gt;<br></code></pre></td></tr></table></figure>
<h3 id="04.-%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB-%E5%88%97%E8%A1%A8%E7%AD%9B%E9%80%89%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0" tabindex="-1" id="04-二级分类-列表筛选功能实现">04. 二级分类-列表筛选功能实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p>核心逻辑：点击 tab，<strong>切换筛选条件参数 sortField</strong>，重新发送列表请求</p>
</div>
<p><strong>获取激活项数据</strong></p>
<p>根据 <a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/tabs">组件 | Element</a> 中的用法，设置 <code>SubCategory/index.vue</code> 中的 <code>el-tabs</code> 组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;el-tabs v-model=&quot;reqData.sortField&quot; @tab-change=&quot;tabChange&quot;&gt;<br>    &lt;el-tab-pane label=&quot;最新商品&quot; name=&quot;publishTime&quot;&gt;&lt;/el-tab-pane&gt;<br>    &lt;el-tab-pane label=&quot;最高人气&quot; name=&quot;orderNum&quot;&gt;&lt;/el-tab-pane&gt;<br>    &lt;el-tab-pane label=&quot;评论最多&quot; name=&quot;evaluateNum&quot;&gt;&lt;/el-tab-pane&gt;<br>&lt;/el-tabs&gt;<br></code></pre></td></tr></table></figure>
<p><code>scripts</code> 中添加切换 tab 的回调函数的实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// tab 切换回调</span><br><span class="hljs-type">const</span> <span class="hljs-variable">tabChange</span> <span class="hljs-operator">=</span> () =&gt; &#123;<br>    console.log(<span class="hljs-string">&#x27;tab 切换了&#x27;</span>, reqData.value.sortField);<br>    reqData.value.page = <span class="hljs-number">1</span>;<br>    getGoodsList();<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="05.-%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB-%E5%88%97%E8%A1%A8%E6%97%A0%E9%99%90%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0" tabindex="-1" id="05-二级分类-列表无限加载实现">05. 二级分类-列表无限加载实现</h3>
<p><strong>无限加载功能实现</strong></p>
<p><img src="04/02.webp" alt="webp"></p>
<p>核心实现逻辑：使用 elementPlus 提供的 v-infinite-scroll 指令<strong>监听是否满足触底条件</strong>，满足加载条件时让<strong>页数参数加一获取下一页数据，做新老数据拼接渲染</strong>。</p>
<p><strong>配置 v-infinite-scroll</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;div class=&quot;body&quot; v-infinite-scroll=&quot;load&quot;&gt;<br>    &lt;!-- 商品列表--&gt;<br>    &lt;GoodsItem v-for=&quot;goods in goodsList&quot; :goods=&quot;goods&quot; :key=&quot;goods.id&quot;&gt;&lt;/GoodsItem&gt;<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure>
<p><strong>页数加一获取下一页数据</strong></p>
<p><strong>老数据和新数据拼接</strong></p>
<p><strong>加载完毕结束监听</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 加载更多</span><br><span class="hljs-keyword">const</span> disabled = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">load</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;加载更多&#x27;</span>);<br>    reqData.<span class="hljs-property">value</span>.<span class="hljs-property">page</span>++;<br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getSubCategoryAPI</span>(reqData.<span class="hljs-property">value</span>);<br>    goodsList.<span class="hljs-property">value</span> = [...goodsList.<span class="hljs-property">value</span>, ...res.<span class="hljs-property">result</span>.<span class="hljs-property">items</span>];<br>    <span class="hljs-keyword">if</span> (res.<span class="hljs-property">result</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) &#123;<br>        disabled.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="06.-%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB-%E5%AE%9A%E5%88%B6%E8%B7%AF%E7%94%B1%E6%BB%9A%E5%8A%A8%E8%A1%8C%E4%B8%BA" tabindex="-1" id="06-二级分类-定制路由滚动行为">06. 二级分类-定制路由滚动行为</h3>
<p><strong>定制路由行为解决什么问题</strong></p>
<p>在不同路由切换的时候，可以<strong>自动滚动到页面的顶部</strong>，而不是停留在原先的位置</p>
<p>如何配置：<code>vue-router</code> 支持 <code>scrollBehavior</code> 配置项，可以指定路由切换时的滚动位置</p>
<p>编辑 <code>src/router/index.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br>	...<br>    <span class="hljs-title function_">scrollBehavior</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">top</span>: <span class="hljs-number">0</span> &#125;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
<h3 id="07.-%E8%AF%A6%E6%83%85%E9%A1%B5-%E6%95%B4%E4%BD%93%E8%AE%A4%E8%AF%86%E5%92%8C%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE" tabindex="-1" id="07-详情页-整体认识和路由配置">07. 详情页-整体认识和路由配置</h3>
<p><strong>创建详情组件</strong></p>
<p>创建 <code>src/views/Detail/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br><br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;xtx-goods-page&quot;&gt;<br>        &lt;div class=&quot;container&quot;&gt;<br>            &lt;div class=&quot;bread-container&quot;&gt;<br>                &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;<br>                    &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;<br>                    &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;母婴<br>                    &lt;/el-breadcrumb-item&gt;<br>                    &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;跑步鞋<br>                    &lt;/el-breadcrumb-item&gt;<br>                    &lt;el-breadcrumb-item&gt;抓绒保暖，毛毛虫子儿童运动鞋&lt;/el-breadcrumb-item&gt;<br>                &lt;/el-breadcrumb&gt;<br>            &lt;/div&gt;<br>            &lt;!-- 商品信息 --&gt;<br>            &lt;div class=&quot;info-container&quot;&gt;<br>                &lt;div&gt;<br>                    &lt;div class=&quot;goods-info&quot;&gt;<br>                        &lt;div class=&quot;media&quot;&gt;<br>                            &lt;!-- 图片预览区 --&gt;<br><br>                            &lt;!-- 统计数量 --&gt;<br>                            &lt;ul class=&quot;goods-sales&quot;&gt;<br>                                &lt;li&gt;<br>                                    &lt;p&gt;销量人气&lt;/p&gt;<br>                                    &lt;p&gt; 100+ &lt;/p&gt;<br>                                    &lt;p&gt;&lt;i class=&quot;iconfont icon-task-filling&quot;&gt;&lt;/i&gt;销量人气&lt;/p&gt;<br>                                &lt;/li&gt;<br>                                &lt;li&gt;<br>                                    &lt;p&gt;商品评价&lt;/p&gt;<br>                                    &lt;p&gt;200+&lt;/p&gt;<br>                                    &lt;p&gt;&lt;i class=&quot;iconfont icon-comment-filling&quot;&gt;&lt;/i&gt;查看评价&lt;/p&gt;<br>                                &lt;/li&gt;<br>                                &lt;li&gt;<br>                                    &lt;p&gt;收藏人气&lt;/p&gt;<br>                                    &lt;p&gt;300+&lt;/p&gt;<br>                                    &lt;p&gt;&lt;i class=&quot;iconfont icon-favorite-filling&quot;&gt;&lt;/i&gt;收藏商品&lt;/p&gt;<br>                                &lt;/li&gt;<br>                                &lt;li&gt;<br>                                    &lt;p&gt;品牌信息&lt;/p&gt;<br>                                    &lt;p&gt;400+&lt;/p&gt;<br>                                    &lt;p&gt;&lt;i class=&quot;iconfont icon-dynamic-filling&quot;&gt;&lt;/i&gt;品牌主页&lt;/p&gt;<br>                                &lt;/li&gt;<br>                            &lt;/ul&gt;<br>                        &lt;/div&gt;<br>                        &lt;div class=&quot;spec&quot;&gt;<br>                            &lt;!-- 商品信息区 --&gt;<br>                            &lt;p class=&quot;g-name&quot;&gt; 抓绒保暖，毛毛虫儿童鞋 &lt;/p&gt;<br>                            &lt;p class=&quot;g-desc&quot;&gt;好穿 &lt;/p&gt;<br>                            &lt;p class=&quot;g-price&quot;&gt;<br>                                &lt;span&gt;200&lt;/span&gt;<br>                                &lt;span&gt; 100&lt;/span&gt;<br>                            &lt;/p&gt;<br>                            &lt;div class=&quot;g-service&quot;&gt;<br>                                &lt;dl&gt;<br>                                    &lt;dt&gt;促销&lt;/dt&gt;<br>                                    &lt;dd&gt;12月好物放送，App领券购买直降120元&lt;/dd&gt;<br>                                &lt;/dl&gt;<br>                                &lt;dl&gt;<br>                                    &lt;dt&gt;服务&lt;/dt&gt;<br>                                    &lt;dd&gt;<br>                                        &lt;span&gt;无忧退货&lt;/span&gt;<br>                                        &lt;span&gt;快速退款&lt;/span&gt;<br>                                        &lt;span&gt;免费包邮&lt;/span&gt;<br>                                        &lt;a href=&quot;javascript:;&quot;&gt;了解详情&lt;/a&gt;<br>                                    &lt;/dd&gt;<br>                                &lt;/dl&gt;<br>                            &lt;/div&gt;<br>                            &lt;!-- sku组件 --&gt;<br><br>                            &lt;!-- 数据组件 --&gt;<br><br>                            &lt;!-- 按钮组件 --&gt;<br>                            &lt;div&gt;<br>                                &lt;el-button size=&quot;large&quot; class=&quot;btn&quot;&gt;<br>                                    加入购物车<br>                                &lt;/el-button&gt;<br>                            &lt;/div&gt;<br><br>                        &lt;/div&gt;<br>                    &lt;/div&gt;<br>                    &lt;div class=&quot;goods-footer&quot;&gt;<br>                        &lt;div class=&quot;goods-article&quot;&gt;<br>                            &lt;!-- 商品详情 --&gt;<br>                            &lt;div class=&quot;goods-tabs&quot;&gt;<br>                                &lt;nav&gt;<br>                                    &lt;a&gt;商品详情&lt;/a&gt;<br>                                &lt;/nav&gt;<br>                                &lt;div class=&quot;goods-detail&quot;&gt;<br>                                    &lt;!-- 属性 --&gt;<br>                                    &lt;ul class=&quot;attrs&quot;&gt;<br>                                        &lt;li v-for=&quot;item in 3&quot; :key=&quot;item.value&quot;&gt;<br>                                            &lt;span class=&quot;dt&quot;&gt;白色&lt;/span&gt;<br>                                            &lt;span class=&quot;dd&quot;&gt;纯棉&lt;/span&gt;<br>                                        &lt;/li&gt;<br>                                    &lt;/ul&gt;<br>                                    &lt;!-- 图片 --&gt;<br><br>                                &lt;/div&gt;<br>                            &lt;/div&gt;<br>                        &lt;/div&gt;<br>                        &lt;!-- 24热榜+专题推荐 --&gt;<br>                        &lt;div class=&quot;goods-aside&quot;&gt;<br><br>                        &lt;/div&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.xtx-goods-page &#123;<br>    .goods-info &#123;<br>        min-height: 600px;<br>        background: #fff;<br>        display: flex;<br><br>        .media &#123;<br>            width: 580px;<br>            height: 600px;<br>            padding: 30px 50px;<br>        &#125;<br><br>        .spec &#123;<br>            flex: 1;<br>            padding: 30px 30px 30px 0;<br>        &#125;<br>    &#125;<br><br>    .goods-footer &#123;<br>        display: flex;<br>        margin-top: 20px;<br><br>        .goods-article &#123;<br>            width: 940px;<br>            margin-right: 20px;<br>        &#125;<br><br>        .goods-aside &#123;<br>            width: 280px;<br>            min-height: 1000px;<br>        &#125;<br>    &#125;<br><br>    .goods-tabs &#123;<br>        min-height: 600px;<br>        background: #fff;<br>    &#125;<br><br>    .goods-warn &#123;<br>        min-height: 600px;<br>        background: #fff;<br>        margin-top: 20px;<br>    &#125;<br><br>    .number-box &#123;<br>        display: flex;<br>        align-items: center;<br><br>        .label &#123;<br>            width: 60px;<br>            color: #999;<br>            padding-left: 10px;<br>        &#125;<br>    &#125;<br><br>    .g-name &#123;<br>        font-size: 22px;<br>    &#125;<br><br>    .g-desc &#123;<br>        color: #999;<br>        margin-top: 10px;<br>    &#125;<br><br>    .g-price &#123;<br>        margin-top: 10px;<br><br>        span &#123;<br>            &amp;::before &#123;<br>                content: &quot;¥&quot;;<br>                font-size: 14px;<br>            &#125;<br><br>            &amp;:first-child &#123;<br>                color: $priceColor;<br>                margin-right: 10px;<br>                font-size: 22px;<br>            &#125;<br><br>            &amp;:last-child &#123;<br>                color: #999;<br>                text-decoration: line-through;<br>                font-size: 16px;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    .g-service &#123;<br>        background: #f5f5f5;<br>        width: 500px;<br>        padding: 20px 10px 0 10px;<br>        margin-top: 10px;<br><br>        dl &#123;<br>            padding-bottom: 20px;<br>            display: flex;<br>            align-items: center;<br><br>            dt &#123;<br>                width: 50px;<br>                color: #999;<br>            &#125;<br><br>            dd &#123;<br>                color: #666;<br><br>                &amp;:last-child &#123;<br>                    span &#123;<br>                        margin-right: 10px;<br><br>                        &amp;::before &#123;<br>                            content: &quot;•&quot;;<br>                            color: $xtxColor;<br>                            margin-right: 2px;<br>                        &#125;<br>                    &#125;<br><br>                    a &#123;<br>                        color: $xtxColor;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    .goods-sales &#123;<br>        display: flex;<br>        width: 400px;<br>        align-items: center;<br>        text-align: center;<br>        height: 140px;<br><br>        li &#123;<br>            flex: 1;<br>            position: relative;<br><br>            ~li::after &#123;<br>                position: absolute;<br>                top: 10px;<br>                left: 0;<br>                height: 60px;<br>                border-left: 1px solid #e4e4e4;<br>                content: &quot;&quot;;<br>            &#125;<br><br>            p &#123;<br>                &amp;:first-child &#123;<br>                    color: #999;<br>                &#125;<br><br>                &amp;:nth-child(2) &#123;<br>                    color: $priceColor;<br>                    margin-top: 10px;<br>                &#125;<br><br>                &amp;:last-child &#123;<br>                    color: #666;<br>                    margin-top: 10px;<br><br>                    i &#123;<br>                        color: $xtxColor;<br>                        font-size: 14px;<br>                        margin-right: 2px;<br>                    &#125;<br><br>                    &amp;:hover &#123;<br>                        color: $xtxColor;<br>                        cursor: pointer;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.goods-tabs &#123;<br>    min-height: 600px;<br>    background: #fff;<br><br>    nav &#123;<br>        height: 70px;<br>        line-height: 70px;<br>        display: flex;<br>        border-bottom: 1px solid #f5f5f5;<br><br>        a &#123;<br>            padding: 0 40px;<br>            font-size: 18px;<br>            position: relative;<br><br>            &gt;span &#123;<br>                color: $priceColor;<br>                font-size: 16px;<br>                margin-left: 10px;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.goods-detail &#123;<br>    padding: 40px;<br><br>    .attrs &#123;<br>        display: flex;<br>        flex-wrap: wrap;<br>        margin-bottom: 30px;<br><br>        li &#123;<br>            display: flex;<br>            margin-bottom: 10px;<br>            width: 50%;<br><br>            .dt &#123;<br>                width: 100px;<br>                color: #999;<br>            &#125;<br><br>            .dd &#123;<br>                flex: 1;<br>                color: #666;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    &gt;img &#123;<br>        width: 100%;<br>    &#125;<br>&#125;<br><br>.btn &#123;<br>    margin-top: 20px;<br><br>&#125;<br><br>.bread-container &#123;<br>    padding: 25px 0;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<p><strong>绑定路由关系（参数）</strong></p>
<p>编辑 <code>src/router/index.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// createRouter: 创建 router 实例对象</span><br><span class="hljs-comment">// createWebHistory: 创建 history 模式的路由</span><br><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Layout</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Layout/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Login</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Login/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Home/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Category</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Category/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">SubCategory</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/SubCategory/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Detail</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Detail/index.vue&#x27;</span><br><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br>    <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>),<br>    <span class="hljs-attr">routes</span>: [<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;home&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">Layout</span>,<br>            <span class="hljs-attr">children</span>: [<br>                &#123;<br>                    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>                    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span><br>                &#125;,<br>                &#123;<br>                    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;category/:id&#x27;</span>,<br>                    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Category</span><br>                &#125;,<br>                &#123;<br>                  <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;category/sub/:id&#x27;</span>,<br>                  <span class="hljs-attr">component</span>: <span class="hljs-title class_">SubCategory</span><br>                &#125;,<br>                &#123;<br>                  <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;detail/:id&#x27;</span>,<br>                  <span class="hljs-attr">component</span>: <span class="hljs-title class_">Detail</span><br>                &#125;<br>            ]<br>        &#125;,<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">Login</span><br>        &#125;,<br>    ],<br>    <span class="hljs-title function_">scrollBehavior</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">top</span>: <span class="hljs-number">0</span> &#125;<br>    &#125;<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure>
<p><strong>绑定模板测试跳转</strong></p>
<p>修改 <code>src/views/Home/components/HomeNew.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;HomePanel title=&quot;新品推荐&quot; sub-title=&quot;新鲜出炉 品质靠谱&quot;&gt;<br>        &lt;ul class=&quot;goods-list&quot;&gt;<br>            &lt;li v-for=&quot;item in newList&quot; :key=&quot;item.id&quot;&gt;<br>                &lt;RouterLink :to=&quot;`/detail/$&#123;item.id&#125;`&quot;&gt;<br>                    &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot; /&gt;<br>                    &lt;p class=&quot;name&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/p&gt;<br>                    &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; item.price &#125;&#125;&lt;/p&gt;<br>                &lt;/RouterLink&gt;<br>            &lt;/li&gt;<br>        &lt;/ul&gt;<br>    &lt;/HomePanel&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="08.-%E8%AF%A6%E6%83%85%E9%A1%B5-%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93" tabindex="-1" id="08-详情页-基础数据渲染">08. 详情页-基础数据渲染</h3>
<p><strong>封装接口</strong></p>
<p>编辑 <code>src/apis/details.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> httpInstance <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/http&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDetail</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">`/goods`</span>,<br>    <span class="hljs-attr">params</span>: &#123;<br>      id<br>    &#125;<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>调用获取数据</strong></p>
<p><strong>渲染模板</strong></p>
<p>修改 <code>src/Detail/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getDetail &#125; from &#x27;@/apis/detail&#x27;;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br>import &#123; useRoute &#125; from &#x27;vue-router&#x27;;<br><br>const goods = ref(&#123;&#125;);<br>const route = useRoute();<br>const getGoods = async () =&gt; &#123;<br>    const res = await getDetail(route.params.id);<br>    goods.value = res.result;<br>&#125;;<br><br>onMounted(()=&gt;getGoods());<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;xtx-goods-page&quot;&gt;<br>        &lt;div class=&quot;container&quot; v-if=&quot;goods.details&quot;&gt;<br>            &lt;div class=&quot;bread-container&quot;&gt;<br>                &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;<br>                    &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;<br>                    &lt;el-breadcrumb-item :to=&quot;&#123; path: `/category/$&#123;goods.categories[1].id&#125;` &#125;&quot;&gt;&#123;&#123; goods.categories[1].name &#125;&#125;<br>                    &lt;/el-breadcrumb-item&gt;<br>                    &lt;el-breadcrumb-item :to=&quot;&#123; path: `/category/sub/$&#123;goods.categories[0].id&#125;` &#125;&quot;&gt;&#123;&#123; goods.categories[0].name &#125;&#125;<br>                    &lt;/el-breadcrumb-item&gt;<br>                    &lt;el-breadcrumb-item&gt;抓绒保暖，毛毛虫子儿童运动鞋&lt;/el-breadcrumb-item&gt;<br>                &lt;/el-breadcrumb&gt;<br>            &lt;/div&gt;<br>            &lt;!-- 商品信息 --&gt;<br>            &lt;div class=&quot;info-container&quot;&gt;<br>                &lt;div&gt;<br>                    &lt;div class=&quot;goods-info&quot;&gt;<br>                        &lt;div class=&quot;media&quot;&gt;<br>                            &lt;!-- 图片预览区 --&gt;<br><br>                            &lt;!-- 统计数量 --&gt;<br>                            &lt;ul class=&quot;goods-sales&quot;&gt;<br>                                &lt;li&gt;<br>                                    &lt;p&gt;销量人气&lt;/p&gt;<br>                                    &lt;p&gt; &#123;&#123; goods.salesCount &#125;&#125;+ &lt;/p&gt;<br>                                    &lt;p&gt;&lt;i class=&quot;iconfont icon-task-filling&quot;&gt;&lt;/i&gt;销量人气&lt;/p&gt;<br>                                &lt;/li&gt;<br>                                &lt;li&gt;<br>                                    &lt;p&gt;商品评价&lt;/p&gt;<br>                                    &lt;p&gt; &#123;&#123; goods.commentCount &#125;&#125;+&lt;/p&gt;<br>                                    &lt;p&gt;&lt;i class=&quot;iconfont icon-comment-filling&quot;&gt;&lt;/i&gt;查看评价&lt;/p&gt;<br>                                &lt;/li&gt;<br>                                &lt;li&gt;<br>                                    &lt;p&gt;收藏人气&lt;/p&gt;<br>                                    &lt;p&gt; &#123;&#123; goods.collectCount &#125;&#125;+&lt;/p&gt;<br>                                    &lt;p&gt;&lt;i class=&quot;iconfont icon-favorite-filling&quot;&gt;&lt;/i&gt;收藏商品&lt;/p&gt;<br>                                &lt;/li&gt;<br>                                &lt;li&gt;<br>                                    &lt;p&gt;品牌信息&lt;/p&gt;<br>                                    &lt;p&gt; &#123;&#123; goods.brand.name &#125;&#125;&lt;/p&gt;<br>                                    &lt;p&gt;&lt;i class=&quot;iconfont icon-dynamic-filling&quot;&gt;&lt;/i&gt;品牌主页&lt;/p&gt;<br>                                &lt;/li&gt;<br>                            &lt;/ul&gt;<br>                        &lt;/div&gt;<br>                        &lt;div class=&quot;spec&quot;&gt;<br>                            &lt;!-- 商品信息区 --&gt;<br>                            &lt;p class=&quot;g-name&quot;&gt; 抓绒保暖，毛毛虫儿童鞋 &lt;/p&gt;<br>                            &lt;p class=&quot;g-desc&quot;&gt;好穿 &lt;/p&gt;<br>                            &lt;p class=&quot;g-price&quot;&gt;<br>                                &lt;span&gt;200&lt;/span&gt;<br>                                &lt;span&gt; 100&lt;/span&gt;<br>                            &lt;/p&gt;<br>                            &lt;div class=&quot;g-service&quot;&gt;<br>                                &lt;dl&gt;<br>                                    &lt;dt&gt;促销&lt;/dt&gt;<br>                                    &lt;dd&gt;12月好物放送，App领券购买直降120元&lt;/dd&gt;<br>                                &lt;/dl&gt;<br>                                &lt;dl&gt;<br>                                    &lt;dt&gt;服务&lt;/dt&gt;<br>                                    &lt;dd&gt;<br>                                        &lt;span&gt;无忧退货&lt;/span&gt;<br>                                        &lt;span&gt;快速退款&lt;/span&gt;<br>                                        &lt;span&gt;免费包邮&lt;/span&gt;<br>                                        &lt;a href=&quot;javascript:;&quot;&gt;了解详情&lt;/a&gt;<br>                                    &lt;/dd&gt;<br>                                &lt;/dl&gt;<br>                            &lt;/div&gt;<br>                            &lt;!-- sku组件 --&gt;<br><br>                            &lt;!-- 数据组件 --&gt;<br><br>                            &lt;!-- 按钮组件 --&gt;<br>                            &lt;div&gt;<br>                                &lt;el-button size=&quot;large&quot; class=&quot;btn&quot;&gt;<br>                                    加入购物车<br>                                &lt;/el-button&gt;<br>                            &lt;/div&gt;<br><br>                        &lt;/div&gt;<br>                    &lt;/div&gt;<br>                    &lt;div class=&quot;goods-footer&quot;&gt;<br>                        &lt;div class=&quot;goods-article&quot;&gt;<br>                            &lt;!-- 商品详情 --&gt;<br>                            &lt;div class=&quot;goods-tabs&quot;&gt;<br>                                &lt;nav&gt;<br>                                    &lt;a&gt;商品详情&lt;/a&gt;<br>                                &lt;/nav&gt;<br>                                &lt;div class=&quot;goods-detail&quot;&gt;<br>                                    &lt;!-- 属性 --&gt;<br>                                    &lt;ul class=&quot;attrs&quot;&gt;<br>                                        &lt;li v-for=&quot;item in 3&quot; :key=&quot;item.value&quot;&gt;<br>                                            &lt;span class=&quot;dt&quot;&gt;白色&lt;/span&gt;<br>                                            &lt;span class=&quot;dd&quot;&gt;纯棉&lt;/span&gt;<br>                                        &lt;/li&gt;<br>                                    &lt;/ul&gt;<br>                                    &lt;!-- 图片 --&gt;<br><br>                                &lt;/div&gt;<br>                            &lt;/div&gt;<br>                        &lt;/div&gt;<br>                        &lt;!-- 24热榜+专题推荐 --&gt;<br>                        &lt;div class=&quot;goods-aside&quot;&gt;<br><br>                        &lt;/div&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p>渲染模版时遇到对象的多层属性（如 <code>good.details.pictures</code>）访问可能出现什么问题？</p>
<blockquote>
<p>TypeError: Cannot read properties of undefined (reading ‘properties’)</p>
</div>
</blockquote>
<h3 id="09.-%E8%AF%A6%E6%83%85%E9%A1%B5-%E7%83%AD%E6%A6%9C%E5%8C%BA-%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%92%8C%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93" tabindex="-1" id="09-详情页-热榜区-基础组件封装和数据渲染">09. 详情页-热榜区-基础组件封装和数据渲染</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><img src="04/03.webp" alt="webp"></p>
<p>结论：两块热榜相比，<strong>结构一致，标题 title 和列表内容不同</strong></p>
</div>
<p><strong>封装 Hot 热榜组件</strong></p>
<p>在 <code>src/apis/details.js</code> 中封装接口：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getHotGoodsAPI</span> = (<span class="hljs-params">&#123;id, type, limit=<span class="hljs-number">3</span>&#125;</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/goods/hot&#x27;</span>,<br>        <span class="hljs-attr">params</span>: &#123;<br>            id,<br>            type,<br>            limit<br>        &#125;<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>创建 <code>src/views/Details/components/DetailHot.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getHotGoodsAPI &#125; from &#x27;@/apis/detail&#x27;;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br>import &#123; useRoute &#125; from &#x27;vue-router&#x27;;<br><br>// 1. 封装接口<br>// 2. 调用接口渲染模板<br>const hotList = ref([]);<br>const route = useRoute();<br>const getHotList = async () =&gt; &#123;<br>  const res = await getHotGoodsAPI(&#123;<br>    id: route.params.id,<br>    type: 1,<br>  &#125;);<br>  hotList.value = res.result;<br>&#125;;<br><br>onMounted(()=&gt; getHotList());<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;div class=&quot;goods-hot&quot;&gt;<br>    &lt;h3&gt;周日榜单&lt;/h3&gt;<br>    &lt;!-- 商品区块 --&gt;<br>    &lt;RouterLink to=&quot;/&quot; class=&quot;goods-item&quot; v-for=&quot;item in hotList&quot; :key=&quot;item.id&quot;&gt;<br>      &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot; /&gt;<br>      &lt;p class=&quot;name ellipsis&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/p&gt;<br>      &lt;p class=&quot;desc ellipsis&quot;&gt;&#123;&#123; item.desc &#125;&#125;&lt;/p&gt;<br>      &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; item.price&#125;&#125;&lt;/p&gt;<br>    &lt;/RouterLink&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.goods-hot &#123;<br>  h3 &#123;<br>    height: 70px;<br>    background: $helpColor;<br>    color: #fff;<br>    font-size: 18px;<br>    line-height: 70px;<br>    padding-left: 25px;<br>    margin-bottom: 10px;<br>    font-weight: normal;<br>  &#125;<br><br>  .goods-item &#123;<br>    display: block;<br>    padding: 20px 30px;<br>    text-align: center;<br>    background: #fff;<br><br>    img &#123;<br>      width: 160px;<br>      height: 160px;<br>    &#125;<br><br>    p &#123;<br>      padding-top: 10px;<br>    &#125;<br><br>    .name &#123;<br>      font-size: 16px;<br>    &#125;<br><br>    .desc &#123;<br>      color: #999;<br>      height: 29px;<br>    &#125;<br><br>    .price &#123;<br>      color: $priceColor;<br>      font-size: 20px;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<h3 id="10.-%E8%AF%A6%E6%83%85%E9%A1%B5-%E7%83%AD%E6%A6%9C%E5%8C%BA-%E9%80%82%E9%85%8D%E4%B8%8D%E5%90%8C-title-%E5%92%8C%E6%95%B0%E6%8D%AE%E5%88%97%E8%A1%A8" tabindex="-1" id="10-详情页-热榜区-适配不同-title-和数据列表">10. 详情页-热榜区-适配不同 title 和数据列表</h3>
<p>修改 <code>views/Detail/components/DetailHot.vue</code>，使用 <code>defineProps</code> 接收参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getHotGoodsAPI &#125; from &#x27;@/apis/detail&#x27;;<br>import &#123; onMounted, ref, computed, defineProps &#125; from &#x27;vue&#x27;;<br>import &#123; useRoute &#125; from &#x27;vue-router&#x27;;<br><br>// 设计 props 参数 适配不同的 title 和数据<br>const props = defineProps(&#123;<br>  hotType: &#123;<br>    type: Number,<br>  &#125;<br>&#125;);<br><br>// 适配 title 1- 24小时热榜 2- 周热榜<br>const TYPEMAP = &#123;<br>  1: &#x27;24小时热榜&#x27;,<br>  2: &#x27;周热榜&#x27;,<br>&#125;<br><br>const title = computed(() =&gt; TYPEMAP[props.hotType])<br><br>// 1. 封装接口<br>// 2. 调用接口渲染模板<br>const hotList = ref([]);<br>const route = useRoute();<br>const getHotList = async () =&gt; &#123;<br>  const res = await getHotGoodsAPI(&#123;<br>    id: route.params.id,<br>    type: props.hotType,<br>  &#125;);<br>  hotList.value = res.result;<br>&#125;;<br><br>onMounted(() =&gt; getHotList());<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;div class=&quot;goods-hot&quot;&gt;<br>    &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;<br>    &lt;!-- 商品区块 --&gt;<br>    &lt;RouterLink to=&quot;/&quot; class=&quot;goods-item&quot; v-for=&quot;item in hotList&quot; :key=&quot;item.id&quot;&gt;<br>      &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot; /&gt;<br>      &lt;p class=&quot;name ellipsis&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/p&gt;<br>      &lt;p class=&quot;desc ellipsis&quot;&gt;&#123;&#123; item.desc &#125;&#125;&lt;/p&gt;<br>      &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; item.price &#125;&#125;&lt;/p&gt;<br>    &lt;/RouterLink&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p><code>views/Detail/index.vue</code> 中传递参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;DetailHot :hot-type=&quot;1&quot;/&gt;<br>&lt;DetailHot :hot-type=&quot;2&quot;/&gt;<br></code></pre></td></tr></table></figure>
<h3 id="11.-%E8%AF%A6%E6%83%85%E9%A1%B5-%E5%9B%BE%E7%89%87%E9%A2%84%E8%A7%88%E7%BB%84%E4%BB%B6-%E5%B0%8F%E5%9B%BE%E5%88%87%E6%8D%A2%E5%A4%A7%E5%9B%BE%E6%98%BE%E7%A4%BA" tabindex="-1" id="11-详情页-图片预览组件-小图切换大图显示">11. 详情页-图片预览组件-小图切换大图显示</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><img src="04/04.webp" alt="webp"></p>
<p>思路：维护一个数组图片列表，<strong>鼠标划入小图记录当前小图下标值，通过下标值在数组中取对应图片</strong>，显示到大图位置。</p>
</div>
<p>创建 <code>src/components/ImageView/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; ref &#125; from &quot;vue&quot;<br>// 图片列表<br>const imageList = [<br>    &quot;https://yanxuan-item.nosdn.127.net/d917c92e663c5ed0bb577c7ded73e4ec.png&quot;,<br>    &quot;https://yanxuan-item.nosdn.127.net/e801b9572f0b0c02a52952b01adab967.jpg&quot;,<br>    &quot;https://yanxuan-item.nosdn.127.net/b52c447ad472d51adbdde1a83f550ac2.jpg&quot;,<br>    &quot;https://yanxuan-item.nosdn.127.net/f93243224dc37674dfca5874fe089c60.jpg&quot;,<br>    &quot;https://yanxuan-item.nosdn.127.net/f881cfe7de9a576aaeea6ee0d1d24823.jpg&quot;<br>]<br><br>const activeIndex = ref(0) // 当前显示的图片索引<br>const enterhandler = (i) =&gt; &#123;<br>    activeIndex.value = i<br>&#125;<br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>    &lt;div class=&quot;goods-image&quot;&gt;<br>        &lt;!-- 左侧大图--&gt;<br>        &lt;div class=&quot;middle&quot; ref=&quot;target&quot;&gt;<br>            &lt;img :src=&quot;imageList[activeIndex]&quot; alt=&quot;&quot; /&gt;<br>            &lt;!-- 蒙层小滑块 --&gt;<br>            &lt;div class=&quot;layer&quot; :style=&quot;&#123; left: `0px`, top: `0px` &#125;&quot;&gt;&lt;/div&gt;<br>        &lt;/div&gt;<br>        &lt;!-- 小图列表 --&gt;<br>        &lt;ul class=&quot;small&quot;&gt;<br>            &lt;li v-for=&quot;(img, i) in imageList&quot; :key=&quot;i&quot; @mouseenter=&quot;enterhandler(i)&quot; :class=&quot;&#123; active: i === activeIndex &#125;&quot;&gt;<br>                &lt;img :src=&quot;img&quot; alt=&quot;&quot; /&gt;<br>            &lt;/li&gt;<br>        &lt;/ul&gt;<br>        &lt;!-- 放大镜大图 --&gt;<br>        &lt;div class=&quot;large&quot; :style=&quot;[<br>            &#123;<br>                backgroundImage: `url($&#123;imageList[0]&#125;)`,<br>                backgroundPositionX: `0px`,<br>                backgroundPositionY: `0px`,<br>            &#125;,<br>        ]&quot; v-show=&quot;false&quot;&gt;&lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.goods-image &#123;<br>    width: 480px;<br>    height: 400px;<br>    position: relative;<br>    display: flex;<br><br>    .middle &#123;<br>        width: 400px;<br>        height: 400px;<br>        background: #f5f5f5;<br>    &#125;<br><br>    .large &#123;<br>        position: absolute;<br>        top: 0;<br>        left: 412px;<br>        width: 400px;<br>        height: 400px;<br>        z-index: 500;<br>        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);<br>        background-repeat: no-repeat;<br>        // 背景图:盒子的大小 = 2:1  将来控制背景图的移动来实现放大的效果查看 background-position<br>        background-size: 800px 800px;<br>        background-color: #f8f8f8;<br>    &#125;<br><br>    .layer &#123;<br>        width: 200px;<br>        height: 200px;<br>        background: rgba(0, 0, 0, 0.2);<br>        // 绝对定位 然后跟随咱们鼠标控制left和top属性就可以让滑块移动起来<br>        left: 0;<br>        top: 0;<br>        position: absolute;<br>    &#125;<br><br>    .small &#123;<br>        width: 80px;<br><br>        li &#123;<br>            width: 68px;<br>            height: 68px;<br>            margin-left: 12px;<br>            margin-bottom: 15px;<br>            cursor: pointer;<br><br>            &amp;:hover,<br>            &amp;.active &#123;<br>                border: 2px solid $xtxColor;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<p>在 <code>src/views/Detail/index.vue</code> 中放置这个组件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ImageView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/ImageView/index.vue&#x27;</span><br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 图片预览区 --&gt;<br>&lt;ImageView/&gt;<br></code></pre></td></tr></table></figure>
<h3 id="12.-%E8%AF%A6%E6%83%85%E9%A1%B5-%E5%9B%BE%E7%89%87%E9%A2%84%E8%A7%88%E7%BB%84%E4%BB%B6-%E6%94%BE%E5%A4%A7%E9%95%9C-%E6%BB%91%E5%9D%97%E8%B7%9F%E9%9A%8F%E7%A7%BB%E5%8A%A8" tabindex="-1" id="12-详情页-图片预览组件-放大镜-滑块跟随移动">12. 详情页-图片预览组件-放大镜-滑块跟随移动</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><img src="04/05.webp" alt="webp"></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://vueuse.nodejs.cn/core/useMouseInElement/">useMouseInElement | VueUse 中文网</a></li>
</ul>
<p>思路：
获取到当前的<strong>鼠标在盒子内的相对位置（useMouseInElement）</strong>，控制滑块跟随鼠标移动（left/top）</p>
<ol>
<li>
<p>有效移动范围内的计算逻辑</p>
<p>横向：100 &lt; elementX &lt; 300，left = elementX - 小滑块宽度一半</p>
<p>纵向：100 &lt; elementY &lt; 300，top = elementy - 小滑块高度一半</p>
</li>
<li>
<p>边界距离控制</p>
<p>横向：elementX &gt; 300 left = 200 elementX &lt; 100 left = 0</p>
<p>纵向：elementY &gt; 300 top = 200 elementY &lt; 100 top = 0</p>
</li>
</ol>
</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script&gt;<br>...<br>// 获取鼠标相对位置<br>const target = ref(null);<br>const &#123; elementX, elementY, idOutside &#125; = useMouseInElement(target);<br><br>// 控制滑块跟随鼠标移动（监听 elementX/Y 变化，一旦变化 重新设置 left/top）<br>const left = ref(0);<br>const top = ref(0);<br>watch([elementX, elementY, isOutside], () =&gt; &#123;<br>    if (isOutside.value) return;<br>    if (elementX.value &gt; 100 &amp;&amp; elementX.value &lt; 300) &#123;<br>        left.value = elementX.value - 100;<br>    &#125;<br>    if (elementY.value &gt; 100 &amp;&amp; elementY.value &lt; 300) &#123;<br>        top.value = elementY.value - 100;<br>    &#125;<br>    if (elementX.value &gt; 300) &#123;<br>        left.value = 200;<br>    &#125;<br>    if (elementX.value &lt; 100) &#123;<br>        left.value = 0;<br>    &#125;<br>    if (elementY.value &gt; 300) &#123;<br>        top.value = 200;<br>    &#125;<br>    if (elementY.value &lt; 100) &#123;<br>        top.value = 0;<br>    &#125;<br>&#125;);<br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>    &lt;div class=&quot;goods-image&quot;&gt;<br>        &lt;!-- 左侧大图--&gt;<br>        &lt;div class=&quot;middle&quot; ref=&quot;target&quot;&gt;<br>            &lt;img :src=&quot;imageList[activeIndex]&quot; alt=&quot;&quot; /&gt;<br>            &lt;!-- 蒙层小滑块 --&gt;<br>            &lt;div class=&quot;layer&quot; :style=&quot;&#123; left: `$&#123;left&#125;px`, top: `$&#123;top&#125;px` &#125;&quot;&gt;&lt;/div&gt;<br>        &lt;/div&gt;<br>        &lt;!-- 小图列表 --&gt;<br>        &lt;ul class=&quot;small&quot;&gt;<br>            &lt;li v-for=&quot;(img, i) in imageList&quot; :key=&quot;i&quot; @mouseenter=&quot;enterhandler(i)&quot;<br>                :class=&quot;&#123; active: i === activeIndex &#125;&quot;&gt;<br>                &lt;img :src=&quot;img&quot; alt=&quot;&quot; /&gt;<br>            &lt;/li&gt;<br>        &lt;/ul&gt;<br>        &lt;!-- 放大镜大图 --&gt;<br>        &lt;div class=&quot;large&quot; :style=&quot;[<br>            &#123;<br>                backgroundImage: `url($&#123;imageList[activeIndex]&#125;)`,<br>                backgroundPositionX: `0px`,<br>                backgroundPositionY: `0px`,<br>            &#125;,<br>        ]&quot; v-show=&quot;false&quot;&gt;&lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="13.-%E8%AF%A6%E6%83%85%E9%A1%B5-%E5%9B%BE%E7%89%87%E9%A2%84%E8%A7%88%E7%BB%84%E4%BB%B6-%E6%94%BE%E5%A4%A7%E9%95%9C-%E5%A4%A7%E5%9B%BE%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0" tabindex="-1" id="13-详情页-图片预览组件-放大镜-大图效果实现">13. 详情页-图片预览组件-放大镜-大图效果实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>放大镜效果实现-大图效果实现</strong></p>
<p><img src="04/06.webp" alt="webp"></p>
<p>效果：为实现放大效果，大图的宽高是小图的俩倍</p>
<p>思路：大图的移动方向和滑块移动方向相反，且数值为 2 倍</p>
<p><strong>放大镜效果实现 - 鼠标移入控制显隐</strong></p>
<p>思路：鼠标移入盒子（isOutside），滑块和大图才显示（v-show）</p>
</div>
<p>编辑 <code>src/components/ImageView/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; useMouseInElement &#125; from &quot;@vueuse/core&quot;<br>import &#123; ref, watch &#125; from &quot;vue&quot;<br>// 图片列表<br>const imageList = [<br>    &quot;https://yanxuan-item.nosdn.127.net/d917c92e663c5ed0bb577c7ded73e4ec.png&quot;,<br>    &quot;https://yanxuan-item.nosdn.127.net/e801b9572f0b0c02a52952b01adab967.jpg&quot;,<br>    &quot;https://yanxuan-item.nosdn.127.net/b52c447ad472d51adbdde1a83f550ac2.jpg&quot;,<br>    &quot;https://yanxuan-item.nosdn.127.net/f93243224dc37674dfca5874fe089c60.jpg&quot;,<br>    &quot;https://yanxuan-item.nosdn.127.net/f881cfe7de9a576aaeea6ee0d1d24823.jpg&quot;<br>]<br><br>const activeIndex = ref(0) // 当前显示的图片索引<br>const enterhandler = (i) =&gt; &#123;<br>    activeIndex.value = i<br>&#125;<br><br>// 获取鼠标相对位置<br>const target = ref(null);<br>const &#123; elementX, elementY, isOutside &#125; = useMouseInElement(target);<br><br>// 控制滑块跟随鼠标移动（监听 elementX/Y 变化，一旦变化 重新设置 left/top）<br>const left = ref(0);<br>const top = ref(0);<br><br>const positionX = ref(0);<br>const positionY = ref(0);<br><br>watch([elementX, elementY, isOutside], () =&gt; &#123;<br>    if (isOutside.value) return;<br>    if (elementX.value &gt; 100 &amp;&amp; elementX.value &lt; 300) &#123;<br>        left.value = elementX.value - 100;<br>    &#125;<br>    if (elementY.value &gt; 100 &amp;&amp; elementY.value &lt; 300) &#123;<br>        top.value = elementY.value - 100;<br>    &#125;<br>    if (elementX.value &gt; 300) &#123;<br>        left.value = 200;<br>    &#125;<br>    if (elementX.value &lt; 100) &#123;<br>        left.value = 0;<br>    &#125;<br>    if (elementY.value &gt; 300) &#123;<br>        top.value = 200;<br>    &#125;<br>    if (elementY.value &lt; 100) &#123;<br>        top.value = 0;<br>    &#125;<br><br>    positionX.value = -left.value * 2;<br>    positionY.value = -top.value * 2;<br>&#125;);<br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>    &lt;div class=&quot;goods-image&quot;&gt;<br>        &lt;!-- 左侧大图--&gt;<br>        &lt;div class=&quot;middle&quot; ref=&quot;target&quot;&gt;<br>            &lt;img :src=&quot;imageList[activeIndex]&quot; alt=&quot;&quot; /&gt;<br>            &lt;!-- 蒙层小滑块 --&gt;<br>            &lt;div class=&quot;layer&quot; v-show=&quot;!isOutside&quot; :style=&quot;&#123; left: `$&#123;left&#125;px`, top: `$&#123;top&#125;px` &#125;&quot;&gt;&lt;/div&gt;<br>        &lt;/div&gt;<br>        &lt;!-- 小图列表 --&gt;<br>        &lt;ul class=&quot;small&quot;&gt;<br>            &lt;li v-for=&quot;(img, i) in imageList&quot; :key=&quot;i&quot; @mouseenter=&quot;enterhandler(i)&quot;<br>                :class=&quot;&#123; active: i === activeIndex &#125;&quot;&gt;<br>                &lt;img :src=&quot;img&quot; alt=&quot;&quot; /&gt;<br>            &lt;/li&gt;<br>        &lt;/ul&gt;<br>        &lt;!-- 放大镜大图 --&gt;<br>        &lt;div class=&quot;large&quot; :style=&quot;[<br>            &#123;<br>                backgroundImage: `url($&#123;imageList[0]&#125;)`,<br>                backgroundPositionX: `$&#123;positionX&#125;px`,<br>                backgroundPositionY: `$&#123;positionY&#125;px`,<br>            &#125;,<br>        ]&quot; v-show=&quot;!isOutside&quot;&gt;&lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="14.-%E8%AF%A6%E6%83%85%E9%A1%B5-%E5%9B%BE%E7%89%87%E9%A2%84%E8%A7%88%E7%BB%84%E4%BB%B6-props-%E9%80%82%E9%85%8D%E5%92%8C%E6%95%B4%E4%BD%93%E6%80%BB%E7%BB%93" tabindex="-1" id="14-详情页-图片预览组件-props-适配和整体总结">14. 详情页-图片预览组件-props 适配和整体总结</h3>
<p>编辑 <code>src/components/ImageView/index.vue</code>，让 <code>imageList</code> 以 <code>props</code> 参数的形式存在：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">defineProps</span>(&#123;<br>    <span class="hljs-attr">imageList</span>: &#123;<br>        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span>,<br>        <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> []<br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>
<p>在 <code>src/views/Detail/index.vue</code> 中传参：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;ImageView :image-list=&quot;goods.mainPictures&quot;/&gt;<br></code></pre></td></tr></table></figure>
<h3 id="15.%E8%AF%A6%E6%83%85%E9%A1%B5-sku-%E7%BB%84%E4%BB%B6%E7%86%9F%E6%82%89%E4%BD%BF%E7%94%A8" tabindex="-1" id="15-详情页-SKU-组件熟悉使用">15.详情页-SKU 组件熟悉使用</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>SKU 的概念</strong></p>
<p>存货单位（英语:stock keeping unit，SKU/,cs,kelju:/），也翻译为<strong>库存单元</strong>，是一个会计学名词，定义为<strong>库存管理中的最小可用单元</strong>，例如纺织品中一个 SKU 通常表示规格、颜色、款式，而在连锁零售门店中有时称单品为一个 SKU。</p>
<p><img src="04/07.webp" alt="webp"></p>
<p>SKU 组件的作用：<strong>产出当前用户选择的商品规格</strong>，为加入购物车操作提供数据信息。</p>
<p><strong>SKU 组件使用</strong></p>
<p>问：在实际工作中，经常会遇到别人写好的组件，熟悉一个三方组件，首先重点看什么？</p>
<p>答：<code>props</code> 和 <code>emit</code>，<strong>props 决定了当前组件接收什么数据，emit 决定了会产出什么数据</strong></p>
<p>验证组件是否成功使用：</p>
<p>传入必要数据是否交互功能正常 → 点击选择规格，是否正常产出数据</p>
</div>
<p>导入 <code>src/components/XtxSku</code>，在 <code>src/views/Detail/index.vue</code> 中使用这个插件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- sku组件 --&gt;<br>&lt;XtxSku :goods=&quot;goods&quot;/&gt;<br></code></pre></td></tr></table></figure>
<h3 id="16.-%E8%AF%A6%E6%83%85%E9%A1%B5-%E9%80%9A%E7%94%A8%E7%BB%84%E4%BB%B6%E7%BB%9F%E4%B8%80%E6%B3%A8%E5%86%8C%E5%85%A8%E5%B1%80" tabindex="-1" id="16-详情页-通用组件统一注册全局">16. 详情页-通用组件统一注册全局</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>为什么要优化</strong></p>
<p>背景：components 目录下有可能还会有很多其他通用型组件，有可能在多个业务模块中共享，所有统一进行全局组件注册比较好</p>
<p>components 插件（把 components 目录下的所有组件进行全局注册）→ main.js（注册插件）</p>
</div>
<p>创建 <code>components/index.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 把 components 中的所有组件都进行全局化注册</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ImageView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./ImageView/index.vue&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">XtxSku</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./XtxSku/index.vue&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> componentPlugin = &#123;<br>  <span class="hljs-title function_">install</span>(<span class="hljs-params">app</span>) &#123;<br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;ImageView&#x27;</span>, <span class="hljs-title class_">ImageView</span>);<br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;XtxSku&#x27;</span>, <span class="hljs-title class_">XtxSku</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>之后便不再需要导入组件。</p>
<p><code>src/main.js</code> 中引入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; createPinia &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;@/styles/common.scss&#x27;</span><br><span class="hljs-keyword">import</span> &#123; lazyPlugin &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/directives&#x27;</span><br><br><span class="hljs-keyword">import</span> &#123; componentPlugin &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components&#x27;</span><br><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br><br>app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createPinia</span>())<br>app.<span class="hljs-title function_">use</span>(router)<br>app.<span class="hljs-title function_">use</span>(lazyPlugin)<br>app.<span class="hljs-title function_">use</span>(componentPlugin)<br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>
<h2 id="day05" tabindex="-1" id="day05">day05</h2>
<h3 id="01.-%E7%99%BB%E5%BD%95-%E6%95%B4%E4%BD%93%E8%AE%A4%E8%AF%86%E5%92%8C%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE" tabindex="-1" id="01-登录-整体认识和路由配置">01. 登录-整体认识和路由配置</h3>
<p>编辑 <code>src/views/Login/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br><br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;header class=&quot;login-header&quot;&gt;<br>            &lt;div class=&quot;container m-top-20&quot;&gt;<br>                &lt;h1 class=&quot;logo&quot;&gt;<br>                    &lt;RouterLink to=&quot;/&quot;&gt;小兔鲜&lt;/RouterLink&gt;<br>                &lt;/h1&gt;<br>                &lt;RouterLink class=&quot;entry&quot; to=&quot;/&quot;&gt;<br>                    进入网站首页<br>                    &lt;i class=&quot;iconfont icon-angle-right&quot;&gt;&lt;/i&gt;<br>                    &lt;i class=&quot;iconfont icon-angle-right&quot;&gt;&lt;/i&gt;<br>                &lt;/RouterLink&gt;<br>            &lt;/div&gt;<br>        &lt;/header&gt;<br>        &lt;section class=&quot;login-section&quot;&gt;<br>            &lt;div class=&quot;wrapper&quot;&gt;<br>                &lt;nav&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;账户登录&lt;/a&gt;<br>                &lt;/nav&gt;<br>                &lt;div class=&quot;account-box&quot;&gt;<br>                    &lt;div class=&quot;form&quot;&gt;<br>                        &lt;el-form label-position=&quot;right&quot; label-width=&quot;60px&quot; status-icon&gt;<br>                            &lt;el-form-item label=&quot;账户&quot;&gt;<br>                                &lt;el-input /&gt;<br>                            &lt;/el-form-item&gt;<br>                            &lt;el-form-item label=&quot;密码&quot;&gt;<br>                                &lt;el-input /&gt;<br>                            &lt;/el-form-item&gt;<br>                            &lt;el-form-item label-width=&quot;22px&quot;&gt;<br>                                &lt;el-checkbox size=&quot;large&quot;&gt;<br>                                    我已同意隐私条款和服务条款<br>                                &lt;/el-checkbox&gt;<br>                            &lt;/el-form-item&gt;<br>                            &lt;el-button size=&quot;large&quot; class=&quot;subBtn&quot;&gt;点击登录&lt;/el-button&gt;<br>                        &lt;/el-form&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/section&gt;<br><br>        &lt;footer class=&quot;login-footer&quot;&gt;<br>            &lt;div class=&quot;container&quot;&gt;<br>                &lt;p&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;关于我们&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;帮助中心&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;售后服务&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;配送与验收&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;商务合作&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;搜索推荐&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;友情链接&lt;/a&gt;<br>                &lt;/p&gt;<br>                &lt;p&gt;CopyRight &amp;copy; 小兔鲜儿&lt;/p&gt;<br>            &lt;/div&gt;<br>        &lt;/footer&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&#x27;scss&#x27;&gt;<br>.login-header &#123;<br>    background: #fff;<br>    border-bottom: 1px solid #e4e4e4;<br><br>    .container &#123;<br>        display: flex;<br>        align-items: flex-end;<br>        justify-content: space-between;<br>    &#125;<br><br>    .logo &#123;<br>        width: 200px;<br><br>        a &#123;<br>            display: block;<br>            height: 132px;<br>            width: 100%;<br>            text-indent: -9999px;<br>            background: url(&quot;@/assets/images/logo.png&quot;) no-repeat center 18px / contain;<br>        &#125;<br>    &#125;<br><br>    .sub &#123;<br>        flex: 1;<br>        font-size: 24px;<br>        font-weight: normal;<br>        margin-bottom: 38px;<br>        margin-left: 20px;<br>        color: #666;<br>    &#125;<br><br>    .entry &#123;<br>        width: 120px;<br>        margin-bottom: 38px;<br>        font-size: 16px;<br><br>        i &#123;<br>            font-size: 14px;<br>            color: $xtxColor;<br>            letter-spacing: -5px;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.login-section &#123;<br>    background: url(&#x27;@/assets/images/login-bg.png&#x27;) no-repeat center / cover;<br>    height: 488px;<br>    position: relative;<br><br>    .wrapper &#123;<br>        width: 380px;<br>        background: #fff;<br>        position: absolute;<br>        left: 50%;<br>        top: 54px;<br>        transform: translate3d(100px, 0, 0);<br>        box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);<br><br>        nav &#123;<br>            font-size: 14px;<br>            height: 55px;<br>            margin-bottom: 20px;<br>            border-bottom: 1px solid #f5f5f5;<br>            display: flex;<br>            padding: 0 40px;<br>            text-align: right;<br>            align-items: center;<br><br>            a &#123;<br>                flex: 1;<br>                line-height: 1;<br>                display: inline-block;<br>                font-size: 18px;<br>                position: relative;<br>                text-align: center;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.login-footer &#123;<br>    padding: 30px 0 50px;<br>    background: #fff;<br><br>    p &#123;<br>        text-align: center;<br>        color: #999;<br>        padding-top: 20px;<br><br>        a &#123;<br>            line-height: 1;<br>            padding: 0 10px;<br>            color: #999;<br>            display: inline-block;<br><br>            ~a &#123;<br>                border-left: 1px solid #ccc;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.account-box &#123;<br>    .toggle &#123;<br>        padding: 15px 40px;<br>        text-align: right;<br><br>        a &#123;<br>            color: $xtxColor;<br><br>            i &#123;<br>                font-size: 14px;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    .form &#123;<br>        padding: 0 20px 20px 20px;<br><br>        &amp;-item &#123;<br>            margin-bottom: 28px;<br><br>            .input &#123;<br>                position: relative;<br>                height: 36px;<br><br>                &gt;i &#123;<br>                    width: 34px;<br>                    height: 34px;<br>                    background: #cfcdcd;<br>                    color: #fff;<br>                    position: absolute;<br>                    left: 1px;<br>                    top: 1px;<br>                    text-align: center;<br>                    line-height: 34px;<br>                    font-size: 18px;<br>                &#125;<br><br>                input &#123;<br>                    padding-left: 44px;<br>                    border: 1px solid #cfcdcd;<br>                    height: 36px;<br>                    line-height: 36px;<br>                    width: 100%;<br><br>                    &amp;.error &#123;<br>                        border-color: $priceColor;<br>                    &#125;<br><br>                    &amp;.active,<br>                    &amp;:focus &#123;<br>                        border-color: $xtxColor;<br>                    &#125;<br>                &#125;<br><br>                .code &#123;<br>                    position: absolute;<br>                    right: 1px;<br>                    top: 1px;<br>                    text-align: center;<br>                    line-height: 34px;<br>                    font-size: 14px;<br>                    background: #f5f5f5;<br>                    color: #666;<br>                    width: 90px;<br>                    height: 34px;<br>                    cursor: pointer;<br>                &#125;<br>            &#125;<br><br>            &gt;.error &#123;<br>                position: absolute;<br>                font-size: 12px;<br>                line-height: 28px;<br>                color: $priceColor;<br><br>                i &#123;<br>                    font-size: 14px;<br>                    margin-right: 2px;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        .agree &#123;<br>            a &#123;<br>                color: #069;<br>            &#125;<br>        &#125;<br><br>        .btn &#123;<br>            display: block;<br>            width: 100%;<br>            height: 40px;<br>            color: #fff;<br>            text-align: center;<br>            line-height: 40px;<br>            background: $xtxColor;<br><br>            &amp;.disabled &#123;<br>                background: #cfcdcd;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    .action &#123;<br>        padding: 20px 40px;<br>        display: flex;<br>        justify-content: space-between;<br>        align-items: center;<br><br>        .url &#123;<br>            a &#123;<br>                color: #999;<br>                margin-left: 10px;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.subBtn &#123;<br>    background: $xtxColor;<br>    width: 100%;<br>    color: #fff;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<p>修改 <code>src/views/Layout/components/LayoutNav.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;nav class=&quot;app-topnav&quot;&gt;<br>    &lt;div class=&quot;container&quot;&gt;<br>      &lt;ul&gt;<br>        &lt;template v-if=&quot;false&quot;&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;&lt;i class=&quot;iconfont icon-user&quot;&gt;&lt;/i&gt;周杰伦&lt;/a&gt;&lt;/li&gt;<br>          &lt;li&gt;<br>            &lt;el-popconfirm title=&quot;确认退出吗?&quot; confirm-button-text=&quot;确认&quot; cancel-button-text=&quot;取消&quot;&gt;<br>              &lt;template #reference&gt;<br>                &lt;a href=&quot;javascript:;&quot;&gt;退出登录&lt;/a&gt;<br>              &lt;/template&gt;<br>            &lt;/el-popconfirm&gt;<br>          &lt;/li&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;我的订单&lt;/a&gt;&lt;/li&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;会员中心&lt;/a&gt;&lt;/li&gt;<br>        &lt;/template&gt;<br>        &lt;template v-else&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot; @click=&quot;$router.push(&#x27;/login&#x27;)&quot;&gt;请先登录&lt;/a&gt;&lt;/li&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;帮助中心&lt;/a&gt;&lt;/li&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;关于我们&lt;/a&gt;&lt;/li&gt;<br>        &lt;/template&gt;<br>      &lt;/ul&gt;<br>    &lt;/div&gt;<br>  &lt;/nav&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="02.-%E7%99%BB%E5%BD%95-%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C%E5%AE%9E%E7%8E%B0" tabindex="-1" id="02-登录-表单校验实现">02. 登录-表单校验实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>为什么需要校验</strong></p>
<p>作用：前端提前校验可以<strong>省去一些错误的请求提交</strong>，为后端节省接口压力。</p>
<p>表单数据 → 前端校验（过滤错误请求）→后端查询是否匹配</p>
<p><strong>表单如何进行校验</strong></p>
<p>ElementPlus 表单组件内置了表单校验功能，只需要按照组件要求配置必要参数即可（直接看文档）</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://element-plus.org/zh-CN/component/form.html#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C">Form 表单 | Element Plus</a></li>
</ul>
<p>思想：当功能很复杂时，通过<strong>多个组件各自负责某个小功能，再组合成一个大功能</strong>是组件设计中的常用方法</p>
<p><strong>表单校验步骤</strong></p>
<ol>
<li><strong>按照接口字段</strong>准备表单对象并绑定</li>
<li><strong>按照产品要求</strong>准备规则对象并绑定</li>
<li>指定表单域的<strong>校验字段名</strong></li>
<li>把表单对象进行<strong>双向绑定</strong></li>
</ol>
</div>
<blockquote>
<p>用户名：不能为空，字段名为 account</p>
<p>密码：不能为空且为 6-14 个字符，字段名为 password</p>
<p>同意协议：必选，字段名为 agree</p>
</blockquote>
<p>修改 <code>src/views/Login/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; ref &#125; from &#x27;vue&#x27;;<br><br>const form = ref(&#123;<br>    account: &#x27;&#x27;,<br>    password: &#x27;&#x27;,<br>&#125;)<br><br>const rules = &#123;<br>    account: [<br>        &#123; required: true, message: &#x27;用户名不能为空&#x27;, trigger: &#x27;blur&#x27; &#125;<br>    ],<br>    password: [<br>        &#123; required: true, message: &#x27;密码不能为空&#x27;, trigger: &#x27;blur&#x27; &#125;,<br>        &#123; min: 6, message: &#x27;密码长度不能少于 6 位&#x27;, trigger: &#x27;blur&#x27; &#125;,<br>        &#123; max: 14, message: &#x27;密码长度不能多于 14 位&#x27;, trigger: &#x27;blur&#x27; &#125;<br>    ]<br>&#125;<br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;header class=&quot;login-header&quot;&gt;<br>            &lt;div class=&quot;container m-top-20&quot;&gt;<br>                &lt;h1 class=&quot;logo&quot;&gt;<br>                    &lt;RouterLink to=&quot;/&quot;&gt;小兔鲜&lt;/RouterLink&gt;<br>                &lt;/h1&gt;<br>                &lt;RouterLink class=&quot;entry&quot; to=&quot;/&quot;&gt;<br>                    进入网站首页<br>                    &lt;i class=&quot;iconfont icon-angle-right&quot;&gt;&lt;/i&gt;<br>                    &lt;i class=&quot;iconfont icon-angle-right&quot;&gt;&lt;/i&gt;<br>                &lt;/RouterLink&gt;<br>            &lt;/div&gt;<br>        &lt;/header&gt;<br>        &lt;section class=&quot;login-section&quot;&gt;<br>            &lt;div class=&quot;wrapper&quot;&gt;<br>                &lt;nav&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;账户登录&lt;/a&gt;<br>                &lt;/nav&gt;<br>                &lt;div class=&quot;account-box&quot;&gt;<br>                    &lt;div class=&quot;form&quot;&gt;<br>                        &lt;el-form :model=&quot;form&quot; :rules=&quot;rules&quot; label-position=&quot;right&quot; label-width=&quot;60px&quot; status-icon&gt;<br>                            &lt;el-form-item prop=&quot;account&quot; label=&quot;账户&quot;&gt;<br>                                &lt;el-input v-model=&quot;form.account&quot; /&gt;<br>                            &lt;/el-form-item&gt;<br>                            &lt;el-form-item prop=&quot;password&quot; label=&quot;密码&quot;&gt;<br>                                &lt;el-input v-model=&quot;form.password&quot; type=&quot;password&quot;/&gt;<br>                            &lt;/el-form-item&gt;<br>                            &lt;el-form-item label-width=&quot;22px&quot;&gt;<br>                                &lt;el-checkbox size=&quot;large&quot;&gt;<br>                                    我已同意隐私条款和服务条款<br>                                &lt;/el-checkbox&gt;<br>                            &lt;/el-form-item&gt;<br>                            &lt;el-button size=&quot;large&quot; class=&quot;subBtn&quot;&gt;点击登录&lt;/el-button&gt;<br>                        &lt;/el-form&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/section&gt;<br><br>        &lt;footer class=&quot;login-footer&quot;&gt;<br>            &lt;div class=&quot;container&quot;&gt;<br>                &lt;p&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;关于我们&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;帮助中心&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;售后服务&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;配送与验收&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;商务合作&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;搜索推荐&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;友情链接&lt;/a&gt;<br>                &lt;/p&gt;<br>                &lt;p&gt;CopyRight &amp;copy; 小兔鲜儿&lt;/p&gt;<br>            &lt;/div&gt;<br>        &lt;/footer&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="03.-%E7%99%BB%E5%BD%95-%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C%E8%A7%84%E5%88%99" tabindex="-1" id="03-登录-表单校验-自定义校验规则">03. 登录-表单校验-自定义校验规则</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>自定义校验规则</strong></p>
<p>ElementPlus 表单组件内置了初始的校验配置，应付简单的校验只需要通过配置即可，如果<strong>想要定制一些特殊的校验需求</strong>，可以使用自定义校验规则，格式如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>    <span class="hljs-attr">validator</span>:<span class="hljs-function">(<span class="hljs-params">rule, val.，callback</span>) =&gt;</span> &#123;<br>        <span class="hljs-comment">// 自定义校验逻辑</span><br>        <span class="hljs-comment">// value: 当前输入的数据</span><br>        <span class="hljs-comment">// callback：校验处理函数 校验通过调用</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>校验逻辑：如果勾选了协议框，通过校验，如果没有勾选，不通过校验。</p>
</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; ref &#125; from &#x27;vue&#x27;;<br><br>const form = ref(&#123;<br>    account: &#x27;&#x27;,<br>    password: &#x27;&#x27;,<br>&#125;)<br><br>const rules = &#123;<br>    account: [<br>        &#123; required: true, message: &#x27;用户名不能为空&#x27;, trigger: &#x27;blur&#x27; &#125;<br>    ],<br>    password: [<br>        &#123; required: true, message: &#x27;密码不能为空&#x27;, trigger: &#x27;blur&#x27; &#125;,<br>        &#123; min: 6, message: &#x27;密码长度不能少于 6 位&#x27;, trigger: &#x27;blur&#x27; &#125;,<br>        &#123; max: 14, message: &#x27;密码长度不能多于 14 位&#x27;, trigger: &#x27;blur&#x27; &#125;<br>    ],<br>    agree: [<br>        &#123;<br>            validator: (rule, value, callback) =&gt; &#123;<br>                if(value) &#123;<br>                    callback()<br>                &#125; else &#123;<br>                    callback(new Error(&#x27;请同意隐私条款和服务条款&#x27;))<br>                &#125;<br>            &#125;<br>        &#125;<br>    ]<br>&#125;<br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;header class=&quot;login-header&quot;&gt;<br>            &lt;div class=&quot;container m-top-20&quot;&gt;<br>                &lt;h1 class=&quot;logo&quot;&gt;<br>                    &lt;RouterLink to=&quot;/&quot;&gt;小兔鲜&lt;/RouterLink&gt;<br>                &lt;/h1&gt;<br>                &lt;RouterLink class=&quot;entry&quot; to=&quot;/&quot;&gt;<br>                    进入网站首页<br>                    &lt;i class=&quot;iconfont icon-angle-right&quot;&gt;&lt;/i&gt;<br>                    &lt;i class=&quot;iconfont icon-angle-right&quot;&gt;&lt;/i&gt;<br>                &lt;/RouterLink&gt;<br>            &lt;/div&gt;<br>        &lt;/header&gt;<br>        &lt;section class=&quot;login-section&quot;&gt;<br>            &lt;div class=&quot;wrapper&quot;&gt;<br>                &lt;nav&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;账户登录&lt;/a&gt;<br>                &lt;/nav&gt;<br>                &lt;div class=&quot;account-box&quot;&gt;<br>                    &lt;div class=&quot;form&quot;&gt;<br>                        &lt;el-form :model=&quot;form&quot; :rules=&quot;rules&quot; label-position=&quot;right&quot; label-width=&quot;60px&quot; status-icon&gt;<br>                            &lt;el-form-item prop=&quot;account&quot; label=&quot;账户&quot;&gt;<br>                                &lt;el-input v-model=&quot;form.account&quot; /&gt;<br>                            &lt;/el-form-item&gt;<br>                            &lt;el-form-item prop=&quot;password&quot; label=&quot;密码&quot;&gt;<br>                                &lt;el-input v-model=&quot;form.password&quot; type=&quot;password&quot;/&gt;<br>                            &lt;/el-form-item&gt;<br>                            &lt;el-form-item prop=&quot;agree&quot; label-width=&quot;22px&quot;&gt;<br>                                &lt;el-checkbox v-model=&quot;form.agree&quot; size=&quot;large&quot;&gt;<br>                                    我已同意隐私条款和服务条款<br>                                &lt;/el-checkbox&gt;<br>                            &lt;/el-form-item&gt;<br>                            &lt;el-button size=&quot;large&quot; class=&quot;subBtn&quot;&gt;点击登录&lt;/el-button&gt;<br>                        &lt;/el-form&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/section&gt;<br><br>        &lt;footer class=&quot;login-footer&quot;&gt;<br>            &lt;div class=&quot;container&quot;&gt;<br>                &lt;p&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;关于我们&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;帮助中心&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;售后服务&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;配送与验收&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;商务合作&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;搜索推荐&lt;/a&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;友情链接&lt;/a&gt;<br>                &lt;/p&gt;<br>                &lt;p&gt;CopyRight &amp;copy; 小兔鲜儿&lt;/p&gt;<br>            &lt;/div&gt;<br>        &lt;/footer&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="04.-%E7%99%BB%E5%BD%95-%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C-%E7%BB%9F%E4%B8%80%E6%A0%A1%E9%AA%8C" tabindex="-1" id="04-登录-表单校验-统一校验">04. 登录-表单校验-统一校验</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>整个表单的内容验证</strong></p>
<p>思考：每个表单域都有自己的校验触发事件，如果用户一上来就点击登录怎么办呢？</p>
<p>答：在点击登录时需要对所有需要校验的表单进行统一校验</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">formEl.<span class="hljs-title function_">validate</span>(<span class="hljs-function">(<span class="hljs-params">valid</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (valid) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;submit!&#x27;</span>)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;error submit!&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
<p>获取 form 组件实例 → 调用实例方法</p>
</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; ref &#125; from &#x27;vue&#x27;;<br><br>...<br>    <br>const formRef = ref(null);<br>const doLogin = () =&gt; &#123;<br>    formRef.value.validate((valid) =&gt; &#123;<br>        console.log(valid);<br>        if (valid) &#123;<br>        &#125;<br>    &#125;)<br>&#125;<br><br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>...<br>        &lt;section class=&quot;login-section&quot;&gt;<br>            &lt;div class=&quot;wrapper&quot;&gt;<br>                &lt;nav&gt;<br>                    &lt;a href=&quot;javascript:;&quot;&gt;账户登录&lt;/a&gt;<br>                &lt;/nav&gt;<br>                &lt;div class=&quot;account-box&quot;&gt;<br>                    &lt;div class=&quot;form&quot;&gt;<br>                        &lt;el-form ref=&quot;formRef&quot; :model=&quot;form&quot; :rules=&quot;rules&quot; label-position=&quot;right&quot; label-width=&quot;60px&quot; status-icon&gt;<br>                            &lt;el-form-item prop=&quot;account&quot; label=&quot;账户&quot;&gt;<br>                                &lt;el-input v-model=&quot;form.account&quot; /&gt;<br>                            &lt;/el-form-item&gt;<br>                            &lt;el-form-item prop=&quot;password&quot; label=&quot;密码&quot;&gt;<br>                                &lt;el-input v-model=&quot;form.password&quot; type=&quot;password&quot; /&gt;<br>                            &lt;/el-form-item&gt;<br>                            &lt;el-form-item prop=&quot;agree&quot; label-width=&quot;22px&quot;&gt;<br>                                &lt;el-checkbox v-model=&quot;form.agree&quot; size=&quot;large&quot;&gt;<br>                                    我已同意隐私条款和服务条款<br>                                &lt;/el-checkbox&gt;<br>                            &lt;/el-form-item&gt;<br>                            &lt;el-button size=&quot;large&quot; class=&quot;subBtn&quot; @click=&quot;doLogin&quot;&gt;点击登录&lt;/el-button&gt;<br>                        &lt;/el-form&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/section&gt;<br>...<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="05.-%E7%99%BB%E5%BD%95-%E5%9F%BA%E7%A1%80%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0" tabindex="-1" id="05-登录-基础功能实现">05. 登录-基础功能实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>登录业务流程</strong></p>
<ul>
<li>
<p>表单校验通过</p>
</li>
<li>
<p>封装登录接口</p>
<p>创建 <code>src/apis/user.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> httpInstance <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/http&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">loginAPI</span> = (<span class="hljs-params">&#123; account, password &#125;</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>        <span class="hljs-attr">data</span>: &#123;<br>            account,<br>            password<br>        &#125;<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>调用登录接口</p>
<ul>
<li>
<p>登录成功后续逻辑处理（提示用户，跳转首页）</p>
<p><code>src/views/Login/index.vue</code> 下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>...<br>const formRef = ref(null);<br>const doLogin = () =&gt; &#123;<br>    const &#123; account, password &#125; = form.value;<br>    formRef.value.validate(async (valid) =&gt; &#123;<br>        if (valid) &#123;<br>            const res = await loginAPI(&#123; account, password &#125;);<br>            console.log(res);<br>            ElMessage(&#123; type: &#x27;success&#x27;, message: &#x27;登录成功&#x27; &#125;);<br>            router.replace(&#123; path: &#x27;/&#x27; &#125;);<br>        &#125;<br>    &#125;)<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>登录失败的业务逻辑（抛出错误提示）</p>
<p><code>src/utils/http.js</code> 下，编辑相应拦截器：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 响应拦截器：在接收到响应后统一处理结果，常用于错误处理或数据格式转换。</span><br>http.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-property">data</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> &#123;<br>    <span class="hljs-title class_">ElMessage</span>(&#123;<br>        <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;warning&quot;</span>,<br>        <span class="hljs-attr">message</span>: e.<span class="hljs-property">response</span>.<span class="hljs-property">data</span>.<span class="hljs-property">message</span><br>    &#125;);<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(e);<br>&#125;);<br></code></pre></td></tr></table></figure>
<p><img src="05/01.webp" alt="webp"></p>
</li>
</ul>
</li>
</ul>
</div>
<h3 id="06.-%E7%99%BB%E5%BD%95-pinia-%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE" tabindex="-1" id="06-登录-Pinia-管理用户数据">06. 登录-Pinia 管理用户数据</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>为什么要用 Pinia 管理数据</strong></p>
<p>由于用户数据的特殊性，在<strong>很多组件中都有可能进行共享</strong>，共享的数据使用 Pinia 管理会更加方便</p>
<p><strong>如何使用 Pinia 管理数据</strong></p>
<p>遵循理念：和数据相关的所有操作（state+action）都放到 Pinia 中，组件只负责触发 action 函数</p>
<p><code>component</code> → <code>Pinia (state + action)</code></p>
</div>
<p>创建 <code>src/stores/user.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; loginAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/user&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> userInfo = <span class="hljs-title function_">ref</span>(&#123;&#125;);<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">&#123; account, password &#125;</span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loginAPI</span>(&#123; account, password &#125;);<br>        userInfo.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>;<br>    &#125;;<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        userInfo,<br>        getUserInfo<br>    &#125;;<br>&#125;);<br></code></pre></td></tr></table></figure>
<p>在 <code>src/views/Login/index.vue</code> 中使用 pinia 管理数据：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; useUserStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/user&#x27;</span>;<br><span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();<br>...<br><span class="hljs-keyword">const</span> formRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">doLogin</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> &#123; account, password &#125; = form.<span class="hljs-property">value</span>;<br>    formRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">validate</span>(<span class="hljs-title function_">async</span> (valid) =&gt; &#123;<br>        <span class="hljs-keyword">if</span> (valid) &#123;<br>            <span class="hljs-keyword">await</span> userStore.<span class="hljs-title function_">getUserInfo</span>(&#123; account, password &#125;);<br>            <span class="hljs-title class_">ElMessage</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;success&#x27;</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;登录成功&#x27;</span> &#125;);<br>            router.<span class="hljs-title function_">replace</span>(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span> &#125;);<br>        &#125;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="07.-%E7%99%BB%E5%BD%95-pinia-%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96" tabindex="-1" id="07-登录-Pinia-用户数据持久化">07. 登录-Pinia 用户数据持久化</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>持久化用户数据说明</strong></p>
<ol>
<li>用户数据中有一个关键的数据叫做 <strong>Token（用来标识当前用户是否登录）</strong>，而 Token <strong>持续一段时间才会过期</strong></li>
<li>Pinia 的存储是基于内存的，刷新就丢失，为了<strong>保持登录状态</strong>就要做到刷新不丢失，需要配合持久化进行存储</li>
</ol>
<p><strong>目的：保持 token 不丢失，保持登录状态</strong></p>
<p><strong>最终效果：操作 state 时会自动把用户数据在本地的 localStorage 也存一份，刷新的时候会从 localstorage 中先取</strong></p>
</div>
<ul>
<li><a target="_blank" rel="noopener" href="https://prazdevs.github.io/pinia-plugin-persistedstate/zh/guide/">开始 | Pinia Plugin Persistedstate</a></li>
</ul>
<p>安装 pinia 中用于用户数据持久化的插件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm i pinia-plugin-persistedstate<br></code></pre></td></tr></table></figure>
<p>在 <code>src/main.js</code> 中使用这个插件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; createPinia &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;@/styles/common.scss&#x27;</span><br><span class="hljs-keyword">import</span> &#123; lazyPlugin &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/directives&#x27;</span><br><br><span class="hljs-keyword">import</span> &#123; componentPlugin &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components&#x27;</span><br><br><span class="hljs-keyword">import</span> persistedState <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia-plugin-persistedstate&#x27;</span><br><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br><br><span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>();<br>pinia.<span class="hljs-title function_">use</span>(persistedState); <span class="hljs-comment">// 注册插件</span><br>app.<span class="hljs-title function_">use</span>(pinia);<br><br>app.<span class="hljs-title function_">use</span>(router)<br>app.<span class="hljs-title function_">use</span>(lazyPlugin)<br>app.<span class="hljs-title function_">use</span>(componentPlugin)<br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>
<p>在 <code>src/stores/user.js</code> 中设置数据持久化（<code>persist: true</code>）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; loginAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/user&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> userInfo = <span class="hljs-title function_">ref</span>(&#123;&#125;);<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">&#123; account, password &#125;</span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loginAPI</span>(&#123; account, password &#125;);<br>        userInfo.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>;<br>    &#125;;<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        userInfo,<br>        getUserInfo<br>    &#125;;<br>&#125;, &#123;<br>    <span class="hljs-attr">persist</span>: <span class="hljs-literal">true</span><br>&#125;);<br></code></pre></td></tr></table></figure>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>关键步骤总结和插件运行机制</strong></p>
<p><code>安装插件包</code> → <code>pinia 注册插件</code> → <code>需要持久化的 store 进行配置</code></p>
<p>运行机制：
在设置 state 的时候会自动把数据同步给 localstorage，在获取 state 数据的时候会优先从 localStorage 中取</p>
</div>
<h3 id="08.-%E7%99%BB%E5%BD%95-%E7%99%BB%E5%BD%95%E5%92%8C%E9%9D%9E%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81%E4%B8%8B%E7%9A%84%E6%A8%A1%E7%89%88%E9%80%82%E9%85%8D" tabindex="-1" id="08-登录-登录和非登录状态下的模版适配">08. 登录-登录和非登录状态下的模版适配</h3>
<p>编辑 <code>src/views/Layout/components/LayoutNav.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; useUserStore &#125; from &#x27;@/stores/user&#x27;;<br>const userStore = useUserStore();<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;nav class=&quot;app-topnav&quot;&gt;<br>    &lt;div class=&quot;container&quot;&gt;<br>      &lt;ul&gt;<br>        &lt;template v-if=&quot;userStore.userInfo.token&quot;&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;&lt;i class=&quot;iconfont icon-user&quot;&gt;&lt;/i&gt;&#123;&#123; userStore.userInfo.account &#125;&#125;&lt;/a&gt;&lt;/li&gt;<br>          &lt;li&gt;<br>            &lt;el-popconfirm title=&quot;确认退出吗?&quot; confirm-button-text=&quot;确认&quot; cancel-button-text=&quot;取消&quot;&gt;<br>              &lt;template #reference&gt;<br>                &lt;a href=&quot;javascript:;&quot;&gt;退出登录&lt;/a&gt;<br>              &lt;/template&gt;<br>            &lt;/el-popconfirm&gt;<br>          &lt;/li&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;我的订单&lt;/a&gt;&lt;/li&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;会员中心&lt;/a&gt;&lt;/li&gt;<br>        &lt;/template&gt;<br>        &lt;template v-else&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot; @click=&quot;$router.push(&#x27;/login&#x27;)&quot;&gt;请先登录&lt;/a&gt;&lt;/li&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;帮助中心&lt;/a&gt;&lt;/li&gt;<br>          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;关于我们&lt;/a&gt;&lt;/li&gt;<br>        &lt;/template&gt;<br>      &lt;/ul&gt;<br>    &lt;/div&gt;<br>  &lt;/nav&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="09.-%E7%99%BB%E5%BD%95-%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E5%99%A8%E6%90%BA%E5%B8%A6-token" tabindex="-1" id="09-登录-请求拦截器携带-Token">09. 登录-请求拦截器携带 Token</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>为什么要在请求拦截器携带 Token</strong></p>
<p>Token 作为用户标识，在很<strong>多个接口中都需要携带 Token</strong> 才可以正确获取数据，所以需要在接口调用时携带 Token。另外，为了<strong>统一控制</strong>采取请求拦截器携带的方案。</p>
<p><strong>如何配置</strong></p>
<p>Axios 请求拦截器可以在接口正式发起之前对请求参数做一些事情，通常 Token 数据会被注入到<strong>请求 header</strong> 中，格式按照<strong>后端要求的格式进行拼接处理</strong>。</p>
</div>
<p>编辑 <code>src/utils/http.js</code> 中的请求拦截器：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ElMessage</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;element-plus&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; useUserStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/user&#x27;</span>;<br><br><span class="hljs-comment">// 创建 axios 实例</span><br><span class="hljs-keyword">const</span> http = axios.<span class="hljs-title function_">create</span>(&#123;<br>    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net&#x27;</span>,<br>    <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span><br>&#125;);<br><br><span class="hljs-comment">// 请求拦截器：在请求发送前修改配置，常用于添加身份验证或全局请求设置。</span><br>http.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> &#123;<br>    <span class="hljs-comment">// 在发送请求之前做某事</span><br>    <span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();<br>    <span class="hljs-keyword">const</span> token = userStore.<span class="hljs-property">userInfo</span>.<span class="hljs-property">token</span>;<br>    <span class="hljs-keyword">if</span> (token) &#123;<br>        config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">$&#123;token&#125;</span>`</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> config;<br>&#125;, <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>    <span class="hljs-comment">// 请求错误时做些事</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);<br>&#125;);<br><br><span class="hljs-comment">// 响应拦截器：在接收到响应后统一处理结果，常用于错误处理或数据格式转换。</span><br>http.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-property">data</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> &#123;<br>    <span class="hljs-title class_">ElMessage</span>(&#123;<br>        <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;warning&quot;</span>,<br>        <span class="hljs-attr">message</span>: e.<span class="hljs-property">response</span>.<span class="hljs-property">data</span>.<span class="hljs-property">message</span><br>    &#125;);<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(e);<br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> http;<br></code></pre></td></tr></table></figure>
<p>如此做：</p>
<p><img src="05/02.webp" alt="webp"></p>
<h3 id="10.-%E7%99%BB%E5%BD%95-%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0" tabindex="-1" id="10-登录-退出登录功能实现">10. 登录-退出登录功能实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>退出登录业务实现</strong></p>
<ol>
<li>点击退出登录弹确认框</li>
<li>点击确定按钮实现退出登录逻辑</li>
<li>登录逻辑包括：
<ol>
<li>清除当前用户信息</li>
<li>跳转到登录页面</li>
</ol>
</li>
</ol>
</div>
<p>在 <code>src/stores/user.js</code> 中设置清楚用户信息的逻辑：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; loginAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/user&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> userInfo = <span class="hljs-title function_">ref</span>(&#123;&#125;);<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">&#123; account, password &#125;</span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loginAPI</span>(&#123; account, password &#125;);<br>        userInfo.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>;<br>    &#125;;<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearUserInfo</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>        userInfo.<span class="hljs-property">value</span> = &#123;&#125;;<br>    &#125;;<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        userInfo,<br>        getUserInfo,<br>        clearUserInfo<br>    &#125;;<br>&#125;, &#123;<br>    <span class="hljs-attr">persist</span>: <span class="hljs-literal">true</span><br>&#125;);<br></code></pre></td></tr></table></figure>
<p>编辑 <code>src/Layout/components/LayoutNav.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; useUserStore &#125; from &#x27;@/stores/user&#x27;;<br>import &#123; useRouter &#125; from &#x27;vue-router&#x27;;<br><br>const userStore = useUserStore();<br>const router = useRouter();<br>const confirm = () =&gt; &#123;<br>    userStore.clearUserInfo();<br>    router.push(&#x27;/login&#x27;);<br>&#125;;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;nav class=&quot;app-topnav&quot;&gt;<br>        &lt;div class=&quot;container&quot;&gt;<br>            &lt;ul&gt;<br>                &lt;template v-if=&quot;userStore.userInfo.token&quot;&gt;<br>                    &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;&lt;i class=&quot;iconfont icon-user&quot;&gt;&lt;/i&gt;&#123;&#123; userStore.userInfo.account &#125;&#125;&lt;/a&gt;<br>                    &lt;/li&gt;<br>                    &lt;li&gt;<br>                        &lt;el-popconfirm @confirm=&quot;confirm&quot; title=&quot;确认退出吗?&quot; confirm-button-text=&quot;确认&quot;<br>                            cancel-button-text=&quot;取消&quot;&gt;<br>                            &lt;template #reference&gt;<br>                                &lt;a href=&quot;javascript:;&quot;&gt;退出登录&lt;/a&gt;<br>                            &lt;/template&gt;<br>                        &lt;/el-popconfirm&gt;<br>                    &lt;/li&gt;<br>                    &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;我的订单&lt;/a&gt;&lt;/li&gt;<br>                    &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;会员中心&lt;/a&gt;&lt;/li&gt;<br>                &lt;/template&gt;<br>                &lt;template v-else&gt;<br>                    &lt;li&gt;&lt;a href=&quot;javascript:;&quot; @click=&quot;$router.push(&#x27;/login&#x27;)&quot;&gt;请先登录&lt;/a&gt;&lt;/li&gt;<br>                    &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;帮助中心&lt;/a&gt;&lt;/li&gt;<br>                    &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;关于我们&lt;/a&gt;&lt;/li&gt;<br>                &lt;/template&gt;<br>            &lt;/ul&gt;<br>        &lt;/div&gt;<br>    &lt;/nav&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="11.-%E7%99%BB%E5%BD%95-token-%E5%A4%B1%E6%95%88-401-%E6%8B%A6%E6%88%AA%E5%A4%84%E7%90%86" tabindex="-1" id="11-登录-Token-失效-401-拦截处理">11. 登录-Token 失效 401 拦截处理</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>业务背景</strong></p>
<p>Token 的有效性可以保持一定时间，如果用户一段时间不做任何操作，Token 就会失效，使用失效的 Token 再去请求一些接口，接口就会报 401 状态码错误，需要我们做额外处理。</p>
<p>两个需要思考的问题</p>
<ol>
<li>我们能确定用户到底是在访问哪个接口时出现的 401 错误吗？在什么位置去拦截这个 401？</li>
<li>检测到 401 之后又该干什么呢？</li>
</ol>
<p>解决方案-<strong>在 axios 响应拦截器做统一处理</strong></p>
<p><code>失败回调中拦截 401</code> → <code>清除掉过期的用户信息，跳转到登录页</code></p>
</div>
<p>编辑 <code>src/utils/http.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 响应拦截器：在接收到响应后统一处理结果，常用于错误处理或数据格式转换。</span><br>http.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-property">data</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> &#123;<br>    <span class="hljs-title class_">ElMessage</span>(&#123;<br>        <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;warning&quot;</span>,<br>        <span class="hljs-attr">message</span>: e.<span class="hljs-property">response</span>.<span class="hljs-property">data</span>.<span class="hljs-property">message</span><br>    &#125;);<br>    <span class="hljs-keyword">if</span> (e.<span class="hljs-property">response</span>.<span class="hljs-property">status</span> === <span class="hljs-number">401</span>) &#123;<br>        userStore.<span class="hljs-title function_">clearUserInfo</span>();<br>        router.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;/login&#x27;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(e);<br>&#125;);<br></code></pre></td></tr></table></figure>
<h3 id="12.-%E8%B4%AD%E7%89%A9%E8%BD%A6-%E6%B5%81%E7%A8%8B%E6%A2%B3%E7%90%86%E5%92%8C%E6%9C%AC%E5%9C%B0%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%AE%9E%E7%8E%B0" tabindex="-1" id="12-购物车-流程梳理和本地加入购物车实现">12. 购物车-流程梳理和本地加入购物车实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>购物车业务逻辑梳理拆解</strong></p>
<p><img src="05/03.webp" alt="webp"></p>
<ol>
<li>整个购物车的实现分为俩个大分支，本地购物车操作和接口购物车操作</li>
<li>由于购物车数据的特殊性，采取 Pinia 管理购物车列表数据并添加持久化缓存</li>
</ol>
<p><strong>本地购物车 - 加入购物车实现</strong></p>
<p><img src="05/04.webp" alt="webp"></p>
</div>
<p>创建 <code>src/stores/cartStore.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;cart&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> cartList = <span class="hljs-title function_">ref</span>([]);<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">addCart</span> = (<span class="hljs-params">goods</span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> item = cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> goods.<span class="hljs-property">skuId</span> === item.<span class="hljs-property">skuId</span>);<br>        <span class="hljs-keyword">if</span> (item) &#123;<br>            item.<span class="hljs-property">count</span> ++;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(goods)<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> &#123;<br>        cartList,<br>        addCart<br>    &#125;<br>&#125;, &#123;<br>    <span class="hljs-attr">persist</span>: <span class="hljs-literal">true</span>,<br>&#125;);<br></code></pre></td></tr></table></figure>
<p>编辑 <code>src/views/Detail/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import DetailHot from &#x27;./components/DetailHot.vue&#x27;;<br>import &#123; getDetail &#125; from &#x27;@/apis/detail&#x27;;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br>import &#123; useRoute &#125; from &#x27;vue-router&#x27;;<br>import &#123; ElMessage &#125; from &#x27;element-plus&#x27;;<br>import &#123; useCartStore &#125; from &#x27;@/stores/cartStore&#x27;;<br><br>const cartStore = useCartStore();<br><br>const goods = ref(&#123;&#125;);<br>const route = useRoute();<br>const getGoods = async () =&gt; &#123;<br>    const res = await getDetail(route.params.id);<br>    goods.value = res.result;<br>&#125;;<br><br>onMounted(() =&gt; getGoods());<br><br>// sku 规格被操作时<br>let skuObj = &#123;&#125;<br>const skuChange = (sku) =&gt; &#123;<br>    skuObj = sku<br>&#125;<br>// count<br>const count = ref(1)<br>const countChange = (count) =&gt; &#123;<br>    console.log(count)<br>&#125;<br>// 加入购物车<br>const addCart = () =&gt; &#123;<br>    if (skuObj.skuId) &#123;<br>        cartStore.addCart(&#123;<br>            id: goods.value.id,<br>            name: goods.value.name,<br>            picture: goods.value.mainPictures[0],<br>            price: skuObj.price,<br>            count: count.value,<br>            skuId: skuObj.skuId,<br>            attrsText: skuObj.specsText,<br>            selected: true<br>        &#125;);<br>    &#125; else &#123;<br>        ElMessage.error(&#x27;请选择规格&#x27;);<br>    &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;xtx-goods-page&quot;&gt;<br>        &lt;div class=&quot;container&quot; v-if=&quot;goods.details&quot;&gt;<br>            &lt;div class=&quot;bread-container&quot;&gt;<br>                &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;<br>                    &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;<br>                    &lt;el-breadcrumb-item :to=&quot;&#123; path: `/category/sub/$&#123;goods.categories[1].id&#125;` &#125;&quot;&gt;&#123;&#123;<br>                        goods.categories[1].name &#125;&#125;<br>                    &lt;/el-breadcrumb-item&gt;<br>                    &lt;el-breadcrumb-item :to=&quot;&#123; path: `/category/sub/$&#123;goods.categories[0].id&#125;` &#125;&quot;&gt;&#123;&#123;<br>                        goods.categories[0].name &#125;&#125;<br>                    &lt;/el-breadcrumb-item&gt;<br>                    &lt;el-breadcrumb-item&gt;&#123;&#123; goods.name &#125;&#125;&lt;/el-breadcrumb-item&gt;<br>                &lt;/el-breadcrumb&gt;<br>            &lt;/div&gt;<br>            &lt;!-- 商品信息 --&gt;<br>            &lt;div class=&quot;info-container&quot;&gt;<br>                &lt;div&gt;<br>                    &lt;div class=&quot;goods-info&quot;&gt;<br>                        &lt;div class=&quot;media&quot;&gt;<br>                            &lt;!-- 图片预览区 --&gt;<br>                            &lt;ImageView :image-list=&quot;goods.mainPictures&quot; /&gt;<br>                            &lt;!-- 统计数量 --&gt;<br>                            &lt;ul class=&quot;goods-sales&quot;&gt;<br>                                &lt;li&gt;<br>                                    &lt;p&gt;销量人气&lt;/p&gt;<br>                                    &lt;p&gt; &#123;&#123; goods.salesCount &#125;&#125;+ &lt;/p&gt;<br>                                    &lt;p&gt;&lt;i class=&quot;iconfont icon-task-filling&quot;&gt;&lt;/i&gt;销量人气&lt;/p&gt;<br>                                &lt;/li&gt;<br>                                &lt;li&gt;<br>                                    &lt;p&gt;商品评价&lt;/p&gt;<br>                                    &lt;p&gt; &#123;&#123; goods.commentCount &#125;&#125;+&lt;/p&gt;<br>                                    &lt;p&gt;&lt;i class=&quot;iconfont icon-comment-filling&quot;&gt;&lt;/i&gt;查看评价&lt;/p&gt;<br>                                &lt;/li&gt;<br>                                &lt;li&gt;<br>                                    &lt;p&gt;收藏人气&lt;/p&gt;<br>                                    &lt;p&gt; &#123;&#123; goods.collectCount &#125;&#125;+&lt;/p&gt;<br>                                    &lt;p&gt;&lt;i class=&quot;iconfont icon-favorite-filling&quot;&gt;&lt;/i&gt;收藏商品&lt;/p&gt;<br>                                &lt;/li&gt;<br>                                &lt;li&gt;<br>                                    &lt;p&gt;品牌信息&lt;/p&gt;<br>                                    &lt;p&gt; &#123;&#123; goods.brand.name &#125;&#125;&lt;/p&gt;<br>                                    &lt;p&gt;&lt;i class=&quot;iconfont icon-dynamic-filling&quot;&gt;&lt;/i&gt;品牌主页&lt;/p&gt;<br>                                &lt;/li&gt;<br>                            &lt;/ul&gt;<br>                        &lt;/div&gt;<br>                        &lt;div class=&quot;spec&quot;&gt;<br>                            &lt;!-- 商品信息区 --&gt;<br>                            &lt;p class=&quot;g-name&quot;&gt;&#123;&#123; goods.name &#125;&#125;&lt;/p&gt;<br>                            &lt;p class=&quot;g-desc&quot;&gt;&#123;&#123; goods.desc &#125;&#125;&lt;/p&gt;<br>                            &lt;p class=&quot;g-price&quot;&gt;<br>                                &lt;span&gt;&#123;&#123; goods.price &#125;&#125;&lt;/span&gt;<br>                                &lt;span&gt;&#123;&#123; goods.oldPrice &#125;&#125;&lt;/span&gt;<br>                            &lt;/p&gt;<br>                            &lt;div class=&quot;g-service&quot;&gt;<br>                                &lt;dl&gt;<br>                                    &lt;dt&gt;促销&lt;/dt&gt;<br>                                    &lt;dd&gt;12月好物放送，App领券购买直降120元&lt;/dd&gt;<br>                                &lt;/dl&gt;<br>                                &lt;dl&gt;<br>                                    &lt;dt&gt;服务&lt;/dt&gt;<br>                                    &lt;dd&gt;<br>                                        &lt;span&gt;无忧退货&lt;/span&gt;<br>                                        &lt;span&gt;快速退款&lt;/span&gt;<br>                                        &lt;span&gt;免费包邮&lt;/span&gt;<br>                                        &lt;a href=&quot;javascript:;&quot;&gt;了解详情&lt;/a&gt;<br>                                    &lt;/dd&gt;<br>                                &lt;/dl&gt;<br>                            &lt;/div&gt;<br>                            &lt;!-- sku组件 --&gt;<br>                            &lt;XtxSku :goods=&quot;goods&quot; @change=&quot;skuChange&quot;/&gt;<br>                            &lt;!-- 数据组件 --&gt;<br>                            &lt;el-input-number v-model=&quot;count&quot; @change=&quot;countChange&quot;/&gt;<br>                            &lt;!-- 按钮组件 --&gt;<br>                            &lt;div&gt;<br>                                &lt;el-button size=&quot;large&quot; class=&quot;btn&quot; @click=&quot;addCart&quot;&gt;<br>                                    加入购物车<br>                                &lt;/el-button&gt;<br>                            &lt;/div&gt;<br>                        &lt;/div&gt;<br>                    &lt;/div&gt;<br>                    &lt;div class=&quot;goods-footer&quot;&gt;<br>                        &lt;div class=&quot;goods-article&quot;&gt;<br>                            &lt;!-- 商品详情 --&gt;<br>                            &lt;div class=&quot;goods-tabs&quot;&gt;<br>                                &lt;nav&gt;<br>                                    &lt;a&gt;商品详情&lt;/a&gt;<br>                                &lt;/nav&gt;<br>                                &lt;div class=&quot;goods-detail&quot;&gt;<br>                                    &lt;!-- 属性 --&gt;<br>                                    &lt;ul class=&quot;attrs&quot;&gt;<br>                                        &lt;li v-for=&quot;item in 3&quot; :key=&quot;item.value&quot;&gt;<br>                                            &lt;span class=&quot;dt&quot;&gt;白色&lt;/span&gt;<br>                                            &lt;span class=&quot;dd&quot;&gt;纯棉&lt;/span&gt;<br>                                        &lt;/li&gt;<br>                                    &lt;/ul&gt;<br>                                    &lt;!-- 图片 --&gt;<br><br>                                &lt;/div&gt;<br>                            &lt;/div&gt;<br>                        &lt;/div&gt;<br>                        &lt;!-- 24热榜+专题推荐 --&gt;<br>                        &lt;div class=&quot;goods-aside&quot;&gt;<br>                            &lt;DetailHot :hot-type=&quot;1&quot; /&gt;<br>                            &lt;DetailHot :hot-type=&quot;2&quot; /&gt;<br>                        &lt;/div&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p><img src="05/05.webp" alt="webp"></p>
<h3 id="13.-%E8%B4%AD%E7%89%A9%E8%BD%A6-%E6%9C%AC%E5%9C%B0-%E5%A4%B4%E9%83%A8%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93" tabindex="-1" id="13-购物车-本地-头部购物车列表渲染">13. 购物车-本地-头部购物车列表渲染</h3>
<h3 id="14.-%E8%B4%AD%E7%89%A9%E8%BD%A6-%E6%9C%AC%E5%9C%B0-%E5%A4%B4%E9%83%A8%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0" tabindex="-1" id="14-购物车-本地-头部购物车删除功能实现">14. 购物车-本地-头部购物车删除功能实现</h3>
<h3 id="15.-%E8%B4%AD%E7%89%A9%E8%BD%A6-%E6%9C%AC%E5%9C%B0-%E5%A4%B4%E9%83%A8%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%BB%9F%E8%AE%A1%E8%AE%A1%E7%AE%97" tabindex="-1" id="15-购物车-本地-头部购物车统计计算">15. 购物车-本地-头部购物车统计计算</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>本地购物车 - 头部购物车列表渲染</strong></p>
<p><code>准备头部购物车组件</code> → <code>从 Pinia 中获取数据渲染列表</code></p>
<p><strong>本地购物车 - 头部购物车统计计算</strong></p>
<p>用什么来实现：<strong>计算属性</strong></p>
<p>计算逻辑是什么：</p>
<ol>
<li>商品总数计算逻辑：商品列表中的所有商品 <strong>count 累加之和</strong></li>
<li>商品总价钱计算逻辑：商品列表中的所有商品的 <strong>count * price 累加之和</strong></li>
</ol>
</div>
<p>创建 <code>src/views/Layout/components/HeaderCart.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; useCartStore &#125; from &#x27;@/stores/cartStore&#x27;;<br><br>const store = useCartStore();<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;cart&quot;&gt;<br>        &lt;a class=&quot;curr&quot; href=&quot;javascript:;&quot;&gt;<br>            &lt;i class=&quot;iconfont icon-cart&quot;&gt;&lt;/i&gt;&lt;em&gt;&#123;&#123; store.cartList.length &#125;&#125;&lt;/em&gt;<br>        &lt;/a&gt;<br>        &lt;div class=&quot;layer&quot;&gt;<br>            &lt;div class=&quot;list&quot;&gt;<br>                &lt;div class=&quot;item&quot; v-for=&quot;i in store.cartList&quot; :key=&quot;i&quot;&gt;<br>                    &lt;RouterLink :to=&quot;`/detail/$&#123;i.id&#125;`&quot;&gt;<br>                        &lt;img :src=&quot;i.picture&quot; alt=&quot;&quot; /&gt;<br>                        &lt;div class=&quot;center&quot;&gt;<br>                            &lt;p class=&quot;name ellipsis-2&quot;&gt;<br>                                &#123;&#123; i.name &#125;&#125;<br>                            &lt;/p&gt;<br>                            &lt;p class=&quot;attr ellipsis&quot;&gt;&#123;&#123; i.attrsText &#125;&#125;&lt;/p&gt;<br>                        &lt;/div&gt;<br>                        &lt;div class=&quot;right&quot;&gt;<br>                            &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; i.price &#125;&#125;&lt;/p&gt;<br>                            &lt;p class=&quot;count&quot;&gt;x&#123;&#123; i.count &#125;&#125;&lt;/p&gt;<br>                        &lt;/div&gt;<br>                    &lt;/RouterLink&gt;<br>                    &lt;i class=&quot;iconfont icon-close-new&quot; @click=&quot;store.delCart(i.skuId)&quot;&gt;&lt;/i&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>            &lt;div class=&quot;foot&quot;&gt;<br>                &lt;div class=&quot;total&quot;&gt;<br>                    &lt;p&gt;共 &#123;&#123; store.allCount &#125;&#125; 件商品&lt;/p&gt;<br>                    &lt;p&gt;&amp;yen; &#123;&#123; store.allPrice.toFixed(2) &#125;&#125; &lt;/p&gt;<br>                &lt;/div&gt;<br>                &lt;el-button size=&quot;large&quot; type=&quot;primary&quot;&gt;去购物车结算&lt;/el-button&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.cart &#123;<br>    width: 50px;<br>    position: relative;<br>    z-index: 600;<br><br>    .curr &#123;<br>        height: 32px;<br>        line-height: 32px;<br>        text-align: center;<br>        position: relative;<br>        display: block;<br><br>        .icon-cart &#123;<br>            font-size: 22px;<br>        &#125;<br><br>        em &#123;<br>            font-style: normal;<br>            position: absolute;<br>            right: 0;<br>            top: 0;<br>            padding: 1px 6px;<br>            line-height: 1;<br>            background: $helpColor;<br>            color: #fff;<br>            font-size: 12px;<br>            border-radius: 10px;<br>            font-family: Arial;<br>        &#125;<br>    &#125;<br><br>    &amp;:hover &#123;<br>        .layer &#123;<br>            opacity: 1;<br>            transform: none;<br>        &#125;<br>    &#125;<br><br>    .layer &#123;<br>        opacity: 0;<br>        transition: all 0.4s 0.2s;<br>        transform: translateY(-200px) scale(1, 0);<br>        width: 400px;<br>        height: 400px;<br>        position: absolute;<br>        top: 50px;<br>        right: 0;<br>        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);<br>        background: #fff;<br>        border-radius: 4px;<br>        padding-top: 10px;<br><br>        &amp;::before &#123;<br>            content: &quot;&quot;;<br>            position: absolute;<br>            right: 14px;<br>            top: -10px;<br>            width: 20px;<br>            height: 20px;<br>            background: #fff;<br>            transform: scale(0.6, 1) rotate(45deg);<br>            box-shadow: -3px -3px 5px rgba(0, 0, 0, 0.1);<br>        &#125;<br><br>        .foot &#123;<br>            position: absolute;<br>            left: 0;<br>            bottom: 0;<br>            height: 70px;<br>            width: 100%;<br>            padding: 10px;<br>            display: flex;<br>            justify-content: space-between;<br>            background: #f8f8f8;<br>            align-items: center;<br><br>            .total &#123;<br>                padding-left: 10px;<br>                color: #999;<br><br>                p &#123;<br>                    &amp;:last-child &#123;<br>                        font-size: 18px;<br>                        color: $priceColor;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    .list &#123;<br>        height: 310px;<br>        overflow: auto;<br>        padding: 0 10px;<br><br>        &amp;::-webkit-scrollbar &#123;<br>            width: 10px;<br>            height: 10px;<br>        &#125;<br><br>        &amp;::-webkit-scrollbar-track &#123;<br>            background: #f8f8f8;<br>            border-radius: 2px;<br>        &#125;<br><br>        &amp;::-webkit-scrollbar-thumb &#123;<br>            background: #eee;<br>            border-radius: 10px;<br>        &#125;<br><br>        &amp;::-webkit-scrollbar-thumb:hover &#123;<br>            background: #ccc;<br>        &#125;<br><br>        .item &#123;<br>            border-bottom: 1px solid #f5f5f5;<br>            padding: 10px 0;<br>            position: relative;<br><br>            i &#123;<br>                position: absolute;<br>                bottom: 38px;<br>                right: 0;<br>                opacity: 0;<br>                color: #666;<br>                transition: all 0.5s;<br>            &#125;<br><br>            &amp;:hover &#123;<br>                i &#123;<br>                    opacity: 1;<br>                    cursor: pointer;<br>                &#125;<br>            &#125;<br><br>            a &#123;<br>                display: flex;<br>                align-items: center;<br><br>                img &#123;<br>                    height: 80px;<br>                    width: 80px;<br>                &#125;<br><br>                .center &#123;<br>                    padding: 0 10px;<br>                    width: 200px;<br><br>                    .name &#123;<br>                        font-size: 16px;<br>                    &#125;<br><br>                    .attr &#123;<br>                        color: #999;<br>                        padding-top: 5px;<br>                    &#125;<br>                &#125;<br><br>                .right &#123;<br>                    width: 100px;<br>                    padding-right: 20px;<br>                    text-align: center;<br><br>                    .price &#123;<br>                        font-size: 16px;<br>                        color: $priceColor;<br>                    &#125;<br><br>                    .count &#123;<br>                        color: #999;<br>                        margin-top: 5px;<br>                        font-size: 16px;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<p>在 <code>src/views/components/LayoutHeader.vue</code> 中渲染头部购物车：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; useCategoryStore &#125; from &#x27;@/stores/category&#x27;;<br>import HeaderCart from &#x27;./HeaderCart.vue&#x27;;<br><br>const categoryStore = useCategoryStore();<br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>    &lt;header class=&#x27;app-header&#x27;&gt;<br>        &lt;div class=&quot;container&quot;&gt;<br>            &lt;h1 class=&quot;logo&quot;&gt;<br>                &lt;RouterLink to=&quot;/&quot;&gt;小兔鲜&lt;/RouterLink&gt;<br>            &lt;/h1&gt;<br>            &lt;ul class=&quot;app-header-nav&quot;&gt;<br>                &lt;li class=&quot;home&quot; v-for=&quot;item in categoryStore.categoryList &quot; :key=&quot;item.id&quot;&gt;<br>                    &lt;RouterLink active-class=&quot;active&quot; :to=&quot;`/category/$&#123;item.id&#125;`&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/RouterLink&gt;<br>                &lt;/li&gt;<br>            &lt;/ul&gt;<br>            &lt;div class=&quot;search&quot;&gt;<br>                &lt;i class=&quot;iconfont icon-search&quot;&gt;&lt;/i&gt;<br>                &lt;input type=&quot;text&quot; placeholder=&quot;搜一搜&quot;&gt;<br>            &lt;/div&gt;<br>            &lt;!-- 头部购物车 --&gt;<br>            &lt;HeaderCart /&gt;<br>        &lt;/div&gt;<br>    &lt;/header&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p>在 <code>src/stores/cartStore.js</code> 中编写删除购物车的逻辑：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; ref, computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;cart&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> cartList = <span class="hljs-title function_">ref</span>([]);<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">addCart</span> = (<span class="hljs-params">goods</span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> item = cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> goods.<span class="hljs-property">skuId</span> === item.<span class="hljs-property">skuId</span>);<br>        <span class="hljs-keyword">if</span> (item) &#123;<br>            item.<span class="hljs-property">count</span> ++;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(goods)<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">delCart</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">skuId</span>) =&gt; &#123;<br>        <span class="hljs-keyword">if</span> (isLogin.<span class="hljs-property">value</span>) &#123;<br>            <span class="hljs-keyword">await</span> <span class="hljs-title function_">delCartAPI</span>([skuId]);<br>            <span class="hljs-title function_">updateNewList</span>();<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">const</span> idx = cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> skuId === item.<span class="hljs-property">skuId</span>)<br>            cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">splice</span>(idx, <span class="hljs-number">1</span>)<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> allCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">()=&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> acc + cur.<span class="hljs-property">count</span>, <span class="hljs-number">0</span>));<br>    <span class="hljs-keyword">const</span> allPrice = <span class="hljs-title function_">computed</span>(<span class="hljs-function">()=&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> acc + cur.<span class="hljs-property">price</span> * cur.<span class="hljs-property">count</span>, <span class="hljs-number">0</span>));<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        cartList,<br>        addCart,<br>        delCart,<br>        allCount,<br>        allPrice<br>    &#125;<br>&#125;, &#123;<br>    <span class="hljs-attr">persist</span>: <span class="hljs-literal">true</span>,<br>&#125;);<br></code></pre></td></tr></table></figure>
<h2 id="day06" tabindex="-1" id="day06">day06</h2>
<h3 id="01.-%E8%B4%AD%E7%89%A9%E8%BD%A6-%E6%9C%AC%E5%9C%B0-%E5%88%97%E8%A1%A8%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93" tabindex="-1" id="01-购物车-本地-列表购物车基础数据渲染">01. 购物车-本地-列表购物车基础数据渲染</h3>
<p>创建 <code>src/views/CartList/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; useCartStore &#125; from &#x27;@/stores/cartStore&#x27;;<br><br>const store = useCartStore();<br><br>const cartList = store.cartList;<br>const allCount = store.allCount;<br>const allPrice = store.allPrice;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;xtx-cart-page&quot;&gt;<br>        &lt;div class=&quot;container m-top-20&quot;&gt;<br>            &lt;div class=&quot;cart&quot;&gt;<br>                &lt;table&gt;<br>                    &lt;thead&gt;<br>                        &lt;tr&gt;<br>                            &lt;th width=&quot;120&quot;&gt;<br>                                &lt;el-checkbox /&gt;<br>                            &lt;/th&gt;<br>                            &lt;th width=&quot;400&quot;&gt;商品信息&lt;/th&gt;<br>                            &lt;th width=&quot;220&quot;&gt;单价&lt;/th&gt;<br>                            &lt;th width=&quot;180&quot;&gt;数量&lt;/th&gt;<br>                            &lt;th width=&quot;180&quot;&gt;小计&lt;/th&gt;<br>                            &lt;th width=&quot;140&quot;&gt;操作&lt;/th&gt;<br>                        &lt;/tr&gt;<br>                    &lt;/thead&gt;<br>                    &lt;!-- 商品列表 --&gt;<br>                    &lt;tbody&gt;<br>                        &lt;tr v-for=&quot;i in cartList&quot; :key=&quot;i.id&quot;&gt;<br>                            &lt;td&gt;<br>                                &lt;el-checkbox /&gt;<br>                            &lt;/td&gt;<br>                            &lt;td&gt;<br>                                &lt;div class=&quot;goods&quot;&gt;<br>                                    &lt;RouterLink to=&quot;/&quot;&gt;&lt;img :src=&quot;i.picture&quot; alt=&quot;&quot; /&gt;&lt;/RouterLink&gt;<br>                                    &lt;div&gt;<br>                                        &lt;p class=&quot;name ellipsis&quot;&gt;<br>                                            &#123;&#123; i.name &#125;&#125;<br>                                        &lt;/p&gt;<br>                                    &lt;/div&gt;<br>                                &lt;/div&gt;<br>                            &lt;/td&gt;<br>                            &lt;td class=&quot;tc&quot;&gt;<br>                                &lt;p&gt;&amp;yen;&#123;&#123; i.price &#125;&#125;&lt;/p&gt;<br>                            &lt;/td&gt;<br>                            &lt;td class=&quot;tc&quot;&gt;<br>                                &lt;el-input-number v-model=&quot;i.count&quot; /&gt;<br>                            &lt;/td&gt;<br>                            &lt;td class=&quot;tc&quot;&gt;<br>                                &lt;p class=&quot;f16 red&quot;&gt;&amp;yen;&#123;&#123; (i.price * i.count).toFixed(2) &#125;&#125;&lt;/p&gt;<br>                            &lt;/td&gt;<br>                            &lt;td class=&quot;tc&quot;&gt;<br>                                &lt;p&gt;<br>                                    &lt;el-popconfirm title=&quot;确认删除吗?&quot; confirm-button-text=&quot;确认&quot; cancel-button-text=&quot;取消&quot;<br>                                        @confirm=&quot;delCart(i)&quot;&gt;<br>                                        &lt;template #reference&gt;<br>                                            &lt;a href=&quot;javascript:;&quot;&gt;删除&lt;/a&gt;<br>                                        &lt;/template&gt;<br>                                    &lt;/el-popconfirm&gt;<br>                                &lt;/p&gt;<br>                            &lt;/td&gt;<br>                        &lt;/tr&gt;<br>                        &lt;tr v-if=&quot;cartList.length === 0&quot;&gt;<br>                            &lt;td colspan=&quot;6&quot;&gt;<br>                                &lt;div class=&quot;cart-none&quot;&gt;<br>                                    &lt;el-empty description=&quot;购物车列表为空&quot;&gt;<br>                                        &lt;el-button type=&quot;primary&quot;&gt;随便逛逛&lt;/el-button&gt;<br>                                    &lt;/el-empty&gt;<br>                                &lt;/div&gt;<br>                            &lt;/td&gt;<br>                        &lt;/tr&gt;<br>                    &lt;/tbody&gt;<br><br>                &lt;/table&gt;<br>            &lt;/div&gt;<br>            &lt;!-- 操作栏 --&gt;<br>            &lt;div class=&quot;action&quot;&gt;<br>                &lt;div class=&quot;batch&quot;&gt;<br>                    共 &#123;&#123; allCount &#125;&#125; 件商品，已选择 2 件，商品合计：<br>                    &lt;span class=&quot;red&quot;&gt;¥ &#123;&#123; allPrice.toFixed(2) &#125;&#125; &lt;/span&gt;<br>                &lt;/div&gt;<br>                &lt;div class=&quot;total&quot;&gt;<br>                    &lt;el-button size=&quot;large&quot; type=&quot;primary&quot;&gt;下单结算&lt;/el-button&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.xtx-cart-page &#123;<br>    margin-top: 20px;<br><br>    .cart &#123;<br>        background: #fff;<br>        color: #666;<br><br>        table &#123;<br>            border-spacing: 0;<br>            border-collapse: collapse;<br>            line-height: 24px;<br><br>            th,<br>            td &#123;<br>                padding: 10px;<br>                border-bottom: 1px solid #f5f5f5;<br><br>                &amp;:first-child &#123;<br>                    text-align: left;<br>                    padding-left: 30px;<br>                    color: #999;<br>                &#125;<br>            &#125;<br><br>            th &#123;<br>                font-size: 16px;<br>                font-weight: normal;<br>                line-height: 50px;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    .cart-none &#123;<br>        text-align: center;<br>        padding: 120px 0;<br>        background: #fff;<br><br>        p &#123;<br>            color: #999;<br>            padding: 20px 0;<br>        &#125;<br>    &#125;<br><br>    .tc &#123;<br>        text-align: center;<br><br>        a &#123;<br>            color: $xtxColor;<br>        &#125;<br><br>        .xtx-numbox &#123;<br>            margin: 0 auto;<br>            width: 120px;<br>        &#125;<br>    &#125;<br><br>    .red &#123;<br>        color: $priceColor;<br>    &#125;<br><br>    .green &#123;<br>        color: $xtxColor;<br>    &#125;<br><br>    .f16 &#123;<br>        font-size: 16px;<br>    &#125;<br><br>    .goods &#123;<br>        display: flex;<br>        align-items: center;<br><br>        img &#123;<br>            width: 100px;<br>            height: 100px;<br>        &#125;<br><br>        &gt;div &#123;<br>            width: 280px;<br>            font-size: 16px;<br>            padding-left: 10px;<br><br>            .attr &#123;<br>                font-size: 14px;<br>                color: #999;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    .action &#123;<br>        display: flex;<br>        background: #fff;<br>        margin-top: 20px;<br>        height: 80px;<br>        align-items: center;<br>        font-size: 16px;<br>        justify-content: space-between;<br>        padding: 0 30px;<br><br>        .xtx-checkbox &#123;<br>            color: #999;<br>        &#125;<br><br>        .batch &#123;<br>            a &#123;<br>                margin-left: 20px;<br>            &#125;<br>        &#125;<br><br>        .red &#123;<br>            font-size: 18px;<br>            margin-right: 20px;<br>            font-weight: bold;<br>        &#125;<br>    &#125;<br><br>    .tit &#123;<br>        color: #666;<br>        font-size: 16px;<br>        font-weight: normal;<br>        line-height: 50px;<br>    &#125;<br><br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<p>从 <code>router/index.js</code> 中配置路由：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">...<br>&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;cartlist&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">CartList</span><br>&#125;<br>...<br></code></pre></td></tr></table></figure>
<h3 id="02.-%E8%B4%AD%E7%89%A9%E8%BD%A6-%E6%9C%AC%E5%9C%B0-%E5%88%97%E8%A1%A8%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%8D%95%E9%80%89%E5%8A%9F%E8%83%BD" tabindex="-1" id="02-购物车-本地-列表购物车单选功能">02. 购物车-本地-列表购物车单选功能</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>列表购物车-单选功能</strong></p>
<p>核心思路：单选的核心思路就是始终把<strong>单选框的状态和 Pinia 中 store 对应的状态保持同步</strong></p>
<p>注意事项：<code>v-model</code> 双向绑定指令不方便进行命令式的操作（因为后续还需要调用接口），所以把 <code>v-model</code> 回退到一般模式，也就是：<strong><code>model-value</code> 和 <code>@change</code> 的配合实现</strong></p>
<p><img src="06/01.webp" alt="webp"></p>
</div>
<p>编辑 <code>src/views/CartList/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; useCartStore &#125; from &#x27;@/stores/cartStore&#x27;;<br><br>const store = useCartStore();<br><br>const cartList = store.cartList;<br>const allCount = store.allCount;<br>const allPrice = store.allPrice;<br><br>const singleCheck = (item, selected) =&gt; &#123;<br>    console.log(item, selected);<br>    store.singleCheck(item.skuId, selected);<br>&#125;;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>						...<br>                        &lt;tr v-for=&quot;i in cartList&quot; :key=&quot;i.id&quot;&gt;<br>                            &lt;td&gt;<br>                                &lt;!-- 单选框 --&gt;<br>                                &lt;el-checkbox :model-value=&quot;i.selected&quot; @change=&quot;(selected) =&gt; singleCheck(i, selected)&quot; /&gt;<br>                            &lt;/td&gt;<br>                            ...<br><br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p><code>(selected) =&gt; singleCheck(i, selected)</code> 这种写法可以传递额外的参数。</p>
<p>测试：</p>
<p><img src="06/02.webp" alt="webp"></p>
<h3 id="03.-%E8%B4%AD%E7%89%A9%E8%BD%A6-%E6%9C%AC%E5%9C%B0-%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%97%E8%A1%A8%E5%85%A8%E9%80%89%E5%8A%9F%E8%83%BD" tabindex="-1" id="03-购物车-本地-购物车列表全选功能">03. 购物车-本地-购物车列表全选功能</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>列表购物车-全选</strong></p>
<p>核心思路：</p>
<ol>
<li>操作单选决定全选：只有当 cartList 中的所有项都为 true 时，全选状态才为 true</li>
<li>操作全选决定单选：cartList 中的所有项的 selected 都要跟着一起变</li>
</ol>
<p><img src="06/03.webp" alt="webp"></p>
</div>
<p>编辑 <code>src/views/CartList/index.vue</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">allCheck</span> = (<span class="hljs-params">selected</span>) =&gt; &#123;<br>    store.<span class="hljs-title function_">allCheck</span>(selected);<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;th width=&quot;120&quot;&gt;<br>    &lt;el-checkbox :model-value=&quot;store.isAll&quot; @change=&quot;allCheck&quot;/&gt;<br>&lt;/th&gt;<br></code></pre></td></tr></table></figure>
<p>编辑 <code>src/stores/cartStore.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> isAll = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">selected</span>));<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">allCheck</span> = (<span class="hljs-params">selected</span>) =&gt; &#123;<br>    cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">selected</span> = selected);<br>&#125;<br><br><span class="hljs-keyword">return</span> &#123;<br>    ...<br>    allCheck,<br>    isAll<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="04.-%E8%B4%AD%E7%89%A9%E8%BD%A6-%E6%9C%AC%E5%9C%B0-%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%97%E8%A1%A8%E7%BB%9F%E8%AE%A1%E6%95%B0%E6%8D%AE%E5%AE%9E%E7%8E%B0" tabindex="-1" id="04-购物车-本地-购物车列表统计数据实现">04. 购物车-本地-购物车列表统计数据实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>列表购物车-统计数据实现</strong></p>
<p>在 <code>stores/cartStore/js</code> 中定义计算逻辑：</p>
<ol>
<li>
<p>已选择数量 = cartList 中<strong>所有 selected 字段为 true 项的 count 之和</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> selectedCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">selected</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> acc + cur.<span class="hljs-property">count</span>, <span class="hljs-number">0</span>));<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>商品合计 = cartlist 中<strong>所有 selected 字段为 true 项的 count * price 之和</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> selectedPrice = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">selected</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> acc + cur.<span class="hljs-property">price</span> * cur.<span class="hljs-property">count</span>, <span class="hljs-number">0</span>));<br></code></pre></td></tr></table></figure>
</li>
</ol>
</div>
<p>在 <code>src/views/CartList/index.vue</code> 中编辑操作栏：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 操作栏 --&gt;<br>&lt;div class=&quot;action&quot;&gt;<br>    &lt;div class=&quot;batch&quot;&gt;<br>        共 &#123;&#123; store.allCount &#125;&#125; 件商品，已选择 &#123;&#123; store.selectedCount &#125;&#125; 件，商品合计：<br>        &lt;span class=&quot;red&quot;&gt;¥ &#123;&#123; store.selectedPrice.toFixed(2) &#125;&#125; &lt;/span&gt;<br>    &lt;/div&gt;<br>    &lt;div class=&quot;total&quot;&gt;<br>        &lt;el-button size=&quot;large&quot; type=&quot;primary&quot;&gt;下单结算&lt;/el-button&gt;<br>    &lt;/div&gt;<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure>
<h3 id="05.-%E8%B4%AD%E7%89%A9%E8%BD%A6-%E6%8E%A5%E5%8F%A3-%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6" tabindex="-1" id="05-购物车-接口-加入购物车">05. 购物车-接口-加入购物车</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>接口购物车-整体业务流程回顾</strong></p>
<p><img src="06/04.webp" alt="webp"></p>
<p>结论</p>
<p>到目前为止，购物车在<strong>非登录状态下的各种操作都已经 ok 了，包括 action 的封装、触发、参数传递</strong>，剩下的事情就是在 action 中做登录状态的分支判断，<strong>补充登录状态下的接口操作逻辑</strong>即可</p>
<p><strong>接口购物车-加入购物车</strong></p>
<p><img src="06/05.webp" alt="webp"></p>
</div>
<p>创建 <code>src/apis/cart.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> httpInstance <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/http&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">insertCartAPI</span> = (<span class="hljs-params">&#123; skuId, count &#125;</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/member/cart&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>        <span class="hljs-attr">data</span>: &#123;<br>            skuId,<br>            count<br>        &#125;<br>    &#125;);<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">findNewCartListAPI</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;member/cart&#x27;</span><br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
<p>编写 <code>stores/cartStore.js</code>，如果登陆时，调用后端接口：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;cart&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();<br><span class="hljs-keyword">const</span> isLogin = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> userStore.<span class="hljs-property">userInfo</span>.<span class="hljs-property">token</span>);<br><span class="hljs-keyword">const</span> cartList = <span class="hljs-title function_">ref</span>([]);<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">addCart</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">goods</span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> &#123; skuId, count &#125; = goods;<br>    <span class="hljs-keyword">if</span> (isLogin.<span class="hljs-property">value</span>) &#123;<br>        <span class="hljs-comment">// 登录时调用接口</span><br>        <span class="hljs-keyword">await</span> <span class="hljs-title function_">insertCartAPI</span>(&#123; skuId, count &#125;);<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">findNewCartListAPI</span>();<br>        cartList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// 非登录时操作本地</span><br>        <span class="hljs-keyword">const</span> item = cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> goods.<span class="hljs-property">skuId</span> === item.<span class="hljs-property">skuId</span>);<br>        <span class="hljs-keyword">if</span> (item) &#123;<br>            item.<span class="hljs-property">count</span>++;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(goods)<br>        &#125;<br>    &#125;<br>&#125;<br>...<br></code></pre></td></tr></table></figure>
<h3 id="06.-%E8%B4%AD%E7%89%A9%E8%BD%A6-%E6%8E%A5%E5%8F%A3-%E5%88%A0%E9%99%A4%E8%B4%AD%E7%89%A9%E8%BD%A6" tabindex="-1" id="06-购物车-接口-删除购物车">06. 购物车-接口-删除购物车</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>接口购物车-删除购物车</strong></p>
<p><img src="06/06.webp" alt="webp"></p>
</div>
<p>在 <code>src/apis/cart.js</code> 中封装删除购物车的 API：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">delCartAPI</span> = (<span class="hljs-params">ids</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/member/cart&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;DELETE&#x27;</span>,<br>        <span class="hljs-attr">data</span>: &#123;<br>            ids<br>        &#125;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
<p>在 <code>src/stores/cartStore.js</code> 中编写逻辑：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">addCart</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">goods</span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> &#123; skuId, count &#125; = goods;<br>    <span class="hljs-keyword">if</span> (isLogin.<span class="hljs-property">value</span>) &#123;<br>        <span class="hljs-keyword">await</span> <span class="hljs-title function_">insertCartAPI</span>(&#123; skuId, count &#125;);<br>        <span class="hljs-title function_">updateNewList</span>();<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">const</span> item = cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> goods.<span class="hljs-property">skuId</span> === item.<span class="hljs-property">skuId</span>);<br>        <span class="hljs-keyword">if</span> (item) &#123;<br>            item.<span class="hljs-property">count</span>++;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(goods)<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">delCart</span> = <span class="hljs-keyword">async</span>(<span class="hljs-params">skuId</span>) =&gt; &#123;<br>    <span class="hljs-keyword">if</span> (isLogin.<span class="hljs-property">value</span>) &#123;<br>        <span class="hljs-keyword">await</span> <span class="hljs-title function_">delCartAPI</span>(skuId);<br>        <span class="hljs-title function_">updateNewList</span>();<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">const</span> index = cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">skuId</span> === skuId);<br>        cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>为了保持命名的规范化，将 <code>stores/</code> 下的文件末尾全部加上“Store”。</p>
<h3 id="07.-%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95-%E6%B8%85%E7%A9%BA%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%95%B0%E6%8D%AE" tabindex="-1" id="07-退出登录-清空购物车数据">07. 退出登录-清空购物车数据</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>业务需求</strong></p>
<p>在用户退出登录时，除了清除用户信息之外，也需要把购物车数据清空</p>
<p><img src="06/07.webp" alt="webp"></p>
</div>
<p><code>cartStroe.js</code> 里写清空购物车的逻辑：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">clearCart</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    cartList.<span class="hljs-property">value</span> = [];<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>userStore.js</code> 中在退出时调用清除购物车的 action：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; loginAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/user&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; useCartStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./cartStore&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> userInfo = <span class="hljs-title function_">ref</span>(&#123;&#125;);<br>    <span class="hljs-keyword">const</span> cartStore = <span class="hljs-title function_">useCartStore</span>();<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">&#123; account, password &#125;</span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loginAPI</span>(&#123; account, password &#125;);<br>        userInfo.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>;<br>    &#125;;<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearUserInfo</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>        userInfo.<span class="hljs-property">value</span> = &#123;&#125;;<br>        cartStore.<span class="hljs-title function_">clearCart</span>();<br>    &#125;;<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        userInfo,<br>        getUserInfo,<br>        clearUserInfo<br>    &#125;;<br>&#125;, &#123;<br>    <span class="hljs-attr">persist</span>: <span class="hljs-literal">true</span><br>&#125;);<br></code></pre></td></tr></table></figure>
<h3 id="08.-%E8%B4%AD%E7%89%A9%E8%BD%A6-%E5%90%88%E5%B9%B6%E6%9C%AC%E5%9C%B0%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8" tabindex="-1" id="08-购物车-合并本地购物车到服务器">08. 购物车-合并本地购物车到服务器</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>合并购物车业务实现</strong></p>
<p>问：用户在非登录时进行的所有购物车操作，我们的服务器能知道吗？</p>
<p>答：不能！不能的话不是白操作了吗？还本地购物车的意义在哪？</p>
<p>解决办法：<strong>在用户登录时</strong>，把<strong>本地的购物车</strong>数据和<strong>服务端购物车</strong>数据进行合并操作</p>
<p><img src="06/08.webp" alt="webp"></p>
</div>
<p>在 <code>apis/cart.js</code> 封装合并购物车的 API</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">mergeCartAPI</span> = (<span class="hljs-params">data</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/member/cart/merge&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>        data<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
<p>在 <code>stores/userStore.js</code> 中调用这个 API：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">&#123; account, password &#125;</span>) =&gt; &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;login&#x27;</span>, account, password);<br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loginAPI</span>(&#123; account, password &#125;);<br>    userInfo.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>;<br><br>    <span class="hljs-title function_">mergeCartAPI</span>(cartStore.<span class="hljs-property">cartList</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">skuId</span>: item.<span class="hljs-property">skuId</span>,<br>            <span class="hljs-attr">selected</span>: item.<span class="hljs-property">selected</span>,<br>            <span class="hljs-attr">count</span>: item.<span class="hljs-property">count</span><br>        &#125;<br>    &#125;));<br>    cartStore.<span class="hljs-title function_">updateNewList</span>();<br>&#125;;<br></code></pre></td></tr></table></figure>
<h3 id="09.-%E7%BB%93%E7%AE%97-%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E5%92%8C%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93" tabindex="-1" id="09-结算-路由配置和基础数据渲染">09. 结算-路由配置和基础数据渲染</h3>
<p><code>router/index.js</code> 中创建 <code>checkout</code> 页面：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;checkout&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Checkout</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>在 <code>src/views/CarList/index.vue</code> 中的下单结算中设置路由跳转：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;div class=&quot;total&quot;&gt;<br>    &lt;el-button size=&quot;large&quot; type=&quot;primary&quot; @click=&quot;$router.push(&#x27;/checkout&#x27;)&quot;&gt;下单结算&lt;/el-button&gt;<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure>
<p>在 <code>src/views/apis/checkout.js</code> 中封装 API：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> httpInstance <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/http&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getCheckInfoAPI</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/member/order/pre&#x27;</span>,<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
<p>创建 <code>src/views/Checkout/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getCheckInfoAPI &#125; from &#x27;@/apis/checkout&#x27;;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br><br>const checkInfo = ref(&#123;&#125;)  // 订单对象<br>const curAddress = ref(&#123;&#125;)<br><br>const getCheckInfo = async () =&gt; &#123;<br>    const res = await getCheckInfoAPI();<br>    checkInfo.value = res.result;<br>    console.log(checkInfo.value)<br>    const item = checkInfo.value.userAddresses.find(item =&gt; item.isDefault === 0);<br>    curAddress.value = item;<br>&#125;<br><br>onMounted(()=&gt; getCheckInfo())<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;xtx-pay-checkout-page&quot;&gt;<br>        &lt;div class=&quot;container&quot;&gt;<br>            &lt;div class=&quot;wrapper&quot;&gt;<br>                &lt;!-- 收货地址 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;收货地址&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;div class=&quot;address&quot;&gt;<br>                        &lt;div class=&quot;text&quot;&gt;<br>                            &lt;div class=&quot;none&quot; v-if=&quot;!curAddress&quot;&gt;您需要先添加收货地址才可提交订单。&lt;/div&gt;<br>                            &lt;ul v-else&gt;<br>                                &lt;li&gt;&lt;span&gt;收&lt;i /&gt;货&lt;i /&gt;人：&lt;/span&gt;&#123;&#123; curAddress.receiver &#125;&#125;&lt;/li&gt;<br>                                &lt;li&gt;&lt;span&gt;联系方式：&lt;/span&gt;&#123;&#123; curAddress.contact &#125;&#125;&lt;/li&gt;<br>                                &lt;li&gt;&lt;span&gt;收货地址：&lt;/span&gt;&#123;&#123; curAddress.fullLocation &#125;&#125; &#123;&#123; curAddress.address &#125;&#125;&lt;/li&gt;<br>                            &lt;/ul&gt;<br>                        &lt;/div&gt;<br>                        &lt;div class=&quot;action&quot;&gt;<br>                            &lt;el-button size=&quot;large&quot; @click=&quot;toggleFlag = true&quot;&gt;切换地址&lt;/el-button&gt;<br>                            &lt;el-button size=&quot;large&quot; @click=&quot;addFlag = true&quot;&gt;添加地址&lt;/el-button&gt;<br>                        &lt;/div&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 商品信息 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;商品信息&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;table class=&quot;goods&quot;&gt;<br>                        &lt;thead&gt;<br>                            &lt;tr&gt;<br>                                &lt;th width=&quot;520&quot;&gt;商品信息&lt;/th&gt;<br>                                &lt;th width=&quot;170&quot;&gt;单价&lt;/th&gt;<br>                                &lt;th width=&quot;170&quot;&gt;数量&lt;/th&gt;<br>                                &lt;th width=&quot;170&quot;&gt;小计&lt;/th&gt;<br>                                &lt;th width=&quot;170&quot;&gt;实付&lt;/th&gt;<br>                            &lt;/tr&gt;<br>                        &lt;/thead&gt;<br>                        &lt;tbody&gt;<br>                            &lt;tr v-for=&quot;i in checkInfo.goods&quot; :key=&quot;i.id&quot;&gt;<br>                                &lt;td&gt;<br>                                    &lt;a href=&quot;javascript:;&quot; class=&quot;info&quot;&gt;<br>                                        &lt;img :src=&quot;i.picture&quot; alt=&quot;&quot;&gt;<br>                                        &lt;div class=&quot;right&quot;&gt;<br>                                            &lt;p&gt;&#123;&#123; i.name &#125;&#125;&lt;/p&gt;<br>                                            &lt;p&gt;&#123;&#123; i.attrsText &#125;&#125;&lt;/p&gt;<br>                                        &lt;/div&gt;<br>                                    &lt;/a&gt;<br>                                &lt;/td&gt;<br>                                &lt;td&gt;&amp;yen;&#123;&#123; i.price &#125;&#125;&lt;/td&gt;<br>                                &lt;td&gt;&#123;&#123; i.count &#125;&#125;&lt;/td&gt;<br>                                &lt;td&gt;&amp;yen;&#123;&#123; i.totalPrice &#125;&#125;&lt;/td&gt;<br>                                &lt;td&gt;&amp;yen;&#123;&#123; i.totalPayPrice &#125;&#125;&lt;/td&gt;<br>                            &lt;/tr&gt;<br>                        &lt;/tbody&gt;<br>                    &lt;/table&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 配送时间 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;配送时间&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;a class=&quot;my-btn active&quot; href=&quot;javascript:;&quot;&gt;不限送货时间：周一至周日&lt;/a&gt;<br>                    &lt;a class=&quot;my-btn&quot; href=&quot;javascript:;&quot;&gt;工作日送货：周一至周五&lt;/a&gt;<br>                    &lt;a class=&quot;my-btn&quot; href=&quot;javascript:;&quot;&gt;双休日、假日送货：周六至周日&lt;/a&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 支付方式 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;支付方式&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;a class=&quot;my-btn active&quot; href=&quot;javascript:;&quot;&gt;在线支付&lt;/a&gt;<br>                    &lt;a class=&quot;my-btn&quot; href=&quot;javascript:;&quot;&gt;货到付款&lt;/a&gt;<br>                    &lt;span style=&quot;color:#999&quot;&gt;货到付款需付5元手续费&lt;/span&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 金额明细 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;金额明细&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;div class=&quot;total&quot;&gt;<br>                        &lt;dl&gt;<br>                            &lt;dt&gt;商品件数：&lt;/dt&gt;<br>                            &lt;dd&gt;&#123;&#123; checkInfo.summary?.goodsCount &#125;&#125;件&lt;/dd&gt;<br>                        &lt;/dl&gt;<br>                        &lt;dl&gt;<br>                            &lt;dt&gt;商品总价：&lt;/dt&gt;<br>                            &lt;dd&gt;¥&#123;&#123; checkInfo.summary?.totalPrice.toFixed(2) &#125;&#125;&lt;/dd&gt;<br>                        &lt;/dl&gt;<br>                        &lt;dl&gt;<br>                            &lt;dt&gt;运&lt;i&gt;&lt;/i&gt;费：&lt;/dt&gt;<br>                            &lt;dd&gt;¥&#123;&#123; checkInfo.summary?.postFee.toFixed(2) &#125;&#125;&lt;/dd&gt;<br>                        &lt;/dl&gt;<br>                        &lt;dl&gt;<br>                            &lt;dt&gt;应付总额：&lt;/dt&gt;<br>                            &lt;dd class=&quot;price&quot;&gt;&#123;&#123; checkInfo.summary?.totalPayPrice.toFixed(2) &#125;&#125;&lt;/dd&gt;<br>                        &lt;/dl&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 提交订单 --&gt;<br>                &lt;div class=&quot;submit&quot;&gt;<br>                    &lt;el-button type=&quot;primary&quot; size=&quot;large&quot;&gt;提交订单&lt;/el-button&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>    &lt;!-- 切换地址 --&gt;<br>    &lt;!-- 添加地址 --&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.xtx-pay-checkout-page &#123;<br>    margin-top: 20px;<br><br>    .wrapper &#123;<br>        background: #fff;<br>        padding: 0 20px;<br><br>        .box-title &#123;<br>            font-size: 16px;<br>            font-weight: normal;<br>            padding-left: 10px;<br>            line-height: 70px;<br>            border-bottom: 1px solid #f5f5f5;<br>        &#125;<br><br>        .box-body &#123;<br>            padding: 20px 0;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.address &#123;<br>    border: 1px solid #f5f5f5;<br>    display: flex;<br>    align-items: center;<br><br>    .text &#123;<br>        flex: 1;<br>        min-height: 90px;<br>        display: flex;<br>        align-items: center;<br><br>        .none &#123;<br>            line-height: 90px;<br>            color: #999;<br>            text-align: center;<br>            width: 100%;<br>        &#125;<br><br>        &gt;ul &#123;<br>            flex: 1;<br>            padding: 20px;<br><br>            li &#123;<br>                line-height: 30px;<br><br>                span &#123;<br>                    color: #999;<br>                    margin-right: 5px;<br><br>                    &gt;i &#123;<br>                        width: 0.5em;<br>                        display: inline-block;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        &gt;a &#123;<br>            color: $xtxColor;<br>            width: 160px;<br>            text-align: center;<br>            height: 90px;<br>            line-height: 90px;<br>            border-right: 1px solid #f5f5f5;<br>        &#125;<br>    &#125;<br><br>    .action &#123;<br>        width: 420px;<br>        text-align: center;<br><br>        .btn &#123;<br>            width: 140px;<br>            height: 46px;<br>            line-height: 44px;<br>            font-size: 14px;<br><br>            &amp;:first-child &#123;<br>                margin-right: 10px;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.goods &#123;<br>    width: 100%;<br>    border-collapse: collapse;<br>    border-spacing: 0;<br><br>    .info &#123;<br>        display: flex;<br>        text-align: left;<br><br>        img &#123;<br>            width: 70px;<br>            height: 70px;<br>            margin-right: 20px;<br>        &#125;<br><br>        .right &#123;<br>            line-height: 24px;<br><br>            p &#123;<br>                &amp;:last-child &#123;<br>                    color: #999;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    tr &#123;<br>        th &#123;<br>            background: #f5f5f5;<br>            font-weight: normal;<br>        &#125;<br><br>        td,<br>        th &#123;<br>            text-align: center;<br>            padding: 20px;<br>            border-bottom: 1px solid #f5f5f5;<br><br>            &amp;:first-child &#123;<br>                border-left: 1px solid #f5f5f5;<br>            &#125;<br><br>            &amp;:last-child &#123;<br>                border-right: 1px solid #f5f5f5;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.my-btn &#123;<br>    width: 228px;<br>    height: 50px;<br>    border: 1px solid #e4e4e4;<br>    text-align: center;<br>    line-height: 48px;<br>    margin-right: 25px;<br>    color: #666666;<br>    display: inline-block;<br><br>    &amp;.active,<br>    &amp;:hover &#123;<br>        border-color: $xtxColor;<br>    &#125;<br>&#125;<br><br>.total &#123;<br>    dl &#123;<br>        display: flex;<br>        justify-content: flex-end;<br>        line-height: 50px;<br><br>        dt &#123;<br>            i &#123;<br>                display: inline-block;<br>                width: 2em;<br>            &#125;<br>        &#125;<br><br>        dd &#123;<br>            width: 240px;<br>            text-align: right;<br>            padding-right: 70px;<br><br>            &amp;.price &#123;<br>                font-size: 20px;<br>                color: $priceColor;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.submit &#123;<br>    text-align: right;<br>    padding: 60px;<br>    border-top: 1px solid #f5f5f5;<br>&#125;<br><br>.addressWrapper &#123;<br>    max-height: 500px;<br>    overflow-y: auto;<br>&#125;<br><br>.text &#123;<br>    flex: 1;<br>    min-height: 90px;<br>    display: flex;<br>    align-items: center;<br><br>    &amp;.item &#123;<br>        border: 1px solid #f5f5f5;<br>        margin-bottom: 10px;<br>        cursor: pointer;<br><br>        &amp;.active,<br>        &amp;:hover &#123;<br>            border-color: $xtxColor;<br>            background: lighten($xtxColor, 50%);<br>        &#125;<br><br>        &gt;ul &#123;<br>            padding: 10px;<br>            font-size: 14px;<br>            line-height: 30px;<br>        &#125;<br>    &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<h3 id="10.-%E7%BB%93%E7%AE%97-%E5%9C%B0%E5%9D%80%E5%88%87%E6%8D%A2-%E6%89%93%E5%BC%80%E5%BC%B9%E6%A1%86%E4%BA%A4%E4%BA%92%E5%AE%9E%E7%8E%B0" tabindex="-1" id="10-结算-地址切换-打开弹框交互实现">10. 结算-地址切换-打开弹框交互实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>地址切换交互需求分析</strong></p>
<ol>
<li>打开弹框交互：点击切换地址按钮，打开弹框，回显用户可选地址列表</li>
<li>切换地址交互：点击切换地址，点击确定按钮，激活地址替换默认收货地址</li>
</ol>
<p><strong>打开弹框交互实现</strong></p>
<p><img src="06/09.webp" alt="webp"></p>
</div>
<p>编辑 <code>src/views/Checkout/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>...<br>const showDialog = ref(false)<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>	...<br>    &lt;div class=&quot;action&quot;&gt;<br>        &lt;el-button size=&quot;large&quot; @click=&quot;showDialog = true&quot;&gt;切换地址&lt;/el-button&gt;<br>        &lt;el-button size=&quot;large&quot; @click=&quot;addFlag = true&quot;&gt;添加地址&lt;/el-button&gt;<br>    &lt;/div&gt;<br>	...<br>	&lt;!-- 切换地址 --&gt;<br>    &lt;el-dialog v-model=&quot;showDialog&quot; title=&quot;切换收货地址&quot; width=&quot;30%&quot; center&gt;<br>        &lt;div class=&quot;addressWrapper&quot;&gt;<br>            &lt;div class=&quot;text item&quot; v-for=&quot;item in checkInfo.userAddresses&quot; :key=&quot;item.id&quot;&gt;<br>                &lt;ul&gt;<br>                    &lt;li&gt;&lt;span&gt;收&lt;i /&gt;货&lt;i /&gt;人：&lt;/span&gt;&#123;&#123; item.receiver &#125;&#125; &lt;/li&gt;<br>                    &lt;li&gt;&lt;span&gt;联系方式：&lt;/span&gt;&#123;&#123; item.contact &#125;&#125;&lt;/li&gt;<br>                    &lt;li&gt;&lt;span&gt;收货地址：&lt;/span&gt;&#123;&#123; item.fullLocation + item.address &#125;&#125;&lt;/li&gt;<br>                &lt;/ul&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>        &lt;template #footer&gt;<br>            &lt;span class=&quot;dialog-footer&quot;&gt;<br>                &lt;el-button&gt;取消&lt;/el-button&gt;<br>                &lt;el-button type=&quot;primary&quot;&gt;确定&lt;/el-button&gt;<br>            &lt;/span&gt;<br>        &lt;/template&gt;<br>    &lt;/el-dialog&gt;<br>	...<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="11.-%E7%BB%93%E7%AE%97-%E5%88%87%E6%8D%A2%E5%9C%B0%E5%9D%80-%E5%9C%B0%E5%9D%80%E6%BF%80%E6%B4%BB%E4%BA%A4%E4%BA%92%E5%AE%9E%E7%8E%B0" tabindex="-1" id="11-结算-切换地址-地址激活交互实现">11. 结算-切换地址-地址激活交互实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>地址激活交互实现</strong></p>
<p>原理：地址切换是我们经常遇到的 <code>tab 切换类</code> 需求，这类需求的实现逻辑都是相似的</p>
<ol>
<li>点击时记录一个当前激活地址对象 activeAddress，点击哪个地址就把哪个地址对象记录下来</li>
<li>通过<strong>动态类名：class 控制激活样式类型 active 是否存在</strong>，判断条件为：激活地址对象的 <code>id === 当前项 id</code></li>
</ol>
</div>
<p>编辑 <code>src/views/Checkout/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getCheckInfoAPI &#125; from &#x27;@/apis/checkout&#x27;;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br><br>const checkInfo = ref(&#123;&#125;)  // 订单对象<br>const curAddress = ref(&#123;&#125;)<br><br>const getCheckInfo = async () =&gt; &#123;<br>    const res = await getCheckInfoAPI();<br>    checkInfo.value = res.result;<br>    const item = checkInfo.value.userAddresses.find(item =&gt; item.isDefault === 0);<br>    curAddress.value = item;<br>&#125;<br><br>onMounted(() =&gt; getCheckInfo())<br><br>const showDialog = ref(false)<br><br>const activeAddress = ref(&#123;&#125;);<br>const switchAddress = (item) =&gt; &#123;<br>    activeAddress.value = item;<br>&#125;<br><br>const confirm = () =&gt; &#123;<br>    curAddress.value = activeAddress.value;<br>    showDialog.value = false;<br>    activeAddress.value = &#123;&#125;;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;xtx-pay-checkout-page&quot;&gt;<br>        &lt;div class=&quot;container&quot;&gt;<br>            &lt;div class=&quot;wrapper&quot;&gt;<br>                &lt;!-- 收货地址 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;收货地址&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;div class=&quot;address&quot;&gt;<br>                        &lt;div class=&quot;text&quot;&gt;<br>                            &lt;div class=&quot;none&quot; v-if=&quot;!curAddress&quot;&gt;您需要先添加收货地址才可提交订单。&lt;/div&gt;<br>                            &lt;ul v-else&gt;<br>                                &lt;li&gt;&lt;span&gt;收&lt;i /&gt;货&lt;i /&gt;人：&lt;/span&gt;&#123;&#123; curAddress.receiver &#125;&#125;&lt;/li&gt;<br>                                &lt;li&gt;&lt;span&gt;联系方式：&lt;/span&gt;&#123;&#123; curAddress.contact &#125;&#125;&lt;/li&gt;<br>                                &lt;li&gt;&lt;span&gt;收货地址：&lt;/span&gt;&#123;&#123; curAddress.fullLocation &#125;&#125; &#123;&#123; curAddress.address &#125;&#125;&lt;/li&gt;<br>                            &lt;/ul&gt;<br>                        &lt;/div&gt;<br>                        &lt;div class=&quot;action&quot;&gt;<br>                            &lt;el-button size=&quot;large&quot; @click=&quot;showDialog = true; activeAddress = curAddress;&quot;&gt;切换地址&lt;/el-button&gt;<br>                            &lt;el-button size=&quot;large&quot; @click=&quot;addFlag = true&quot;&gt;添加地址&lt;/el-button&gt;<br>                        &lt;/div&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 商品信息 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;商品信息&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;table class=&quot;goods&quot;&gt;<br>                        &lt;thead&gt;<br>                            &lt;tr&gt;<br>                                &lt;th width=&quot;520&quot;&gt;商品信息&lt;/th&gt;<br>                                &lt;th width=&quot;170&quot;&gt;单价&lt;/th&gt;<br>                                &lt;th width=&quot;170&quot;&gt;数量&lt;/th&gt;<br>                                &lt;th width=&quot;170&quot;&gt;小计&lt;/th&gt;<br>                                &lt;th width=&quot;170&quot;&gt;实付&lt;/th&gt;<br>                            &lt;/tr&gt;<br>                        &lt;/thead&gt;<br>                        &lt;tbody&gt;<br>                            &lt;tr v-for=&quot;i in checkInfo.goods&quot; :key=&quot;i.id&quot;&gt;<br>                                &lt;td&gt;<br>                                    &lt;a href=&quot;javascript:;&quot; class=&quot;info&quot;&gt;<br>                                        &lt;img :src=&quot;i.picture&quot; alt=&quot;&quot;&gt;<br>                                        &lt;div class=&quot;right&quot;&gt;<br>                                            &lt;p&gt;&#123;&#123; i.name &#125;&#125;&lt;/p&gt;<br>                                            &lt;p&gt;&#123;&#123; i.attrsText &#125;&#125;&lt;/p&gt;<br>                                        &lt;/div&gt;<br>                                    &lt;/a&gt;<br>                                &lt;/td&gt;<br>                                &lt;td&gt;&amp;yen;&#123;&#123; i.price &#125;&#125;&lt;/td&gt;<br>                                &lt;td&gt;&#123;&#123; i.count &#125;&#125;&lt;/td&gt;<br>                                &lt;td&gt;&amp;yen;&#123;&#123; i.totalPrice &#125;&#125;&lt;/td&gt;<br>                                &lt;td&gt;&amp;yen;&#123;&#123; i.totalPayPrice &#125;&#125;&lt;/td&gt;<br>                            &lt;/tr&gt;<br>                        &lt;/tbody&gt;<br>                    &lt;/table&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 配送时间 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;配送时间&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;a class=&quot;my-btn active&quot; href=&quot;javascript:;&quot;&gt;不限送货时间：周一至周日&lt;/a&gt;<br>                    &lt;a class=&quot;my-btn&quot; href=&quot;javascript:;&quot;&gt;工作日送货：周一至周五&lt;/a&gt;<br>                    &lt;a class=&quot;my-btn&quot; href=&quot;javascript:;&quot;&gt;双休日、假日送货：周六至周日&lt;/a&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 支付方式 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;支付方式&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;a class=&quot;my-btn active&quot; href=&quot;javascript:;&quot;&gt;在线支付&lt;/a&gt;<br>                    &lt;a class=&quot;my-btn&quot; href=&quot;javascript:;&quot;&gt;货到付款&lt;/a&gt;<br>                    &lt;span style=&quot;color:#999&quot;&gt;货到付款需付5元手续费&lt;/span&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 金额明细 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;金额明细&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;div class=&quot;total&quot;&gt;<br>                        &lt;dl&gt;<br>                            &lt;dt&gt;商品件数：&lt;/dt&gt;<br>                            &lt;dd&gt;&#123;&#123; checkInfo.summary?.goodsCount &#125;&#125;件&lt;/dd&gt;<br>                        &lt;/dl&gt;<br>                        &lt;dl&gt;<br>                            &lt;dt&gt;商品总价：&lt;/dt&gt;<br>                            &lt;dd&gt;¥&#123;&#123; checkInfo.summary?.totalPrice.toFixed(2) &#125;&#125;&lt;/dd&gt;<br>                        &lt;/dl&gt;<br>                        &lt;dl&gt;<br>                            &lt;dt&gt;运&lt;i&gt;&lt;/i&gt;费：&lt;/dt&gt;<br>                            &lt;dd&gt;¥&#123;&#123; checkInfo.summary?.postFee.toFixed(2) &#125;&#125;&lt;/dd&gt;<br>                        &lt;/dl&gt;<br>                        &lt;dl&gt;<br>                            &lt;dt&gt;应付总额：&lt;/dt&gt;<br>                            &lt;dd class=&quot;price&quot;&gt;&#123;&#123; checkInfo.summary?.totalPayPrice.toFixed(2) &#125;&#125;&lt;/dd&gt;<br>                        &lt;/dl&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 提交订单 --&gt;<br>                &lt;div class=&quot;submit&quot;&gt;<br>                    &lt;el-button type=&quot;primary&quot; size=&quot;large&quot;&gt;提交订单&lt;/el-button&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>    &lt;!-- 切换地址 --&gt;<br>    &lt;el-dialog v-model=&quot;showDialog&quot; title=&quot;切换收货地址&quot; width=&quot;30%&quot; center&gt;<br>        &lt;div class=&quot;addressWrapper&quot;&gt;<br>            &lt;div class=&quot;text item&quot; :class=&quot;&#123; active: activeAddress.id === item.id &#125;&quot; @click=&quot;switchAddress(item)&quot; v-for=&quot;item in checkInfo.userAddresses&quot; :key=&quot;item.id&quot;&gt;<br>                &lt;ul&gt;<br>                    &lt;li&gt;&lt;span&gt;收&lt;i /&gt;货&lt;i /&gt;人：&lt;/span&gt;&#123;&#123; item.receiver &#125;&#125; &lt;/li&gt;<br>                    &lt;li&gt;&lt;span&gt;联系方式：&lt;/span&gt;&#123;&#123; item.contact &#125;&#125;&lt;/li&gt;<br>                    &lt;li&gt;&lt;span&gt;收货地址：&lt;/span&gt;&#123;&#123; item.fullLocation + item.address &#125;&#125;&lt;/li&gt;<br>                &lt;/ul&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>        &lt;template #footer&gt;<br>            &lt;span class=&quot;dialog-footer&quot;&gt;<br>                &lt;el-button @click=&quot;showDialog = false&quot;&gt;取消&lt;/el-button&gt;<br>                &lt;el-button type=&quot;primary&quot; @click=&quot;confirm&quot;&gt;确定&lt;/el-button&gt;<br>            &lt;/span&gt;<br>        &lt;/template&gt;<br>    &lt;/el-dialog&gt;<br>    &lt;!-- 添加地址 --&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="12.-%E7%BB%93%E7%AE%97-%E7%94%9F%E6%88%90%E8%AE%A2%E5%8D%95%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0" tabindex="-1" id="12-结算-生成订单功能实现">12. 结算-生成订单功能实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>业务需求说明</strong></p>
<p>确定结算信息没有问题之后，点击提交订单按钮，需要做以下俩个事情：</p>
<ol>
<li>调用接口生成订单 id，并且携带 id 跳转到支付页</li>
<li>调用更新购物车列表接口，更新购物车状态</li>
</ol>
<p><img src="06/10.webp" alt="webp"></p>
</div>
<p><strong>准备支付页路由</strong></p>
<p>编辑 <code>src/router/index.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;pay&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Pay</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>创建 <code>src/views/Pay/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>const payInfo = &#123;&#125;<br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>    &lt;div class=&quot;xtx-pay-page&quot;&gt;<br>        &lt;div class=&quot;container&quot;&gt;<br>            &lt;!-- 付款信息 --&gt;<br>            &lt;div class=&quot;pay-info&quot;&gt;<br>                &lt;span class=&quot;icon iconfont icon-queren2&quot;&gt;&lt;/span&gt;<br>                &lt;div class=&quot;tip&quot;&gt;<br>                    &lt;p&gt;订单提交成功！请尽快完成支付。&lt;/p&gt;<br>                    &lt;p&gt;支付还剩 &lt;span&gt;24分30秒&lt;/span&gt;, 超时后将取消订单&lt;/p&gt;<br>                &lt;/div&gt;<br>                &lt;div class=&quot;amount&quot;&gt;<br>                    &lt;span&gt;应付总额：&lt;/span&gt;<br>                    &lt;span&gt;¥&#123;&#123; payInfo.payMoney?.toFixed(2) &#125;&#125;&lt;/span&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>            &lt;!-- 付款方式 --&gt;<br>            &lt;div class=&quot;pay-type&quot;&gt;<br>                &lt;p class=&quot;head&quot;&gt;选择以下支付方式付款&lt;/p&gt;<br>                &lt;div class=&quot;item&quot;&gt;<br>                    &lt;p&gt;支付平台&lt;/p&gt;<br>                    &lt;a class=&quot;btn wx&quot; href=&quot;javascript:;&quot;&gt;&lt;/a&gt;<br>                    &lt;a class=&quot;btn alipay&quot; :href=&quot;payUrl&quot;&gt;&lt;/a&gt;<br>                &lt;/div&gt;<br>                &lt;div class=&quot;item&quot;&gt;<br>                    &lt;p&gt;支付方式&lt;/p&gt;<br>                    &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;招商银行&lt;/a&gt;<br>                    &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;工商银行&lt;/a&gt;<br>                    &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;建设银行&lt;/a&gt;<br>                    &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;农业银行&lt;/a&gt;<br>                    &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;交通银行&lt;/a&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.xtx-pay-page &#123;<br>    margin-top: 20px;<br>&#125;<br><br>.pay-info &#123;<br><br>    background: #fff;<br>    display: flex;<br>    align-items: center;<br>    height: 240px;<br>    padding: 0 80px;<br><br>    .icon &#123;<br>        font-size: 80px;<br>        color: #1dc779;<br>    &#125;<br><br>    .tip &#123;<br>        padding-left: 10px;<br>        flex: 1;<br><br>        p &#123;<br>            &amp;:first-child &#123;<br>                font-size: 20px;<br>                margin-bottom: 5px;<br>            &#125;<br><br>            &amp;:last-child &#123;<br>                color: #999;<br>                font-size: 16px;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    .amount &#123;<br>        span &#123;<br>            &amp;:first-child &#123;<br>                font-size: 16px;<br>                color: #999;<br>            &#125;<br><br>            &amp;:last-child &#123;<br>                color: $priceColor;<br>                font-size: 20px;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.pay-type &#123;<br>    margin-top: 20px;<br>    background-color: #fff;<br>    padding-bottom: 70px;<br><br>    p &#123;<br>        line-height: 70px;<br>        height: 70px;<br>        padding-left: 30px;<br>        font-size: 16px;<br><br>        &amp;.head &#123;<br>            border-bottom: 1px solid #f5f5f5;<br>        &#125;<br>    &#125;<br><br>    .btn &#123;<br>        width: 150px;<br>        height: 50px;<br>        border: 1px solid #e4e4e4;<br>        text-align: center;<br>        line-height: 48px;<br>        margin-left: 30px;<br>        color: #666666;<br>        display: inline-block;<br><br>        &amp;.active,<br>        &amp;:hover &#123;<br>            border-color: $xtxColor;<br>        &#125;<br><br>        &amp;.alipay &#123;<br>            background: url(https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/7b6b02396368c9314528c0bbd85a2e06.png) no-repeat center / contain;<br>        &#125;<br><br>        &amp;.wx &#123;<br>            background: url(https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/c66f98cff8649bd5ba722c2e8067c6ca.jpg) no-repeat center / contain;<br>        &#125;<br>    &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<p><strong>封装生成订单接口</strong></p>
<p>编辑 <code>src/apis/checkout.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">createOrderAPI</span> = (<span class="hljs-params">data</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/member/order&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>        data<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>点击按钮调用接口，得到订单 id，携带 id 完成路由跳转</strong></p>
<p>编辑 <code>src/views/Checkout/index.vue</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 创建订单</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">createOrder</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createOrderAPI</span>(&#123;<br>        <span class="hljs-attr">deliveryTimeType</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">payType</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">payChannel</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">buyerMessage</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>        <span class="hljs-attr">goods</span>: checkInfo.<span class="hljs-property">value</span>.<span class="hljs-property">goods</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>            <span class="hljs-keyword">return</span> &#123;<br>                <span class="hljs-attr">skuId</span>: item.<span class="hljs-property">skuId</span>,<br>                <span class="hljs-attr">count</span>: item.<span class="hljs-property">count</span><br>            &#125;<br>        &#125;),<br>        <span class="hljs-attr">addressId</span>: curAddress.<span class="hljs-property">value</span>.<span class="hljs-property">id</span><br>    &#125;)<br>    <span class="hljs-keyword">const</span> orderId = res.<span class="hljs-property">result</span>.<span class="hljs-property">id</span><br>    router.<span class="hljs-title function_">push</span>(&#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/pay&#x27;</span>,<br>        <span class="hljs-attr">query</span>: &#123;<br>            <span class="hljs-attr">id</span>: orderId<br>        &#125;<br>    &#125;)<br>    <span class="hljs-comment">// 更新购物车</span><br>    cartStore.<span class="hljs-title function_">updateNewList</span>()<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="13.-%E6%94%AF%E4%BB%98-%E6%B8%B2%E6%9F%93%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE" tabindex="-1" id="13-支付-渲染基础数据">13. 支付-渲染基础数据</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>渲染基础数据</strong></p>
<p>支付页有俩个关键数据，一个是<strong>要支付的钱数</strong>，一个是<strong>倒计时数据</strong>（超时不支付商品释放）</p>
<p><img src="06/11.webp" alt="webp"></p>
</div>
<p><strong>封装获取订单详情的接口</strong></p>
<p>创建 <code>src/apis/pay.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> httpInstance <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/http&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getOrderAPI</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">`/member/order/<span class="hljs-subst">$&#123;id&#125;</span>`</span><br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>获取关键数据并渲染</strong></p>
<p>编辑 <code>src/views/Checkout/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getCheckInfoAPI, createOrderAPI &#125; from &#x27;@/apis/checkout&#x27;;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br>import &#123; useRouter &#125; from &#x27;vue-router&#x27;;<br>import &#123; useCartStore &#125; from &#x27;@/stores/cartStore&#x27;;<br><br>const cartStore = useCartStore();<br>const router = useRouter();<br><br>const checkInfo = ref(&#123;&#125;)  // 订单对象<br>const curAddress = ref(&#123;&#125;)<br><br>const getCheckInfo = async () =&gt; &#123;<br>    const res = await getCheckInfoAPI();<br>    checkInfo.value = res.result;<br>    const item = checkInfo.value.userAddresses.find(item =&gt; item.isDefault === 0);<br>    curAddress.value = item;<br>&#125;<br><br>onMounted(() =&gt; getCheckInfo())<br><br>const showDialog = ref(false)<br><br>const activeAddress = ref(&#123;&#125;);<br>const switchAddress = (item) =&gt; &#123;<br>    activeAddress.value = item;<br>&#125;<br><br>const confirm = () =&gt; &#123;<br>    curAddress.value = activeAddress.value;<br>    showDialog.value = false;<br>    activeAddress.value = &#123;&#125;;<br>&#125;<br><br>// 创建订单<br>const createOrder = async () =&gt; &#123;<br>    const res = await createOrderAPI(&#123;<br>        deliveryTimeType: 1,<br>        payType: 1,<br>        payChannel: 1,<br>        buyerMessage: &#x27;&#x27;,<br>        goods: checkInfo.value.goods.map(item =&gt; &#123;<br>            return &#123;<br>                skuId: item.skuId,<br>                count: item.count<br>            &#125;<br>        &#125;),<br>        addressId: curAddress.value.id<br>    &#125;)<br>    const orderId = res.result.id<br>    router.push(&#123;<br>        path: &#x27;/pay&#x27;,<br>        query: &#123;<br>            id: orderId<br>        &#125;<br>    &#125;)<br>    // 更新购物车<br>    cartStore.updateNewList()<br>&#125;<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;xtx-pay-checkout-page&quot;&gt;<br>        &lt;div class=&quot;container&quot;&gt;<br>            &lt;div class=&quot;wrapper&quot;&gt;<br>                &lt;!-- 收货地址 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;收货地址&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;div class=&quot;address&quot;&gt;<br>                        &lt;div class=&quot;text&quot;&gt;<br>                            &lt;div class=&quot;none&quot; v-if=&quot;!curAddress&quot;&gt;您需要先添加收货地址才可提交订单。&lt;/div&gt;<br>                            &lt;ul v-else&gt;<br>                                &lt;li&gt;&lt;span&gt;收&lt;i /&gt;货&lt;i /&gt;人：&lt;/span&gt;&#123;&#123; curAddress.receiver &#125;&#125;&lt;/li&gt;<br>                                &lt;li&gt;&lt;span&gt;联系方式：&lt;/span&gt;&#123;&#123; curAddress.contact &#125;&#125;&lt;/li&gt;<br>                                &lt;li&gt;&lt;span&gt;收货地址：&lt;/span&gt;&#123;&#123; curAddress.fullLocation &#125;&#125; &#123;&#123; curAddress.address &#125;&#125;&lt;/li&gt;<br>                            &lt;/ul&gt;<br>                        &lt;/div&gt;<br>                        &lt;div class=&quot;action&quot;&gt;<br>                            &lt;el-button size=&quot;large&quot;<br>                                @click=&quot;showDialog = true; activeAddress = curAddress;&quot;&gt;切换地址&lt;/el-button&gt;<br>                            &lt;el-button size=&quot;large&quot; @click=&quot;addFlag = true&quot;&gt;添加地址&lt;/el-button&gt;<br>                        &lt;/div&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 商品信息 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;商品信息&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;table class=&quot;goods&quot;&gt;<br>                        &lt;thead&gt;<br>                            &lt;tr&gt;<br>                                &lt;th width=&quot;520&quot;&gt;商品信息&lt;/th&gt;<br>                                &lt;th width=&quot;170&quot;&gt;单价&lt;/th&gt;<br>                                &lt;th width=&quot;170&quot;&gt;数量&lt;/th&gt;<br>                                &lt;th width=&quot;170&quot;&gt;小计&lt;/th&gt;<br>                                &lt;th width=&quot;170&quot;&gt;实付&lt;/th&gt;<br>                            &lt;/tr&gt;<br>                        &lt;/thead&gt;<br>                        &lt;tbody&gt;<br>                            &lt;tr v-for=&quot;i in checkInfo.goods&quot; :key=&quot;i.id&quot;&gt;<br>                                &lt;td&gt;<br>                                    &lt;a href=&quot;javascript:;&quot; class=&quot;info&quot;&gt;<br>                                        &lt;img :src=&quot;i.picture&quot; alt=&quot;&quot;&gt;<br>                                        &lt;div class=&quot;right&quot;&gt;<br>                                            &lt;p&gt;&#123;&#123; i.name &#125;&#125;&lt;/p&gt;<br>                                            &lt;p&gt;&#123;&#123; i.attrsText &#125;&#125;&lt;/p&gt;<br>                                        &lt;/div&gt;<br>                                    &lt;/a&gt;<br>                                &lt;/td&gt;<br>                                &lt;td&gt;&amp;yen;&#123;&#123; i.price &#125;&#125;&lt;/td&gt;<br>                                &lt;td&gt;&#123;&#123; i.count &#125;&#125;&lt;/td&gt;<br>                                &lt;td&gt;&amp;yen;&#123;&#123; i.totalPrice &#125;&#125;&lt;/td&gt;<br>                                &lt;td&gt;&amp;yen;&#123;&#123; i.totalPayPrice &#125;&#125;&lt;/td&gt;<br>                            &lt;/tr&gt;<br>                        &lt;/tbody&gt;<br>                    &lt;/table&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 配送时间 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;配送时间&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;a class=&quot;my-btn active&quot; href=&quot;javascript:;&quot;&gt;不限送货时间：周一至周日&lt;/a&gt;<br>                    &lt;a class=&quot;my-btn&quot; href=&quot;javascript:;&quot;&gt;工作日送货：周一至周五&lt;/a&gt;<br>                    &lt;a class=&quot;my-btn&quot; href=&quot;javascript:;&quot;&gt;双休日、假日送货：周六至周日&lt;/a&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 支付方式 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;支付方式&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;a class=&quot;my-btn active&quot; href=&quot;javascript:;&quot;&gt;在线支付&lt;/a&gt;<br>                    &lt;a class=&quot;my-btn&quot; href=&quot;javascript:;&quot;&gt;货到付款&lt;/a&gt;<br>                    &lt;span style=&quot;color:#999&quot;&gt;货到付款需付5元手续费&lt;/span&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 金额明细 --&gt;<br>                &lt;h3 class=&quot;box-title&quot;&gt;金额明细&lt;/h3&gt;<br>                &lt;div class=&quot;box-body&quot;&gt;<br>                    &lt;div class=&quot;total&quot;&gt;<br>                        &lt;dl&gt;<br>                            &lt;dt&gt;商品件数：&lt;/dt&gt;<br>                            &lt;dd&gt;&#123;&#123; checkInfo.summary?.goodsCount &#125;&#125;件&lt;/dd&gt;<br>                        &lt;/dl&gt;<br>                        &lt;dl&gt;<br>                            &lt;dt&gt;商品总价：&lt;/dt&gt;<br>                            &lt;dd&gt;¥&#123;&#123; checkInfo.summary?.totalPrice.toFixed(2) &#125;&#125;&lt;/dd&gt;<br>                        &lt;/dl&gt;<br>                        &lt;dl&gt;<br>                            &lt;dt&gt;运&lt;i&gt;&lt;/i&gt;费：&lt;/dt&gt;<br>                            &lt;dd&gt;¥&#123;&#123; checkInfo.summary?.postFee.toFixed(2) &#125;&#125;&lt;/dd&gt;<br>                        &lt;/dl&gt;<br>                        &lt;dl&gt;<br>                            &lt;dt&gt;应付总额：&lt;/dt&gt;<br>                            &lt;dd class=&quot;price&quot;&gt;¥&#123;&#123; checkInfo.summary?.totalPayPrice.toFixed(2) &#125;&#125;&lt;/dd&gt;<br>                        &lt;/dl&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>                &lt;!-- 提交订单 --&gt;<br>                &lt;div class=&quot;submit&quot;&gt;<br>                    &lt;el-button @click=&quot;createOrder&quot; type=&quot;primary&quot; size=&quot;large&quot;&gt;提交订单&lt;/el-button&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>    &lt;!-- 切换地址 --&gt;<br>    &lt;el-dialog v-model=&quot;showDialog&quot; title=&quot;切换收货地址&quot; width=&quot;30%&quot; center&gt;<br>        &lt;div class=&quot;addressWrapper&quot;&gt;<br>            &lt;div class=&quot;text item&quot; :class=&quot;&#123; active: activeAddress.id === item.id &#125;&quot; @click=&quot;switchAddress(item)&quot;<br>                v-for=&quot;item in checkInfo.userAddresses&quot; :key=&quot;item.id&quot;&gt;<br>                &lt;ul&gt;<br>                    &lt;li&gt;&lt;span&gt;收&lt;i /&gt;货&lt;i /&gt;人：&lt;/span&gt;&#123;&#123; item.receiver &#125;&#125; &lt;/li&gt;<br>                    &lt;li&gt;&lt;span&gt;联系方式：&lt;/span&gt;&#123;&#123; item.contact &#125;&#125;&lt;/li&gt;<br>                    &lt;li&gt;&lt;span&gt;收货地址：&lt;/span&gt;&#123;&#123; item.fullLocation + item.address &#125;&#125;&lt;/li&gt;<br>                &lt;/ul&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>        &lt;template #footer&gt;<br>            &lt;span class=&quot;dialog-footer&quot;&gt;<br>                &lt;el-button @click=&quot;showDialog = false&quot;&gt;取消&lt;/el-button&gt;<br>                &lt;el-button type=&quot;primary&quot; @click=&quot;confirm&quot;&gt;确定&lt;/el-button&gt;<br>            &lt;/span&gt;<br>        &lt;/template&gt;<br>    &lt;/el-dialog&gt;<br>    &lt;!-- 添加地址 --&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="14.-%E6%94%AF%E4%BB%98-%E5%AE%9E%E7%8E%B0%E6%94%AF%E4%BB%98%E5%8A%9F%E8%83%BD" tabindex="-1" id="14-支付-实现支付功能">14. 支付-实现支付功能</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>支付业务流程</strong></p>
<p><img src="06/12.webp" alt="webp"></p>
<p>作为前端，只需要处理框选中的逻辑。</p>
</div>
<p>编辑 <code>src/views/Pay/index.vue</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 支付地址</span><br><span class="hljs-keyword">const</span> baseURL = <span class="hljs-string">&#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net/&#x27;</span><br><span class="hljs-keyword">const</span> backURL = <span class="hljs-string">&#x27;http://127.0.0.1:5173/paycallback&#x27;</span><br><span class="hljs-keyword">const</span> redirectUrl = <span class="hljs-built_in">encodeURIComponent</span>(backURL)<br><span class="hljs-keyword">const</span> payUrl = <span class="hljs-string">`<span class="hljs-subst">$&#123;baseURL&#125;</span>pay/aliPay?orderId=<span class="hljs-subst">$&#123;route.query.id&#125;</span>&amp;redirect=<span class="hljs-subst">$&#123;redirectUrl&#125;</span>`</span><br></code></pre></td></tr></table></figure>
<p>支付宝沙箱账号信息：</p>
<table>
<thead>
<tr>
<th>账号</th>
<th><a href="mailto:jfjbwb4477@sandbox.com">jfjbwb4477@sandbox.com</a></th>
</tr>
</thead>
<tbody>
<tr>
<td>登录密码</td>
<td>111111</td>
</tr>
<tr>
<td>支付密码</td>
<td>111111</td>
</tr>
</tbody>
</table>
<p>但是现在好像付款不了了……囧</p>
<h3 id="15.-%E6%94%AF%E4%BB%98-%E6%94%AF%E4%BB%98%E7%BB%93%E6%9E%9C%E5%B1%95%E7%A4%BA" tabindex="-1" id="15-支付-支付结果展示">15. 支付-支付结果展示</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>业务需求理解</strong></p>
<p><img src="06/13.webp" alt="webp"></p>
</div>
<p><strong>配置 paycallback 路由</strong></p>
<p>编辑 <code>src/router/index.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;paycallback&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">PayBack</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>根据支付结果适配支付状态</strong></p>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p>假设支付成功后返回的地址为：<a target="_blank" rel="noopener" href="http://localhost:5173/paycallback?payResult=true&amp;orderld=1627949044007440386">http://localhost:5173/paycallback?payResult=true&amp;orderld=1627949044007440386</a></p>
<p>支付失败返回的地址为：<a target="_blank" rel="noopener" href="http://localhost:5173/paycallback?payResult=false&amp;orderld=1627949044007440386">http://localhost:5173/paycallback?payResult=false&amp;orderld=1627949044007440386</a></p>
</div>
<p>创建并编辑 <code>src/views/PayBack/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getOrderAPI &#125; from &#x27;@/apis/pay&#x27;;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br>import &#123; useRoute &#125; from &#x27;vue-router&#x27;;<br><br>const route = useRoute();<br>const orderInfo = ref(&#123;&#125;);<br><br>const getOrderInfo = async () =&gt; &#123;<br>    const res = await getOrderAPI(route.query.orderId);<br>    orderInfo.value = res.result;<br>&#125;<br>onMounted(() =&gt; getOrderInfo());<br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>    &lt;div class=&quot;xtx-pay-page&quot;&gt;<br>        &lt;div class=&quot;container&quot;&gt;<br>            &lt;!-- 支付结果 --&gt;<br>            &lt;div class=&quot;pay-result&quot;&gt;<br>                &lt;span class=&quot;iconfont icon-queren2 green&quot; v-if=&quot;$route.query.payResult === &#x27;true&#x27;&quot;&gt;&lt;/span&gt;<br>                &lt;span class=&quot;iconfont icon-shanchu red&quot; v-else&gt;&lt;/span&gt;<br>                &lt;p class=&quot;tit&quot;&gt;支付&#123;&#123;$route.query.payResult === &#x27;true&#x27; ?&#x27;成功&#x27;:&#x27;失败&#x27;&#125;&#125;&lt;/p&gt;<br>                &lt;p class=&quot;tip&quot;&gt;我们将尽快为您发货，收货期间请保持手机畅通&lt;/p&gt;<br>                &lt;p&gt;支付方式：&lt;span&gt;支付宝&lt;/span&gt;&lt;/p&gt;<br>                &lt;p&gt;支付金额：&lt;span&gt;¥&#123;&#123; orederInfo?.payMoney?.toFixed(2) &#125;&#125;&lt;/span&gt;&lt;/p&gt;<br>                &lt;div class=&quot;btn&quot;&gt;<br>                    &lt;el-button type=&quot;primary&quot; style=&quot;margin-right:20px&quot;&gt;查看订单&lt;/el-button&gt;<br>                    &lt;el-button&gt;进入首页&lt;/el-button&gt;<br>                &lt;/div&gt;<br>                &lt;p class=&quot;alert&quot;&gt;<br>                    &lt;span class=&quot;iconfont icon-tip&quot;&gt;&lt;/span&gt;<br>                    温馨提示：小兔鲜儿不会以订单异常、系统升级为由要求您点击任何网址链接进行退款操作，保护资产、谨慎操作。<br>                &lt;/p&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.pay-result &#123;<br>    padding: 100px 0;<br>    background: #fff;<br>    text-align: center;<br>    margin-top: 20px;<br><br>    &gt;.iconfont &#123;<br>        font-size: 100px;<br>    &#125;<br><br>    .green &#123;<br>        color: #1dc779;<br>    &#125;<br><br>    .red &#123;<br>        color: $priceColor;<br>    &#125;<br><br>    .tit &#123;<br>        font-size: 24px;<br>    &#125;<br><br>    .tip &#123;<br>        color: #999;<br>    &#125;<br><br>    p &#123;<br>        line-height: 40px;<br>        font-size: 16px;<br>    &#125;<br><br>    .btn &#123;<br>        margin-top: 50px;<br>    &#125;<br><br>    .alert &#123;<br>        font-size: 12px;<br>        color: #999;<br>        margin-top: 50px;<br>    &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<h3 id="16.-%E6%94%AF%E4%BB%98-%E5%B0%81%E8%A3%85%E5%80%92%E8%AE%A1%E6%97%B6%E5%87%BD%E6%95%B0" tabindex="-1" id="16-支付-封装倒计时函数">16. 支付-封装倒计时函数</h3>
<p>安装日期格式化库：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install dayjs<br></code></pre></td></tr></table></figure>
<p>创建并编辑 <code>src/composables/useCountDown.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 封装倒计时逻辑函数</span><br><span class="hljs-keyword">import</span> &#123; computed, onUnmounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;dayjs&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useCountDown</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-comment">// 1. 响应式的数据</span><br>    <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br>    <span class="hljs-keyword">const</span> time = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br>    <span class="hljs-comment">// 格式化时间 为 xx分xx秒</span><br>    <span class="hljs-keyword">const</span> formatTime = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> dayjs.<span class="hljs-title function_">unix</span>(time.<span class="hljs-property">value</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">&#x27;mm分ss秒&#x27;</span>))<br>    <span class="hljs-comment">// 2. 开启倒计时的函数</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">start</span> = (<span class="hljs-params">currentTime</span>) =&gt; &#123;<br>        <span class="hljs-comment">// 开始倒计时的逻辑</span><br>        <span class="hljs-comment">// 核心逻辑的编写：每隔1s就减一</span><br>        time.<span class="hljs-property">value</span> = currentTime<br>        timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>            time.<span class="hljs-property">value</span>--<br>        &#125;, <span class="hljs-number">1000</span>)<br>    &#125;<br>    <span class="hljs-comment">// 组件销毁时清除定时器</span><br>    <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        timer &amp;&amp; <span class="hljs-built_in">clearInterval</span>(timer)<br>    &#125;)<br>    <span class="hljs-keyword">return</span> &#123;<br>        formatTime,<br>        start<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>更新 <code>src/views/Pay/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getOrderAPI &#125; from &#x27;@/apis/pay&#x27;;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br>import &#123; useRoute &#125; from &#x27;vue-router&#x27;;<br>import &#123; useCountDown &#125; from &#x27;@/composables/useCountDown&#x27;;<br><br>const &#123; formatTime, start &#125; = useCountDown();<br><br>const route = useRoute()<br>const payInfo = ref(&#123;&#125;)<br>const getPayInfo = async () =&gt; &#123;<br>  const res = await getOrderAPI(route.query.id)<br>  payInfo.value = res.result<br>  // 初始化倒计时秒数<br>  start(res.result.countdown)<br>&#125;<br>onMounted(() =&gt; getPayInfo())<br><br>// 支付地址<br>const baseURL = &#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net/&#x27;<br>const backURL = &#x27;http://127.0.0.1:5173/paycallback&#x27;<br>const redirectUrl = encodeURIComponent(backURL)<br>const payUrl = `$&#123;baseURL&#125;pay/aliPay?orderId=$&#123;route.query.id&#125;&amp;redirect=$&#123;redirectUrl&#125;`<br>&lt;/script&gt;<br><br><br>&lt;template&gt;<br>    &lt;div class=&quot;xtx-pay-page&quot;&gt;<br>        &lt;div class=&quot;container&quot;&gt;<br>            &lt;!-- 付款信息 --&gt;<br>            &lt;div class=&quot;pay-info&quot;&gt;<br>                &lt;span class=&quot;icon iconfont icon-queren2&quot;&gt;&lt;/span&gt;<br>                &lt;div class=&quot;tip&quot;&gt;<br>                    &lt;p&gt;订单提交成功！请尽快完成支付。&lt;/p&gt;<br>                    &lt;p&gt;支付还剩 &lt;span&gt;&#123;&#123; formatTime &#125;&#125;&lt;/span&gt;, 超时后将取消订单&lt;/p&gt;<br>                &lt;/div&gt;<br>                &lt;div class=&quot;amount&quot;&gt;<br>                    &lt;span&gt;应付总额：&lt;/span&gt;<br>                    &lt;span&gt;¥&#123;&#123; payInfo?.totalMoney?.toFixed(2) &#125;&#125;&lt;/span&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>            &lt;!-- 付款方式 --&gt;<br>            &lt;div class=&quot;pay-type&quot;&gt;<br>                &lt;p class=&quot;head&quot;&gt;选择以下支付方式付款&lt;/p&gt;<br>                &lt;div class=&quot;item&quot;&gt;<br>                    &lt;p&gt;支付平台&lt;/p&gt;<br>                    &lt;a class=&quot;btn wx&quot; href=&quot;javascript:;&quot;&gt;&lt;/a&gt;<br>                    &lt;a class=&quot;btn alipay&quot; :href=&quot;payUrl&quot;&gt;&lt;/a&gt;<br>                &lt;/div&gt;<br>                &lt;div class=&quot;item&quot;&gt;<br>                    &lt;p&gt;支付方式&lt;/p&gt;<br>                    &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;招商银行&lt;/a&gt;<br>                    &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;工商银行&lt;/a&gt;<br>                    &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;建设银行&lt;/a&gt;<br>                    &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;农业银行&lt;/a&gt;<br>                    &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;交通银行&lt;/a&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h2 id="day07" tabindex="-1" id="day07">day07</h2>
<h3 id="01.-%E4%BC%9A%E5%91%98%E4%B8%AD%E5%BF%83-%E6%95%B4%E4%BD%93%E5%8A%9F%E8%83%BD%E6%A2%B3%E7%90%86%E5%92%8C%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE" tabindex="-1" id="01-会员中心-整体功能梳理和路由配置">01. 会员中心-整体功能梳理和路由配置</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>整体功能梳理</strong></p>
<ol>
<li>个人中心 - 个人信息和猜你喜欢数据渲染</li>
<li>我的订单 - 各种状态下的订单列表展示</li>
</ol>
<p><strong>路由配置（包括三级路由配置）</strong></p>
<p><img src="07/01.webp" alt="webp"></p>
</div>
<p>创建 <code>src/views/Member/index.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt; &lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;div class=&quot;container&quot;&gt;<br>    &lt;div class=&quot;xtx-member-aside&quot;&gt;<br>      &lt;div class=&quot;user-manage&quot;&gt;<br>        &lt;h4&gt;我的账户&lt;/h4&gt;<br>        &lt;div class=&quot;links&quot;&gt;<br>          &lt;RouterLink to=&quot;/member/user&quot;&gt;个人中心&lt;/RouterLink&gt;<br>        &lt;/div&gt;<br>        &lt;h4&gt;交易管理&lt;/h4&gt;<br>        &lt;div class=&quot;links&quot;&gt;<br>          &lt;RouterLink to=&quot;/member/order&quot;&gt;我的订单&lt;/RouterLink&gt;<br>        &lt;/div&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>    &lt;div class=&quot;article&quot;&gt;<br>      &lt;!-- 三级路由的挂载点 --&gt;<br>      &lt;RouterView /&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.container &#123;<br>  display: flex;<br>  padding-top: 20px;<br><br>  .xtx-member-aside &#123;<br>    width: 220px;<br>    margin-right: 20px;<br>    border-radius: 2px;<br>    background-color: #fff;<br><br>    .user-manage &#123;<br>      background-color: #fff;<br><br>      h4 &#123;<br>        font-size: 18px;<br>        font-weight: 400;<br>        padding: 20px 52px 5px;<br>        border-top: 1px solid #f6f6f6;<br>      &#125;<br><br>      .links &#123;<br>        padding: 0 52px 10px;<br>      &#125;<br><br>      a &#123;<br>        display: block;<br>        line-height: 1;<br>        padding: 15px 0;<br>        font-size: 14px;<br>        color: #666;<br>        position: relative;<br><br>        &amp;:hover &#123;<br>          color: $xtxColor;<br>        &#125;<br><br>        &amp;.active,<br>        &amp;.router-link-exact-active &#123;<br>          color: $xtxColor;<br><br>          &amp;:before &#123;<br>            display: block;<br>          &#125;<br>        &#125;<br><br>        &amp;:before &#123;<br>          content: &#x27;&#x27;;<br>          display: none;<br>          width: 6px;<br>          height: 6px;<br>          border-radius: 50%;<br>          position: absolute;<br>          top: 19px;<br>          left: -16px;<br>          background-color: $xtxColor;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  .article &#123;<br>    width: 1000px;<br>    background-color: #fff;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<p>创建 <code>src/views/Member/components/UserInfo.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>const userStore = &#123;&#125;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;home-overview&quot;&gt;<br>        &lt;!-- 用户信息 --&gt;<br>        &lt;div class=&quot;user-meta&quot;&gt;<br>            &lt;div class=&quot;avatar&quot;&gt;<br>                &lt;img :src=&quot;userStore.userInfo?.avatar&quot; /&gt;<br>            &lt;/div&gt;<br>            &lt;h4&gt;&#123;&#123; userStore.userInfo?.account &#125;&#125;&lt;/h4&gt;<br>        &lt;/div&gt;<br>        &lt;div class=&quot;item&quot;&gt;<br>            &lt;a href=&quot;javascript:;&quot;&gt;<br>                &lt;span class=&quot;iconfont icon-hy&quot;&gt;&lt;/span&gt;<br>                &lt;p&gt;会员中心&lt;/p&gt;<br>            &lt;/a&gt;<br>            &lt;a href=&quot;javascript:;&quot;&gt;<br>                &lt;span class=&quot;iconfont icon-aq&quot;&gt;&lt;/span&gt;<br>                &lt;p&gt;安全设置&lt;/p&gt;<br>            &lt;/a&gt;<br>            &lt;a href=&quot;javascript:;&quot;&gt;<br>                &lt;span class=&quot;iconfont icon-dw&quot;&gt;&lt;/span&gt;<br>                &lt;p&gt;地址管理&lt;/p&gt;<br>            &lt;/a&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>    &lt;div class=&quot;like-container&quot;&gt;<br>        &lt;div class=&quot;home-panel&quot;&gt;<br>            &lt;div class=&quot;header&quot;&gt;<br>                &lt;h4 data-v-bcb266e0=&quot;&quot;&gt;猜你喜欢&lt;/h4&gt;<br>            &lt;/div&gt;<br>            &lt;div class=&quot;goods-list&quot;&gt;<br>                &lt;!-- &lt;GoodsItem v-for=&quot;good in likeList&quot; :key=&quot;good.id&quot; :good=&quot;good&quot; /&gt; --&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.home-overview &#123;<br>    height: 132px;<br>    background: url(@/assets/images/center-bg.png) no-repeat center / cover;<br>    display: flex;<br><br>    .user-meta &#123;<br>        flex: 1;<br>        display: flex;<br>        align-items: center;<br><br>        .avatar &#123;<br>            width: 85px;<br>            height: 85px;<br>            border-radius: 50%;<br>            overflow: hidden;<br>            margin-left: 60px;<br><br>            img &#123;<br>                width: 100%;<br>                height: 100%;<br>            &#125;<br>        &#125;<br><br>        h4 &#123;<br>            padding-left: 26px;<br>            font-size: 18px;<br>            font-weight: normal;<br>            color: white;<br>        &#125;<br>    &#125;<br><br>    .item &#123;<br>        flex: 1;<br>        display: flex;<br>        align-items: center;<br>        justify-content: space-around;<br><br>        &amp;:first-child &#123;<br>            border-right: 1px solid #f4f4f4;<br>        &#125;<br><br>        a &#123;<br>            color: white;<br>            font-size: 16px;<br>            text-align: center;<br><br>            .iconfont &#123;<br>                font-size: 32px;<br>            &#125;<br><br>            p &#123;<br>                line-height: 32px;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.like-container &#123;<br>    margin-top: 20px;<br>    border-radius: 4px;<br>    background-color: #fff;<br>&#125;<br><br>.home-panel &#123;<br>    background-color: #fff;<br>    padding: 0 20px;<br>    margin-top: 20px;<br>    height: 400px;<br><br>    .header &#123;<br>        height: 66px;<br>        border-bottom: 1px solid #f5f5f5;<br>        padding: 18px 0;<br>        display: flex;<br>        justify-content: space-between;<br>        align-items: baseline;<br><br>        h4 &#123;<br>            font-size: 22px;<br>            font-weight: 400;<br>        &#125;<br><br>    &#125;<br><br>    .goods-list &#123;<br>        display: flex;<br>        justify-content: space-around;<br>    &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<p>创建 <code>src/views/Member/components/UserOrder.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>// tab列表<br>const tabTypes = [<br>    &#123; name: &quot;all&quot;, label: &quot;全部订单&quot; &#125;,<br>    &#123; name: &quot;unpay&quot;, label: &quot;待付款&quot; &#125;,<br>    &#123; name: &quot;deliver&quot;, label: &quot;待发货&quot; &#125;,<br>    &#123; name: &quot;receive&quot;, label: &quot;待收货&quot; &#125;,<br>    &#123; name: &quot;comment&quot;, label: &quot;待评价&quot; &#125;,<br>    &#123; name: &quot;complete&quot;, label: &quot;已完成&quot; &#125;,<br>    &#123; name: &quot;cancel&quot;, label: &quot;已取消&quot; &#125;<br>]<br>// 订单列表<br>const orderList = []<br><br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;order-container&quot;&gt;<br>        &lt;el-tabs&gt;<br>            &lt;!-- tab 切换 --&gt;<br>            &lt;el-tab-pane v-for=&quot;item in tabTypes&quot; :key=&quot;item.name&quot; :label=&quot;item.label&quot; /&gt;<br><br>            &lt;div class=&quot;main-container&quot;&gt;<br>                &lt;div class=&quot;holder-container&quot; v-if=&quot;orderList.length === 0&quot;&gt;<br>                    &lt;el-empty description=&quot;暂无订单数据&quot; /&gt;<br>                &lt;/div&gt;<br>                &lt;div v-else&gt;<br>                    &lt;!-- 订单列表 --&gt;<br>                    &lt;div class=&quot;order-item&quot; v-for=&quot;order in orderList&quot; :key=&quot;order.id&quot;&gt;<br>                        &lt;div class=&quot;head&quot;&gt;<br>                            &lt;span&gt;下单时间：&#123;&#123; order.createTime &#125;&#125;&lt;/span&gt;<br>                            &lt;span&gt;订单编号：&#123;&#123; order.id &#125;&#125;&lt;/span&gt;<br>                            &lt;!-- 未付款，倒计时时间还有 --&gt;<br>                            &lt;span class=&quot;down-time&quot; v-if=&quot;order.orderState === 1&quot;&gt;<br>                                &lt;i class=&quot;iconfont icon-down-time&quot;&gt;&lt;/i&gt;<br>                                &lt;b&gt;付款截止: &#123;&#123; order.countdown &#125;&#125;&lt;/b&gt;<br>                            &lt;/span&gt;<br>                        &lt;/div&gt;<br>                        &lt;div class=&quot;body&quot;&gt;<br>                            &lt;div class=&quot;column goods&quot;&gt;<br>                                &lt;ul&gt;<br>                                    &lt;li v-for=&quot;item in order.skus&quot; :key=&quot;item.id&quot;&gt;<br>                                        &lt;a class=&quot;image&quot; href=&quot;javascript:;&quot;&gt;<br>                                            &lt;img :src=&quot;item.image&quot; alt=&quot;&quot; /&gt;<br>                                        &lt;/a&gt;<br>                                        &lt;div class=&quot;info&quot;&gt;<br>                                            &lt;p class=&quot;name ellipsis-2&quot;&gt;<br>                                                &#123;&#123; item.name &#125;&#125;<br>                                            &lt;/p&gt;<br>                                            &lt;p class=&quot;attr ellipsis&quot;&gt;<br>                                                &lt;span&gt;&#123;&#123; item.attrsText &#125;&#125;&lt;/span&gt;<br>                                            &lt;/p&gt;<br>                                        &lt;/div&gt;<br>                                        &lt;div class=&quot;price&quot;&gt;¥&#123;&#123; item.realPay?.toFixed(2) &#125;&#125;&lt;/div&gt;<br>                                        &lt;div class=&quot;count&quot;&gt;x&#123;&#123; item.quantity &#125;&#125;&lt;/div&gt;<br>                                    &lt;/li&gt;<br>                                &lt;/ul&gt;<br>                            &lt;/div&gt;<br>                            &lt;div class=&quot;column state&quot;&gt;<br>                                &lt;p&gt;&#123;&#123; order.orderState &#125;&#125;&lt;/p&gt;<br>                                &lt;p v-if=&quot;order.orderState === 3&quot;&gt;<br>                                    &lt;a href=&quot;javascript:;&quot; class=&quot;green&quot;&gt;查看物流&lt;/a&gt;<br>                                &lt;/p&gt;<br>                                &lt;p v-if=&quot;order.orderState === 4&quot;&gt;<br>                                    &lt;a href=&quot;javascript:;&quot; class=&quot;green&quot;&gt;评价商品&lt;/a&gt;<br>                                &lt;/p&gt;<br>                                &lt;p v-if=&quot;order.orderState === 5&quot;&gt;<br>                                    &lt;a href=&quot;javascript:;&quot; class=&quot;green&quot;&gt;查看评价&lt;/a&gt;<br>                                &lt;/p&gt;<br>                            &lt;/div&gt;<br>                            &lt;div class=&quot;column amount&quot;&gt;<br>                                &lt;p class=&quot;red&quot;&gt;¥&#123;&#123; order.payMoney?.toFixed(2) &#125;&#125;&lt;/p&gt;<br>                                &lt;p&gt;（含运费：¥&#123;&#123; order.postFee?.toFixed(2) &#125;&#125;）&lt;/p&gt;<br>                                &lt;p&gt;在线支付&lt;/p&gt;<br>                            &lt;/div&gt;<br>                            &lt;div class=&quot;column action&quot;&gt;<br>                                &lt;el-button v-if=&quot;order.orderState === 1&quot; type=&quot;primary&quot; size=&quot;small&quot;&gt;<br>                                    立即付款<br>                                &lt;/el-button&gt;<br>                                &lt;el-button v-if=&quot;order.orderState === 3&quot; type=&quot;primary&quot; size=&quot;small&quot;&gt;<br>                                    确认收货<br>                                &lt;/el-button&gt;<br>                                &lt;p&gt;&lt;a href=&quot;javascript:;&quot;&gt;查看详情&lt;/a&gt;&lt;/p&gt;<br>                                &lt;p v-if=&quot;[2, 3, 4, 5].includes(order.orderState)&quot;&gt;<br>                                    &lt;a href=&quot;javascript:;&quot;&gt;再次购买&lt;/a&gt;<br>                                &lt;/p&gt;<br>                                &lt;p v-if=&quot;[4, 5].includes(order.orderState)&quot;&gt;<br>                                    &lt;a href=&quot;javascript:;&quot;&gt;申请售后&lt;/a&gt;<br>                                &lt;/p&gt;<br>                                &lt;p v-if=&quot;order.orderState === 1&quot;&gt;&lt;a href=&quot;javascript:;&quot;&gt;取消订单&lt;/a&gt;&lt;/p&gt;<br>                            &lt;/div&gt;<br>                        &lt;/div&gt;<br>                    &lt;/div&gt;<br>                    &lt;!-- 分页 --&gt;<br>                    &lt;div class=&quot;pagination-container&quot;&gt;<br>                        &lt;el-pagination background layout=&quot;prev, pager, next&quot; /&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br><br>        &lt;/el-tabs&gt;<br>    &lt;/div&gt;<br><br>&lt;/template&gt;<br><br>&lt;style scoped lang=&quot;scss&quot;&gt;<br>.order-container &#123;<br>    padding: 10px 20px;<br><br>    .pagination-container &#123;<br>        display: flex;<br>        justify-content: center;<br>    &#125;<br><br>    .main-container &#123;<br>        min-height: 500px;<br><br>        .holder-container &#123;<br>            min-height: 500px;<br>            display: flex;<br>            justify-content: center;<br>            align-items: center;<br>        &#125;<br>    &#125;<br>&#125;<br><br>.order-item &#123;<br>    margin-bottom: 20px;<br>    border: 1px solid #f5f5f5;<br><br>    .head &#123;<br>        height: 50px;<br>        line-height: 50px;<br>        background: #f5f5f5;<br>        padding: 0 20px;<br>        overflow: hidden;<br><br>        span &#123;<br>            margin-right: 20px;<br><br>            &amp;.down-time &#123;<br>                margin-right: 0;<br>                float: right;<br><br>                i &#123;<br>                    vertical-align: middle;<br>                    margin-right: 3px;<br>                &#125;<br><br>                b &#123;<br>                    vertical-align: middle;<br>                    font-weight: normal;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        .del &#123;<br>            margin-right: 0;<br>            float: right;<br>            color: #999;<br>        &#125;<br>    &#125;<br><br>    .body &#123;<br>        display: flex;<br>        align-items: stretch;<br><br>        .column &#123;<br>            border-left: 1px solid #f5f5f5;<br>            text-align: center;<br>            padding: 20px;<br><br>            &gt;p &#123;<br>                padding-top: 10px;<br>            &#125;<br><br>            &amp;:first-child &#123;<br>                border-left: none;<br>            &#125;<br><br>            &amp;.goods &#123;<br>                flex: 1;<br>                padding: 0;<br>                align-self: center;<br><br>                ul &#123;<br>                    li &#123;<br>                        border-bottom: 1px solid #f5f5f5;<br>                        padding: 10px;<br>                        display: flex;<br><br>                        &amp;:last-child &#123;<br>                            border-bottom: none;<br>                        &#125;<br><br>                        .image &#123;<br>                            width: 70px;<br>                            height: 70px;<br>                            border: 1px solid #f5f5f5;<br>                        &#125;<br><br>                        .info &#123;<br>                            width: 220px;<br>                            text-align: left;<br>                            padding: 0 10px;<br><br>                            p &#123;<br>                                margin-bottom: 5px;<br><br>                                &amp;.name &#123;<br>                                    height: 38px;<br>                                &#125;<br><br>                                &amp;.attr &#123;<br>                                    color: #999;<br>                                    font-size: 12px;<br><br>                                    span &#123;<br>                                        margin-right: 5px;<br>                                    &#125;<br>                                &#125;<br>                            &#125;<br>                        &#125;<br><br>                        .price &#123;<br>                            width: 100px;<br>                        &#125;<br><br>                        .count &#123;<br>                            width: 80px;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br><br>            &amp;.state &#123;<br>                width: 120px;<br><br>                .green &#123;<br>                    color: $xtxColor;<br>                &#125;<br>            &#125;<br><br>            &amp;.amount &#123;<br>                width: 200px;<br><br>                .red &#123;<br>                    color: $priceColor;<br>                &#125;<br>            &#125;<br><br>            &amp;.action &#123;<br>                width: 140px;<br><br>                a &#123;<br>                    display: block;<br><br>                    &amp;:hover &#123;<br>                        color: $xtxColor;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
<p>在 <code>router/index.js</code> 中配置路由：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;member&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Member</span>,<br>    <span class="hljs-attr">children</span>: [<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;user&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserInfo</span><br>        &#125;,<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;order&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserOrder</span><br>        &#125;<br>    ]<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="02.-%E4%BC%9A%E5%91%98%E4%B8%AD%E5%BF%83-%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%E4%BF%A1%E6%81%AF%E6%B8%B2%E6%9F%93" tabindex="-1" id="02-会员中心-个人中心信息渲染">02. 会员中心-个人中心信息渲染</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><img src="07/02.webp" alt="webp"></p>
</div>
<p><strong>个人中心部分直接使用 Pinia 中的数据</strong></p>
<p>编辑 <code>src/views/Member/components/UserInfo.vue</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; useUserStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/userStore&#x27;</span>;<br><span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();<br></code></pre></td></tr></table></figure>
<p><strong>猜你喜欢部分走接口获取</strong></p>
<p>编辑 <code>src/apis/user.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getLikeListAPI</span> = (<span class="hljs-params">&#123; limit = <span class="hljs-number">4</span>&#125;</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/goods/relevant&#x27;</span>,<br>        <span class="hljs-attr">params</span>: &#123;<br>            limit<br>        &#125;<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>编辑 <code>src/views/Member/components/UserInfo.vue</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; useUserStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/userStore&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; getLikeListAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/user&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">GoodsItem</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Home/components/GoodsItem.vue&#x27;</span>;<br><br><span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();<br><span class="hljs-keyword">const</span> likeList = <span class="hljs-title function_">ref</span>([]);<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">getLikeList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getLikeListAPI</span>(&#123; <span class="hljs-attr">limit</span>: <span class="hljs-number">4</span> &#125;);<br>    likeList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>;<br>&#125;;<br><br><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">getLikeList</span>();<br>&#125;);<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">...<br>&lt;div class=&quot;like-container&quot;&gt;<br>    &lt;div class=&quot;home-panel&quot;&gt;<br>        &lt;div class=&quot;header&quot;&gt;<br>            &lt;h4 data-v-bcb266e0=&quot;&quot;&gt;猜你喜欢&lt;/h4&gt;<br>        &lt;/div&gt;<br>        &lt;div class=&quot;goods-list&quot;&gt;<br>            &lt;GoodsItem v-for=&quot;good in likeList&quot; :key=&quot;good.id&quot; :goods=&quot;good&quot; /&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/div&gt;<br>...<br></code></pre></td></tr></table></figure>
<h3 id="03.-%E4%BC%9A%E5%91%98%E4%B8%AD%E5%BF%83-%E6%88%91%E7%9A%84%E8%AE%A2%E5%8D%95-%E5%9F%BA%E7%A1%80%E8%AE%A2%E5%8D%95%E5%88%97%E8%A1%A8%E5%AE%9E%E7%8E%B0" tabindex="-1" id="03-会员中心-我的订单-基础订单列表实现">03. 会员中心-我的订单-基础订单列表实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>订单基础列表渲染</strong></p>
<p><img src="07/03.webp" alt="webp"></p>
</div>
<p>这里服务器好像断了……</p>
<p>创建 <code>src/apis/order.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> httpInstance <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/http&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserOrder</span> = (<span class="hljs-params">params</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/member/order&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>        params<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
<p>编辑 <code>src/views/Member/components</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br>import &#123; getUserOrder &#125; from &#x27;@/apis/order&#x27;;<br><br>// tab列表<br>const tabTypes = [<br>    &#123; name: &quot;all&quot;, label: &quot;全部订单&quot; &#125;,<br>    &#123; name: &quot;unpay&quot;, label: &quot;待付款&quot; &#125;,<br>    &#123; name: &quot;deliver&quot;, label: &quot;待发货&quot; &#125;,<br>    &#123; name: &quot;receive&quot;, label: &quot;待收货&quot; &#125;,<br>    &#123; name: &quot;comment&quot;, label: &quot;待评价&quot; &#125;,<br>    &#123; name: &quot;complete&quot;, label: &quot;已完成&quot; &#125;,<br>    &#123; name: &quot;cancel&quot;, label: &quot;已取消&quot; &#125;<br>]<br>// 订单列表<br>const orderList = ref([]);<br>const params = ref(&#123;<br>    orderState: 0,<br>    page: 1,<br>    pageSize: 2<br>&#125;);<br><br>const getOrderList = async () =&gt; &#123;<br>    const res = await getUserOrder(params.value)<br>    console.log(res)<br>    total.value = res.result.counts<br>&#125;<br><br>onMounted(() =&gt; getOrderList());<br><br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h3 id="04.-%E4%BC%9A%E5%91%98%E4%B8%AD%E5%BF%83-%E6%88%91%E7%9A%84%E8%AE%A2%E5%8D%95-tab-%E5%88%87%E6%8D%A2%E5%AE%9E%E7%8E%B0" tabindex="-1" id="04-会员中心-我的订单-tab-切换实现">04. 会员中心-我的订单-tab 切换实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>tab 切换实现</strong></p>
<p>重点：切换 tab 时<strong>修改 orderState 参数</strong>，再次发起请求获取订单列表数据。</p>
<p><img src="07/04.webp" alt="webp"></p>
</div>
<p>编辑 <code>src/views/Member/components/UserOrder.vue</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">tabChange</span> = (<span class="hljs-params">type</span>) =&gt; &#123;<br>    params.<span class="hljs-property">value</span>.<span class="hljs-property">orderState</span> = type;<br>    <span class="hljs-title function_">getOrderList</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;el-tabs @tab-change=&quot;tabChange&quot;&gt;<br></code></pre></td></tr></table></figure>
<h3 id="05.-%E4%BC%9A%E5%91%98%E4%B8%AD%E5%BF%83-%E6%88%91%E7%9A%84%E8%AE%A2%E5%8D%95-%E5%88%86%E9%A1%B5%E9%80%BB%E8%BE%91%E5%AE%9E%E7%8E%B0" tabindex="-1" id="05-会员中心-我的订单-分页逻辑实现">05. 会员中心-我的订单-分页逻辑实现</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>分页逻辑实现</strong></p>
<ol>
<li>
<p>使用列表数据生成分页（页数 = 总条数 / 每页条数）</p>
<p><img src="07/05.webp" alt="webp"></p>
</li>
<li>
<p>切换分页修改 page 参数，再次获取订单列表数据</p>
<p><img src="07/06.webp" alt="webp"></p>
</li>
</ol>
</div>
<h3 id="06.%E4%BC%9A%E5%91%98%E4%B8%AD%E5%BF%83-%E7%BB%86%E8%8A%82%E4%BC%98%E5%8C%96" tabindex="-1" id="06-会员中心-细节优化">06.会员中心-细节优化</h3>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>默认三级路由设置</strong></p>
<p>效果：当路由 path 为二级路由路径 member 的时候，右侧可以显示个人中心三级路由对应的组件</p>
</div>
<p>编辑 <code>src/router/index.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript">...<br>&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;member&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Member</span>,<br>    <span class="hljs-attr">children</span>: [<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserInfo</span><br>        &#125;,<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserOrder</span><br>        &#125;<br>    ]<br>&#125;<br>...<br></code></pre></td></tr></table></figure>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p></p>
<p><strong>订单状态显示适配</strong></p>
</div>
<p>编辑 <code>src/views/Member/components/UserOrder.vue</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123; getUserOrder &#125; from &#x27;@/apis/order&#x27;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;<br>// tab列表<br>const tabTypes = [<br>    &#123; name: &quot;all&quot;, label: &quot;全部订单&quot; &#125;,<br>    &#123; name: &quot;unpay&quot;, label: &quot;待付款&quot; &#125;,<br>    &#123; name: &quot;deliver&quot;, label: &quot;待发货&quot; &#125;,<br>    &#123; name: &quot;receive&quot;, label: &quot;待收货&quot; &#125;,<br>    &#123; name: &quot;comment&quot;, label: &quot;待评价&quot; &#125;,<br>    &#123; name: &quot;complete&quot;, label: &quot;已完成&quot; &#125;,<br>    &#123; name: &quot;cancel&quot;, label: &quot;已取消&quot; &#125;<br>]<br>// 获取订单列表<br>const orderList = ref([])<br>const total = ref(0)<br>const params = ref(&#123;<br>    orderState: 0,<br>    page: 1,<br>    pageSize: 2<br>&#125;)<br>const getOrderList = async () =&gt; &#123;<br>    const res = await getUserOrder(params.value)<br>    orderList.value = res.result.items<br>    total.value = res.result.counts<br>&#125;<br><br>onMounted(() =&gt; getOrderList())<br><br>// tab切换<br>const tabChange = (type) =&gt; &#123;<br>    console.log(type)<br>    params.value.orderState = type<br>    getOrderList()<br>&#125;<br><br>// 页数切换<br>const pageChange = (page) =&gt; &#123;<br>    console.log(page)<br>    params.value.page = page<br>    getOrderList()<br>&#125;<br><br><br>const fomartPayState = (payState) =&gt; &#123;<br>    const stateMap = &#123;<br>        1: &#x27;待付款&#x27;,<br>        2: &#x27;待发货&#x27;,<br>        3: &#x27;待收货&#x27;,<br>        4: &#x27;待评价&#x27;,<br>        5: &#x27;已完成&#x27;,<br>        6: &#x27;已取消&#x27;<br>    &#125;<br>    return stateMap[payState]<br>&#125;<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>    &lt;div class=&quot;order-container&quot;&gt;<br>        &lt;el-tabs @tab-change=&quot;tabChange&quot;&gt;<br>            &lt;!-- tab切换 --&gt;<br>            &lt;el-tab-pane v-for=&quot;item in tabTypes&quot; :key=&quot;item.name&quot; :label=&quot;item.label&quot; /&gt;<br><br>            &lt;div class=&quot;main-container&quot;&gt;<br>                &lt;div class=&quot;holder-container&quot; v-if=&quot;orderList.length === 0&quot;&gt;<br>                    &lt;el-empty description=&quot;暂无订单数据&quot; /&gt;<br>                &lt;/div&gt;<br>                &lt;div v-else&gt;<br>                    &lt;!-- 订单列表 --&gt;<br>                    &lt;div class=&quot;order-item&quot; v-for=&quot;order in orderList&quot; :key=&quot;order.id&quot;&gt;<br>                        &lt;div class=&quot;head&quot;&gt;<br>                            &lt;span&gt;下单时间：&#123;&#123; order.createTime &#125;&#125;&lt;/span&gt;<br>                            &lt;span&gt;订单编号：&#123;&#123; order.id &#125;&#125;&lt;/span&gt;<br>                            &lt;!-- 未付款，倒计时时间还有 --&gt;<br>                            &lt;span class=&quot;down-time&quot; v-if=&quot;order.orderState === 1&quot;&gt;<br>                                &lt;i class=&quot;iconfont icon-down-time&quot;&gt;&lt;/i&gt;<br>                                &lt;b&gt;付款截止: &#123;&#123; order.countdown &#125;&#125;&lt;/b&gt;<br>                            &lt;/span&gt;<br>                        &lt;/div&gt;<br>                        &lt;div class=&quot;body&quot;&gt;<br>                            &lt;div class=&quot;column goods&quot;&gt;<br>                                &lt;ul&gt;<br>                                    &lt;li v-for=&quot;item in order.skus&quot; :key=&quot;item.id&quot;&gt;<br>                                        &lt;a class=&quot;image&quot; href=&quot;javascript:;&quot;&gt;<br>                                            &lt;img :src=&quot;item.image&quot; alt=&quot;&quot; /&gt;<br>                                        &lt;/a&gt;<br>                                        &lt;div class=&quot;info&quot;&gt;<br>                                            &lt;p class=&quot;name ellipsis-2&quot;&gt;<br>                                                &#123;&#123; item.name &#125;&#125;<br>                                            &lt;/p&gt;<br>                                            &lt;p class=&quot;attr ellipsis&quot;&gt;<br>                                                &lt;span&gt;&#123;&#123; item.attrsText &#125;&#125;&lt;/span&gt;<br>                                            &lt;/p&gt;<br>                                        &lt;/div&gt;<br>                                        &lt;div class=&quot;price&quot;&gt;¥&#123;&#123; item.realPay?.toFixed(2) &#125;&#125;&lt;/div&gt;<br>                                        &lt;div class=&quot;count&quot;&gt;x&#123;&#123; item.quantity &#125;&#125;&lt;/div&gt;<br>                                    &lt;/li&gt;<br>                                &lt;/ul&gt;<br>                            &lt;/div&gt;<br>                            &lt;div class=&quot;column state&quot;&gt;<br>                                &lt;p&gt;&#123;&#123; fomartPayState(order.orderState) &#125;&#125;&lt;/p&gt;<br>                                &lt;p v-if=&quot;order.orderState === 3&quot;&gt;<br>                                    &lt;a href=&quot;javascript:;&quot; class=&quot;green&quot;&gt;查看物流&lt;/a&gt;<br>                                &lt;/p&gt;<br>                                &lt;p v-if=&quot;order.orderState === 4&quot;&gt;<br>                                    &lt;a href=&quot;javascript:;&quot; class=&quot;green&quot;&gt;评价商品&lt;/a&gt;<br>                                &lt;/p&gt;<br>                                &lt;p v-if=&quot;order.orderState === 5&quot;&gt;<br>                                    &lt;a href=&quot;javascript:;&quot; class=&quot;green&quot;&gt;查看评价&lt;/a&gt;<br>                                &lt;/p&gt;<br>                            &lt;/div&gt;<br>                            &lt;div class=&quot;column amount&quot;&gt;<br>                                &lt;p class=&quot;red&quot;&gt;¥&#123;&#123; order.payMoney?.toFixed(2) &#125;&#125;&lt;/p&gt;<br>                                &lt;p&gt;（含运费：¥&#123;&#123; order.postFee?.toFixed(2) &#125;&#125;）&lt;/p&gt;<br>                                &lt;p&gt;在线支付&lt;/p&gt;<br>                            &lt;/div&gt;<br>                            &lt;div class=&quot;column action&quot;&gt;<br>                                &lt;el-button v-if=&quot;order.orderState === 1&quot; type=&quot;primary&quot; size=&quot;small&quot;&gt;<br>                                    立即付款<br>                                &lt;/el-button&gt;<br>                                &lt;el-button v-if=&quot;order.orderState === 3&quot; type=&quot;primary&quot; size=&quot;small&quot;&gt;<br>                                    确认收货<br>                                &lt;/el-button&gt;<br>                                &lt;p&gt;&lt;a href=&quot;javascript:;&quot;&gt;查看详情&lt;/a&gt;&lt;/p&gt;<br>                                &lt;p v-if=&quot;[2, 3, 4, 5].includes(order.orderState)&quot;&gt;<br>                                    &lt;a href=&quot;javascript:;&quot;&gt;再次购买&lt;/a&gt;<br>                                &lt;/p&gt;<br>                                &lt;p v-if=&quot;[4, 5].includes(order.orderState)&quot;&gt;<br>                                    &lt;a href=&quot;javascript:;&quot;&gt;申请售后&lt;/a&gt;<br>                                &lt;/p&gt;<br>                                &lt;p v-if=&quot;order.orderState === 1&quot;&gt;&lt;a href=&quot;javascript:;&quot;&gt;取消订单&lt;/a&gt;&lt;/p&gt;<br>                            &lt;/div&gt;<br>                        &lt;/div&gt;<br>                    &lt;/div&gt;<br>                    &lt;!-- 分页 --&gt;<br>                    &lt;div class=&quot;pagination-container&quot;&gt;<br>                        &lt;el-pagination :total=&quot;total&quot; @current-change=&quot;pageChange&quot; :page-size=&quot;params.pageSize&quot;<br>                            background layout=&quot;prev, pager, next&quot; /&gt;<br>                    &lt;/div&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br><br>        &lt;/el-tabs&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<h3 id="07.-%E6%8B%93%E5%B1%95%E8%AF%BE-sku-%E7%BB%84%E4%BB%B6-%E5%8A%9F%E8%83%BD%E6%8B%86%E8%A7%A3" tabindex="-1" id="07-拓展课-SKU-组件-功能拆解">07. 拓展课-SKU 组件-功能拆解</h3>

            </article>
            
	<div class="rightside">
	
		<div class="rightside-button" id="js-aside">
			<span>
				<img no-lazy src="/images/icon/aside.png" class="rightside-button-icon" alt="Icon">
			</span>
		</div>
		<script>
			$("#js-aside").click(function () {
				onShowAsideButton();
			});
		</script>
	
	<div class="rightside-button" id="js-toggle_theme">
		<span>
			<img no-lazy src="/images/icon/toggle_theme.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	
<script src="/js/plugins/goto_position.js"></script>

	
	<div class="rightside-button" id="js-go_top">
		<span>
			<img no-lazy src="/images/icon/go_top.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>
	<div class="rightside-button" id="js-go_bottom">
		<span>
			<img no-lazy src="/images/icon/go_bottom.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	<script>
		setToggleThemeButtonListener();
	</script>
	<script>
		$('#js-go_top')
		.gotoPosition( {
			speed: 300,
			target: 'top',
		} );
		$('#js-go_bottom')
		.gotoPosition( {
			speed: 300,
			target: 'bottom',
		} );
	</script>
</div>


<div class="post-bottom">
    
        <div class="post-paging">     
            <div class="post-paging-last">
                
                    <a href="/posts/PL-MySQL/">
                        上一篇：PL-MySQL
                    </a>
                
            </div>
            <div class="post-paging-next">
                
                    <a href="/posts/XML-Svg/">
                        下一篇：XML-Svg
                    </a>
                
            </div>
        </div>
    
    
    
        
            <div class="giscus comments"></div>
            <script>
                var scriptElement = document.createElement('script');
                scriptElement.src = 'https://giscus.app/client.js';
                scriptElement.setAttribute('data-repo', 'GZ-Metal-Cell/GZ-Metal-Cell.github.io');
                scriptElement.setAttribute('data-repo-id', 'R_kgDOIHLEOQ');
                scriptElement.setAttribute('data-category', 'Announcements');
                scriptElement.setAttribute('data-category-id', 'DIC_kwDOIHLEOc4CcVwP');
                scriptElement.setAttribute('data-mapping', 'title');
                scriptElement.setAttribute('data-strict', '1');
                scriptElement.setAttribute('data-reactions-enabled', '');
                scriptElement.setAttribute('data-emit-metadata', '0');
                scriptElement.setAttribute('data-input-position', 'bottom');
                scriptElement.setAttribute('data-theme', localStorage.getItem('theme') === 'light' ? 'light' : 'dark_high_contrast');
                scriptElement.setAttribute('data-lang', 'zh-CN');
                
                scriptElement.setAttribute('crossorigin', 'anonymous');
                scriptElement.async = true;
                document.head.appendChild(scriptElement);
            </script>
        
    
</div>
        </div>
    </main>
    
        <aside class="main-aside">
    
<script src="/js/widgets/aside.js"></script>

    <script>
        showAside();
    </script>

    <div class="aside-top">
        <div class="aside-top-about aside-card">
            <a href="/about" class="aside-top-about-portrait">
                <img no-lazy src="/about/portrait.png" alt="Q">
            </a>
            <div class="aside-top-about-info">
                <span class="author"> Zi-Zi</span>
                <span class="description">不以物喜，不以己悲。</span>
            </div>              
            <div class="aside-top-about-site">
                <a href="/categories" class="aside-top-about-site-item">
                    <span class="title">类别</span>
                    <span class="count">5</span>
                </a>
                <a href="/tags" class="aside-top-about-site-item">
                    <span class="title">标签</span>
                    <span class="count">120</span>
                </a>
                <a href="/archives" class="aside-top-about-site-item">
                    <span class="title">归档</span>
                    <span class="count">434</span>
                </a>
            </div>
            <div class="aside-top-about-contact">
                
                    
                        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
                            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
                            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
                            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
                            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
                        </a>
                    
                
            </div>
        </div> 

        
            <div class="aside-top-series aside-card">
                <ol class="aside-top-series-content">
                    
                    
                    
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/Web-Vue（Vue 核心）/">
                                                <span class="text">Web-Vue（Vue 核心）</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/Web-Vue（Vue 组件化编程 &amp; 脚手架）/">
                                                <span class="text">Web-Vue（Vue 组件化编程 &amp; 脚手架）</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/Web-Vue Ajax/">
                                                <span class="text">Web-Vue Ajax</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/Web-Vuex/">
                                                <span class="text">Web-Vuex</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/Web-Vue Router/">
                                                <span class="text">Web-Vue Router</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        
                                        <li class="series-item active">
                                            <a class="series-link active" href="/posts/Web-Vue3-小兔鲜儿/">
                                                <span class="text">Web-Vue3-小兔鲜儿</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                </ol>
                <div class="aside-top-series-title">
                    <h1>
                        <a href="/tags/Vue">标签：Vue</a>
                    </h1>
                    <span id="serial-number">6/6</span>
                </div>
            </div>
            <script>
                activeSeriesItem();
            </script> 
        
    </div>

    <div class="aside-bottom">
        
            <script>
                
                    const tocCollapsed = true;
                
                
                    const tocDepth = 6;
                
                var headerString = '';
                for (let i = 1; i <= tocDepth; i++) {
                    if (i === 1) {
                        headerString += 'h1';
                    } else {
                        headerString += ', h' + i;
                    }
                }
                hbeToc();
            </script>
            <div class="aside-bottom-toc aside-card">
                <div class="aside-bottom-toc-title">
                    <h1>目录</h1>
                    <span class="toc-percentage"></span>
                </div>
                <ol class="aside-bottom-toc-content"></ol>
            </div>
        
    </div>
</aside>
    
</div>
		<footer>
	<div class="content">
		
			<span>©2022-2025&nbsp;By&nbsp;<a href="/about">Zi-Zi</a>.</span>
		
		<span><a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> theme by <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell/hexo-theme-quieter">Quieter</a>.</span>
		
			<span style="display: flex;">
				<img no-lazy alt="icp" src="/images/icp_icon.png" style="width: 16px; height: 16px;">
				<a href="https://icp.gov.moe/?keyword=20241647" target="_blank">萌 ICP 备 20241647 号</a>
			</span>
		
	</div>

	
<script src="/js/plugins/ref.js"></script>

	
<script src="/js/plugins/highlight_tools.js"></script>

	<script>
		const  COPY_ICON = "/images/icon/copy.png";
		const CLOSE_CODE_BLOCK_ICON = "/images/icon/close_code_block.png";
		const HIGHLIGHT_SHRINK = "";
		const HIGHLIGHT_HEIGHT_LIMIT = "";
	</script>

	
		<script src='/js/mermaid.min.js'></script>
		<script>mermaid.initialize({startOnLoad:false});</script>
		
<link rel="stylesheet" href="/css/plugins/mermaid.css">

		
<script src="/js/plugins/mermaid.js"></script>

	
	
	<!-- Analytics -->

    
        <!-- Busuanzi Analytics -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
        <!-- Baidu Analytics -->
        <script defer>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?e57cf62289f84322ebff116e8b3d343e";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
    


	

	

    
		
<link rel="stylesheet" href="/css/plugins/textIndent.css">

		
<script src="/js/plugins/textIndent.js"></script>

	

	
	
	
		<script>
			if (typeof init === 'function') {
				init();
			}
		</script>
	

	
		
	

	
		
			
				<script src="/js/highlightjs-vue/highlightjs-vue.js"></script>
			
				<script src="/js/highlightjs-vue/init-highlightjs-vue.js"></script>
			
		
	

	<!--
		
<script src="/js/plugins/jquery.pjax.min.js"></script>

		<script>
			$(document).pjax('a[target!=_blank]', 'main', {
				fragment: 'main',
				timeout: 8000
			});

			$(document).on('pjax:complete', function() {
			});
		</script> 
	-->
	<script>
		console.log('\n %c Hexo-Quieter 主题 %c https://github.com/GZ-Metal-Cell/hexo-theme-quieter \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
	</script>
</footer>
	</body>

	<!-- Hexo-Quieter 主题  https://github.com/GZ-Metal-Cell/hexo-theme-quieter -->
</html>

