<!DOCTYPE html>
<html lang=zh-CN data-theme="light">
	
<script src="/js/plugins/toggleTheme.js"></script>

	<script>
		setTheme();
	</script>
	<head>
		
<title>Blender-BlenderProc Examples overview-Advanced Examples | Zi-Zi's Journey</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/images/icon/favicon.ico">
<link href="/css/plugins/print.css" media="print" rel="stylesheet" />

<link rel="stylesheet" href="/css/index.css">



<meta name="keywords" content="Blender,Python,">
<meta name="description" content="使用 Blenderproc 合成数据集。">



<script src="/js/plugins/jquery.min.js"></script>


<script src="/js/plugins/hljs.min.js"></script>


<script src="/js/plugins/init.js"></script>


<script src="/js/plugins/hide.js"></script>


<script src="/js/plugins/tabs.js"></script>



    



    
<script src="/js/plugins/alert-title.js"></script>

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-base.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-dark-class.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-light.css">






    

	<meta name="generator" content="Hexo 6.1.0"></head>

	<body>
		<header class="sticky-header">
	<nav>
		<div class="nav-left">
			<a href="/" class="logo">
				<img no-lazy src="/images/headers_icon/logo.webp" alt="Quieter">
			</a>
			<ul class="breadcrumb" id="breadcrumb"></ul>
		</div>
		<div class="nav-right">
			<ul>
				
					<li>
						<a href="/">
						  主页
						</a>
					</li>
				
					<li>
						<a href="/categories">
						  类别
						</a>
					</li>
				
					<li>
						<a href="/tags">
						  标签
						</a>
					</li>
				
					<li>
						<a href="/archives">
						  归档
						</a>
					</li>
				
					<li>
						<a href="/galleries">
						  相册
						</a>
					</li>
				
					<li>
						<a href="/links">
						  链接
						</a>
					</li>
				
					<li>
						<a href="/about">
						  关于
						</a>
					</li>
								  
			</ul>
		</div>
		<div class="nav-right-close">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
				<path fill="none" d="M0 0h24v24H0z" />
				<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
			</svg>
		</div>

		<div class="sidebar">
    <div class="topo">
        <p>Zi-Zi's Journey</p>
    </div>
    <ul>
        
        <li>
            <a href="/">
                主页
            </a>
        </li>
        
        <li>
            <a href="/categories">
                类别
            </a>
        </li>
        
        <li>
            <a href="/tags">
                标签
            </a>
        </li>
        
        <li>
            <a href="/archives">
                归档
            </a>
        </li>
        
        <li>
            <a href="/galleries">
                相册
            </a>
        </li>
        
        <li>
            <a href="/links">
                链接
            </a>
        </li>
        
        <li>
            <a href="/about">
                关于
            </a>
        </li>
        
    </ul>
    <div class="sidebar-footer">
        
        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
        </a>
        
    </div>
</div>
<div class='shelter'>
    <script>
        $(function() {
            $('.nav-right-close > svg').click(function() {
                $('.sidebar').animate({
                    right: "0"
                }, 500);
                $('.shelter').fadeIn("slow");
            
                var element = $('.topo');
                element.addClass('custom-style');
            
                var links = null;
                if ("") {
                    links = "".split(',');
                } else {
                    links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
                }
            
                var randomLink = links[Math.floor(Math.random() * links.length)];
                element.css('background-image', "url('" + randomLink + "')");
            });
          
            $('.shelter').click(function(e) {
                $('.sidebar').animate({
                    right: "-100%"
                }, 500);
                $('.shelter').fadeOut("slow");
            });
        });      
    </script>
</div>
	</nav>

	
		<div class="header-background"></div>
	

	<script>
		const name = 'post';
		const ul = document.querySelectorAll('.nav-right ul')[0];
		const lis = ul.querySelectorAll('li');

		if (name == 'home') {
			lis[0].classList.add('select');
		} else {
			for (let i = 0; i < lis.length; i++) {
				const li = lis[i];
				const a = li.querySelector('a');
				if (name === a.href.split('/')[3]) {
					li.classList.add('select');
				}
			}
		}
	</script>
	
	<script>
		var element = document.querySelector('.header-background');
		if(element) {
			element.classList.add('custom-style');
			var links = null;
			if("")
			{
				links = "".split(',');
			} else
			{
				links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
			}
			var randomLink = links[Math.floor(Math.random() * links.length)];
			element.style.backgroundImage = "url('" + randomLink + "')";
		}
	</script>

	
<script src="/js/plugins/breadcrumb.js"></script>

	<script>
		var menus_title = [];
		
			menus_title.push({home: '主页'});
		
			menus_title.push({categories: '类别'});
		
			menus_title.push({tags: '标签'});
		
			menus_title.push({archives: '归档'});
		
			menus_title.push({galleries: '相册'});
		
			menus_title.push({links: '链接'});
		
			menus_title.push({about: '关于'});
		
		
			
				postsBreadcrumb(
					document.getElementById('breadcrumb'),
					"类别",
					"/categories",
					"学习",
					"/categories/学习",
					1
				);
			
		
	</script>
</header>

<div class="main-wrapper">
    <main class="post">
        <header class="main-header">
	
		
			
				
<link rel="stylesheet" href="/css/plugins/fancybox.css">

				
<script src="/js/plugins/fancybox.umd.js"></script>

				
<script src="/js/plugins/fancybox.js"></script>

			
			<div class="post-header-background-content">
				<ul class="post-header-tag">
					
						
							<li><a href="/tags/Blender"><span>Blender</span></a></li>
						
							<li><a href="/tags/Python"><span>Python</span></a></li>
						
					
				</ul>
				
				<h1>Blender-BlenderProc Examples overview-Advanced Examples</h1>
		
				
					<div class="post-header-desc">
						<svg t="1714702231661" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="1154" xmlns:xlink="http://www.w3.org/1999/xlink"
						width="20" height="20">
						<path
							d="M778.24 117.76A46.08 46.08 0 0 1 824.32 163.84v430.08c0 8.4992-4.13696 16.01536-10.50624 20.6848l-0.24576 0.2048L587.5712 846.09024a35.84 35.84 0 0 1-61.48096-25.06752v-220.9792a46.08 46.08 0 0 1 46.08-46.08l200.94976-0.02048V168.96h-522.24v686.08H389.12c13.25056 0 24.1664 10.07616 25.47712 22.97856l0.12288 2.62144c0 14.1312-11.4688 25.6-25.6 25.6h-143.36A46.08 46.08 0 0 1 199.68 860.16V163.84A46.08 46.08 0 0 1 245.76 117.76h532.48z m-26.78784 487.38304h-174.16192v178.176l174.16192-178.176z m-45.19936-169.94304a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z m0-122.88a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z"
							fill="#ffffff" p-id="1155"></path>
						</svg>
						<p>使用 Blenderproc 合成数据集。</p>
					</div>
				
		
				<div class="post-header-info">
					<svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
					xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
						<path
							d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
							p-id="2902" fill="#ffffff"></path>
					</svg>
					<div class="post-header-info-author">
						<a href="/about">Zi-Zi</a>
					</div>
					
						<div class="post-header-info-categories">
							
								<a href="/categories/学习">学习</a>
							
						</div>
					
					<time>2023/06/05 07:29:00</time>
				</div>
		
				
					<div class="post-header-stat">
						<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
						viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve" width="20" height="20">
							<path fill="#FFFFFF" d="M187.2,165.6c0,2.6-2.1,4.7-4.7,4.7H17.5c-2.6,0-4.7-2.1-4.7-4.7s2.1-4.7,4.7-4.7h165.1
								C185.2,160.9,187.2,163,187.2,165.6z"/>
							<path fill="#FFFFFF" d="M17.5,29.7c2.6,0,4.7,2.1,4.7,4.7v131.2c0,2.6-2.1,4.7-4.7,4.7s-4.7-2.1-4.7-4.7V34.4
								C12.8,31.8,14.9,29.7,17.5,29.7z M77.9,91.5c1.8,1.8,1.8,4.8,0,6.6l-39.8,39.8c-1.9,1.8-4.9,1.7-6.6-0.2c-1.7-1.8-1.7-4.6,0-6.4
								l39.8-39.8C73.1,89.6,76,89.6,77.9,91.5z M169.9,70.2c1.6,2.1,1.1,5-0.9,6.5c0,0,0,0,0,0l-64.2,48.2c-2.1,1.5-5,1.1-6.6-0.9
								c-1.6-2.1-1.1-5,0.9-6.5c0,0,0,0,0,0l64.2-48.2C165.4,67.7,168.3,68.1,169.9,70.2L169.9,70.2z"/>
							<path fill="#FFFFFF" d="M104.6,124.5c-1.8,1.8-4.8,1.8-6.6,0L71.6,98.1c-1.8-1.8-1.8-4.8,0-6.6c1.8-1.8,4.8-1.8,6.6,0l26.3,26.3
								C106.4,119.6,106.4,122.6,104.6,124.5C104.6,124.4,104.6,124.4,104.6,124.5z"/>
						</svg>
		
						
							
<script src="/js/plugins/wordCount.js"></script>

							<p class="post-count">文字数：---</p>
						
		
						
							<p id="busuanzi_container_page_pv" style='display:none;'>阅读数：<span id="busuanzi_value_page_pv"></span></p>
						
					</div>
				
			</div>
		
	
</header>
        <div class="post-content article-container">
            <article class="post-content-info">
                <h1 id="%E8%B5%84%E6%BA%90" tabindex="-1">资源</h1>
<p>仓库地址：<a target="_blank" rel="noopener" href="https://github.com/DLR-RM/BlenderProc">DLR-RM/BlenderProc: A procedural Blender pipeline for photorealistic training image generation (github.com)</a>，下载到本地，用 python 打开，解释器使用之前创建的 blender 环境。</p>
<h1 id="%E8%AF%BE%E7%A8%8B" tabindex="-1">课程</h1>
<h2 id="auto-shading" tabindex="-1" id="Auto-shading">Auto shading</h2>
<h3 id="usage" tabindex="-1" id="Usage">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/auto_shading/main.py examples/advanced/auto_shading/camera_position examples/advanced/auto_shading/scene.blend examples/advanced/auto_shading/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/advanced/auto_shading/main.py</code>: path to the main python file to run.</li>
<li><code>examples/advanced/auto_shading/camera_position</code>: text file with parameters of camera positions.</li>
<li><code>examples/advanced/auto_shading/scene.blend</code>: path to the blend file with the basic scene.</li>
<li><code>examples/advanced/auto_shading/output</code>: path to the output directory.</li>
</ul>
<h3 id="visualization" tabindex="-1" id="Visualization">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/advanced/auto_shading/output/0.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="A1.png" alt="png"></p>
<h3 id="code" tabindex="-1" id="Code">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Find the object with name &quot;Sphere&quot;</span><br>sphere = bproc.<span class="hljs-built_in">filter</span>.one_by_attr(objs, <span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Sphere&quot;</span>)<br><span class="hljs-comment"># Set it to AUTO shading, so all angles greater than 45 degrees will be shaded flat.</span><br>sphere.set_shading_mode(<span class="hljs-string">&quot;auto&quot;</span>, <span class="hljs-number">45</span>)<br><br><span class="hljs-comment"># Find the object with name &quot;Sphere.001&quot;</span><br>other_sphere = bproc.<span class="hljs-built_in">filter</span>.one_by_attr(objs, <span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Sphere.001&quot;</span>)<br><span class="hljs-comment"># Set it to smooth shading, so all angles will be shaded flat.</span><br>other_sphere.set_shading_mode(<span class="hljs-string">&quot;smooth&quot;</span>)<br></code></pre></td></tr></table></figure>
<ul>
<li>
<p>通过调用 bproc.filter.one_by_attr(objs, “name”, “Sphere”) 函数找到名为 “Sphere” 的物体，并将其赋值给变量 sphere。</p>
</li>
<li>
<p>调用 sphere.set_shading_mode(“auto”, 45) 函数，将 sphere 对象的着色模式设置为 AUTO，表示自动根据面的角度决定使用平坦或平滑着色。同时给定一个阈值参数 45，即当面的角度大于 45 度时，该面将使用平坦着色，否则使用平滑着色。</p>
</li>
<li>
<p>通过调用 bproc.filter.one_by_attr(objs, “name”, “Sphere.001”) 函数找到名为 “Sphere.001” 的物体，并将其赋值给变量 other_sphere。</p>
</li>
<li>
<p>调用 other_sphere.set_shading_mode(“smooth”) 函数，将 other_sphere 对象的着色模式设置为 SMOOTH，表示所有面都使用平滑着色。</p>
</li>
</ul>
<h2 id="camera-depth-of-field" tabindex="-1" id="Camera-Depth-of-Field">Camera Depth of Field</h2>
<h3 id="usage-1" tabindex="-1" id="Usage-2">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/camera_depth_of_field/main.py examples/resources/scene.obj examples/advanced/camera_depth_of_field/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/advanced/camera_depth_of_field/main.py</code>: path to the main python file to run.</li>
<li><code>examples/resources/scene.obj</code>: path to the object file with the basic scene.</li>
<li><code>examples/advanced/camera_depth_of_field/output</code>: path to the output directory.</li>
</ul>
<h3 id="visualization-1" tabindex="-1" id="Visualization-2">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/advanced/camera_depth_of_field/output/0.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="C1.png" alt="png"></p>
<h3 id="code-1" tabindex="-1" id="Code-2">Code</h3>
<p>设置视点：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Create an empty object which will represent the cameras focus point</span><br>focus_point = bproc.<span class="hljs-built_in">object</span>.create_empty(<span class="hljs-string">&quot;Camera Focus Point&quot;</span>)<br>focus_point.set_location([<span class="hljs-number">0.5</span>, -<span class="hljs-number">1.5</span>, <span class="hljs-number">3</span>])<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># define the camera intrinsics</span><br>bproc.camera.set_resolution(<span class="hljs-number">512</span>, <span class="hljs-number">512</span>)<br><span class="hljs-comment"># Set the empty object as focus point and set fstop to regulate the sharpness of the scene</span><br>bproc.camera.add_depth_of_field(focus_point, fstop_value=<span class="hljs-number">0.25</span>)<br></code></pre></td></tr></table></figure>
<blockquote>
<p>首先，通过调用 bproc.camera.set_resolution(512, 512) 函数设置相机分辨率为 512x512 像素。</p>
<p>接着，通过调用 bproc.camera.add_depth_of_field(focus_point, fstop_value=0.25) 函数来添加景深效果。其中，focus_point 表示景深的焦点，即相机聚焦的对象（通常为场景中心）。fstop_value 参数控制景深的浅深范围，值越小，景深效果越明显。在本例中，fstop_value 被设置为 0.25，表明所拍摄的场景会呈现出比较明显的景深效果。</p>
</blockquote>
<h2 id="coco-annotations" tabindex="-1" id="COCO-annotations">COCO annotations</h2>
<h3 id="usage-2" tabindex="-1" id="Usage-3">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/coco_annotations/main.py examples/resources/camera_positions examples/advanced/coco_annotations/scene.blend examples/advanced/coco_annotations/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/advanced/coco_annotations/main.py</code>: path to the main python file to run.</li>
<li><code>examples/resources/camera_positions</code>: text file with parameters of camera positions.</li>
<li><code>examples/advanced/coco_annotations/scene.blend</code>: path to the blend file with the basic scene.</li>
<li><code>examples/advanced/coco_annotations/output</code>: path to the output directory.</li>
</ul>
<h3 id="visualization-2" tabindex="-1" id="Visualization-3">Visualization</h3>
<p>使用 blenderproc 可视化 COCO 数据集格式的命令示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis coco [-i &lt;image index&gt;] [-c &lt;coco annotations json&gt;] [-b &lt;base folder of coco json and image files&gt;]<br></code></pre></td></tr></table></figure>
<p>生成 COCO 数据集形式的文件：</p>
<p><img src="CO2.png" alt="png"></p>
<p><code>coco_annoatations.json</code> 里的内容（感觉存了一段乱七八糟的东西）：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;coco_annotations&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://github.com/waspinator/pycococreator&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.1.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;year&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2020</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;contributor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Unknown&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;date_created&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2023-06-04 23:59:39.563796&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;licenses&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Attribution-NonCommercial-ShareAlike License&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://creativecommons.org/licenses/by-nc-sa/2.0/&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;categories&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;supercategory&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;coco_annotations&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Suzanne&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <br>    ...<br>      <br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">9</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;supercategory&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;coco_annotations&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Cube.001&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;images&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;file_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;images/000000.jpg&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;width&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">512</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;height&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">512</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;date_captured&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2023-06-04 23:59:39.563796&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;license&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;coco_url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;flickr_url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;file_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;images/000001.jpg&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;width&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">512</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;height&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">512</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;date_captured&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2023-06-04 23:59:39.672089&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;license&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;coco_url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;flickr_url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;annotations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;image_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;category_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;iscrowd&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;area&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8330</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;bbox&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-number">184</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-number">98</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-number">144</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-number">114</span><br>      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;segmentation&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;counts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-number">94341</span><span class="hljs-punctuation">,</span><br>			<br>		  ...<br>            <br>          <span class="hljs-number">94583</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;size&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-number">512</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-number">512</span><br>        <span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;width&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">512</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;height&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">512</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><br>    ...<br><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">16</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;image_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;category_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">9</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;iscrowd&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;area&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">25473</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;bbox&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-number">456</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-number">512</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-number">56</span><br>      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;segmentation&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;counts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-number">460</span><span class="hljs-punctuation">,</span><br><br>          ...<br>            <br>          <span class="hljs-number">34</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;size&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-number">512</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-number">512</span><br>        <span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;width&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">512</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;height&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">512</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
<p>在本例中：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis coco -i 1 -c coco_annotations.json -b examples/advanced/coco_annotations/output/coco_data<br></code></pre></td></tr></table></figure>
<p>然后你就会喜提报错：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">AttributeError: module &#x27;numpy&#x27; has no attribute &#x27;bool&#x27;.<br>`np.bool` was a deprecated alias for the builtin `bool`. To avoid this error in existing code, use `bool` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.bool_` here.<br>The aliases was originally deprecated in NumPy 1.20; for more details and guidance see the original release note at:<br>    https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations. Did you mean: &#x27;bool_&#x27;?<br></code></pre></td></tr></table></figure>
<p>从 <code>vis_coco_annotation.py</code> 里找到这行 <code>np.bool_</code>，把它改成 <code>bool_</code>：</p>
<p><img src="CO1.png" alt="png"></p>
<p>重新开跑！</p>
<p><img src="CO3.png" alt="png"></p>
<h3 id="code-2" tabindex="-1" id="Code-3">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Set some category ids for loaded objects</span><br><span class="hljs-keyword">for</span> j, obj <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(objs):<br>    obj.set_cp(<span class="hljs-string">&quot;category_id&quot;</span>, j + <span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>
<p>要创建 COCO 标注，我们需要渲染实例和类别映射。类别是根据自定义属性 “category_id” 定义的，该属性必须为每个实例预先定义。可以像上面一样通过自定义属性或在加载器中设置 category_id，也可以直接在 .blend 文件中定义。同时，我们还将 “name” 添加到映射中，以便稍后在 COCO 标注写入器中使用对象的名称为类别进行标记。</p>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">bproc.renderer.enable_segmentation_output(map_by=[<span class="hljs-string">&quot;category_id&quot;</span>, <span class="hljs-string">&quot;instance&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>])<br></code></pre></td></tr></table></figure>
<p>调用 bproc.renderer.enable_segmentation_output(map_by=[“category_id”, “instance”, “name”]) 函数激活分割渲染功能。</p>
<p>其中，“category_id”、“instance” 和 “name” 分别表示三种不同的标记方式，即按类别、物体实例和名称进行标记。</p>
<p>这个函数的作用是将场景中的每个物体按照所选的标记方式标记，并将标记信息存储到渲染结果中。例如，如果选择 “category_id” 标记，则每个物体会被分配一个唯一的整数 ID，表示其所属的类别。</p>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Write data to coco file</span><br>bproc.writer.write_coco_annotations(os.path.join(args.output_dir, <span class="hljs-string">&#x27;coco_data&#x27;</span>),<br>                                    instance_segmaps=data[<span class="hljs-string">&quot;instance_segmaps&quot;</span>],<br>                                    instance_attribute_maps=data[<span class="hljs-string">&quot;instance_attribute_maps&quot;</span>],<br>                                    colors=data[<span class="hljs-string">&quot;colors&quot;</span>],<br>                                    color_file_format=<span class="hljs-string">&quot;JPEG&quot;</span>)<br></code></pre></td></tr></table></figure>
<p>使用 <code>bproc.writer.write_coco_annotations()</code>生成 COCO 数据集。</p>
<p>此函数将注释存储在 <code>coco_annotations.json</code> 中。可选地，您可以在 <code>writer.CocoAnnotationsWriter</code> 配置中设置 <code>&quot;supercategory&quot;: &quot;&lt;some_supercategory&gt;&quot;</code>，以通过先前分配的自定义属性 <code>&quot;supercategory&quot;</code> 过滤对象。</p>
<blockquote>
<p>通过调用 bproc.writer.write_coco_annotations() 函数将场景中的分割信息和属性信息写入 COCO 格式的注释文件中。</p>
<p>其中：</p>
<ul>
<li>os.path.join(args.output_dir, ‘coco_data’) 是注释文件的保存路径</li>
<li>instance_segmaps、instance_attribute_maps 和 colors 分别表示物体实例分割图、物体属性图和物体颜色信息，这些信息都是从渲染结果中提取得到的</li>
<li>color_file_format 参数表示颜色信息保存格式，这里被设置为 JPEG 格式。</li>
<li>此函数会自动将提供的分割信息和属性信息转换为 COCO 格式，并将其保存到指定路径下的注释文件中。</li>
</ul>
</blockquote>
<hr>
<p><strong>bproc.writer.write_coco_annotations()</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">write_coco_annotations</span>(<span class="hljs-params">output_dir: <span class="hljs-built_in">str</span>, instance_segmaps: <span class="hljs-type">Optional</span>[<span class="hljs-type">List</span>[np.ndarray]] = <span class="hljs-literal">None</span>,</span><br><span class="hljs-params">                           instance_attribute_maps: <span class="hljs-type">Optional</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">dict</span>]] = <span class="hljs-literal">None</span>,</span><br><span class="hljs-params">                           colors: <span class="hljs-type">Optional</span>[<span class="hljs-type">List</span>[np.ndarray]] = <span class="hljs-literal">None</span>, color_file_format: <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;PNG&quot;</span>,</span><br><span class="hljs-params">                           mask_encoding_format: <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;rle&quot;</span>, supercategory: <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;coco_annotations&quot;</span>,</span><br><span class="hljs-params">                           append_to_existing_output: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span>, segmap_output_key: <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;segmap&quot;</span>,</span><br><span class="hljs-params">                           segcolormap_output_key: <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;segcolormap&quot;</span>, rgb_output_key: <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;colors&quot;</span>,</span><br><span class="hljs-params">                           jpg_quality: <span class="hljs-built_in">int</span> = <span class="hljs-number">95</span>, label_mapping: <span class="hljs-type">Optional</span>[LabelIdMapping] = <span class="hljs-literal">None</span>,</span><br><span class="hljs-params">                           file_prefix: <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;&quot;</span>, indent: <span class="hljs-type">Optional</span>[<span class="hljs-type">Union</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">str</span>]] = <span class="hljs-literal">None</span></span>):<br></code></pre></td></tr></table></figure>
<p>此函数按以下步骤编写 COCO 注释：</p>
<ol>
<li>定位分割图像</li>
<li>定位 RGB 映射</li>
<li>定位 seg mappings</li>
<li>读取颜色映射</li>
<li>对于每个帧，编写 coco 注释</li>
</ol>
<p>参数解释如下：</p>
<ul>
<li><code>output_dir</code>：输出目录，用于编写 coco 注释</li>
<li><code>instance_segmaps</code>：实例分割映射的列表</li>
<li><code>instance_attribute_maps</code>：每帧的映射，具有 idx、class 和（可选）supercategory/bop_dataset_name</li>
<li><code>colors</code>：颜色图像的列表。不支持立体图像，请依次输入左和右输入。</li>
<li><code>color_file_format</code>：保存颜色图像的格式</li>
<li><code>mask_encoding_format</code>：二进制掩模的编码格式。默认值为 ‘rle’。可用值：‘rle’、‘polygon’</li>
<li><code>supercategory</code>：要过滤的数据集/超类别名称，例如通过 ‘bop_dataset_name’ 设定的特定 BOP 数据集集合或具有指定 ‘cp_supercategory’ 的任何已加载对象</li>
<li><code>append_to_existing_output</code>：如果为 true，且输出目录中已经有 coco_annotations.json 文件，则新的 coco 注释将被追加到现有文件中。此外，rgb 图像将被命名，以避免冲突。</li>
<li><code>segmap_output_key</code>：分割图像的输出键。应该与 SegMapRenderer 模块的输出键相同。默认值为 ‘segmap’。</li>
<li><code>segcolormap_output_key</code>：为对象名称/类别对应关系注册 CSV 文件的输出键。应该与 SegMapRenderer 模块的 colormap_output_key 相同。默认值为 ‘segcolormap’。</li>
<li><code>rgb_output_key</code>：RGB 图像的输出键。应该与 RgbRenderer 模块的输出键相同。默认值为 ‘colors’。</li>
<li><code>jpg_quality</code>：所需的 jpg 编码质量级别</li>
<li><code>label_mapping</code>：用于基于其 ID 对类别进行标记的标签映射。如果未给定 None，则使用 csv 文件中的 <code>name</code> 字段，或者（如果不存在）使用类别 ID 本身。</li>
<li><code>file_prefix</code>：图像文件名的可选前缀</li>
<li><code>indent</code>：如果缩进是非负整数或字符串，则注释输出将以该缩进级别进行漂亮的打印。缩进级别为 0、负数或 “” 仅插入换行符。None（默认值）选择最紧凑的表示。使用正整数缩进每个层级缩进那么多空格。如果缩进是字符串（例如 “\t”），那么该字符串用于缩进每个级别。</li>
</ul>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 对传入的三个可选参数进行类型检查和处理，确保它们都是列表类型。如果为 None，就改为空列表</span><br>instance_segmaps = [] <span class="hljs-keyword">if</span> instance_segmaps <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> <span class="hljs-built_in">list</span>(instance_segmaps)<br>colors = [] <span class="hljs-keyword">if</span> colors <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> <span class="hljs-built_in">list</span>(colors)<br><span class="hljs-comment">#（怎么代码风格跟上面的不太一样？）</span><br><span class="hljs-keyword">if</span> instance_attribute_maps <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>    instance_attribute_maps = []<br><br><span class="hljs-comment"># 检查 colors[0] 是否是四维数组，如果是，则抛出 ValueError 异常。这是因为 BlenderProc 目前不支持渲染立体图像，只能生成左右视图分别的图像/分割图像。</span><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(colors) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(colors[<span class="hljs-number">0</span>].shape) == <span class="hljs-number">4</span>:<br>    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;BlenderProc currently does not support writing coco annotations for stereo images. &quot;</span><br>                     <span class="hljs-string">&quot;However, you can enter left and right images / segmaps separately.&quot;</span>)<br></code></pre></td></tr></table></figure>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Create output directory</span><br><span class="hljs-comment"># 创建输出目录，其中 &#x27;images&#x27; 目录用于存储转换后的图像。如果该目录已经存在，则不会创建新目录。</span><br>os.makedirs(os.path.join(output_dir, <span class="hljs-string">&#x27;images&#x27;</span>), exist_ok=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 这些代码块用于查找渲染时生成的 RGB 图像、实例分割图像和属性映射文件的路径</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> instance_segmaps:<br>    <span class="hljs-comment"># 如果 instance_segmaps 列表是空的，则该代码会查找实例分割图像的路径，使用 Utility.find_registered_output_by_key() 方法查找已注册的输出</span><br>    <span class="hljs-comment"># Find path pattern of segmentation images</span><br>    segmentation_map_output = Utility.find_registered_output_by_key(segmap_output_key)<br>    <span class="hljs-keyword">if</span> segmentation_map_output <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-comment"># 如果找不到 key 为 segmap_output_key 的输出，则引发 RuntimeError 异常，提示用户在运行 write_coco_annotations() 函数之前先运行 SegMapRenderer 模块</span><br>        <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">f&quot;There is no output registered with key <span class="hljs-subst">&#123;segmap_output_key&#125;</span>. Are you sure you &quot;</span><br>                           <span class="hljs-string">f&quot;ran the SegMapRenderer module before?&quot;</span>)<br><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> colors:<br>    <span class="hljs-comment"># Find path pattern of rgb images</span><br>    <span class="hljs-comment"># 如果 colors 列表为空，则该代码会查找 RGB 图像的路径</span><br>    rgb_output = Utility.find_registered_output_by_key(rgb_output_key)<br>    <span class="hljs-keyword">if</span> rgb_output <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-comment"># 如果找不到 key 为 rgb_output_key 的输出，则引发 RuntimeError 异常，提示用户在运行 write_coco_annotations() 函数之前先运行 RgbRenderer 模块</span><br>        <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">f&quot;There is no output registered with key <span class="hljs-subst">&#123;rgb_output_key&#125;</span>. Are you sure you &quot;</span><br>                           <span class="hljs-string">f&quot;ran the RgbRenderer module before?&quot;</span>)<br><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> instance_attribute_maps:<br>    <span class="hljs-comment"># Find path of name class mapping csv file</span><br>    <span class="hljs-comment"># 如果 instance_attribute_maps 列表为空，则该代码会查找实例分割图像到名称、类别标签的映射文件的路径</span><br>    segcolormap_output = Utility.find_registered_output_by_key(segcolormap_output_key)<br>    <span class="hljs-keyword">if</span> segcolormap_output <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-comment"># 如果找不到 key 为 segcolormap_output_key 的输出，则引发 RuntimeError 异常，提示用户在运行 write_coco_annotations() 函数之前先运行 SegMapRenderer 模块，并将 map_by 参数设置为 instance</span><br>        <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">f&quot;There is no output registered with key <span class="hljs-subst">&#123;segcolormap_output_key&#125;</span>. Are you sure you &quot;</span><br>                           <span class="hljs-string">f&quot;ran the SegMapRenderer module with &#x27;map_by&#x27; set to &#x27;instance&#x27; before?&quot;</span>)<br></code></pre></td></tr></table></figure>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 用于确定输出的 COCO 格式注释文件的路径，并在需要追加输出时计算图像编号的偏移量</span><br>coco_annotations_path = os.path.join(output_dir, <span class="hljs-string">&quot;coco_annotations.json&quot;</span>)<br><span class="hljs-comment"># Calculate image numbering offset, if append_to_existing_output is activated and coco data exists</span><br><span class="hljs-keyword">if</span> append_to_existing_output <span class="hljs-keyword">and</span> os.path.exists(coco_annotations_path):<br>    <span class="hljs-comment"># 如果 append_to_existing_output 为 True，且文件系统中存在名为 &#x27;coco_annotations.json&#x27; 的文件，则将其加载到内存中</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(coco_annotations_path, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> fp:<br>        existing_coco_annotations = json.load(fp)<br>    <span class="hljs-comment"># 获取已存在图像 ID 的最大值，并加 1 作为图像编号的偏移量。这可以确保新生成的注释不会与已有的注释文件重复。</span><br>    image_offset = <span class="hljs-built_in">max</span>(image[<span class="hljs-string">&quot;id&quot;</span>] <span class="hljs-keyword">for</span> image <span class="hljs-keyword">in</span> existing_coco_annotations[<span class="hljs-string">&quot;images&quot;</span>]) + <span class="hljs-number">1</span><br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-comment"># 如果 append_to_existing_output 参数为 False 或没有找到现有的注释文件，则图像编号的偏移量为 0，并且 existing_coco_annotations 变量设置为 None</span><br>    image_offset = <span class="hljs-number">0</span><br>    existing_coco_annotations = <span class="hljs-literal">None</span><br></code></pre></td></tr></table></figure>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># collect all RGB paths</span><br>new_coco_image_paths = []<br><span class="hljs-comment"># collect all mappings from csv (backwards compat)</span><br>segcolormaps = []<br><span class="hljs-comment"># collect all instance segmaps (backwards compat)</span><br>inst_segmaps = []<br><br><span class="hljs-comment"># for each rendered frame</span><br><span class="hljs-comment"># 遍历从 bpy.context.scene.frame_start 到 bpy.context.scene.frame_end 的每一帧</span><br><span class="hljs-keyword">for</span> frame <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(bpy.context.scene.frame_start, bpy.context.scene.frame_end):<br>	<br>    <span class="hljs-comment"># 如果 instance_attribute_maps 列表为空，则读取映射文件（segcolormap_output）以获取对象名称/类别到整数的映射，将其存储在 segcolormaps 列表中</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> instance_attribute_maps:<br>        <span class="hljs-comment"># read colormappings, which include object name/class to integer mapping</span><br>        segcolormap = []<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(segcolormap_output[<span class="hljs-string">&quot;path&quot;</span>] % frame, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> csvfile:<br>            reader = csv.DictReader(csvfile)<br>            <span class="hljs-keyword">for</span> mapping <span class="hljs-keyword">in</span> reader:<br>                segcolormap.append(mapping)<br>        segcolormaps.append(segcolormap)<br><br>    <span class="hljs-comment"># 如果 instance_segmaps 列表为空，则读取分割图像文件（segmentation_map_output）并提取实例通道（即 channel_instance），将实例分割图像存储在 inst_segmaps 列表中</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> instance_segmaps:<br>        <span class="hljs-comment"># Load segmaps (backwards compat)</span><br>        segmap = np.load(segmentation_map_output[<span class="hljs-string">&quot;path&quot;</span>] % frame)<br>        inst_channel = <span class="hljs-built_in">int</span>(segcolormap[<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;channel_instance&#x27;</span>])<br>        inst_segmaps.append(segmap[:, :, inst_channel])<br><br>    <span class="hljs-comment"># 如果 colors 列表非空，则该代码调用 opencv 库的 imwrite() 函数将 RGB 图像（颜色渲染图像）写入目标路径，具体路径由 file_prefix 和偏移量计算得到</span><br>    <span class="hljs-keyword">if</span> colors:<br>        color_rgb = colors[frame - bpy.context.scene.frame_start]<br><br>        <span class="hljs-comment"># Reverse channel order for opencv</span><br>        color_bgr = color_rgb.copy()<br>        color_bgr[..., :<span class="hljs-number">3</span>] = color_bgr[..., :<span class="hljs-number">3</span>][..., ::-<span class="hljs-number">1</span>]<br><br>        <span class="hljs-keyword">if</span> color_file_format == <span class="hljs-string">&#x27;PNG&#x27;</span>:<br>            target_base_path = <span class="hljs-string">f&#x27;images/<span class="hljs-subst">&#123;file_prefix&#125;</span><span class="hljs-subst">&#123;frame + image_offset:06d&#125;</span>.png&#x27;</span><br>            target_path = os.path.join(output_dir, target_base_path)<br>            cv2.imwrite(target_path, color_bgr)<br>        <span class="hljs-keyword">elif</span> color_file_format == <span class="hljs-string">&#x27;JPEG&#x27;</span>:<br>            target_base_path = <span class="hljs-string">f&#x27;images/<span class="hljs-subst">&#123;file_prefix&#125;</span><span class="hljs-subst">&#123;frame + image_offset:06d&#125;</span>.jpg&#x27;</span><br>            target_path = os.path.join(output_dir, target_base_path)<br>            cv2.imwrite(target_path, color_bgr, [<span class="hljs-built_in">int</span>(cv2.IMWRITE_JPEG_QUALITY), jpg_quality])<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">f&#x27;Unknown color_file_format=<span class="hljs-subst">&#123;color_file_format&#125;</span>. Try &quot;PNG&quot; or &quot;JPEG&quot;&#x27;</span>)<br><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment"># 如果没有特定的颜色方案，则直接复制 RGB 渲染图像到目标路径</span><br>        source_path = rgb_output[<span class="hljs-string">&quot;path&quot;</span>] % frame<br>        target_base_path = os.path.join(<span class="hljs-string">&#x27;images&#x27;</span>,<br>                                        file_prefix + os.path.basename(rgb_output[<span class="hljs-string">&quot;path&quot;</span>] % (frame + image_offset)))<br>        target_path = os.path.join(output_dir, target_base_path)<br>        shutil.copyfile(source_path, target_path)<br><br>    <span class="hljs-comment"># 将目标路径（target_path）添加到 new_coco_image_paths 数组中，并在 COCO 格式注释中使用这个数组</span><br>    new_coco_image_paths.append(target_base_path)<br></code></pre></td></tr></table></figure>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">instance_attribute_maps = segcolormaps <span class="hljs-keyword">if</span> segcolormaps <span class="hljs-keyword">else</span> instance_attribute_maps<br>instance_segmaps = inst_segmaps <span class="hljs-keyword">if</span> inst_segmaps <span class="hljs-keyword">else</span> instance_segmaps<br><br>coco_output = _CocoWriterUtility.generate_coco_annotations(instance_segmaps,<br>                                                           instance_attribute_maps,<br>                                                           new_coco_image_paths,<br>                                                           supercategory,<br>                                                           mask_encoding_format,<br>                                                           existing_coco_annotations,<br>                                                           label_mapping)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Writing coco annotations to &quot;</span> + coco_annotations_path)<br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(coco_annotations_path, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> fp:<br>    json.dump(coco_output, fp, indent=indent)<br></code></pre></td></tr></table></figure>
<p>这段代码将收集到的实例分割图像、属性映射文件、图像路径和其他参数传递给 _CocoWriterUtility.generate_coco_annotations() 函数，生成符合 COCO 格式的注释。如果存在旧的 COCO 格式的注释（即 existing_coco_annotations），则将其合并到生成的注释中。</p>
<p>最后，将这些注释写入给定的 coco_annotations_path 文件中，并在控制台中输出写入的文件路径。</p>
<h2 id="diffuse-color-image" tabindex="-1" id="Diffuse-color-image">Diffuse color image</h2>
<h3 id="usage-3" tabindex="-1" id="Usage-4">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/diffuse_color_image/main.py examples/resources/scene.obj examples/advanced/diffuse_color_image/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/advanced/diffuse_color_image/main.py</code>: path to the main python file to run.</li>
<li><code>examples/resources/scene.obj</code>: path to the object file with the basic scene.</li>
<li><code>examples/advanced/diffuse_color_image/output</code>: path to the output directory.</li>
</ul>
<h3 id="visualization-3" tabindex="-1" id="Visualization-4">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/advanced/diffuse_color_image/output/0.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="D1.png" alt="png"></p>
<h3 id="code-3" tabindex="-1" id="Code-4">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Also enable the diffuse color image, which describes the base color of the textures</span><br>bproc.renderer.enable_diffuse_color_output()<br></code></pre></td></tr></table></figure>
<h2 id="how-to-apply-dust-to-objects" tabindex="-1" id="How-to-apply-dust-to-objects">How to apply dust to objects</h2>
<h3 id="usage-4" tabindex="-1" id="Usage-5">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/dust/main.py resources/haven/models/ArmChair_01/ArmChair_01_2k.blend resources/haven examples/datasets/haven/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/advanced/dust/main.py</code>: path to the main python file to run.</li>
<li><code>resources/haven/models/ArmChair_01/ArmChair_01.blend</code>: Path to the blend file, from the haven dataset, browse the model folder, for all possible options</li>
<li><code>resources/haven</code>: The folder where the <code>hdri</code> folder can be found, to load an world environment</li>
<li><code>examples/datasets/haven/output</code>: path to the output directory.</li>
</ul>
<p>这玩意儿老是坑，妈的</p>
<p>从 <a target="_blank" rel="noopener" href="https://polyhaven.com/a/little_paris_eiffel_tower">Little Paris Eiffel Tower HDRI • Poly Haven</a> 里下载一些 Models 和 HDRIS：</p>
<p><img src="DU0.png" alt="png"></p>
<p>这个网站的资源都是开源免费的，不错啊！</p>
<p><img src="DU1.png" alt="png"></p>
<p><img src="DU2.png" alt="png"></p>
<p>设置好路径开跑！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/dust/main.py resources/haven/models/GreenChair_01_4k.blend D:\Study\1st-year-master\Code\BlenderProc-main\resources\haven  examples/datasets/haven/output<br></code></pre></td></tr></table></figure>
<p>然后就寄，不明白为什么这里 glob.glob 会返回空列表，换个代码重写，然后这坨臭臭代码就能跑了。</p>
<p><img src="DU3.png" alt="png"></p>
<h3 id="visualization-4" tabindex="-1" id="Visualization-5">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/datasets/haven/output/0.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="DU4.png" alt="png"></p>
<h3 id="code-4" tabindex="-1" id="Code-5">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># load the objects into the scene</span><br>obj = bproc.loader.load_blend(args.model)[<span class="hljs-number">0</span>]<br><br>haven_hdri_path = bproc.loader.get_random_world_background_hdr_img_path_from_haven(args.hdri_path)<br>bproc.world.set_world_background_hdr_img(haven_hdri_path)<br></code></pre></td></tr></table></figure>
<blockquote>
<ol>
<li>使用 <code>bproc.loader.load_blend(args.model)</code> 函数加载在 <code>args.model</code> 变量中指定的 Blender 模型文件。该函数返回一个对象列表，我们将其中的第一个对象存储在变量 <code>obj</code> 中。</li>
<li>使用 <code>bproc.loader.get_random_world_background_hdr_img_path_from_haven(args.hdri_path)</code> 函数从指定的路径中获取一个随机的 HDR 图像文件路径。该函数会检查 <code>args.hdri_path</code> 目录下的所有 <code>.hdr</code> 文件，并从中随机选择一个返回。</li>
<li>最后，使用 <code>bproc.world.set_world_background_hdr_img(haven_hdri_path)</code> 函数，将选择的 HDR 图像文件路径设置为 Blender 环境的背景图像。这使得 3D 模型文件与所选择的 HDR 图像组合成为一个逼真的场景。</li>
</ol>
</blockquote>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Add dust to all materials of the loaded object</span><br><span class="hljs-keyword">for</span> material <span class="hljs-keyword">in</span> obj.get_materials():<br>    bproc.material.add_dust(material, strength=<span class="hljs-number">0.8</span>, texture_scale=<span class="hljs-number">0.05</span>)<br></code></pre></td></tr></table></figure>
<blockquote>
<p>这段代码的作用是向已经加载到 Blender 中的模型对象的所有材质（material）中添加灰尘效果。</p>
<p>具体而言，代码执行了以下几个步骤：</p>
<ol>
<li>
<p>使用 <code>obj.get_materials()</code> 方法从 <code>obj</code> 对象中获取所有的材质，并使用 <code>for</code> 循环遍历每一个材质。</p>
</li>
<li>
<p>在循环中，使用 <code>bproc.material.add_dust(material, strength=0.8, texture_scale=0.05)</code> 函数向当前遍历的材质中添加灰尘。该函数接受三个参数：</p>
<ul>
<li><code>material</code>：要添加灰尘的材质对象。</li>
<li><code>strength</code>：灰尘的强度，默认为 0.5。</li>
<li><code>texture_scale</code>：灰尘纹理的缩放比例，默认为 0.01。</li>
</ul>
<p>相关的代码将根据这些参数将灰尘纹理应用于材质，从而使其看起来更加逼真。</p>
</li>
</ol>
<p>因此，这段代码使您能够轻松地向已经加载到 Blender 中的模型对象添加灰尘效果，从而使其看起来更加逼真。</p>
</blockquote>
<h3 id="object-selection-and-manipulation-using-displacement-modifier" tabindex="-1" id="Object-selection-and-manipulation-using-displacement-modifier">Object selection and manipulation using displacement modifier</h3>
<p>该示例演示了如何使用不同纹理添加不同位移修饰符作为 <code>EntityManipulator</code> 模块的一部分来操作实体。</p>
<h3 id="usage-5" tabindex="-1" id="Usage-6">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/entity_displacement_modifier/main.py examples/resources/scene.obj examples/advanced/entity_displacement_modifier/output<br></code></pre></td></tr></table></figure>
<h3 id="visualization-5" tabindex="-1" id="Visualization-6">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/advanced/entity_displacement_modifier/output/0.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="O1.png" alt="png"></p>
<h3 id="code-5" tabindex="-1" id="Code-6">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Add displacement to all objects</span><br><span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> objs:<br>    <span class="hljs-comment"># Create a uv mapping based on a cylinder projection</span><br>    obj.add_uv_mapping(<span class="hljs-string">&quot;cylinder&quot;</span>)<br><br>    <span class="hljs-comment"># Create a random procedural texture</span><br>    texture = bproc.material.create_procedural_texture(<span class="hljs-string">&#x27;CLOUDS&#x27;</span>)<br>    <span class="hljs-comment"># Displace the vertices of the object based on that random texture</span><br>    obj.add_displace_modifier(<br>        texture=texture,<br>        strength=random.gauss(<span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>),<br>        subdiv_level=random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>),<br>    )<br></code></pre></td></tr></table></figure>
<p>如果一个对象没有 UV 映射，我们将添加一个，因为它对于将位移纹理映射到对象是必要的。对于 UV 映射，我们选择使用 <code>projection</code>。Blender 给出的可能的投影类型有：“cube”、“cylinder”、“smart” 和 “sphere”。</p>
<p>然后，我们为每个实体添加了一个带有随机纹理的位移修饰符。</p>
<ul>
<li><code>strength</code> 是几何体位移的量。我们在这里使用高斯分布对 <code>strength</code> 进行采样，均值为 <code>0.0</code>，标准差为 <code>0.5</code>。</li>
<li>如果应用子细分，则 <code>subdiv_level</code> 定义要在实体上执行的子细分数量。在本示例中，我们使用了一个或两个子细分。</li>
<li><code>mid_level</code> 是文理值，将被处理为无位移的修饰符。纹理值低于此阈值将导致沿所选方向的负位移，而高于此阈值的纹理值将导致正位移。<code>displacement = texture_value - mid_level</code>。请记住，在 Blender 中，颜色/亮度值通常在（0.0 到 1.0）之间，而不是（0 到 255）之间。</li>
<li>通过添加一个值到 <code>min_vertices_for_subdiv</code>，我们可以检查实体是否需要子细分修饰符。如果实体的顶点少于 <code>min_vertices_for_subdiv</code>，则会添加一个 Subdivision 材质，以增加顶点的数量。实体的顶点数对于位移修饰符有很大的影响。如果顶点不足，则位移修饰符效果不好。</li>
</ul>
<h2 id="camera-lens-distortion-generation-and-validation" tabindex="-1" id="Camera-lens-distortion-generation-and-validation">Camera lens distortion generation and validation</h2>
<p>该程序会生成典型的 BlenderProc 虚拟场景和已知姿态和内参的精确测量的相机校准板的扭曲图像（RGB、深度和法线）。后者将用于验证我们的几何相机模型，通过比较生成的图像与真实图像。</p>
<p>emmmm 这个我应该用不到。</p>
<h3 id="usage-6" tabindex="-1" id="Usage-7">Usage</h3>
<p>Standard Scene：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/lens_distortion/main.py examples/resources/scene.obj examples/advanced/lens_distortion/output<br></code></pre></td></tr></table></figure>
<p><img src="CL1.png" alt="png"></p>
<p>simple calibration image by loading intrinsics and extrinsics from a file:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/lens_distortion/main_callab.py examples/advanced/lens_distortion/callab_platte.obj examples/advanced/lens_distortion/camera_calibration_callab_img1.cal examples/advanced/lens_distortion/output<br></code></pre></td></tr></table></figure>
<p><img src="CL2.png" alt="png"></p>
<p>fairly distorted image:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/lens_distortion/main_callab.py examples/advanced/lens_distortion/callab_platte_justin.obj examples/advanced/lens_distortion/camera_calibration_callab_img2.cal examples/advanced/lens_distortion/output<br></code></pre></td></tr></table></figure>
<p><img src="CL3.png" alt="png"></p>
<ul>
<li>加载对象；将它们定位到世界参考帧的原点。</li>
<li>创建一个点光源。</li>
<li>设置相机内参，包括镜头畸变参数。</li>
<li>初始化所有生成的无畸变图像（通常比所需的分辨率更高）的无畸变到畸变坐标映射，最终将其进行扭曲。</li>
<li>对于第一个示例，或者加载使用相机校准软件（例如 <a target="_blank" rel="noopener" href="https://www.robotic.de/callab">DLR CalLab v1</a>）测量得到的相机姿态，对相机与物体姿态进行采样。</li>
<li>渲染 RGB、深度和法线图像。</li>
<li>应用镜头畸变（对于时间上的、高分辨率的中间 Blender 图像），然后将它们裁剪到所需的分辨率。</li>
<li>将畸变数据写入 .hdf5 容器。</li>
<li>通过将生成的图像与参考真实图像 <code>./images/lens_img1_real.jpg</code> 和 <code>./images/lens_img2_real.png</code> 进行比较来进行测试。</li>
</ul>
<h2 id="material-randomization" tabindex="-1" id="Material-Randomization">Material Randomization</h2>
<h3 id="usage-7" tabindex="-1" id="Usage-8">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/material_randomizer/main.py examples/resources/scene.obj examples/advanced/material_randomizer/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/advanced/material_randomizer/main.py</code>: path to the main python file to run.</li>
<li><code>examples/resources/scene.obj</code>: path to the object file with the basic scene.</li>
<li><code>examples/advanced/material_randomizer/output</code>: path to the output directory.</li>
</ul>
<h3 id="visualizaton" tabindex="-1" id="Visualizaton">Visualizaton</h3>
<p>多次运行结果，Material 一般不同：</p>
<p><img src="M1.png" alt="png"></p>
<p><img src="M2.png" alt="png"></p>
<h3 id="code-6" tabindex="-1" id="Code-7">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Collect all materials</span><br>materials = bproc.material.collect_all()<br><br><span class="hljs-comment"># Go through all objects</span><br><span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> objs:<br>    <span class="hljs-comment"># For each material of the object</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(obj.get_materials())):<br>        <span class="hljs-comment"># In 50% of all cases</span><br>        <span class="hljs-keyword">if</span> np.random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>) &lt;= <span class="hljs-number">0.5</span>:<br>            <span class="hljs-comment"># Replace the material with a random one</span><br>            obj.set_material(i, random.choice(materials))<br></code></pre></td></tr></table></figure>
<blockquote>
<p>这段代码的作用是对已经加载到 Blender 中的所有对象进行操作，随机替换这些对象的材质。</p>
<p>具体而言，代码执行了以下几个步骤：</p>
<ol>
<li>首先使用 <code>for obj in objs:</code> 循环遍历所有在 Blender 环境中加载的对象，并对每个对象执行以下操作。</li>
<li>在循环中，对于当前遍历对象的每一个材质，使用 <code>for i in range(len(obj.get_materials())):</code> 进行循环遍历。</li>
<li>在每次循环中，使用 <code>np.random.uniform(0, 1)</code> 函数生成一个 0 到 1 之间的随机数，并判断是否小于等于 0.5，即 50% 的概率。如果是，则执行以下操作。</li>
<li>使用 <code>obj.set_material(i, random.choice(materials))</code> 函数将当前遍历的材质替换为从 <code>materials</code> 列表中随机选择的一个材质。其中，<code>materials</code> 列表是预先定义的包含多种材质的列表。</li>
</ol>
<p>因此，这段代码使您能够轻松地对已经加载到 Blender 中的所有对象进行操作，并以一定的概率随机更改它们的材质，可以为渲染器提供更丰富和多样化的渲染效果。</p>
</blockquote>
<h2 id="motion-blur-and-rolling-shutter" tabindex="-1" id="Motion-Blur-and-Rolling-Shutter">Motion Blur and Rolling Shutter</h2>
<p>在这个例子中，我们展示如何生成运动模糊和滚动快门效果。</p>
<p>这些效果是可见的，如果相机或对象在帧之间移动。相机在物体静止的情况下经历以下运动：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-number">0</span> -<span class="hljs-number">10</span> <span class="hljs-number">4</span> <span class="hljs-number">1.3</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-comment"># initial position</span><br><span class="hljs-number">0</span> -<span class="hljs-number">15</span> <span class="hljs-number">4</span> <span class="hljs-number">1.3</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-comment"># moving away from object</span><br><span class="hljs-number">5</span> -<span class="hljs-number">15</span> <span class="hljs-number">4</span> <span class="hljs-number">1.3</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-comment"># moving to the right</span><br><span class="hljs-number">5</span> -<span class="hljs-number">15</span> <span class="hljs-number">8</span> <span class="hljs-number">1.3</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-comment"># moving upwards</span><br><span class="hljs-number">1</span> -<span class="hljs-number">11</span> <span class="hljs-number">5</span> <span class="hljs-number">1.3</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-comment"># combined motion (to the left, towards object and downwards)</span><br></code></pre></td></tr></table></figure>
<h3 id="usage-8" tabindex="-1" id="Usage-9">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/motion_blur_rolling_shutter/config_motion_blur.yaml examples/advanced/motion_blur_rolling_shutter/camera_positions examples/resources/scene.obj examples/advanced/motion_blur_rolling_shutter/output<br></code></pre></td></tr></table></figure>
<p>跑不动，西内。</p>
<h2 id="object-pose-sampling" tabindex="-1" id="Object-pose-sampling">Object pose sampling</h2>
<p>这个例子的重点是介绍 <code>object.ObjectPoseSampler</code>，它允许在采样体积内进行带有碰撞检查的对象姿态采样。</p>
<h2 id="usage-9" tabindex="-1" id="Usage-10">Usage</h2>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/object_pose_sampling/main.py examples/resources/camera_positions examples/resources/scene.obj examples/advanced/object_pose_sampling/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/advanced/object_pose_sampling/main.py</code>: path to the main python file to run.</li>
<li><code>examples/resources/camera_positions</code>: text file with parameters of camera positions.</li>
<li><code>examples/resources/scene.obj</code>: path to the object file with the basic scene.</li>
<li><code>examples/advanced/object_pose_sampling/output</code>: path to the output directory.</li>
</ul>
<h3 id="visualization-6" tabindex="-1" id="Visualization-7">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/advanced/object_pose_sampling/output/0.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="OP1.png" alt="png"></p>
<h3 id="code-7" tabindex="-1" id="Code-8">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Define a function that samples the pose of a given object</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sample_pose</span>(<span class="hljs-params">obj: bproc.types.MeshObject</span>):<br>    obj.set_location(np.random.uniform([-<span class="hljs-number">5</span>, -<span class="hljs-number">5</span>, -<span class="hljs-number">5</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>]))<br>    obj.set_rotation_euler(np.random.uniform([<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>], [np.pi * <span class="hljs-number">2</span>, np.pi * <span class="hljs-number">2</span>, np.pi * <span class="hljs-number">2</span>]))<br><br><span class="hljs-comment"># Sample the poses of all objects, while making sure that no objects collide with each other.</span><br>bproc.<span class="hljs-built_in">object</span>.sample_poses(<br>    objs,<br>    sample_pose_func=sample_pose,<br>    objects_to_check_collisions=objs<br>)<br></code></pre></td></tr></table></figure>
<p>定义一个函数，采样并设置对象的位置和旋转。对象被放置在采样的姿态上，并对 <code>objects_to_check_collisions</code> 指定的所有对象执行碰撞检查（默认为所有对象）。如果发生碰撞，位置将被重置，并尝试重新采样。最大尝试次数可以由 <code>max_tries</code> 定义。</p>
<h2 id="on-surface-object-pose-sampling" tabindex="-1" id="On-surface-object-pose-Sampling">On surface object pose Sampling</h2>
<p>这个示例的重点是 <code>OnSurfaceSampler</code>，它允许对所选表面上的某些对象进行姿态采样。</p>
<h3 id="usage-10" tabindex="-1" id="Usage-11">Usage</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">blenderproc run examples/advanced/on_surface_object_sampling/main.py examples/resources/camera_positions examples/advanced/on_surface_object_sampling/scene.blend examples/advanced/on_surface_object_sampling/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/advanced/on_surface_object_sampling/main.py</code>: path to the main python file to run.</li>
<li><code>examples/resources/camera_positions</code>: text file with parameters of camera positions.</li>
<li><code>examples/advanced/on_surface_object_sampling/scene.blend</code>: path to the object file with the basic scene.</li>
<li><code>examples/advanced/on_surface_object_sampling/output</code>: path to the output directory.</li>
</ul>
<h3 id="visualization-7" tabindex="-1" id="Visualization-8">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/advanced/on_surface_object_sampling/output/0.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="OS1.png" alt="png"></p>
<p><img src="OS2.png" alt="png"></p>
<h3 id="code-8" tabindex="-1" id="Code-9">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Define a function that samples the pose of a given object</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sample_pose</span>(<span class="hljs-params">obj: bproc.types.MeshObject</span>):<br>    <span class="hljs-comment"># Sample the spheres location above the surface</span><br>    obj.set_location(bproc.sampler.upper_region(<br>        objects_to_sample_on=[surface],<br>        min_height=<span class="hljs-number">1</span>,<br>        max_height=<span class="hljs-number">4</span>,<br>        use_ray_trace_check=<span class="hljs-literal">False</span><br>    ))<br>    obj.set_rotation_euler(np.random.uniform([<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>], [np.pi * <span class="hljs-number">2</span>, np.pi * <span class="hljs-number">2</span>, np.pi * <span class="hljs-number">2</span>]))<br></code></pre></td></tr></table></figure>
<p>这段代码的作用是定义一个函数 <code>sample_pose</code>，并使用该函数对已经加载到 Blender 中的模型对象进行姿态采样操作。</p>
<p>具体而言，代码执行了以下几个步骤：</p>
<ol>
<li>首先定义了一个名为 <code>sample_pose</code> 的函数，函数的输入参数为一个 <code>bproc.types.MeshObject</code> 类型的对象 <code>obj</code>，表示需要进行姿态采样的模型对象。函数内部执行了以下操作：
<ul>
<li>使用 <code>bproc.sampler.upper_region()</code> 函数对当前对象进行位置采样，生成一个位置矢量，并使用 <code>obj.set_location()</code> 方法将该位置矢量设置为当前模型对象的位置。在此处，我们使用以下参数配置：
<ul>
<li><code>objects_to_sample_on</code>：一个 <code>List[bproc.types.Object]</code> 类型的列表，表示采样参考物体的集合。在这里，我们将表面 object 添加到采样参考物体中。</li>
<li><code>min_height</code> 和 <code>max_height</code>：分别表示采样位置的最小高度和最大高度。在这里，我们将其设为 1 和 4，表示采样位置在表面 object 的上方 1 到 4 个单位长度之间。</li>
<li><code>use_ray_trace_check</code>：一个布尔值，表示是否使用光线跟踪检查避免生成的位置与其他物体相交。在这里，我们将其设置为 False，即不进行光线跟踪检查。</li>
</ul>
</li>
<li>使用 <code>np.random.uniform([0, 0, 0], [np.pi * 2, np.pi * 2, np.pi * 2])</code> 函数生成一个随机欧拉角矢量，并使用 <code>obj.set_rotation_euler()</code> 方法将该欧拉角矢量设置为当前模型对象的旋转。</li>
</ul>
</li>
<li>在完成函数定义后，该函数可以用于对已经加载到 Blender 中的模型对象进行位置采样和姿态采样操作，从而增加渲染效果的多样性和逼真性，特别是当需要将某个物体放置在表面上方时。</li>
</ol>
<p>因此，这段代码提供了一种简单的方法来对模型对象进行采样操作，并可扩展成复杂的采样逻辑，从而为渲染器提供更加丰富和逼真的场景渲染效果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Sample the spheres on the surface</span><br>spheres = bproc.<span class="hljs-built_in">object</span>.sample_poses_on_surface(spheres, surface, sample_pose, min_distance=<span class="hljs-number">0.1</span>, max_distance=<span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure>
<hr>
<p>设置刚体：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Enable physics for spheres (active) and the surface (passive)</span><br><span class="hljs-keyword">for</span> sphere <span class="hljs-keyword">in</span> spheres:<br>    sphere.enable_rigidbody(<span class="hljs-literal">True</span>)<br>surface.enable_rigidbody(<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure>
<p>物理模拟：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Run the physics simulation</span><br>bproc.<span class="hljs-built_in">object</span>.simulate_physics_and_fix_final_poses(min_simulation_time=<span class="hljs-number">2</span>, max_simulation_time=<span class="hljs-number">4</span>, check_object_interval=<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>
<h2 id="optical-flow" tabindex="-1" id="Optical-Flow">Optical Flow</h2>
<p>在本示例中，我们演示了如何获取连续关键帧之间的前向/后向流值。</p>
<p>如果相机或物体在帧之间移动，则流会变得可见。在这里，相机经过以下运动：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-number">0</span> -<span class="hljs-number">10</span> <span class="hljs-number">4</span> <span class="hljs-number">1.3</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>  <span class="hljs-comment"># initial position</span><br><span class="hljs-number">0</span> -<span class="hljs-number">12</span> <span class="hljs-number">4</span> <span class="hljs-number">1.3</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>  <span class="hljs-comment"># moving away from object</span><br><span class="hljs-number">2</span> -<span class="hljs-number">12</span> <span class="hljs-number">4</span> <span class="hljs-number">1.3</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>  <span class="hljs-comment"># moving to the right</span><br><span class="hljs-number">2</span> -<span class="hljs-number">12</span> <span class="hljs-number">6</span> <span class="hljs-number">1.3</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>  <span class="hljs-comment"># moving upwards</span><br><span class="hljs-number">1</span> -<span class="hljs-number">11</span> <span class="hljs-number">5</span> <span class="hljs-number">1.3</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>  <span class="hljs-comment"># combined motion (to the left, towards object and downwards)</span><br></code></pre></td></tr></table></figure>
<h3 id="usage-11" tabindex="-1" id="Usage-12">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/optical_flow/main.py examples/advanced/optical_flow/camera_positions examples/resources/scene.obj examples/advanced/optical_flow/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/advanced/optical_flow/main.py</code>: path to the main python file to run.</li>
<li><code>examples/advanced/optical_flow/camera_positions</code>: text file with parameters of camera positions.</li>
<li><code>examples/resources/scene.obj</code>: path to the object file with the basic scene.</li>
<li><code>examples/advanced/optical_flow/output</code>: path to the output directory.</li>
</ul>
<h3 id="usage-12" tabindex="-1" id="Usage-13">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/advanced/optical_flow/output/1.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="OF1.png" alt="png"></p>
<h3 id="code-9" tabindex="-1" id="Code-10">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Render the optical flow (forward and backward) for all frames</span><br>data.update(bproc.renderer.render_optical_flow(get_backward_flow=<span class="hljs-literal">True</span>, get_forward_flow=<span class="hljs-literal">True</span>, blender_image_coordinate_style=<span class="hljs-literal">False</span>))<br></code></pre></td></tr></table></figure>
<ul>
<li>遍历所有相机位姿并渲染前向和/或后向光流。</li>
<li>使用 <code>.exr</code> 格式渲染图像，该格式允许线性颜色空间和更高的精度，然后将其转换为 <code>numpy.float32</code> 数组。</li>
<li>默认情况下，Blender 使用左下角作为坐标系统原点。OpenCV 和流行的 Flow 数据集使用上部左角。如果要使用默认的 Blender 行为，请更改标志 <code>&quot;blender_image_coordinate_style&quot;: True</code>。请注意，可视化中的颜色将不同！</li>
</ul>
<h3 id="convex-decomposition-for-generating-stable-and-exact-collision-shapes" tabindex="-1" id="Convex-decomposition-for-generating-stable-and-exact-collision-shapes">Convex decomposition for generating stable and exact collision shapes</h3>
<p>在 Blender 中运行物理模拟时，选择正确的碰撞形状对于实现稳定结果至关重要。虽然使用 <code>CONVEX_HULL</code> 碰撞形状可以获得非常稳定的模拟结果，但对于非凸面体对象（例如，浮动的物体），结果可能看起来非常不切实际。<code>MESH</code> 碰撞形状允许进行更精确的碰撞，但模拟也会变得非常不稳定，物体可能会相互穿透。</p>
<p><code>CONVEX_DECOMPOSITION</code> 是两者之间的折衷方案：使用 <a target="_blank" rel="noopener" href="https://github.com/kmammou/v-hacd">V-HACD 算法</a> 将给定的非凸面体对象分解成多个近似凸部分。这些部分的并集可以用作物体的精确且稳定的碰撞形状。</p>
<p>在这个例子中，我们加载了一个垃圾箱和一些高度非凸面体的 ShapeNet 对象，应用凸分解生成碰撞形状，然后让这些物体掉进垃圾箱里。</p>
<p><strong>不好下数据集+感觉用不到，give up！</strong></p>
<h2 id="random-backgrounds" tabindex="-1" id="Random-Backgrounds">Random Backgrounds</h2>
<p><img src="R1.jpg" alt="jpg"></p>
<p>在这个例子中，我们生成了一个物体 (Suzanne) 的渲染图像，并将它们粘贴到随机的背景图像上，随机化对象的位置、方向、材质属性和照明。这是一种简单的方法来生成用于训练分类、物体检测和分割任务的数据。它易于实现和使用，但与实际 3D 场景中的物体渲染相比通常会导致较差的结果。</p>
<h3 id="usage-13" tabindex="-1" id="Usage-14">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/advanced/random_backgrounds/main.py examples/advanced/random_backgrounds/object.ply examples/advanced/random_backgrounds/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/advanced/random_backgrounds/main.py</code>: path to the main python file to run.</li>
<li><code>examples/advanced/random_backgrounds/object.ply</code>: path to the object file.</li>
<li><code>examples/advanced/random_backgrounds/output</code>: path to the output directory.</li>
</ul>
<p>emmm就是渲染一个不含背景的图片，然后把背景换成其他的。</p>
<p>然后再：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">python examples/advanced/random_backgrounds/paste_images_on_backgrounds.py --images examples/advanced/random_backgrounds/output/coco_data/images --backgrounds path/to/background/images --overwrite<br></code></pre></td></tr></table></figure>
<p>添加背景。</p>
<h3 id="code-10" tabindex="-1" id="Code-11">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Enable transparency so the background becomes transparent</span><br>bproc.renderer.set_output_format(enable_transparency=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>
<blockquote>
<p>这段代码的作用是启用 Blender 内置渲染器的透明背景功能，使得渲染输出结果中的背景变为透明的。</p>
<p>具体而言，代码执行了以下操作：</p>
<ol>
<li>首先调用了 <code>bproc.renderer</code> 模块下的 <code>set_output_format()</code> 函数，该函数用于设置渲染输出格式。在此，我们设置了一个参数 <code>enable_transparency=True</code>，用于启用透明背景功能。</li>
<li>启用透明背景功能后，当使用 Blender 渲染器进行渲染时，原本的背景将会被自动设为透明色，从而能够与其他软件进行无缝合成和叠加。</li>
</ol>
<p>因此，这段代码可以帮助您快速启用 Blender 渲染器的透明背景功能，方便进行后续的图像处理和合成操作。</p>
</blockquote>
<h2 id="random-room-constructor" tabindex="-1" id="Random-Room-Constructor">Random Room Constructor</h2>
<p>这个例子解释了 RandomRoomConstructor。该模块可以构建随机房间，并在其中放置从其他模块加载的对象。</p>
<p>本例使用了 CCMaterialLoader。所以要下载 cc_textures 的纹理，我们提供了一个脚本。它还使用了 IkeaLoader，请参见 Ikea 的例子。</p>
<p>这两者都需要使用才能使用此示例。</p>
<p><strong>又不好下载，give up!</strong></p>
<h3 id="code-11" tabindex="-1" id="Code-12">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Load materials and objects that can be placed into the room</span><br>materials = bproc.loader.load_ccmaterials(args.cc_material_path, [<span class="hljs-string">&quot;Bricks&quot;</span>, <span class="hljs-string">&quot;Wood&quot;</span>, <span class="hljs-string">&quot;Carpet&quot;</span>, <span class="hljs-string">&quot;Tile&quot;</span>, <span class="hljs-string">&quot;Marble&quot;</span>])<br>interior_objects = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">15</span>):<br>    interior_objects.extend(bproc.loader.load_ikea(args.ikea_path, [<span class="hljs-string">&quot;bed&quot;</span>, <span class="hljs-string">&quot;chair&quot;</span>, <span class="hljs-string">&quot;desk&quot;</span>, <span class="hljs-string">&quot;bookshelf&quot;</span>]))<br></code></pre></td></tr></table></figure>
<p>通过脚本下载了 <code>cctextures</code>，这里仅使用名称列表中包含其中一个名称的资产。这使得它更加真实，因为像 <code>&quot;Asphalt&quot;</code> 这样的东西通常不会在室内发现。此外，也从指定的 <code>Ikea</code> 数据集类别中加载了 15 个对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Construct random room and fill with interior_objects</span><br>objects = bproc.constructor.construct_random_room(used_floor_area=<span class="hljs-number">25</span>,   <br>                                                  interior_objects=interior_objects,<br>                                                  materials=materials, amount_of_extrusions=<span class="hljs-number">5</span>)<br></code></pre></td></tr></table></figure>
<p><code>construct_random_room</code> 构建了一个随机的地面平面，并构建了相应的墙壁和天花板。它将加载的 Ikea 对象随机放置在位置，并设置 cc-texture 材料。房间的地面面积为 25 平方米，它最多有 5 个挤出。挤出是一种走廊，它从中间的基本矩形中伸出。它们可以更宽或更窄，但永远不会小于最小的 <code>corridor_width</code>。模块将自动将 25 平方米分配到所有挤出部分中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Bring light into the room</span><br>bproc.lighting.light_surface([obj <span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> objects <span class="hljs-keyword">if</span> obj.get_name() == <span class="hljs-string">&quot;Ceiling&quot;</span>], emission_strength=<span class="hljs-number">4.0</span>)<br></code></pre></td></tr></table></figure>
<p>让天花板发光，并移除放置在其上的任何材料。</p>

            </article>
            
	<div class="rightside">
	
		<div class="rightside-button" id="js-aside">
			<span>
				<img no-lazy src="/images/icon/aside.png" class="rightside-button-icon" alt="Icon">
			</span>
		</div>
		<script>
			$("#js-aside").click(function () {
				onShowAsideButton();
			});
		</script>
	
	<div class="rightside-button" id="js-toggle_theme">
		<span>
			<img no-lazy src="/images/icon/toggle_theme.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	
<script src="/js/plugins/goto_position.js"></script>

	
	<div class="rightside-button" id="js-go_top">
		<span>
			<img no-lazy src="/images/icon/go_top.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>
	<div class="rightside-button" id="js-go_bottom">
		<span>
			<img no-lazy src="/images/icon/go_bottom.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	<script>
		setToggleThemeButtonListener();
	</script>
	<script>
		$('#js-go_top')
		.gotoPosition( {
			speed: 300,
			target: 'top',
		} );
		$('#js-go_bottom')
		.gotoPosition( {
			speed: 300,
			target: 'bottom',
		} );
	</script>
</div>


<div class="post-bottom">
    
        <div class="post-paging">     
            <div class="post-paging-last">
                
                    <a href="/posts/Diary-%E6%B4%A5%E4%BA%86%EF%BC%88%E6%BB%A8%E6%B5%B7%E7%AF%87%EF%BC%89/">
                        上一篇：Diary-津了（滨海篇）
                    </a>
                
            </div>
            <div class="post-paging-next">
                
                    <a href="/posts/Blender-BlenderProc%20Examples%20overview-Basic%20Examples/">
                        下一篇：Blender-BlenderProc Examples overview-Basic Examples
                    </a>
                
            </div>
        </div>
    
    
    
        
            <div class="giscus comments"></div>
            <script>
                var scriptElement = document.createElement('script');
                scriptElement.src = 'https://giscus.app/client.js';
                scriptElement.setAttribute('data-repo', 'GZ-Metal-Cell/GZ-Metal-Cell.github.io');
                scriptElement.setAttribute('data-repo-id', 'R_kgDOIHLEOQ');
                scriptElement.setAttribute('data-category', 'Announcements');
                scriptElement.setAttribute('data-category-id', 'DIC_kwDOIHLEOc4CcVwP');
                scriptElement.setAttribute('data-mapping', 'title');
                scriptElement.setAttribute('data-strict', '1');
                scriptElement.setAttribute('data-reactions-enabled', '');
                scriptElement.setAttribute('data-emit-metadata', '0');
                scriptElement.setAttribute('data-input-position', 'bottom');
                scriptElement.setAttribute('data-theme', localStorage.getItem('theme') === 'light' ? 'light' : 'dark_high_contrast');
                scriptElement.setAttribute('data-lang', 'zh-CN');
                
                scriptElement.setAttribute('crossorigin', 'anonymous');
                scriptElement.async = true;
                document.head.appendChild(scriptElement);
            </script>
        
    
</div>
        </div>
    </main>
    
        <aside class="main-aside">
    
<script src="/js/widgets/aside.js"></script>

    <script>
        showAside();
    </script>

    <div class="aside-top">
        <div class="aside-top-about aside-card">
            <a href="/about" class="aside-top-about-portrait">
                <img no-lazy src="/about/portrait.png" alt="Q">
            </a>
            <div class="aside-top-about-info">
                <span class="author"> Zi-Zi</span>
                <span class="description">不以物喜，不以己悲。</span>
            </div>              
            <div class="aside-top-about-site">
                <a href="/categories" class="aside-top-about-site-item">
                    <span class="title">类别</span>
                    <span class="count">5</span>
                </a>
                <a href="/tags" class="aside-top-about-site-item">
                    <span class="title">标签</span>
                    <span class="count">119</span>
                </a>
                <a href="/archives" class="aside-top-about-site-item">
                    <span class="title">归档</span>
                    <span class="count">429</span>
                </a>
            </div>
            <div class="aside-top-about-contact">
                
                    
                        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
                            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
                            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
                            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
                            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
                        </a>
                    
                
            </div>
        </div> 

        
            <div class="aside-top-series aside-card">
                <ol class="aside-top-series-content">
                    
                    
                    
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                </ol>
                <div class="aside-top-series-title">
                    <h1>
                        <a href="/tags/BlenderProc">标签：BlenderProc</a>
                    </h1>
                    <span id="serial-number">0/0</span>
                </div>
            </div>
            <script>
                activeSeriesItem();
            </script> 
        
    </div>

    <div class="aside-bottom">
        
            <script>
                
                    const tocCollapsed = true;
                
                
                    const tocDepth = 6;
                
                var headerString = '';
                for (let i = 1; i <= tocDepth; i++) {
                    if (i === 1) {
                        headerString += 'h1';
                    } else {
                        headerString += ', h' + i;
                    }
                }
                hbeToc();
            </script>
            <div class="aside-bottom-toc aside-card">
                <div class="aside-bottom-toc-title">
                    <h1>目录</h1>
                    <span class="toc-percentage"></span>
                </div>
                <ol class="aside-bottom-toc-content"></ol>
            </div>
        
    </div>
</aside>
    
</div>
		<footer>
	<div class="content">
		
			<span>©2022-2025&nbsp;By&nbsp;<a href="/about">Zi-Zi</a>.</span>
		
		<span><a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> theme by <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell/hexo-theme-quieter">Quieter</a>.</span>
		
			<span style="display: flex;">
				<img no-lazy alt="icp" src="/images/icp_icon.png" style="width: 16px; height: 16px;">
				<a href="https://icp.gov.moe/?keyword=20241647" target="_blank">萌 ICP 备 20241647 号</a>
			</span>
		
	</div>

	
<script src="/js/plugins/ref.js"></script>

	
<script src="/js/plugins/highlight_tools.js"></script>

	<script>
		const  COPY_ICON = "/images/icon/copy.png";
		const CLOSE_CODE_BLOCK_ICON = "/images/icon/close_code_block.png";
		const HIGHLIGHT_SHRINK = "";
		const HIGHLIGHT_HEIGHT_LIMIT = "";
	</script>

	
	
	<!-- Analytics -->

    
        <!-- Busuanzi Analytics -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
        <!-- Baidu Analytics -->
        <script defer>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?e57cf62289f84322ebff116e8b3d343e";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
    


	

	

    
		
<link rel="stylesheet" href="/css/plugins/textIndent.css">

		
<script src="/js/plugins/textIndent.js"></script>

	

	
	
	
		<script>
			if (typeof init === 'function') {
				init();
			}
		</script>
	

	
		
	

	

	<!--
		
<script src="/js/plugins/jquery.pjax.min.js"></script>

		<script>
			$(document).pjax('a[target!=_blank]', 'main', {
				fragment: 'main',
				timeout: 8000
			});

			$(document).on('pjax:complete', function() {
			});
		</script> 
	-->
	<script>
		console.log('\n %c Hexo-Quieter 主题 %c https://github.com/GZ-Metal-Cell/hexo-theme-quieter \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
	</script>
</footer>
	</body>

	<!-- Hexo-Quieter 主题  https://github.com/GZ-Metal-Cell/hexo-theme-quieter -->
</html>

