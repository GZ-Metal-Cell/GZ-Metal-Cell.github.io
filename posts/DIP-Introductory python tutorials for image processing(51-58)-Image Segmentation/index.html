<!DOCTYPE html>
<html lang=zh-CN data-theme="light">
	
<script src="/js/plugins/toggleTheme.js"></script>

	<script>
		setTheme();
	</script>
	<head>
		
<title>DIP-Introductory python tutorials for image processing(51-58)-Image Segmentation | Zi-Zi's Journey</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/images/icon/favicon.ico">
<link href="/css/plugins/print.css" media="print" rel="stylesheet" />

<link rel="stylesheet" href="/css/index.css">



<meta name="keywords" content="Python,DigitalSreeni,">
<meta name="description" content="学习自 Youtube 博主 DigitalSreeni。">



<script src="/js/plugins/jquery.min.js"></script>


<script src="/js/plugins/hljs.min.js"></script>


<script src="/js/plugins/init.js"></script>


<script src="/js/plugins/hide.js"></script>


<script src="/js/plugins/tabs.js"></script>



    



    
<script src="/js/plugins/alert-title.js"></script>

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-base.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-dark-class.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-light.css">






    

	<meta name="generator" content="Hexo 6.1.0"></head>

	<body>
		<header class="sticky-header">
	<nav>
		<div class="nav-left">
			<a href="/" class="logo">
				<img no-lazy src="/images/headers_icon/logo.webp" alt="Quieter">
			</a>
			<ul class="breadcrumb" id="breadcrumb"></ul>
		</div>
		<div class="nav-right">
			<ul>
				
					<li>
						<a href="/">
						  主页
						</a>
					</li>
				
					<li>
						<a href="/categories">
						  类别
						</a>
					</li>
				
					<li>
						<a href="/tags">
						  标签
						</a>
					</li>
				
					<li>
						<a href="/archives">
						  归档
						</a>
					</li>
				
					<li>
						<a href="/galleries">
						  相册
						</a>
					</li>
				
					<li>
						<a href="/links">
						  链接
						</a>
					</li>
				
					<li>
						<a href="/about">
						  关于
						</a>
					</li>
								  
			</ul>
		</div>
		<div class="nav-right-close">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
				<path fill="none" d="M0 0h24v24H0z" />
				<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
			</svg>
		</div>

		<div class="sidebar">
    <div class="topo">
        <p>Zi-Zi's Journey</p>
    </div>
    <ul>
        
        <li>
            <a href="/">
                主页
            </a>
        </li>
        
        <li>
            <a href="/categories">
                类别
            </a>
        </li>
        
        <li>
            <a href="/tags">
                标签
            </a>
        </li>
        
        <li>
            <a href="/archives">
                归档
            </a>
        </li>
        
        <li>
            <a href="/galleries">
                相册
            </a>
        </li>
        
        <li>
            <a href="/links">
                链接
            </a>
        </li>
        
        <li>
            <a href="/about">
                关于
            </a>
        </li>
        
    </ul>
    <div class="sidebar-footer">
        
        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
        </a>
        
    </div>
</div>
<div class='shelter'>
    <script>
        $(function() {
            $('.nav-right-close > svg').click(function() {
                $('.sidebar').animate({
                    right: "0"
                }, 500);
                $('.shelter').fadeIn("slow");
            
                var element = $('.topo');
                element.addClass('custom-style');
            
                var links = null;
                if ("") {
                    links = "".split(',');
                } else {
                    links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
                }
            
                var randomLink = links[Math.floor(Math.random() * links.length)];
                element.css('background-image', "url('" + randomLink + "')");
            });
          
            $('.shelter').click(function(e) {
                $('.sidebar').animate({
                    right: "-100%"
                }, 500);
                $('.shelter').fadeOut("slow");
            });
        });      
    </script>
</div>
	</nav>

	
		<div class="header-background"></div>
	

	<script>
		const name = 'post';
		const ul = document.querySelectorAll('.nav-right ul')[0];
		const lis = ul.querySelectorAll('li');

		if (name == 'home') {
			lis[0].classList.add('select');
		} else {
			for (let i = 0; i < lis.length; i++) {
				const li = lis[i];
				const a = li.querySelector('a');
				if (name === a.href.split('/')[3]) {
					li.classList.add('select');
				}
			}
		}
	</script>
	
	<script>
		var element = document.querySelector('.header-background');
		if(element) {
			element.classList.add('custom-style');
			var links = null;
			if("")
			{
				links = "".split(',');
			} else
			{
				links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
			}
			var randomLink = links[Math.floor(Math.random() * links.length)];
			element.style.backgroundImage = "url('" + randomLink + "')";
		}
	</script>

	
<script src="/js/plugins/breadcrumb.js"></script>

	<script>
		var menus_title = [];
		
			menus_title.push({home: '主页'});
		
			menus_title.push({categories: '类别'});
		
			menus_title.push({tags: '标签'});
		
			menus_title.push({archives: '归档'});
		
			menus_title.push({galleries: '相册'});
		
			menus_title.push({links: '链接'});
		
			menus_title.push({about: '关于'});
		
		
			
				postsBreadcrumb(
					document.getElementById('breadcrumb'),
					"类别",
					"/categories",
					"学习",
					"/categories/学习",
					1
				);
			
		
	</script>
</header>

<div class="main-wrapper">
    <main class="post">
        <header class="main-header">
	
		
			
				
<link rel="stylesheet" href="/css/plugins/fancybox.css">

				
<script src="/js/plugins/fancybox.umd.js"></script>

				
<script src="/js/plugins/fancybox.js"></script>

			
			<div class="post-header-background-content">
				<ul class="post-header-tag">
					
						
							<li><a href="/tags/Python"><span>Python</span></a></li>
						
							<li><a href="/tags/DigitalSreeni"><span>DigitalSreeni</span></a></li>
						
					
				</ul>
				
				<h1>DIP-Introductory python tutorials for image processing(51-58)-Image Segmentation</h1>
		
				
					<div class="post-header-desc">
						<svg t="1714702231661" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="1154" xmlns:xlink="http://www.w3.org/1999/xlink"
						width="20" height="20">
						<path
							d="M778.24 117.76A46.08 46.08 0 0 1 824.32 163.84v430.08c0 8.4992-4.13696 16.01536-10.50624 20.6848l-0.24576 0.2048L587.5712 846.09024a35.84 35.84 0 0 1-61.48096-25.06752v-220.9792a46.08 46.08 0 0 1 46.08-46.08l200.94976-0.02048V168.96h-522.24v686.08H389.12c13.25056 0 24.1664 10.07616 25.47712 22.97856l0.12288 2.62144c0 14.1312-11.4688 25.6-25.6 25.6h-143.36A46.08 46.08 0 0 1 199.68 860.16V163.84A46.08 46.08 0 0 1 245.76 117.76h532.48z m-26.78784 487.38304h-174.16192v178.176l174.16192-178.176z m-45.19936-169.94304a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z m0-122.88a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z"
							fill="#ffffff" p-id="1155"></path>
						</svg>
						<p>学习自 Youtube 博主 DigitalSreeni。</p>
					</div>
				
		
				<div class="post-header-info">
					<svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
					xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
						<path
							d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
							p-id="2902" fill="#ffffff"></path>
					</svg>
					<div class="post-header-info-author">
						<a href="/about">Zi-Zi</a>
					</div>
					
						<div class="post-header-info-categories">
							
								<a href="/categories/学习">学习</a>
							
						</div>
					
					<time>2022/11/14 07:13:00</time>
				</div>
		
				
					<div class="post-header-stat">
						<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
						viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve" width="20" height="20">
							<path fill="#FFFFFF" d="M187.2,165.6c0,2.6-2.1,4.7-4.7,4.7H17.5c-2.6,0-4.7-2.1-4.7-4.7s2.1-4.7,4.7-4.7h165.1
								C185.2,160.9,187.2,163,187.2,165.6z"/>
							<path fill="#FFFFFF" d="M17.5,29.7c2.6,0,4.7,2.1,4.7,4.7v131.2c0,2.6-2.1,4.7-4.7,4.7s-4.7-2.1-4.7-4.7V34.4
								C12.8,31.8,14.9,29.7,17.5,29.7z M77.9,91.5c1.8,1.8,1.8,4.8,0,6.6l-39.8,39.8c-1.9,1.8-4.9,1.7-6.6-0.2c-1.7-1.8-1.7-4.6,0-6.4
								l39.8-39.8C73.1,89.6,76,89.6,77.9,91.5z M169.9,70.2c1.6,2.1,1.1,5-0.9,6.5c0,0,0,0,0,0l-64.2,48.2c-2.1,1.5-5,1.1-6.6-0.9
								c-1.6-2.1-1.1-5,0.9-6.5c0,0,0,0,0,0l64.2-48.2C165.4,67.7,168.3,68.1,169.9,70.2L169.9,70.2z"/>
							<path fill="#FFFFFF" d="M104.6,124.5c-1.8,1.8-4.8,1.8-6.6,0L71.6,98.1c-1.8-1.8-1.8-4.8,0-6.6c1.8-1.8,4.8-1.8,6.6,0l26.3,26.3
								C106.4,119.6,106.4,122.6,104.6,124.5C104.6,124.4,104.6,124.4,104.6,124.5z"/>
						</svg>
		
						
							
<script src="/js/plugins/wordCount.js"></script>

							<p class="post-count">文字数：---</p>
						
		
						
							<p id="busuanzi_container_page_pv" style='display:none;'>阅读数：<span id="busuanzi_value_page_pv"></span></p>
						
					</div>
				
			</div>
		
	
</header>
        <div class="post-content article-container">
            <article class="post-content-info">
                <h1 id="%E6%AD%A3%E6%96%87" tabindex="-1">正文</h1>
<h2 id="tutorial-51---what-is-image-thresholding-and-segmentation" tabindex="-1" id="Tutorial-51-What-is-image-thresholding-and-segmentation">Tutorial 51 - What is image thresholding and segmentation</h2>
<p><strong>What is image segmentation?</strong> 什么是图像分割?</p>
<p>And how is it different than thresholding? 它和阈值法有什么不同?</p>
<p><strong>Image segmentation</strong> is the process of partitioning a digital image into multiple segments(image objects).</p>
<ul>
<li><strong>图像分割</strong>是将一幅数字图像分割成多个段(图像对象)的过程。</li>
</ul>
<p><strong>Image thresholding</strong> is a simple form of image segmentation, it is a way to create a binary image based on setting a threshold value on the pixel intensity of the original image.</p>
<ul>
<li><strong>图像阈值分割</strong>是图像分割的一种简单形式，它是在原始图像的像素强度上设置一个阈值的基础上创建一个二值图像的方法。</li>
</ul>
<p><img src="51_0.png" alt="png"></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_38007695/article/details/112395145">OpenCV —— 阈值分割（直方图技术法，熵算法，Otsu，自适应阈值算法）</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>img = cv2.imread(<span class="hljs-string">&quot;images/Osteosarcoma_01.tif&quot;</span>, <span class="hljs-number">1</span>)<br>plt.imshow(img[:,:,::-<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x15586e075e0&gt;
</code></pre>
<p><img src="51_1.png" alt="png"></p>
<ul>
<li>Separate blue channels as they contain nuclei pixels (DAPI).
<ul>
<li>分开蓝色通道，因为它们包含核像素(DAPI)。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">blue_channel = img[:,:,<span class="hljs-number">0</span>]<br>plt.imshow(blue_channel, cmap=<span class="hljs-string">&quot;gray&quot;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x20c6bc29a60&gt;
</code></pre>
<p><img src="51_2.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.hist(blue_channel.flat, bins=<span class="hljs-number">100</span>, <span class="hljs-built_in">range</span>=(<span class="hljs-number">0</span>, <span class="hljs-number">120</span>))<br></code></pre></td></tr></table></figure>
<pre><code>(array([8.12033e+05, 3.47050e+04, 2.10950e+04, 3.48210e+04, 4.78370e+04,
        1.07928e+05, 5.22380e+04, 4.82100e+04, 4.30030e+04, 3.66300e+04,
        5.45780e+04, 2.04160e+04, 1.62930e+04, 1.28170e+04, 1.05070e+04,
        1.52520e+04, 5.43100e+03, 4.38900e+03, 3.60500e+03, 2.90800e+03,
        4.45800e+03, 1.71800e+03, 1.54000e+03, 1.34400e+03, 1.21900e+03,
        2.06400e+03, 9.29000e+02, 8.15000e+02, 8.25000e+02, 7.36000e+02,
        1.44100e+03, 6.95000e+02, 6.53000e+02, 6.37000e+02, 6.56000e+02,
        1.30700e+03, 6.35000e+02, 6.70000e+02, 6.42000e+02, 6.53000e+02,
        1.44100e+03, 7.63000e+02, 7.41000e+02, 8.87000e+02, 8.89000e+02,
        1.84300e+03, 1.05800e+03, 1.03700e+03, 1.06800e+03, 1.09200e+03,
        2.30900e+03, 1.16800e+03, 1.22000e+03, 1.28600e+03, 1.33500e+03,
        2.73900e+03, 1.33800e+03, 1.43900e+03, 1.44000e+03, 1.51700e+03,
        2.97600e+03, 1.54400e+03, 1.50600e+03, 1.54700e+03, 1.53600e+03,
        3.21800e+03, 1.54400e+03, 1.64800e+03, 1.61200e+03, 1.61200e+03,
        3.08900e+03, 1.53400e+03, 1.50400e+03, 1.53300e+03, 1.50700e+03,
        2.88000e+03, 1.45900e+03, 1.38300e+03, 1.37400e+03, 1.38100e+03,
        2.67000e+03, 1.33800e+03, 1.24400e+03, 1.22500e+03, 1.16200e+03,
        2.38500e+03, 1.17100e+03, 1.13000e+03, 1.08200e+03, 1.04700e+03,
        2.03100e+03, 1.03800e+03, 9.89000e+02, 9.92000e+02, 8.93000e+02,
        1.78600e+03, 8.82000e+02, 7.94000e+02, 7.79000e+02, 1.52600e+03]),
 array([  0. ,   1.2,   2.4,   3.6,   4.8,   6. ,   7.2,   8.4,   9.6,
         10.8,  12. ,  13.2,  14.4,  15.6,  16.8,  18. ,  19.2,  20.4,
         21.6,  22.8,  24. ,  25.2,  26.4,  27.6,  28.8,  30. ,  31.2,
         32.4,  33.6,  34.8,  36. ,  37.2,  38.4,  39.6,  40.8,  42. ,
         43.2,  44.4,  45.6,  46.8,  48. ,  49.2,  50.4,  51.6,  52.8,
         54. ,  55.2,  56.4,  57.6,  58.8,  60. ,  61.2,  62.4,  63.6,
         64.8,  66. ,  67.2,  68.4,  69.6,  70.8,  72. ,  73.2,  74.4,
         75.6,  76.8,  78. ,  79.2,  80.4,  81.6,  82.8,  84. ,  85.2,
         86.4,  87.6,  88.8,  90. ,  91.2,  92.4,  93.6,  94.8,  96. ,
         97.2,  98.4,  99.6, 100.8, 102. , 103.2, 104.4, 105.6, 106.8,
        108. , 109.2, 110.4, 111.6, 112.8, 114. , 115.2, 116.4, 117.6,
        118.8, 120. ]),
 &lt;BarContainer object of 100 artists&gt;)
</code></pre>
<p><img src="51_3.png" alt="png"></p>
<ul>
<li>Manual thresholding by setting threshold value to numpy array
<ul>
<li>手动设置阈值</li>
</ul>
</li>
<li>After thresholding we will get a binary image.
<ul>
<li>阈值化后得到二值图像。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">background = (blue_channel &lt;= <span class="hljs-number">40</span>)<br>nuclei = (blue_channel &gt; <span class="hljs-number">40</span>)<br>plt.imshow(nuclei, cmap=<span class="hljs-string">&quot;gray&quot;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x20c6bb277f0&gt;
</code></pre>
<p><img src="51_4.png" alt="png"></p>
<ul>
<li>Using opencv to perform manual threshold
<ul>
<li>使用 opencv 执行手动阈值</li>
</ul>
</li>
<li>All pixels above 40 will have pixel value 255
<ul>
<li>所有高于 40 的像素的像素值都是 255</li>
</ul>
</li>
<li>Should be exactly same as the above method.
<ul>
<li>应该与上面的方法完全相同。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">ret1, thresh1 = cv2.threshold(blue_channel, <span class="hljs-number">40</span>, <span class="hljs-number">255</span>, cv2.THRESH_BINARY)<br>ret1, thresh1<br></code></pre></td></tr></table></figure>
<pre><code>(40.0,
 array([[255, 255, 255, ...,   0,   0,   0],
        [255, 255, 255, ...,   0,   0,   0],
        [255, 255, 255, ...,   0,   0,   0],
        ...,
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0]], dtype=uint8))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.imshow(thresh1, cmap=<span class="hljs-string">&quot;gray&quot;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x20c00133220&gt;
</code></pre>
<p><img src="51_4.png" alt="png"></p>
<p><strong>AUTO using OTSU</strong></p>
<ul>
<li>Using opencv for otsu based automatic thresholding
<ul>
<li>使用 opencv 进行基于 otsu 的自动阈值分割</li>
</ul>
</li>
<li>Reports a value of 50 as threshold for the nuclei.
<ul>
<li>报告值 50 作为细胞核的阈值。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">ret2, thresh2 = cv2.threshold(blue_channel, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>, cv2.THRESH_BINARY +  cv2.THRESH_OTSU)<br>ret2, thresh2<br></code></pre></td></tr></table></figure>
<pre><code>(50.0,
 array([[255, 255,   0, ...,   0,   0,   0],
        [255, 255, 255, ...,   0,   0,   0],
        [255, 255, 255, ...,   0,   0,   0],
        ...,
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0],
        [  0,   0,   0, ...,   0,   0,   0]], dtype=uint8))
</code></pre>
<p><a target="_blank" rel="noopener" href="https://numpy.org/doc/stable/reference/generated/numpy.digitize.html">numpy.digitize</a></p>
<ul>
<li>np.digitize needs bins to be defined as an array
<ul>
<li>需要将这些二进制数据定义为数组</li>
</ul>
</li>
<li>So let us convert the threshold value to an array
<ul>
<li>让我们将阈值转换为一个数组</li>
</ul>
</li>
<li>np.digitize assign values 0, 1, 2, 3, … to pixels in each class.
<ul>
<li>np.digitize 赋值 0,1,2,3，… 到每个类中的像素。</li>
</ul>
</li>
<li>For binary it wold be 0 and 1.
<ul>
<li>对于二进制，它是 0 和 1。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>regions1 = np.digitize(blue_channel, bins=np.array([ret2]))<br>plt.imshow(regions1)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x20c00a05ca0&gt;
</code></pre>
<p><img src="51_5.png" alt="png"></p>
<h2 id="tutorial-52---auto-thresholding-for-multiple-regions-_using-multi-otsu" tabindex="-1" id="Tutorial-52-Auto-thresholding-for-multiple-regions-using-multi-otsu">Tutorial 52 - Auto-thresholding for multiple regions _using multi-otsu</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> skimage.filters <span class="hljs-keyword">import</span> threshold_multiotsu<br><span class="hljs-keyword">import</span> cv2<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">img = cv2.imread(<span class="hljs-string">&quot;images/BSE.tif&quot;</span>, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.imshow(img, cmap=<span class="hljs-string">&quot;gray&quot;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x163340e4e20&gt;
</code></pre>
<p><img src="52_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># .flat returns the flattened numpy array (1D)</span><br>plt.hist(img.flat, bins=<span class="hljs-number">100</span>, <span class="hljs-built_in">range</span>=(<span class="hljs-number">100</span>, <span class="hljs-number">255</span>))<br></code></pre></td></tr></table></figure>
<pre><code>(array([ 1503.,  4537.,  3200.,  4608.,  5865.,  7691.,  9625., 25963.,
            0., 33377., 18666., 19131., 36722.,     0., 31707., 13031.,
        10769.,  8827.,  6923.,  5264.,  7160.,  2595.,  1889.,  1722.,
         1539.,  3244.,     0.,  4418.,  3113.,  4053., 11409.,     0.,
        16772., 10292., 10680., 11360., 11665., 11160., 19404.,     0.,
        14149.,  5101.,  3961.,  4908.,     0.,  2600.,   669.,   518.,
          354.,   477.,   172.,   160.,   114.,   126.,   255.,     0.,
          267.,   142.,   134.,    87.,   123.,   204.,    84.,   122.,
           98.,   104.,   107.,   206.,     0.,   207.,   108.,   116.,
          256.,     0.,   244.,   137.,   140.,   138.,   166.,   170.,
          383.,   237.,   316.,   343.,   477.,  1422.,     0.,  2259.,
         1469.,  1623.,  3926.,     0.,  4171.,  1900.,  1763.,  1432.,
         1093.,   809.,  1017.,   603.]),
 array([100.  , 101.55, 103.1 , 104.65, 106.2 , 107.75, 109.3 , 110.85,
        112.4 , 113.95, 115.5 , 117.05, 118.6 , 120.15, 121.7 , 123.25,
        124.8 , 126.35, 127.9 , 129.45, 131.  , 132.55, 134.1 , 135.65,
        137.2 , 138.75, 140.3 , 141.85, 143.4 , 144.95, 146.5 , 148.05,
        149.6 , 151.15, 152.7 , 154.25, 155.8 , 157.35, 158.9 , 160.45,
        162.  , 163.55, 165.1 , 166.65, 168.2 , 169.75, 171.3 , 172.85,
        174.4 , 175.95, 177.5 , 179.05, 180.6 , 182.15, 183.7 , 185.25,
        186.8 , 188.35, 189.9 , 191.45, 193.  , 194.55, 196.1 , 197.65,
        199.2 , 200.75, 202.3 , 203.85, 205.4 , 206.95, 208.5 , 210.05,
        211.6 , 213.15, 214.7 , 216.25, 217.8 , 219.35, 220.9 , 222.45,
        224.  , 225.55, 227.1 , 228.65, 230.2 , 231.75, 233.3 , 234.85,
        236.4 , 237.95, 239.5 , 241.05, 242.6 , 244.15, 245.7 , 247.25,
        248.8 , 250.35, 251.9 , 253.45, 255.  ]),
 &lt;BarContainer object of 100 artists&gt;)
</code></pre>
<p><img src="52_2.png" alt="png"></p>
<p><strong>MANUAL 手工阈值分割</strong></p>
<ul>
<li>Can perform manual segmentation but auto works fine
<ul>
<li>能执行手动分割，但自动工作精细</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">region1 = (img &gt;= <span class="hljs-number">0</span>) &amp; (img &lt;<span class="hljs-number">75</span>)<br>region2 = (img &gt;= <span class="hljs-number">75</span>) &amp; (img &lt;<span class="hljs-number">140</span>)<br>region3 = (img &gt;= <span class="hljs-number">140</span>) &amp; (img &lt;<span class="hljs-number">200</span>)<br>region4 = (img &gt;= <span class="hljs-number">200</span>) &amp; (img &lt;=<span class="hljs-number">255</span>)<br><span class="hljs-comment"># Create 3 channel blank image of same size as original</span><br><span class="hljs-comment"># 创建 3 通道空白图像，大小与原始图像相同</span><br>all_regions = np.zeros((img.shape[<span class="hljs-number">0</span>], img.shape[<span class="hljs-number">1</span>], <span class="hljs-number">3</span>)) <br>all_regions[region1] = (<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)  <span class="hljs-comment"># 红</span><br>all_regions[region2] = (<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)  <span class="hljs-comment"># 绿</span><br>all_regions[region3] = (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)  <span class="hljs-comment"># 蓝</span><br>all_regions[region4] = (<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)  <span class="hljs-comment"># 黄</span><br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">all_regions<br></code></pre></td></tr></table></figure>
<pre><code>array([[[0., 0., 1.],
        [0., 0., 1.],
        [0., 0., 1.],
        ...,
        [0., 1., 0.],
        [0., 1., 0.],
        [0., 1., 0.]],

       [[0., 0., 1.],
        [0., 0., 1.],
        [0., 0., 1.],
        ...,
        [0., 1., 0.],
        [0., 1., 0.],
        [0., 1., 0.]],

       [[0., 0., 1.],
        [0., 0., 1.],
        [0., 0., 1.],
        ...,
        [0., 1., 0.],
        [0., 1., 0.],
        [0., 1., 0.]],

       ...,

       [[0., 0., 1.],
        [0., 0., 1.],
        [0., 0., 1.],
        ...,
        [0., 1., 0.],
        [0., 1., 0.],
        [0., 1., 0.]],

       [[0., 0., 1.],
        [0., 0., 1.],
        [0., 0., 1.],
        ...,
        [0., 1., 0.],
        [0., 1., 0.],
        [0., 1., 0.]],

       [[0., 0., 1.],
        [0., 0., 1.],
        [0., 0., 1.],
        ...,
        [0., 1., 0.],
        [0., 1., 0.],
        [0., 1., 0.]]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.imshow(all_regions)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x16334046340&gt;
</code></pre>
<p><img src="52_3.png" alt="png"></p>
<p><strong>AUTO 自动</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Apply multi-Otsu threshold </span><br>thresholds = threshold_multiotsu(img, classes=<span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>
<ul>
<li>Digitize (segment) original image into multiple classes.
<ul>
<li>将原始图像数字化(分割)成多个类。</li>
</ul>
</li>
<li>np.digitize assign values 0, 1, 2, 3, … to pixels in each class.</li>
</ul>
<p>将原始图像数字化(分割)成多个类。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">regions = np.digitize(img, bins=thresholds)<br>plt.imshow(regions)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x163340a6a30&gt;
</code></pre>
<p><img src="52_4.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">segm1 = (regions == <span class="hljs-number">0</span>)<br>segm2 = (regions == <span class="hljs-number">1</span>)<br>segm3 = (regions == <span class="hljs-number">2</span>)<br>segm4 = (regions == <span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/110330329">OpenCV 图像处理之膨胀与腐蚀</a></p>
<ul>
<li>We can use binary opening and closing operations to clean up.
<ul>
<li>我们可以使用二进制的膨胀和腐蚀操作来清理。</li>
</ul>
</li>
<li>Open takes care of isolated pixels within the window
<ul>
<li>Open 负责处理窗口内的独立像素</li>
</ul>
</li>
<li>Closing takes care of isolated holes within the defined window
<ul>
<li>关闭处理已定义窗口内的隔离孔</li>
</ul>
</li>
</ul>
<p><img src="52_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> ndimage <span class="hljs-keyword">as</span> nd<br><br>segm1_opened = nd.binary_opening(segm1, np.ones((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)))<br>segm1_closed = nd.binary_closing(segm1_opened, np.ones((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)))<br><br>segm2_opened = nd.binary_opening(segm2, np.ones((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)))<br>segm2_closed = nd.binary_closing(segm2_opened, np.ones((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)))<br><br>segm3_opened = nd.binary_opening(segm3, np.ones((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)))<br>segm3_closed = nd.binary_closing(segm3_opened, np.ones((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)))<br><br>segm4_opened = nd.binary_opening(segm4, np.ones((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)))<br>segm4_closed = nd.binary_closing(segm4_opened, np.ones((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)))<br><br>all_segments_cleaned = np.zeros((img.shape[<span class="hljs-number">0</span>], img.shape[<span class="hljs-number">1</span>], <span class="hljs-number">3</span>)) <br><br>all_segments_cleaned[segm1_closed] = (<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br>all_segments_cleaned[segm2_closed] = (<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br>all_segments_cleaned[segm3_closed] = (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)<br>all_segments_cleaned[segm4_closed] = (<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br><br>plt.imshow(all_segments_cleaned)  <span class="hljs-comment"># All the noise should be cleaned now</span><br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x1633505ba00&gt;
</code></pre>
<p><img src="52_5.png" alt="png"></p>
<h2 id="tutorial-53---using-texture-to-segment-images--demo-in-python" tabindex="-1" id="Tutorial-53-Using-texture-to-segment-images-demo-in-python">Tutorial 53 - Using texture to segment images -demo in python</h2>
<ul>
<li>
<p><strong>Variance</strong> - excerptation of the squared deviation of a random variable from its mean.Could be a good indicator of texture.</p>
<ul>
<li><strong>方差</strong> -一个随机变量的方差的平均值的例外。可能是 Texture 的好指标。</li>
</ul>
</li>
<li>
<p><strong>Entropy</strong> - quantifies disorder - a very good metric to quantify texture</p>
<ul>
<li><strong>熵</strong> -量化无序-一个非常好的量化纹理的度量</li>
</ul>
</li>
</ul>
<p><strong>Gabor convolutional kernal</strong> - Gabor 卷积核</p>
g(x,y,\lambda,\theta,\psi,\sigma,\gamma)=\exp\left(-\frac{x'^2+\gamma^2y'^2}{2\sigma^2}\right)\cos\left(2\pi\frac{x'}{\lambda+\psi}\right)

<p>其中:</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>x</mi><mrow><mi mathvariant="normal">′</mi></mrow></msup><mo>=</mo><mi>x</mi><mi>cos</mi><mo>(</mo><mi>θ</mi><mo>)</mo><mo>+</mo><mi>y</mi><mi>sin</mi><mo>(</mo><mi>θ</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">x&#x27;=x\cos(\theta)+y\sin(\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">′</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord mathit">x</span><span class="mop">cos</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mop">sin</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>y</mi><mrow><mi mathvariant="normal">′</mi></mrow></msup><mo>=</mo><mo>−</mo><mi>x</mi><mi>sin</mi><mo>(</mo><mi>θ</mi><mo>)</mo><mo>+</mo><mi>y</mi><mi>cos</mi><mo>(</mo><mi>θ</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">y&#x27;=-x\sin(\theta)+y\cos(\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">′</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord">−</span><span class="mord mathit">x</span><span class="mop">sin</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mop">cos</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> skimage <span class="hljs-keyword">import</span> io<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> skimage.filters <span class="hljs-keyword">import</span> threshold_otsu<br><span class="hljs-keyword">import</span> cv2<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">img = io.imread(<span class="hljs-string">&quot;images/Scratch0.jpg&quot;</span>, as_gray=<span class="hljs-literal">True</span>)<br>plt.imshow(img, cmap=<span class="hljs-string">&quot;gray&quot;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x22ee31fc790&gt;
</code></pre>
<p><img src="53_1.png" alt="png"></p>
<ul>
<li>
<p><strong>Variance</strong> - not a great way to quantify texture</p>
<ul>
<li><strong>方差</strong> -不是一个量化纹理的好方法</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> ndimage <br><br>k = <span class="hljs-number">7</span><br>img_mean = ndimage.uniform_filter(img, (k, k))<br>img_sqr_mean = ndimage.uniform_filter(img ** <span class="hljs-number">2</span>, (k, k))<br>img_var = img_sqr_mean - img_mean ** <span class="hljs-number">2</span><br>plt.imshow(img_var, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x22ee37a4d90&gt;
</code></pre>
<p><img src="53_2.png" alt="png"></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_30708445/article/details/88806918">论文阅读：Gabor Convolutional Networks_OopsZero 的博客-CSDN 博客_gabor 卷积</a></p>
<ul>
<li>
<p><strong>GABOR</strong> - A great filter for texture but usually efficient.</p>
<ul>
<li><strong>GABOR</strong> -一个很好的纹理过滤器，但通常是有效的。</li>
</ul>
</li>
<li>
<p>if we know exact parameters. Good choice for generating features for machine learning</p>
<ul>
<li>如果我们知道精确的参数。为机器学习生成特征的好选择。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">ksize = <span class="hljs-number">45</span><br>theta = np.pi / <span class="hljs-number">4</span><br>kernel = cv2.getGaborKernel((ksize, ksize), <span class="hljs-number">5.0</span>, theta, <span class="hljs-number">10.0</span>, <span class="hljs-number">0.9</span>, <span class="hljs-number">0</span>, ktype=cv2.CV_32F)<br>filtered_image = cv2.filter2D(img, cv2.CV_8UC3, kernel)<br>plt.imshow(filtered_image, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x22ee37d7430&gt;
</code></pre>
<p><img src="53_3.png" alt="png"></p>
<ul>
<li>
<p><strong>Entropy</strong>: Entropy quantifies disorder.</p>
<ul>
<li><strong>熵</strong>: 熵量化无序。</li>
</ul>
</li>
<li>
<p>Since cell region has high variation in pixel values the entropy would be higher compared to scratch region</p>
<ul>
<li>由于细胞区域的像素值变化较大，熵值将高于划痕区域</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> skimage.filters.rank <span class="hljs-keyword">import</span> entropy<br><span class="hljs-keyword">from</span> skimage.morphology <span class="hljs-keyword">import</span> disk<br><br>entropy_img = entropy(img, disk(<span class="hljs-number">3</span>))<br>plt.imshow(entropy_img)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x22ee39d3d60&gt;
</code></pre>
<p><img src="53_4.png" alt="png"></p>
<ul>
<li>
<p><strong>Scratch Analysis</strong> - single image</p>
<ul>
<li><strong>划痕分析</strong> -单幅图像</li>
</ul>
</li>
<li>
<p>Now let us use otsu to threshold high vs low entropy regions.</p>
<ul>
<li>现在让我们用 otsu 来阈值高熵区和低熵区。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.hist(entropy_img.flat, bins=<span class="hljs-number">100</span>, <span class="hljs-built_in">range</span>=(<span class="hljs-number">0</span>,<span class="hljs-number">5</span>))  <span class="hljs-comment">#.flat returns the flattened numpy array (1D)</span><br></code></pre></td></tr></table></figure>
<pre><code>(array([2.4906e+04, 0.0000e+00, 0.0000e+00, 0.0000e+00, 1.2640e+03,
        4.0000e+00, 1.1000e+01, 3.4300e+02, 5.5700e+02, 1.0300e+02,
        5.0000e+00, 6.8000e+02, 1.1500e+02, 3.4200e+02, 3.2900e+02,
        3.1000e+02, 4.3700e+02, 1.9700e+02, 5.8100e+02, 1.6200e+02,
        7.0100e+02, 1.4600e+02, 7.9900e+02, 2.1600e+02, 8.2000e+02,
        4.6400e+02, 8.6300e+02, 6.2200e+02, 6.5100e+02, 7.2900e+02,
        9.3500e+02, 1.0210e+03, 1.0650e+03, 1.1500e+03, 1.3230e+03,
        1.5200e+03, 1.7200e+03, 1.9000e+03, 1.9490e+03, 2.6150e+03,
        2.2130e+03, 3.0250e+03, 2.5620e+03, 3.1800e+03, 3.1780e+03,
        3.2440e+03, 3.6230e+03, 3.3250e+03, 3.3660e+03, 3.5170e+03,
        3.1100e+03, 3.3400e+03, 2.7800e+03, 2.6460e+03, 2.6750e+03,
        2.0790e+03, 2.3660e+03, 1.8520e+03, 1.6350e+03, 1.5170e+03,
        1.2040e+03, 1.1810e+03, 9.1000e+02, 8.3300e+02, 7.9300e+02,
        6.5600e+02, 5.7100e+02, 4.1800e+02, 4.1400e+02, 3.6200e+02,
        2.7300e+02, 2.2500e+02, 2.0900e+02, 1.8400e+02, 1.5600e+02,
        1.0200e+02, 7.1000e+01, 5.7000e+01, 6.6000e+01, 3.2000e+01,
        3.2000e+01, 2.0000e+01, 1.7000e+01, 5.0000e+00, 1.2000e+01,
        2.0000e+00, 5.0000e+00, 2.0000e+00, 0.0000e+00, 0.0000e+00,
        0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00,
        0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00]),
 array([0.  , 0.05, 0.1 , 0.15, 0.2 , 0.25, 0.3 , 0.35, 0.4 , 0.45, 0.5 ,
        0.55, 0.6 , 0.65, 0.7 , 0.75, 0.8 , 0.85, 0.9 , 0.95, 1.  , 1.05,
        1.1 , 1.15, 1.2 , 1.25, 1.3 , 1.35, 1.4 , 1.45, 1.5 , 1.55, 1.6 ,
        1.65, 1.7 , 1.75, 1.8 , 1.85, 1.9 , 1.95, 2.  , 2.05, 2.1 , 2.15,
        2.2 , 2.25, 2.3 , 2.35, 2.4 , 2.45, 2.5 , 2.55, 2.6 , 2.65, 2.7 ,
        2.75, 2.8 , 2.85, 2.9 , 2.95, 3.  , 3.05, 3.1 , 3.15, 3.2 , 3.25,
        3.3 , 3.35, 3.4 , 3.45, 3.5 , 3.55, 3.6 , 3.65, 3.7 , 3.75, 3.8 ,
        3.85, 3.9 , 3.95, 4.  , 4.05, 4.1 , 4.15, 4.2 , 4.25, 4.3 , 4.35,
        4.4 , 4.45, 4.5 , 4.55, 4.6 , 4.65, 4.7 , 4.75, 4.8 , 4.85, 4.9 ,
        4.95, 5.  ]),
 &lt;BarContainer object of 100 artists&gt;)
</code></pre>
<p><img src="53_5.png" alt="png"></p>
<ul>
<li>Now let us binarize the entropy image
<ul>
<li>现在我们把熵图像二值化</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">thresh = threshold_otsu(entropy_img)<br>thresh<br></code></pre></td></tr></table></figure>
<pre><code>1.2953342370696572
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">binary = entropy_img &lt;= thresh<br>plt.imshow(binary)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x22ee3ab2280&gt;
</code></pre>
<p><img src="53_6.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Sum all pixels in the scratch region (values =1)</span><br>scratch_area = np.<span class="hljs-built_in">sum</span>(binary == <span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Scratched area is: &quot;</span>, scratch_area, <span class="hljs-string">&quot;Square pixels&quot;</span>)<br><br>scale = <span class="hljs-number">0.45</span> <span class="hljs-comment"># microns / pixel</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Scratched area in sq. microns is: &quot;</span>, scratch_area*((scale)**<span class="hljs-number">2</span>), <span class="hljs-string">&quot;Square pixels&quot;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>Scratched area is:  33485 Square pixels
Scratched area in sq. microns is:  6780.712500000001 Square pixels
</code></pre>
<h2 id="tutorial-54---scratch-assay-analysis-in-python-by-using-texture-for-segmentation" tabindex="-1" id="Tutorial-54-Scratch-assay-analysis-in-python-by-using-texture-for-segmentation">Tutorial 54 - Scratch assay analysis in python by using texture for segmentation</h2>
<p><strong>What is scratch assay (wound healing) analysis? 什么是划痕分析(伤口愈合)?</strong></p>
<ul>
<li>
<p>The wound healing assay is a standard technique for probing collective cell migration in two dimensions.</p>
<ul>
<li>伤口愈合试验是一种标准的技术，用于探测细胞在二维上的集体迁移。</li>
</ul>
</li>
<li>
<p>A monolayer of cells scratched with a pipette tip.</p>
<ul>
<li>用移液管尖划破的单层细胞。</li>
</ul>
</li>
<li>
<p>The migration of cells into the gap imaged over several hours using a microscope.</p>
<ul>
<li>用显微镜在几个小时内拍摄到细胞进入缝隙的迁移过程。</li>
</ul>
</li>
<li>
<p>The primary information derived is the rate of gap closure → a measure of the speed of the collective motion of the cells.</p>
<ul>
<li>得到的主要信息是间隙闭合率→细胞集体运动速度的度量。</li>
</ul>
</li>
</ul>
<p><img src="54_1.png" alt="png"></p>


	<div class="row">
    <embed src="54.pdf" width="100%" height="550" type="application/pdf">
	</div>



<hr>
<ul>
<li>Scratch Assay on time series images
<ul>
<li>时间序列图像划痕分析</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> skimage <span class="hljs-keyword">import</span> io<br><span class="hljs-keyword">from</span> skimage.filters.rank <span class="hljs-keyword">import</span> entropy<br><span class="hljs-keyword">from</span> skimage.morphology <span class="hljs-keyword">import</span> disk<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> skimage.filters <span class="hljs-keyword">import</span> threshold_otsu<br></code></pre></td></tr></table></figure>
<ul>
<li>Use glob to extract image names and load them.
<ul>
<li>使用glob提取图像名称并加载它们。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> glob<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">time = <span class="hljs-number">0</span><br>scale = <span class="hljs-number">0.45</span>  <span class="hljs-comment"># microns/pixel</span><br>time_list = []<br>area_list = []<br>path = <span class="hljs-string">&quot;images/scratch_assay/*.*&quot;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>Put the code from single image segmentation in a for loop to apply segmentaion to all images
<ul>
<li>将来自单个图像分割的代码放入for循环中，将分割应用于所有图像</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> glob.glob(path):<br>    img=io.imread(file)<br>    entropy_img = entropy(img, disk(<span class="hljs-number">3</span>))<br>    thresh = threshold_otsu(entropy_img)<br>    binary = entropy_img &lt;= thresh<br>    scratch_area = np.<span class="hljs-built_in">sum</span>(binary == <span class="hljs-number">1</span>)<br>    scratch_area = scratch_area * ((scale) ** <span class="hljs-number">2</span>)  <span class="hljs-comment"># Convert to microns from pixel units</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;time=&quot;</span>, time, <span class="hljs-string">&quot;hr  &quot;</span>, <span class="hljs-string">&quot;Scratch area=&quot;</span>, scratch_area, <span class="hljs-string">&quot;um\N&#123;SUPERSCRIPT TWO&#125;&quot;</span>)<br>    time_list.append(time)<br>    area_list.append(scratch_area)<br>    time += <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
<pre><code>time= 0 hr   Scratch area= 6768.765 um²
time= 1 hr   Scratch area= 5605.807500000001 um²
time= 2 hr   Scratch area= 4881.465 um²
time= 3 hr   Scratch area= 4277.4075 um²
time= 4 hr   Scratch area= 3742.4025 um²
time= 5 hr   Scratch area= 3261.2625000000003 um²
time= 6 hr   Scratch area= 2919.4425 um²
time= 7 hr   Scratch area= 2575.1925 um²
time= 8 hr   Scratch area= 2218.7925 um²
time= 9 hr   Scratch area= 1890.7425 um²
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.plot(time_list, area_list, <span class="hljs-string">&#x27;bo&#x27;</span>)  <span class="hljs-comment"># Print blue dots scatter plot</span><br></code></pre></td></tr></table></figure>
<pre><code>[&lt;matplotlib.lines.Line2D at 0x295b35d21c0&gt;]
</code></pre>
<p><img src="54_2.png" alt="png"></p>
<ul>
<li>
<p>Print slope, intercept</p>
<ul>
<li>打印斜率、截距</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> scipy.stats <span class="hljs-keyword">import</span> linregress  <span class="hljs-comment"># Linear regression</span><br><br>slope, intercept, r_value, p_value, std_err = linregress(time_list, area_list)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;y = &quot;</span>,slope, <span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-string">&quot; + &quot;</span>, intercept)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;R\N&#123;SUPERSCRIPT TWO&#125; = &quot;</span>, r_value ** <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure>
<pre><code>y =  -507.25881818181824 x  +  6096.792681818182
R² =  0.9568904267126052
</code></pre>
<h2 id="tutorial-55---image-segmentation-followed-by-measurements--in-python" tabindex="-1" id="Tutorial-55-Image-segmentation-followed-by-measurements-in-python">Tutorial 55 - Image segmentation followed by measurements- in python</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> skimage <span class="hljs-keyword">import</span> measure, io, img_as_ubyte<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> skimage.color <span class="hljs-keyword">import</span> label2rgb, rgb2gray<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> cv2<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">image = img_as_ubyte(rgb2gray(io.imread(<span class="hljs-string">&#x27;images/cast_iron1.tif&#x27;</span>)))<br>scale = <span class="hljs-number">0.6</span><br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.imshow(image, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x200892d89a0&gt;
</code></pre>
<p><img src="55_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.hist(image.flat, bins=<span class="hljs-number">100</span>, <span class="hljs-built_in">range</span>=(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>))<br></code></pre></td></tr></table></figure>
<pre><code>(array([    0.,    46.,   479.,  1449.,   966.,  1498.,  1081.,  1901.,
         1408.,  2200.,  2605.,  1816.,  2434.,  1382.,  1474.,   686.,
          719.,   387.,   439.,   275.,   322.,   311.,   195.,   347.,
          197.,   305.,   191.,   297.,   193.,   303.,   315.,   169.,
          300.,   173.,   331.,   239.,   344.,   234.,   409.,   271.,
          467.,   435.,   337.,   569.,   420.,   744.,   545.,   906.,
          747.,  1251.,  1509.,  1195.,  2163.,  1900.,  3508.,  3022.,
         5913.,  5444., 11870., 11205., 25793., 40120., 29310., 32387.,
         8740.,  1102.,     0.,     0.,     0.,     0.,     0.,     0.,
            0.,     0.,     0.,     0.,     0.,     0.,     0.,     0.,
            0.,     0.,     0.,     0.,     0.,     0.,     0.,     0.,
            0.,     0.,     0.,     0.,     0.,     0.,     0.,     0.,
            0.,     0.,     0.,     0.]),
 array([  0.  ,   2.55,   5.1 ,   7.65,  10.2 ,  12.75,  15.3 ,  17.85,
         20.4 ,  22.95,  25.5 ,  28.05,  30.6 ,  33.15,  35.7 ,  38.25,
         40.8 ,  43.35,  45.9 ,  48.45,  51.  ,  53.55,  56.1 ,  58.65,
         61.2 ,  63.75,  66.3 ,  68.85,  71.4 ,  73.95,  76.5 ,  79.05,
         81.6 ,  84.15,  86.7 ,  89.25,  91.8 ,  94.35,  96.9 ,  99.45,
        102.  , 104.55, 107.1 , 109.65, 112.2 , 114.75, 117.3 , 119.85,
        122.4 , 124.95, 127.5 , 130.05, 132.6 , 135.15, 137.7 , 140.25,
        142.8 , 145.35, 147.9 , 150.45, 153.  , 155.55, 158.1 , 160.65,
        163.2 , 165.75, 168.3 , 170.85, 173.4 , 175.95, 178.5 , 181.05,
        183.6 , 186.15, 188.7 , 191.25, 193.8 , 196.35, 198.9 , 201.45,
        204.  , 206.55, 209.1 , 211.65, 214.2 , 216.75, 219.3 , 221.85,
        224.4 , 226.95, 229.5 , 232.05, 234.6 , 237.15, 239.7 , 242.25,
        244.8 , 247.35, 249.9 , 252.45, 255.  ]),
 &lt;BarContainer object of 100 artists&gt;)
</code></pre>
<p><img src="55_2.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> skimage.filters <span class="hljs-keyword">import</span> threshold_otsu<br>threshold = threshold_otsu(image)<br>threshold<br></code></pre></td></tr></table></figure>
<pre><code>93
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Generate thresholded image</span><br>thresholded_img = image &lt; threshold<br>plt.imshow(thresholded_img, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x20089b28760&gt;
</code></pre>
<p><img src="55_3.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Remove edge touching regions</span><br><span class="hljs-keyword">from</span> skimage.segmentation <span class="hljs-keyword">import</span> clear_border<br><br>edge_touching_removed = clear_border(thresholded_img)<br>plt.imshow(edge_touching_removed, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x20089c39ca0&gt;
</code></pre>
<p><img src="55_4.png" alt="png"></p>
<ul>
<li>
<p>Label connected regions of an integer array using <code>measure.label</code></p>
<ul>
<li>使用<code>measure.label</code>标记整数数组中已连接的区域</li>
</ul>
</li>
<li>
<p>Labels each connected entity as one object</p>
<ul>
<li>将每个连接的实体标记为一个对象</li>
</ul>
</li>
<li>
<p>Connectivity = Maximum number of orthogonal hops to consider a pixel/voxel as a neighbor.</p>
<ul>
<li>连通性 = 将像素 / 体素视为邻居的最大正交跳数。</li>
</ul>
</li>
<li>
<p>If None, a full connectivity of input.ndim is used, number of dimensions of the image</p>
<ul>
<li>如果为None，则表示输入的完全连通性。</li>
</ul>
</li>
<li>
<p>For 2D image it would be 2</p>
<ul>
<li>对于2D图像，它将是2</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">label_image = measure.label(edge_touching_removed, connectivity=image.ndim)<br>plt.imshow(label_image)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x20089c9dbb0&gt;
</code></pre>
<p><img src="55_5.png" alt="png"></p>
<ul>
<li>
<p>Return an RGB image where color-coded labels are painted over the image.</p>
<ul>
<li>返回一个RGB图像，其中颜色编码的标签涂在图像上。</li>
</ul>
</li>
<li>
<p>Using <code>label2rgb</code></p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">image_label_overlay = label2rgb(label_image, image=image)<br>plt.imshow(image_label_overlay)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x20089d0a8e0&gt;
</code></pre>
<p><img src="55_6.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#################################################</span><br><span class="hljs-comment"># Calculate properties</span><br><span class="hljs-comment"># Using regionprops or regionprops_table</span><br>all_props = measure.regionprops(label_image, image)<br><span class="hljs-comment"># Can print various parameters for all objects</span><br><span class="hljs-keyword">for</span> prop <span class="hljs-keyword">in</span> all_props:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Label: &#123;&#125; Area: &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(prop.label, prop.area))<br></code></pre></td></tr></table></figure>
<ul>
<li>
<p>Compute image properties and return them as a <code>pandas</code>-compatible table.</p>
<ul>
<li>计算映像属性并将它们作为与<code>pandas</code>兼容的表返回。</li>
</ul>
</li>
<li>
<p>Available regionprops: area, bbox, centroid, convex_area, coords, eccentricity, equivalent diameter, euler number, label, intensity image, major axis length, max intensity, mean intensity, moments, orientation, perimeter, solidity, and many more</p>
<ul>
<li>可用的区域：面积，bbox，质心，凸面积，坐标，偏心，等效直径，欧拉数，标签，强度图像，主轴长度，最大强度，平均强度，力矩，方向，周长，固体，和许多</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">props = measure.regionprops_table(label_image, image, <br>                          properties=[<span class="hljs-string">&#x27;label&#x27;</span>,<br>                                      <span class="hljs-string">&#x27;area&#x27;</span>, <span class="hljs-string">&#x27;equivalent_diameter&#x27;</span>,<br>                                      <span class="hljs-string">&#x27;mean_intensity&#x27;</span>, <span class="hljs-string">&#x27;solidity&#x27;</span>])<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>df = pd.DataFrame(props)<br>df.head()<br></code></pre></td></tr></table></figure>
<table border="1">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>label</th>
      <th>area</th>
      <th>equivalent_diameter</th>
      <th>mean_intensity</th>
      <th>solidity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>1.128379</td>
      <td>92.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>587</td>
      <td>27.338464</td>
      <td>19.701874</td>
      <td>0.956026</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>1.128379</td>
      <td>83.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>40</td>
      <td>7.136496</td>
      <td>64.625000</td>
      <td>0.701754</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>1</td>
      <td>1.128379</td>
      <td>91.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># To delete small regions...</span><br>df = df[df[<span class="hljs-string">&#x27;area&#x27;</span>] &gt; <span class="hljs-number">50</span>]<br>df.head()<br></code></pre></td></tr></table></figure>
<table border="1">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>label</th>
      <th>area</th>
      <th>equivalent_diameter</th>
      <th>mean_intensity</th>
      <th>solidity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>587</td>
      <td>27.338464</td>
      <td>19.701874</td>
      <td>0.956026</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>366</td>
      <td>21.587165</td>
      <td>32.696721</td>
      <td>0.963158</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>226</td>
      <td>16.963258</td>
      <td>32.787611</td>
      <td>0.945607</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>71</td>
      <td>9.507892</td>
      <td>49.253521</td>
      <td>0.934211</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>220</td>
      <td>16.736568</td>
      <td>28.759091</td>
      <td>0.897959</td>
    </tr>
  </tbody>
</table>
<p>Convert to micron scale</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">df[<span class="hljs-string">&#x27;area_sq_microns&#x27;</span>] = df[<span class="hljs-string">&#x27;area&#x27;</span>] * (scale ** <span class="hljs-number">2</span>)<br>df[<span class="hljs-string">&#x27;equivalent_diameter_microns&#x27;</span>] = df[<span class="hljs-string">&#x27;equivalent_diameter&#x27;</span>] * (scale)<br>df.head()<br></code></pre></td></tr></table></figure>
<table border="1">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>label</th>
      <th>area</th>
      <th>equivalent_diameter</th>
      <th>mean_intensity</th>
      <th>solidity</th>
      <th>area_sq_microns</th>
      <th>equivalent_diameter_microns</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>587</td>
      <td>27.338464</td>
      <td>19.701874</td>
      <td>0.956026</td>
      <td>211.32</td>
      <td>16.403078</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>366</td>
      <td>21.587165</td>
      <td>32.696721</td>
      <td>0.963158</td>
      <td>131.76</td>
      <td>12.952299</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>226</td>
      <td>16.963258</td>
      <td>32.787611</td>
      <td>0.945607</td>
      <td>81.36</td>
      <td>10.177955</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>71</td>
      <td>9.507892</td>
      <td>49.253521</td>
      <td>0.934211</td>
      <td>25.56</td>
      <td>5.704735</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>220</td>
      <td>16.736568</td>
      <td>28.759091</td>
      <td>0.897959</td>
      <td>79.20</td>
      <td>10.041941</td>
    </tr>
  </tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df.to_csv(<span class="hljs-string">&#x27;data/cast_iron_measurements.csv&#x27;</span>)<br></code></pre></td></tr></table></figure>
<h2 id="tutorial-56---blob-detector-for-segmentation-based-on-feature-properties--in-python-" tabindex="-1" id="Tutorial-56-Blob-Detector-for-segmentation-based-on-feature-properties-in-python">Tutorial 56 - Blob Detector for segmentation based on feature properties -in python-</h2>
<p><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/BLOB/543419">blob_百度百科 (baidu.com)</a></p>
<blockquote>
<p>​    计算机视觉中的Blob是指图像中的一块连通区域，Blob分析就是对前景/背景分离后的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E4%BA%8C%E5%80%BC%E5%9B%BE%E5%83%8F/5166431?fromModule=lemma_inlink">二值图像</a>，进行连通域提取和标记。标记完成的每一个Blob都代表一个前景目标，然后就可以计算Blob的一些相关特征。其优点在于通过Blob提取，可以获得相关区域的信息，但是速度较慢，分析难度大。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.learnopencv.com/blob-detection-using-opencv-python-c/">https://www.learnopencv.com/blob-detection-using-opencv-python-c/</a></p>
<ul>
<li>
<p>BLOB stands for Binary Large OBject and refers to a group of connected pixels in a binary image.</p>
<ul>
<li>BLOB代表二进制大对象，指的是二值图像中一组相互连接的像素。</li>
</ul>
</li>
<li>
<p>A Blob is a group of connected pixels in an image that share some common property ( E.g grayscale value ).</p>
<ul>
<li>Blob是一组在图像中具有某种共同属性(如灰度值)的相互连接的像素。</li>
</ul>
</li>
<li>
<p>In the image above, the dark connected regions are blobs,<br>
and the goal of blob detection is to identify and mark these regions.</p>
<ul>
<li>在上图中，暗连接的区域是斑点，斑点检测的目标是识别和标记这些区域。</li>
</ul>
</li>
</ul>
<p>How it works:</p>
<ul>
<li>
<p>Threshold input images to binary.</p>
<ul>
<li>阈值输入图像为二值。</li>
</ul>
</li>
<li>
<p>Grouping: connected white/black pixels are grouped together.</p>
<ul>
<li>分组:连接的白色/黑色像素分组在一起。</li>
</ul>
</li>
<li>
<p>Merging: blobs located closer than minDistBetweenBlobs are merged.</p>
<ul>
<li>合并:位于比minDistBetweenBlobs更近的blobs被合并。</li>
</ul>
</li>
<li>
<p>Center &amp; Radius Calculation :  The centers and radii of the new merged blobs are computed and returned.</p>
<ul>
<li>中心和半径计算:计算并返回新合并blobs的中心和半径。</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>Can be filtered by color, size or shape
<ul>
<li>可以根据颜色、大小或形状过滤</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> cv2<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">image = cv2.imread(<span class="hljs-string">&#x27;images/cast_iron1.tif&#x27;</span>, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure>
<ul>
<li>Set up the SimpleBlobdetector with default parameters.
<ul>
<li>使用默认参数设置 SimpleBlobdetector。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">params = cv2.SimpleBlobDetector_Params()<br></code></pre></td></tr></table></figure>
<ul>
<li>Define thresholds
<ul>
<li>定义阈值</li>
</ul>
</li>
</ul>
<p>Can define thresholdStep. See documentation.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">params.minThreshold = <span class="hljs-number">0</span><br>params.maxThreshold = <span class="hljs-number">255</span><br></code></pre></td></tr></table></figure>
<ul>
<li>Filter by Area.
<ul>
<li>按面积过滤。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">params.filterByArea = <span class="hljs-literal">True</span><br>params.minArea = <span class="hljs-number">50</span><br>params.maxArea = <span class="hljs-number">10000</span><br></code></pre></td></tr></table></figure>
<ul>
<li>Filter by Color (black=0)
<ul>
<li>按颜色过滤</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">params.filterByColor = <span class="hljs-literal">False</span>  <span class="hljs-comment">#Set true for cast_iron as we&#x27;ll be detecting black regions</span><br>params.blobColor = <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>
<ul>
<li>Filter by Circularity
<ul>
<li>圆度过滤器</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">params.filterByCircularity = <span class="hljs-literal">True</span><br>params.minCircularity = <span class="hljs-number">0.5</span><br>params.maxCircularity = <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
<ul>
<li>Filter by Convexity
<ul>
<li>通过凸性过滤器</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">params.filterByConvexity = <span class="hljs-literal">True</span><br>params.minConvexity = <span class="hljs-number">0.5</span><br>params.maxConvexity = <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
<ul>
<li>Filter by InertiaRatio
<ul>
<li>通过惯性系数过滤器</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">params.filterByInertia = <span class="hljs-literal">True</span><br>params.minInertiaRatio = <span class="hljs-number">0</span><br>params.maxInertiaRatio = <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
<ul>
<li>Distance Between Blobs
<ul>
<li>Blobs 之间的距离</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">params.minDistBetweenBlobs = <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>
<ul>
<li>Setup the detector with parameters
<ul>
<li>用参数设置探测器</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">detector = cv2.SimpleBlobDetector_create(params)<br></code></pre></td></tr></table></figure>
<ul>
<li>Detect blobs
<ul>
<li>检测 blobs</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">keypoints = detector.detect(image)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Number of blobs detected are : &quot;</span>, <span class="hljs-built_in">len</span>(keypoints))<br></code></pre></td></tr></table></figure>
<pre><code>Number of blobs detected are :  82
</code></pre>
<ul>
<li>Draw blobs
<ul>
<li>绘制 blobs</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">img_with_blobs = cv2.drawKeypoints(image, keypoints, np.array([]), (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>), cv2.DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS)<br>plt.imshow(img_with_blobs)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x2b46aa494f0&gt;
</code></pre>
<p><img src="56.png" alt="png"></p>
<h2 id="tutorial-57---nuclei--cell--segmentation-in-python-using-watershed" tabindex="-1" id="Tutorial-57-Nuclei-cell-segmentation-in-python-using-watershed">Tutorial 57 - Nuclei -cell- segmentation in python using watershed</h2>
<p><strong>What is watershed? 什么是分水岭?</strong></p>
<ul>
<li>Any grayscale image can be viewed as a topographic surface where high intensity denotes hills and low intensity denotes valleys.
<ul>
<li>任何灰度图像都可以看作是一个地形表面，其中高强度表示丘陵，低强度表示山谷。</li>
</ul>
</li>
</ul>
<p><img src="57_watershed_1.png" alt="png"></p>
<ul>
<li>
<p>With watershed, we start filling every valleys with different colored water (labels).</p>
<ul>
<li>有了分水岭，我们开始用不同颜色的水(标签)填充每个山谷。</li>
</ul>
</li>
<li>
<p>As the water rises, water from different valleys will start to merge.</p>
<ul>
<li>随着水位上升，来自不同山谷的水开始融合。</li>
</ul>
</li>
<li>
<p>To avoid that, we build barriers in the locations where water merges.</p>
<ul>
<li>为了避免这种情况，我们在水汇合处建造了屏障。</li>
</ul>
</li>
<li>
<p>Continue filling water and building barriers until all the peaks are under water.</p>
<ul>
<li>继续填水和建造屏障，直到所有的山峰都在水下。</li>
</ul>
</li>
<li>
<p>The barriers will give us the segmentation result.</p>
<ul>
<li>屏障会给我们分割的结果。</li>
</ul>
</li>
</ul>
<p><img src="57_watershed_2.png" alt="png"></p>
<ul>
<li>To minimize over-segmentation due to noise in the image, OpenCV implemented a marker-based watershedalgorithm.
<ul>
<li>为了减少图像中噪声引起的过分割，OpenCV 实现了一种基于标记的分水岭算法。</li>
</ul>
</li>
<li>We specify all valley points to be merged and also the ones not to be merged.
<ul>
<li>我们指定所有要合并的谷点和不合并的谷点。</li>
</ul>
</li>
<li>We first label the regions that we are sure of being the foreground (or object of interest) with one color.
<ul>
<li>我们首先用一种颜色标记我们确定是前景(或感兴趣的对象)的区域。</li>
</ul>
</li>
<li>Then label the regions that we are sure of being background or non-object with another color.
<ul>
<li>然后用另一种颜色标记我们确定为背景或非物体的区域。</li>
</ul>
</li>
<li>And, for unsure regions in between, label them with 0.
<ul>
<li>对于中间的不确定区域，用 0 标记它们。</li>
</ul>
</li>
<li>This process creates the marker.
<ul>
<li>这个过程创建了标记。</li>
</ul>
</li>
<li>Now apply watershed algorithm.
<ul>
<li>现在应用分水岭算法。</li>
</ul>
</li>
<li>The marker will be updated with the labels we provided, and the boundaries of objects will have a value of -1.
<ul>
<li>标记将更新为我们提供的标签，对象的边界将有一个-1 的值。</li>
</ul>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_watershed/py_watershed.html">https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_watershed/py_watershed.html</a></p>
<hr>
<ul>
<li>
<p>This code performs cell counting and size distribution analysis and dumps results into a csv file.</p>
<ul>
<li>此代码执行单元格计数和大小分布分析，并将结果转储到csv文件中。</li>
</ul>
</li>
<li>
<p>It uses watershed segmentation for better segmentation, separating touching nuclei.</p>
<ul>
<li>它使用分水岭分割来更好的分割，分离接触的核。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> ndimage<br><span class="hljs-keyword">from</span> skimage <span class="hljs-keyword">import</span> measure, color, io<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">img = cv2.imread(<span class="hljs-string">&#x27;images/Osteosarcoma_01.tif&#x27;</span>)<br></code></pre></td></tr></table></figure>
<ul>
<li>
<p>Extract only blue channel as DAPI / nuclear (blue) staining is the best channel to perform cell count.</p>
<ul>
<li>只提取蓝色通道，因为DAPI /核(蓝色)染色是进行细胞计数的最佳通道。</li>
</ul>
</li>
<li>
<p>Blue channel. Image equivalent to grey image.</p>
<ul>
<li>蓝色通道。图像相当于灰色图像。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">cells = img[:, :, <span class="hljs-number">0</span>]<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.imshow(cells, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x2b36b074850&gt;
</code></pre>
<p><img src="57_1.png" alt="png"></p>
<ul>
<li>
<p>1 pixel = 454 nm (got this from the metadata of original image)</p>
<ul>
<li>1像素 = 454 nm(来自原始图像的元数据)</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pixels_to_um = <span class="hljs-number">0.454</span><br></code></pre></td></tr></table></figure>
<p><strong>STEP 1: Thresholded image for nuclei 核的阈值图像</strong></p>
<ul>
<li>Threshold image to binary using OTSU. ALl thresholded pixels will be set to 255
<ul>
<li>阈值图像的二值化使用 OTSU。所有阈值像素将被设置为255</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">ret1, thresh = cv2.threshold(cells, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>, cv2.THRESH_BINARY + cv2.THRESH_OTSU)<br>plt.imshow(thresh, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x2b36b181f10&gt;
</code></pre>
<p><img src="57_2.png" alt="png"></p>
<ul>
<li>
<p>Morphological operations to remove small noise - opening</p>
<ul>
<li>形态学运算去除开孔小噪声</li>
</ul>
</li>
<li>
<p>To remove holes we can use closing</p>
<ul>
<li>要去除小孔，我们可以用闭合法</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">kernel = np.ones((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),np.uint8)<br>opening = cv2.morphologyEx(thresh,cv2.MORPH_OPEN,kernel, iterations = <span class="hljs-number">2</span>)<br><br><span class="hljs-keyword">from</span> skimage.segmentation <span class="hljs-keyword">import</span> clear_border<br>opening = clear_border(opening)  <span class="hljs-comment"># Remove edge touching grains</span><br>plt.imshow(opening, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)  <span class="hljs-comment"># This is our image to be segmented further using watershed</span><br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x2b36bd0d6d0&gt;
</code></pre>
<p><img src="57_3.png" alt="png"></p>
<ul>
<li>Check the total regions found before and after applying this.
<ul>
<li>检查应用此方法前后找到的区域总数。</li>
</ul>
</li>
</ul>
<p><strong>STEP 2: Sude background</strong></p>
<ul>
<li>
<p>Now we know that the regions at the center of cells is for sure cells</p>
<ul>
<li>现在我们知道细胞中心的区域是确定的细胞</li>
</ul>
</li>
<li>
<p>The region far away is background.</p>
<ul>
<li>远处的区域是背景。</li>
</ul>
</li>
<li>
<p>We need to extract sure regions. For that erode a few times.</p>
<ul>
<li>我们需要提取确定的区域。因为腐蚀了几次。</li>
</ul>
</li>
<li>
<p>But we have cells touching, so erode alone will not work.</p>
<ul>
<li>但我们有细胞接触，所以单独腐蚀是不起作用的。</li>
</ul>
</li>
<li>
<p>To separate touching objects, the best approach would be distance transform and then thresholding.</p>
<ul>
<li>要分离接触物体，最好的方法是先进行距离变换，再进行阈值分割。</li>
</ul>
</li>
<li>
<p>let us start by identifying sure background area dilating pixes a few times increases cell boundary to background.</p>
<ul>
<li>让我们从确定背景区域开始，将像素放大几倍，以增加背景的细胞边界。</li>
</ul>
</li>
<li>
<p>This way whatever is remaining for sure will be background.</p>
<ul>
<li>这样，任何可以确定的东西都将成为背景。</li>
</ul>
</li>
<li>
<p>The area in between sure background and foreground is our ambiguous area.</p>
<ul>
<li>在确定的背景和前景之间的区域是我们的模糊区域。</li>
</ul>
</li>
<li>
<p>Watershed should find this area for us.</p>
<ul>
<li>分水岭应该帮我们找到这片区域。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">sure_bg = cv2.dilate(opening,kernel,iterations=<span class="hljs-number">10</span>)<br>plt.imshow(sure_bg, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)  <span class="hljs-comment"># Dark region is our sure background</span><br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x2b36c5b2ac0&gt;
</code></pre>
<p><img src="57_4.png" alt="png"></p>
<ul>
<li>
<p>Finding sure foreground area using distance transform and thresholding intensities of the points inside the foreground regions are changed to distance their respective distances from the closest 0 value (boundary).</p>
<ul>
<li>利用距离变换找到确定的前景区域，并将前景区域内点的阈值强度变化为它们各自距离最近的0值(边界)的距离。</li>
</ul>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.tutorialspoint.com/opencv/opencv_distance_transformation.htm">https://www.tutorialspoint.com/opencv/opencv_distance_transformation.htm</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">dist_transform = cv2.distanceTransform(opening,cv2.DIST_L2,<span class="hljs-number">5</span>)<br>plt.imshow(dist_transform, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)  <span class="hljs-comment"># Dist transformed img. </span><br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x2b36bd55d00&gt;
</code></pre>
<p><img src="57_5.png" alt="png"></p>
<ul>
<li>
<p>Let us threshold the dist transform by starting at 1/2 its max value.</p>
<ul>
<li>让我们从dist变换的最大值的1/2开始阈值。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(dist_transform.<span class="hljs-built_in">max</span>())  <span class="hljs-comment"># gives about 21.9</span><br></code></pre></td></tr></table></figure>
<pre><code>21.968996
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">ret2, sure_fg = cv2.threshold(dist_transform,<span class="hljs-number">0.5</span>*dist_transform.<span class="hljs-built_in">max</span>(),<span class="hljs-number">255</span>,<span class="hljs-number">0</span>)<br>plt.imshow(sure_fg, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x2b36bdc25e0&gt;
</code></pre>
<p><img src="57_6.png" alt="png"></p>
<p><strong>STEP 3: Unknown</strong></p>
<ul>
<li>
<p>Later you realize that 0.25 * max value will not separate the cells well.</p>
<ul>
<li>后来你意识到0.25 * max值不能很好地分离单元格。</li>
</ul>
</li>
<li>
<p>High value like 0.7 will not recognize some cells. 0.5 seems to be a good compromize</p>
<ul>
<li>像0.7这样的高值将无法识别某些单元格。0.5似乎是一个很好的折衷方案</li>
</ul>
</li>
<li>
<p>Unknown ambiguous region is nothing but bkground - foreground</p>
<ul>
<li>未知的模糊区域不过是背景-前景</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">sure_fg = np.uint8(sure_fg)  <span class="hljs-comment"># Convert to uint8 from float</span><br>unknown = cv2.subtract(sure_bg,sure_fg)<br>plt.imshow(unknown, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x2b36be24c10&gt;
</code></pre>
<p><img src="57_7.png" alt="png"></p>
<p><strong>STEP 4: Markers</strong></p>
<ul>
<li>
<p>Now we create a marker and label the regions inside.</p>
<ul>
<li>现在我们创建一个标记，并标记里面的区域。</li>
</ul>
</li>
<li>
<p>For sure regions, both foreground and background will be labeled with positive numbers.</p>
<ul>
<li>对于确定的区域，前景和背景都将被标记为正数。</li>
</ul>
</li>
<li>
<p>Unknown regions will be labeled 0.</p>
<ul>
<li>未知区域将被标记为0。</li>
</ul>
</li>
<li>
<p>For markers let us use ConnectedComponents.</p>
<ul>
<li>对于标记，让我们使用<code>ConnectedComponents</code>。</li>
</ul>
</li>
<li>
<p>Connected components labeling scans an image and groups its pixels into components based on pixel connectivity, i.e. all pixels in a connected component share similar pixel intensity values and are in some way connected with each other.</p>
<ul>
<li>连接组件标签扫描图像，并根据像素连接性将其像素分组，即连接组件中的所有像素共享相似的像素强度值，并以某种方式相互连接。</li>
</ul>
</li>
<li>
<p>Once all groups have been determined, each pixel is labeled with a graylevel or a color (color labeling) according to the component it was assigned to.</p>
<ul>
<li>一旦确定了所有的组，每个像素将根据分配给它的组件用灰度或颜色(颜色标记)标记。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">ret3, markers = cv2.connectedComponents(sure_fg)<br>plt.imshow(markers)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x2b36d8060a0&gt;
</code></pre>
<p><img src="57_8.png" alt="png"></p>
<ul>
<li>
<p>One problem rightnow is that the entire background pixels is given value 0.</p>
<ul>
<li>现在的一个问题是，整个背景像素的值是0。</li>
</ul>
</li>
<li>
<p>This means watershed considers this region as unknown.</p>
<ul>
<li>这意味着watershed认为这个区域是未知的。</li>
</ul>
</li>
<li>
<p>So let us add 10 to all labels so that sure background is not 0, but 10</p>
<ul>
<li>所以让我们给所有标签加上10，这样确定的背景不是0，而是10</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">markers = markers + <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure>
<ul>
<li>Now, mark the region of unknown with zero
<ul>
<li>现在，用零标记未知区域</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">markers[unknown==<span class="hljs-number">255</span>] = <span class="hljs-number">0</span><br>plt.imshow(markers, cmap=<span class="hljs-string">&#x27;jet&#x27;</span>)  <span class="hljs-comment"># Look at the 3 distinct regions.</span><br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x2b36d8f51c0&gt;
</code></pre>
<p><img src="57_9.png" alt="png"></p>
<ul>
<li>
<p>Now we are ready for watershed filling.</p>
<ul>
<li>现在我们已经准备好进行流域注水了。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">markers = cv2.watershed(img,markers)<br></code></pre></td></tr></table></figure>
<ul>
<li>
<p>Let us color boundaries in yellow.</p>
<ul>
<li>让我们用黄色标记边界。</li>
</ul>
</li>
<li>
<p>Remember that watershed assigns boundaries a value of -1</p>
<ul>
<li>记住，分水岭的边界值是-1</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">img[markers == -<span class="hljs-number">1</span>] = [<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>]  <br></code></pre></td></tr></table></figure>
<ul>
<li>label2rgb - Return an RGB image where color-coded labels are painted over the image.
<ul>
<li>label2rgb -返回一个RGB图像，其中彩色编码的标签涂在图像上。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">img2 = color.label2rgb(markers, bg_label=<span class="hljs-number">0</span>)<br>plt.imshow(img2)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x2b36d9c4970&gt;
</code></pre>
<p><img src="57_10.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.imshow(cv2.cvtColor(img, cv2.COLOR_BGR2RGB))<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x2b36da2de50&gt;
</code></pre>
<p><img src="57_11.png" alt="png"></p>
<ul>
<li>
<p>Now, time to extract properties of detected cells</p>
<ul>
<li>现在，是时候提取检测到的细胞的属性了</li>
</ul>
</li>
<li>
<p>Directly capturing props to pandas dataframe</p>
<ul>
<li>直接捕捉<code>pandas dataframe</code></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">props = measure.regionprops_table(markers, cells, <br>                          properties=[<span class="hljs-string">&#x27;label&#x27;</span>,<br>                                      <span class="hljs-string">&#x27;area&#x27;</span>, <span class="hljs-string">&#x27;equivalent_diameter&#x27;</span>,<br>                                      <span class="hljs-string">&#x27;mean_intensity&#x27;</span>, <span class="hljs-string">&#x27;solidity&#x27;</span>, <span class="hljs-string">&#x27;orientation&#x27;</span>,<br>                                      <span class="hljs-string">&#x27;perimeter&#x27;</span>])<br><br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>df = pd.DataFrame(props)<br>df.head()<br></code></pre></td></tr></table></figure>
<table border="1">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>label</th>
      <th>area</th>
      <th>equivalent_diameter</th>
      <th>mean_intensity</th>
      <th>solidity</th>
      <th>orientation</th>
      <th>perimeter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>1400327</td>
      <td>1335.272149</td>
      <td>4.860480</td>
      <td>0.924828</td>
      <td>-1.499676</td>
      <td>18900.592991</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11</td>
      <td>1092</td>
      <td>37.287767</td>
      <td>80.092491</td>
      <td>0.923858</td>
      <td>1.282415</td>
      <td>138.953319</td>
    </tr>
    <tr>
      <th>2</th>
      <td>12</td>
      <td>1142</td>
      <td>38.131871</td>
      <td>151.830998</td>
      <td>0.955649</td>
      <td>0.670516</td>
      <td>132.296465</td>
    </tr>
    <tr>
      <th>3</th>
      <td>13</td>
      <td>1108</td>
      <td>37.559944</td>
      <td>78.256318</td>
      <td>0.891392</td>
      <td>-1.062275</td>
      <td>146.852814</td>
    </tr>
    <tr>
      <th>4</th>
      <td>14</td>
      <td>1670</td>
      <td>46.111929</td>
      <td>106.720359</td>
      <td>0.862603</td>
      <td>1.532047</td>
      <td>188.823376</td>
    </tr>
  </tbody>
</table>
<ul>
<li>To delete small regions…
<ul>
<li>删除较小区域…</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">df = df[df[<span class="hljs-string">&#x27;area&#x27;</span>] &gt; <span class="hljs-number">50</span>]<br>df.head()<br></code></pre></td></tr></table></figure>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>label</th>
      <th>area</th>
      <th>equivalent_diameter</th>
      <th>mean_intensity</th>
      <th>solidity</th>
      <th>orientation</th>
      <th>perimeter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>1400327</td>
      <td>1335.272149</td>
      <td>4.860480</td>
      <td>0.924828</td>
      <td>-1.499676</td>
      <td>18900.592991</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11</td>
      <td>1092</td>
      <td>37.287767</td>
      <td>80.092491</td>
      <td>0.923858</td>
      <td>1.282415</td>
      <td>138.953319</td>
    </tr>
    <tr>
      <th>2</th>
      <td>12</td>
      <td>1142</td>
      <td>38.131871</td>
      <td>151.830998</td>
      <td>0.955649</td>
      <td>0.670516</td>
      <td>132.296465</td>
    </tr>
    <tr>
      <th>3</th>
      <td>13</td>
      <td>1108</td>
      <td>37.559944</td>
      <td>78.256318</td>
      <td>0.891392</td>
      <td>-1.062275</td>
      <td>146.852814</td>
    </tr>
    <tr>
      <th>4</th>
      <td>14</td>
      <td>1670</td>
      <td>46.111929</td>
      <td>106.720359</td>
      <td>0.862603</td>
      <td>1.532047</td>
      <td>188.823376</td>
    </tr>
  </tbody>
</table>
<ul>
<li>Convert to micron scale
<ul>
<li>转换成微米级</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">df[<span class="hljs-string">&#x27;area_sq_microns&#x27;</span>] = df[<span class="hljs-string">&#x27;area&#x27;</span>] * (pixels_to_um ** <span class="hljs-number">2</span>)<br>df[<span class="hljs-string">&#x27;equivalent_diameter_microns&#x27;</span>] = df[<span class="hljs-string">&#x27;equivalent_diameter&#x27;</span>] * (pixels_to_um)<br>df.head()<br></code></pre></td></tr></table></figure>
<table border="1">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>label</th>
      <th>area</th>
      <th>equivalent_diameter</th>
      <th>mean_intensity</th>
      <th>solidity</th>
      <th>orientation</th>
      <th>perimeter</th>
      <th>area_sq_microns</th>
      <th>equivalent_diameter_microns</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>1400327</td>
      <td>1335.272149</td>
      <td>4.860480</td>
      <td>0.924828</td>
      <td>-1.499676</td>
      <td>18900.592991</td>
      <td>288629.799932</td>
      <td>606.213556</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11</td>
      <td>1092</td>
      <td>37.287767</td>
      <td>80.092491</td>
      <td>0.923858</td>
      <td>1.282415</td>
      <td>138.953319</td>
      <td>225.078672</td>
      <td>16.928646</td>
    </tr>
    <tr>
      <th>2</th>
      <td>12</td>
      <td>1142</td>
      <td>38.131871</td>
      <td>151.830998</td>
      <td>0.955649</td>
      <td>0.670516</td>
      <td>132.296465</td>
      <td>235.384472</td>
      <td>17.311869</td>
    </tr>
    <tr>
      <th>3</th>
      <td>13</td>
      <td>1108</td>
      <td>37.559944</td>
      <td>78.256318</td>
      <td>0.891392</td>
      <td>-1.062275</td>
      <td>146.852814</td>
      <td>228.376528</td>
      <td>17.052215</td>
    </tr>
    <tr>
      <th>4</th>
      <td>14</td>
      <td>1670</td>
      <td>46.111929</td>
      <td>106.720359</td>
      <td>0.862603</td>
      <td>1.532047</td>
      <td>188.823376</td>
      <td>344.213720</td>
      <td>20.934816</td>
    </tr>
  </tbody>
</table>
<h2 id="tutorial-58---object-detection-using-template-matching" tabindex="-1" id="Tutorial-58-Object-detection-using-template-matching">Tutorial 58 - Object detection using template matching</h2>
<p><strong>Template Matching 模式匹配</strong></p>
<p><a target="_blank" rel="noopener" href="https://docs.opencv.org/3.4/d4/dc6/tutorial_py_template_matching.html">OpenCV: Template Matching</a></p>
<p>OBJECT DETECTION WITH TEMPLATES</p>
<ul>
<li>
<p>Need a source image and a template image.</p>
<ul>
<li>需要一个源图像和一个模板图像。</li>
</ul>
</li>
<li>
<p>The template image T is slided over the source image (as in 2D convolution), and the program tries to find matches using statistics.</p>
<ul>
<li>模板图像T在源图像上滑动(在2D卷积中)，程序尝试使用统计信息找到匹配。</li>
</ul>
</li>
<li>
<p>Several comparison methods are implemented in OpenCV.</p>
<ul>
<li>OpenCV中实现了几种比较方法。</li>
</ul>
</li>
<li>
<p>It returns a grayscale image, where each pixel denotes how much does the neighbourhood of that pixel match with template.</p>
<ul>
<li>它返回一个灰度图像，其中每个像素表示该像素的邻域与模板的匹配程度。</li>
</ul>
</li>
<li>
<p>Once you got the result, you can use cv2.minMaxLoc() function to find where is the maximum/minimum value. Take it as the top-left corner of the rectangle and take (w,h) as width and height of the rectangle.</p>
<ul>
<li>得到结果后，可以使用cv2.minMaxLoc()函数来查找最大值/最小值的位置。
将其作为矩形的左上角，并将(w,h)作为矩形的宽和高。</li>
</ul>
</li>
<li>
<p>That rectangle can be drawn on the region of matched template.</p>
<ul>
<li>该矩形可以绘制在匹配模板的区域上。</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>Template matching, <strong>single</strong> object in an image.</p>
<ul>
<li>模板匹配，图像中<strong>单个</strong>对象。</li>
</ul>
</li>
<li>
<p>Multiple methods to see which one works best.</p>
<ul>
<li>多种方法，看看哪一种效果最好。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt <br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">img_rgb = cv2.imread(<span class="hljs-string">&#x27;images/Ti_powder.tif&#x27;</span>)<br>img_gray = cv2.cvtColor(img_rgb, cv2.COLOR_BGR2GRAY)<br>plt.imshow(img_gray, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x263a924c550&gt;
</code></pre>
<p><img src="58_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">template = cv2.imread(<span class="hljs-string">&#x27;images/Ti_powder_single.tif&#x27;</span>, <span class="hljs-number">0</span>)<br>plt.imshow(template, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x263ae0a4be0&gt;
</code></pre>
<p><img src="58_2.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">h, w = template.shape[::]<br>h, w<br></code></pre></td></tr></table></figure>
<pre><code>(18, 16)
</code></pre>
<ul>
<li>
<p>For TM_SQDIFF, Good match yields minimum value; bad match yields large values</p>
<ul>
<li>对于 TM_SQDIFF，良好匹配产生最小值; 不匹配会产生较大的值</li>
</ul>
</li>
<li>
<p>For all others it is exactly opposite, max value = good fit.</p>
<ul>
<li>对于所有其他的情况，情况正好相反，最大值 = 良好的适合度。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># methods available: [&#x27;cv2.TM_CCOEFF&#x27;, &#x27;cv2.TM_CCOEFF_NORMED&#x27;, &#x27;cv2.TM_CCORR&#x27;,</span><br><span class="hljs-comment">#             &#x27;cv2.TM_CCORR_NORMED&#x27;, &#x27;cv2.TM_SQDIFF&#x27;, &#x27;cv2.TM_SQDIFF_NORMED&#x27;]</span><br>res = cv2.matchTemplate(img_gray, template, cv2.TM_SQDIFF)<br>plt.imshow(res, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x263ae0ff8e0&gt;
</code></pre>
<p><img src="58_3.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(res)<br>min_val, max_val, min_loc, max_loc<br></code></pre></td></tr></table></figure>
<pre><code>(4.0, 7702931.0, (318, 418), (66, 407))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Change to max_loc for all excerpt for TM_SQDIFF</span><br><span class="hljs-comment"># 将除 TM_SQDIFF 外的所有数据更改为 max_loc</span><br>top_left = min_loc<br>bottom_right = (top_left[<span class="hljs-number">0</span>] + w, top_left[<span class="hljs-number">1</span>] + h)<br><br><span class="hljs-comment"># Black rectangle with thickness 2. </span><br><span class="hljs-comment"># 绘制厚度为 2 的黑色矩形。</span><br>cv2.rectangle(img_gray, top_left, bottom_right, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br><br>plt.imshow(img_gray, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x263ae4de220&gt;
</code></pre>
<p><img src="58_4.png" alt="png"></p>
<hr>
<p><strong>Template matching - multiple objects</strong></p>
<ul>
<li>
<p>For multiple occurances, cv2.minMaxLoc() won’t give all the locations</p>
<ul>
<li>对于多次出现，cv2.minMaxLoc()不会给出所有的位置</li>
</ul>
</li>
<li>
<p>So we need to set a threshold</p>
<ul>
<li>所以我们需要设置一个阈值</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> pyplot <span class="hljs-keyword">as</span> plt<br><br>img_rgb = cv2.imread(<span class="hljs-string">&#x27;images/Ti_powder.tif&#x27;</span>)<br>img_gray = cv2.cvtColor(img_rgb, cv2.COLOR_BGR2GRAY)<br>template = cv2.imread(<span class="hljs-string">&#x27;images/Ti_powder_single.tif&#x27;</span>,<span class="hljs-number">0</span>)<br>h, w = template.shape[::]<br><br>res = cv2.matchTemplate(img_gray, template, cv2.TM_CCOEFF_NORMED)<br>plt.imshow(res, cmap=<span class="hljs-string">&#x27;gray&#x27;</span>)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x263ae67ac40&gt;
</code></pre>
<p><img src="58_5.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Pick only values above 0.8. For TM_CCOEFF_NORMED, larger values = good fit.</span><br><span class="hljs-comment"># 只选择高于0.8的值。对于TM_CCOEFF_NORMED，较大的值=良好的拟合。</span><br>threshold = <span class="hljs-number">0.8</span>  <br><br>loc = np.where( res &gt;= threshold)  <br><span class="hljs-comment"># Outputs 2 arrays. Combine these arrays to get x,y coordinates - take x from one array and y from the other.</span><br><span class="hljs-comment"># 输出2个数组。组合这些数组得到x,y坐标——从一个数组取x，从另一个数组取y。</span><br><br><span class="hljs-comment"># Reminder: ZIP function is an iterator of tuples where first item in each iterator is paired together, then the second item and then third, etc. </span><br><span class="hljs-comment"># 提醒:ZIP函数是一个元组迭代器，其中每个迭代器中的第一个项配对在一起，然后是第二个项，然后是第三个，等等。</span><br><br><span class="hljs-keyword">for</span> pt <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(*loc[::-<span class="hljs-number">1</span>]):   <span class="hljs-comment"># -1 to swap the values as we assign x and y coordinate to draw the rectangle. -1来交换我们分配的x和y坐标来绘制矩形的值。</span><br>    <span class="hljs-comment"># Draw rectangle around each object. We know the top left (pt), draw rectangle to match the size of the template image. 在每个物体周围画一个矩形。我们知道左上角(pt)，绘制矩形以匹配模板图像的大小。</span><br>    cv2.rectangle(img_rgb, pt, (pt[<span class="hljs-number">0</span>] + w, pt[<span class="hljs-number">1</span>] + h), (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>), <span class="hljs-number">1</span>)  <span class="hljs-comment"># Red rectangles with thickness 2. </span><br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.imshow(img_rgb)<br></code></pre></td></tr></table></figure>
<pre><code>&lt;matplotlib.image.AxesImage at 0x263a957fc10&gt;
</code></pre>
<p><img src="58_6.png" alt="png"></p>

            </article>
            
	<div class="rightside">
	
		<div class="rightside-button" id="js-aside">
			<span>
				<img no-lazy src="/images/icon/aside.png" class="rightside-button-icon" alt="Icon">
			</span>
		</div>
		<script>
			$("#js-aside").click(function () {
				onShowAsideButton();
			});
		</script>
	
	<div class="rightside-button" id="js-toggle_theme">
		<span>
			<img no-lazy src="/images/icon/toggle_theme.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	
<script src="/js/plugins/goto_position.js"></script>

	
	<div class="rightside-button" id="js-go_top">
		<span>
			<img no-lazy src="/images/icon/go_top.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>
	<div class="rightside-button" id="js-go_bottom">
		<span>
			<img no-lazy src="/images/icon/go_bottom.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	<script>
		setToggleThemeButtonListener();
	</script>
	<script>
		$('#js-go_top')
		.gotoPosition( {
			speed: 300,
			target: 'top',
		} );
		$('#js-go_bottom')
		.gotoPosition( {
			speed: 300,
			target: 'bottom',
		} );
	</script>
</div>


<div class="post-bottom">
    
        <div class="post-paging">     
            <div class="post-paging-last">
                
                    <a href="/posts/Hexo-%E6%9B%B4%E6%96%B0%E4%BA%86hexo%E4%B8%BB%E9%A2%98/">
                        上一篇：Hexo-更新了hexo主题
                    </a>
                
            </div>
            <div class="post-paging-next">
                
                    <a href="/posts/DIP-Introductory%20python%20tutorials%20for%20image%20processing(48-50)-Image%20Quality/">
                        下一篇：DIP-Introductory python tutorials for image processing(48-50)-Image Quality
                    </a>
                
            </div>
        </div>
    
    
    
        
            <div class="giscus comments"></div>
            <script>
                var scriptElement = document.createElement('script');
                scriptElement.src = 'https://giscus.app/client.js';
                scriptElement.setAttribute('data-repo', 'GZ-Metal-Cell/GZ-Metal-Cell.github.io');
                scriptElement.setAttribute('data-repo-id', 'R_kgDOIHLEOQ');
                scriptElement.setAttribute('data-category', 'Announcements');
                scriptElement.setAttribute('data-category-id', 'DIC_kwDOIHLEOc4CcVwP');
                scriptElement.setAttribute('data-mapping', 'title');
                scriptElement.setAttribute('data-strict', '1');
                scriptElement.setAttribute('data-reactions-enabled', '');
                scriptElement.setAttribute('data-emit-metadata', '0');
                scriptElement.setAttribute('data-input-position', 'bottom');
                scriptElement.setAttribute('data-theme', localStorage.getItem('theme') === 'light' ? 'light' : 'dark_high_contrast');
                scriptElement.setAttribute('data-lang', 'zh-CN');
                
                scriptElement.setAttribute('crossorigin', 'anonymous');
                scriptElement.async = true;
                document.head.appendChild(scriptElement);
            </script>
        
    
</div>
        </div>
    </main>
    
        <aside class="main-aside">
    
<script src="/js/widgets/aside.js"></script>

    <script>
        showAside();
    </script>

    <div class="aside-top">
        <div class="aside-top-about aside-card">
            <a href="/about" class="aside-top-about-portrait">
                <img no-lazy src="/about/portrait.png" alt="Q">
            </a>
            <div class="aside-top-about-info">
                <span class="author"> Zi-Zi</span>
                <span class="description">不以物喜，不以己悲。</span>
            </div>              
            <div class="aside-top-about-site">
                <a href="/categories" class="aside-top-about-site-item">
                    <span class="title">类别</span>
                    <span class="count">5</span>
                </a>
                <a href="/tags" class="aside-top-about-site-item">
                    <span class="title">标签</span>
                    <span class="count">121</span>
                </a>
                <a href="/archives" class="aside-top-about-site-item">
                    <span class="title">归档</span>
                    <span class="count">436</span>
                </a>
            </div>
            <div class="aside-top-about-contact">
                
                    
                        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
                            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
                            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
                            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
                            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
                        </a>
                    
                
            </div>
        </div> 

        
            <div class="aside-top-series aside-card">
                <ol class="aside-top-series-content">
                    
                    
                    
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Introductory python tutorials for image processing(1-21)-Python Basics/">
                                                <span class="text">DIP-Introductory python tutorials for image processing(1-21)-Python Basics</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Introductory python tutorials for image processing(22-28)-Python Libraries/">
                                                <span class="text">DIP-Introductory python tutorials for image processing(22-28)-Python Libraries</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Introductory python tutorials for image processing(29-41)-Image Filtering/">
                                                <span class="text">DIP-Introductory python tutorials for image processing(29-41)-Image Filtering</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Introductory python tutorials for image processing(42-43)-CLAHE/">
                                                <span class="text">DIP-Introductory python tutorials for image processing(42-43)-CLAHE</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Introductory python tutorials for image processing(44-45)-Color Spaces/">
                                                <span class="text">DIP-Introductory python tutorials for image processing(44-45)-Color Spaces</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Introductory python tutorials for image processing(46-47)-Image Registration/">
                                                <span class="text">DIP-Introductory python tutorials for image processing(46-47)-Image Registration</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Introductory python tutorials for image processing(48-50)-Image Quality/">
                                                <span class="text">DIP-Introductory python tutorials for image processing(48-50)-Image Quality</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        
                                        <li class="series-item active">
                                            <a class="series-link active" href="/posts/DIP-Introductory python tutorials for image processing(51-58)-Image Segmentation/">
                                                <span class="text">DIP-Introductory python tutorials for image processing(51-58)-Image Segmentation</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Python tutorials for image processing and machine learning(36-42)-Pandas/">
                                                <span class="text">DIP-Python tutorials for image processing and machine learning(36-42)-Pandas</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Python tutorials for image processing and machine learning(43-49)-Regression/">
                                                <span class="text">DIP-Python tutorials for image processing and machine learning(43-49)-Regression</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Python tutorials for image processing and machine learning(50-54)-Unsupervised Learning/">
                                                <span class="text">DIP-Python tutorials for image processing and machine learning(50-54)-Unsupervised Learning</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Python tutorials for image processing and machine learning(55-58)-Supervised Learning/">
                                                <span class="text">DIP-Python tutorials for image processing and machine learning(55-58)-Supervised Learning</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Python tutorials for image processing and machine learning(59-67)-Random Forest Classifier/">
                                                <span class="text">DIP-Python tutorials for image processing and machine learning(59-67)-Random Forest Classifier</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Python tutorials for image processing and machine learning(68)-SVM/">
                                                <span class="text">DIP-Python tutorials for image processing and machine learning(68)-SVM</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Python tutorials for image processing and machine learning(69)-BOVW/">
                                                <span class="text">DIP-Python tutorials for image processing and machine learning(69)-BOVW</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Python tutorials for image processing and machine learning(73-78)-U-net/">
                                                <span class="text">DIP-Python tutorials for image processing and machine learning(73-78)-U-net</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                                    
                                    
                                    
                                        <li class="series-item">
                                            <a class="series-link" href="/posts/DIP-Python tutorials for image processing and machine learning(70-71)-Deep Learning/">
                                                <span class="text">DIP-Python tutorials for image processing and machine learning(70-71)-Deep Learning</span>
                                            </a>
                                        </li>
                                    
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                </ol>
                <div class="aside-top-series-title">
                    <h1>
                        <a href="/tags/DigitalSreeni">标签：DigitalSreeni</a>
                    </h1>
                    <span id="serial-number">8/17</span>
                </div>
            </div>
            <script>
                activeSeriesItem();
            </script> 
        
    </div>

    <div class="aside-bottom">
        
            <script>
                
                    const tocCollapsed = true;
                
                
                    const tocDepth = 6;
                
                var headerString = '';
                for (let i = 1; i <= tocDepth; i++) {
                    if (i === 1) {
                        headerString += 'h1';
                    } else {
                        headerString += ', h' + i;
                    }
                }
                hbeToc();
            </script>
            <div class="aside-bottom-toc aside-card">
                <div class="aside-bottom-toc-title">
                    <h1>目录</h1>
                    <span class="toc-percentage"></span>
                </div>
                <ol class="aside-bottom-toc-content"></ol>
            </div>
        
    </div>
</aside>
    
</div>
		<footer>
	<div class="content">
		
			<span>©2022-2025&nbsp;By&nbsp;<a href="/about">Zi-Zi</a>.</span>
		
		<span><a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> theme by <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell/hexo-theme-quieter">Quieter</a>.</span>
		
			<span style="display: flex;">
				<img no-lazy alt="icp" src="/images/icp_icon.png" style="width: 16px; height: 16px;">
				<a href="https://icp.gov.moe/?keyword=20241647" target="_blank">萌 ICP 备 20241647 号</a>
			</span>
		
	</div>

	
<script src="/js/plugins/ref.js"></script>

	
<script src="/js/plugins/highlight_tools.js"></script>

	<script>
		const  COPY_ICON = "/images/icon/copy.png";
		const CLOSE_CODE_BLOCK_ICON = "/images/icon/close_code_block.png";
		const HIGHLIGHT_SHRINK = "";
		const HIGHLIGHT_HEIGHT_LIMIT = "";
	</script>

	
	
	<!-- Analytics -->

    
        <!-- Busuanzi Analytics -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
        <!-- Baidu Analytics -->
        <script defer>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?e57cf62289f84322ebff116e8b3d343e";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
    


	

	
		
			
				<link rel="stylesheet" href="/css/plugins/katex/katex.min.css">
				<script src="/js/plugins/copy-tex.js"></script>
			
		
	

    
		
<link rel="stylesheet" href="/css/plugins/textIndent.css">

		
<script src="/js/plugins/textIndent.js"></script>

	

	
	
	
		<script>
			if (typeof init === 'function') {
				init();
			}
		</script>
	

	
		
	

	

	<!--
		
<script src="/js/plugins/jquery.pjax.min.js"></script>

		<script>
			$(document).pjax('a[target!=_blank]', 'main', {
				fragment: 'main',
				timeout: 8000
			});

			$(document).on('pjax:complete', function() {
			});
		</script> 
	-->
	<script>
		console.log('\n %c Hexo-Quieter 主题 %c https://github.com/GZ-Metal-Cell/hexo-theme-quieter \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
	</script>
</footer>
	</body>

	<!-- Hexo-Quieter 主题  https://github.com/GZ-Metal-Cell/hexo-theme-quieter -->
</html>

