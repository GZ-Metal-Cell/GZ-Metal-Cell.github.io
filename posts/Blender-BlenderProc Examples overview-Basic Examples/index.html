<!DOCTYPE html>
<html lang=zh-CN data-theme="light">
	
<script src="/js/plugins/toggleTheme.js"></script>

	<script>
		setTheme();
	</script>
	<head>
		
<title>Blender-BlenderProc Examples overview-Basic Examples | Zi-Zi's Journey</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/images/icon/favicon.ico">
<link href="/css/plugins/print.css" media="print" rel="stylesheet" />

<link rel="stylesheet" href="/css/index.css">



<meta name="keywords" content="Blender,Python,">
<meta name="description" content="使用 Blenderproc 合成数据集。">



<script src="/js/plugins/jquery.min.js"></script>


<script src="/js/plugins/hljs.min.js"></script>


<script src="/js/plugins/init.js"></script>


<script src="/js/plugins/hide.js"></script>


<script src="/js/plugins/tabs.js"></script>



    



    
<script src="/js/plugins/alert-title.js"></script>

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-base.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-dark-class.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-light.css">






    

	<meta name="generator" content="Hexo 6.1.0"></head>

	<body>
		<header class="sticky-header">
	<nav>
		<div class="nav-left">
			<a href="/" class="logo">
				<img no-lazy src="/images/headers_icon/logo.webp" alt="Quieter">
			</a>
			<ul class="breadcrumb" id="breadcrumb"></ul>
		</div>
		<div class="nav-right">
			<ul>
				
					<li>
						<a href="/">
						  主页
						</a>
					</li>
				
					<li>
						<a href="/categories">
						  类别
						</a>
					</li>
				
					<li>
						<a href="/tags">
						  标签
						</a>
					</li>
				
					<li>
						<a href="/archives">
						  归档
						</a>
					</li>
				
					<li>
						<a href="/galleries">
						  相册
						</a>
					</li>
				
					<li>
						<a href="/links">
						  链接
						</a>
					</li>
				
					<li>
						<a href="/about">
						  关于
						</a>
					</li>
								  
			</ul>
		</div>
		<div class="nav-right-close">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
				<path fill="none" d="M0 0h24v24H0z" />
				<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
			</svg>
		</div>

		<div class="sidebar">
    <div class="topo">
        <p>Zi-Zi's Journey</p>
    </div>
    <ul>
        
        <li>
            <a href="/">
                主页
            </a>
        </li>
        
        <li>
            <a href="/categories">
                类别
            </a>
        </li>
        
        <li>
            <a href="/tags">
                标签
            </a>
        </li>
        
        <li>
            <a href="/archives">
                归档
            </a>
        </li>
        
        <li>
            <a href="/galleries">
                相册
            </a>
        </li>
        
        <li>
            <a href="/links">
                链接
            </a>
        </li>
        
        <li>
            <a href="/about">
                关于
            </a>
        </li>
        
    </ul>
    <div class="sidebar-footer">
        
        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
        </a>
        
    </div>
</div>
<div class='shelter'>
    <script>
        $(function() {
            $('.nav-right-close > svg').click(function() {
                $('.sidebar').animate({
                    right: "0"
                }, 500);
                $('.shelter').fadeIn("slow");
            
                var element = $('.topo');
                element.addClass('custom-style');
            
                var links = null;
                if ("") {
                    links = "".split(',');
                } else {
                    links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
                }
            
                var randomLink = links[Math.floor(Math.random() * links.length)];
                element.css('background-image', "url('" + randomLink + "')");
            });
          
            $('.shelter').click(function(e) {
                $('.sidebar').animate({
                    right: "-100%"
                }, 500);
                $('.shelter').fadeOut("slow");
            });
        });      
    </script>
</div>
	</nav>

	
		<div class="header-background"></div>
	

	<script>
		const name = 'post';
		const ul = document.querySelectorAll('.nav-right ul')[0];
		const lis = ul.querySelectorAll('li');

		if (name == 'home') {
			lis[0].classList.add('select');
		} else {
			for (let i = 0; i < lis.length; i++) {
				const li = lis[i];
				const a = li.querySelector('a');
				if (name === a.href.split('/')[3]) {
					li.classList.add('select');
				}
			}
		}
	</script>
	
	<script>
		var element = document.querySelector('.header-background');
		if(element) {
			element.classList.add('custom-style');
			var links = null;
			if("")
			{
				links = "".split(',');
			} else
			{
				links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
			}
			var randomLink = links[Math.floor(Math.random() * links.length)];
			element.style.backgroundImage = "url('" + randomLink + "')";
		}
	</script>

	
<script src="/js/plugins/breadcrumb.js"></script>

	<script>
		var menus_title = [];
		
			menus_title.push({home: '主页'});
		
			menus_title.push({categories: '类别'});
		
			menus_title.push({tags: '标签'});
		
			menus_title.push({archives: '归档'});
		
			menus_title.push({galleries: '相册'});
		
			menus_title.push({links: '链接'});
		
			menus_title.push({about: '关于'});
		
		
			
				postsBreadcrumb(
					document.getElementById('breadcrumb'),
					"类别",
					"/categories",
					"学习",
					"/categories/学习",
					1
				);
			
		
	</script>
</header>

<div class="main-wrapper">
    <main class="post">
        <header class="main-header">
	
		
			
				
<link rel="stylesheet" href="/css/plugins/fancybox.css">

				
<script src="/js/plugins/fancybox.umd.js"></script>

				
<script src="/js/plugins/fancybox.js"></script>

			
			<div class="post-header-background-content">
				<ul class="post-header-tag">
					
						
							<li><a href="/tags/Blender"><span>Blender</span></a></li>
						
							<li><a href="/tags/Python"><span>Python</span></a></li>
						
					
				</ul>
				
				<h1>Blender-BlenderProc Examples overview-Basic Examples</h1>
		
				
					<div class="post-header-desc">
						<svg t="1714702231661" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="1154" xmlns:xlink="http://www.w3.org/1999/xlink"
						width="20" height="20">
						<path
							d="M778.24 117.76A46.08 46.08 0 0 1 824.32 163.84v430.08c0 8.4992-4.13696 16.01536-10.50624 20.6848l-0.24576 0.2048L587.5712 846.09024a35.84 35.84 0 0 1-61.48096-25.06752v-220.9792a46.08 46.08 0 0 1 46.08-46.08l200.94976-0.02048V168.96h-522.24v686.08H389.12c13.25056 0 24.1664 10.07616 25.47712 22.97856l0.12288 2.62144c0 14.1312-11.4688 25.6-25.6 25.6h-143.36A46.08 46.08 0 0 1 199.68 860.16V163.84A46.08 46.08 0 0 1 245.76 117.76h532.48z m-26.78784 487.38304h-174.16192v178.176l174.16192-178.176z m-45.19936-169.94304a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z m0-122.88a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z"
							fill="#ffffff" p-id="1155"></path>
						</svg>
						<p>使用 Blenderproc 合成数据集。</p>
					</div>
				
		
				<div class="post-header-info">
					<svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
					xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
						<path
							d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
							p-id="2902" fill="#ffffff"></path>
					</svg>
					<div class="post-header-info-author">
						<a href="/about">Zi-Zi</a>
					</div>
					
						<div class="post-header-info-categories">
							
								<a href="/categories/学习">学习</a>
							
						</div>
					
					<time>2023/06/04 10:39:00</time>
				</div>
		
				
					<div class="post-header-stat">
						<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
						viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve" width="20" height="20">
							<path fill="#FFFFFF" d="M187.2,165.6c0,2.6-2.1,4.7-4.7,4.7H17.5c-2.6,0-4.7-2.1-4.7-4.7s2.1-4.7,4.7-4.7h165.1
								C185.2,160.9,187.2,163,187.2,165.6z"/>
							<path fill="#FFFFFF" d="M17.5,29.7c2.6,0,4.7,2.1,4.7,4.7v131.2c0,2.6-2.1,4.7-4.7,4.7s-4.7-2.1-4.7-4.7V34.4
								C12.8,31.8,14.9,29.7,17.5,29.7z M77.9,91.5c1.8,1.8,1.8,4.8,0,6.6l-39.8,39.8c-1.9,1.8-4.9,1.7-6.6-0.2c-1.7-1.8-1.7-4.6,0-6.4
								l39.8-39.8C73.1,89.6,76,89.6,77.9,91.5z M169.9,70.2c1.6,2.1,1.1,5-0.9,6.5c0,0,0,0,0,0l-64.2,48.2c-2.1,1.5-5,1.1-6.6-0.9
								c-1.6-2.1-1.1-5,0.9-6.5c0,0,0,0,0,0l64.2-48.2C165.4,67.7,168.3,68.1,169.9,70.2L169.9,70.2z"/>
							<path fill="#FFFFFF" d="M104.6,124.5c-1.8,1.8-4.8,1.8-6.6,0L71.6,98.1c-1.8-1.8-1.8-4.8,0-6.6c1.8-1.8,4.8-1.8,6.6,0l26.3,26.3
								C106.4,119.6,106.4,122.6,104.6,124.5C104.6,124.4,104.6,124.4,104.6,124.5z"/>
						</svg>
		
						
							
<script src="/js/plugins/wordCount.js"></script>

							<p class="post-count">文字数：---</p>
						
		
						
							<p id="busuanzi_container_page_pv" style='display:none;'>阅读数：<span id="busuanzi_value_page_pv"></span></p>
						
					</div>
				
			</div>
		
	
</header>
        <div class="post-content article-container">
            <article class="post-content-info">
                <h1 id="%E8%B5%84%E6%BA%90" tabindex="-1">资源</h1>
<p>仓库地址：<a target="_blank" rel="noopener" href="https://github.com/DLR-RM/BlenderProc">DLR-RM/BlenderProc: A procedural Blender pipeline for photorealistic training image generation (github.com)</a>，下载到本地，用 python 打开，解释器使用之前创建的 blender 环境。</p>
<h1 id="%E6%AD%A3%E6%96%87" tabindex="-1">正文</h1>
<h2 id="basic-example" tabindex="-1" id="Basic-example">Basic example</h2>
<h3 id="usage" tabindex="-1" id="Usage">Usage</h3>
<p>示例代码在 <code>examples/basics/basic/main.py</code> 中。shell 中输入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/basics/basic/main.py examples/resources/camera_positions examples/resources/scene.obj examples/basics/basic/output<br></code></pre></td></tr></table></figure>
<p>即可开跑！我说婷婷，会报错：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">It seems the freeimage library which is necessary to read .exr files cannot be found on your computer.<br>Gonna try to download it automatically.<br>Imageio: &#x27;freeimage-3.15.1-win64.dll&#x27; was not found on your computer; downloading it now.<br>Error while fetching file: &lt;urlopen error timed out&gt;.<br>Error while fetching file: The read operation timed out.<br>Error while fetching file: &lt;urlopen error timed out&gt;.<br>Error while fetching file: &lt;urlopen error timed out&gt;.<br></code></pre></td></tr></table></figure>
<p>我设了个全局代理和 TUN 模式再多跑几次就可以了 orz</p>
<p><img src="B0.png" alt="png"></p>
<p>这么看从网上下载 <code>freeimage-3.15.1-win64.dll</code>，然后放到 <code>C:\Users\XXXX\AppData\Local\imageio\freeimage\</code> 下也是可以的！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">File saved as C:\Users\XXXX\AppData\Local\imageio\freeimage\freeimage-3.15.1-win64.dll.<br></code></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs shell">Warning: Changed install path from /home_local\XXX... to C:\Users\XXX..., there is no /home_local/ on this machine.<br>Using blender in C:\Users\XXX\blender\blender-3.3.0-windows-x64<br>Using temporary directory: C:\Users\XXX\AppData\Local\Temp\blender_proc_b830ed3583e7442cbe7cde6a0b37bd2b<br>Blender 3.3.0 (hash 0759f671ce1f built 2022-09-07 00:44:18)<br>Selecting render devices...<br>Device NVIDIA GeForce RTX 4060Laptop GPU of type OPTIX found and used.<br>Device 13th Gen Intel Core i9-13900HX of type CPU found and used.<br>Timer &#x27;OBJ_import&#x27; took 1.5ms<br>Fra:0 Mem:10.46M (Peak 10.69M) | Time:00:00.16 | Mem:0.00M, Peak:0.00M | Scene, ViewLayer | Synchronizing object | Cube<br>Fra:0 Mem:10.47M (Peak 10.69M) | Time:00:00.17 | Mem:0.00M, Peak:0.00M | Scene, ViewLayer | Synchronizing object | Suzanne<br><br>...<br><br>Fra:0 Mem:85.58M (Peak 85.58M) | Time:00:01.04 | Compositing | Tile 4-4<br>Fra:0 Mem:85.52M (Peak 85.58M) | Time:00:01.04 | Compositing | De-initializing execution<br>Saved: C:\Users\XXX\AppData\Local\Temp\blender_proc_b830ed3583e7442cbe7cde6a0b37bd2b\normals_0000.exr<br>Saved: C:\Users\XXX\AppData\Local\Temp\blender_proc_b830ed3583e7442cbe7cde6a0b37bd2b\depth_0000.exr<br>Saved: &#x27;C:\Users\XXX\AppData\Local\Temp\blender_proc_b830ed3583e7442cbe7cde6a0b37bd2b\rgb_0000.png&#x27;<br> Time: 00:01.36 (Saving: 00:00.30)<br><br>Fra:1 Mem:31.51M (Peak 85.58M) | Time:00:00.00 | Mem:0.46M, Peak:0.46M | Scene, ViewLayer | Initializing<br>Fra:1 Mem:31.51M (Peak 85.58M) | Time:00:00.00 | Mem:0.46M, Peak:0.46M | Scene, ViewLayer | Waiting for render to start<br><br>...<br><br>Fra:1 Mem:85.58M (Peak 85.58M) | Time:00:00.83 | Compositing | Tile 4-4<br>Fra:1 Mem:85.52M (Peak 85.58M) | Time:00:00.83 | Compositing | De-initializing execution<br>Saved: C:\Users\XXX\AppData\Local\Temp\blender_proc_b830ed3583e7442cbe7cde6a0b37bd2b\normals_0001.exr<br>Saved: C:\Users\XXX\AppData\Local\Temp\blender_proc_b830ed3583e7442cbe7cde6a0b37bd2b\depth_0001.exr<br>Saved: &#x27;C:\Users\XXX\AppData\Local\Temp\blender_proc_b830ed3583e7442cbe7cde6a0b37bd2b\rgb_0001.png&#x27;<br> Time: 00:00.86 (Saving: 00:00.01)<br><br>Merging data for frame 0 into examples/basics/basic/output\0.hdf5<br>Merging data for frame 1 into examples/basics/basic/output\1.hdf5<br><br>Blender quit<br>Cleaning temporary directory<br></code></pre></td></tr></table></figure>
<h3 id="visualization" tabindex="-1" id="Visualization">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/basics/basic/output/0.hdf5<br></code></pre></td></tr></table></figure>
<p>渲染了 colors、depth、normals 三张图片：</p>
<p><img src="B3.png" alt="png"></p>
<h3 id="code" tabindex="-1" id="Code">Code</h3>
<p>接受三个 parser 参数：</p>
<ul>
<li><code>examples/resources/camera_positions</code>：相机参数文本文件。</li>
</ul>
<p><img src="B1.png" alt="png"></p>
<blockquote>
<p>第一行数据表示相机位于 (0, -13.741, 4.1242) 的位置，其绕 x 轴旋转角度为 1.3，绕 y 轴旋转角度为 0，绕 z 轴旋转角度为 0。</p>
<p>第二行数据表示相机位于 (1.9488, -6.5202, 0.23291) 的位置，其绕 x 轴旋转角度为 1.84，绕 y 轴旋转角度为 0，绕 z 轴旋转角度为 0.5。</p>
</blockquote>
<ul>
<li><code>examples/resources/scene.obj</code>：obj 文件，basic scene 的信息。</li>
</ul>
<p><img src="B2.png" alt="png"></p>
<blockquote>
<p>这是一个 Wavefront OBJ 文件，它是一种 3D 对象文件格式。该文件包含了多个物体：“Cube” 和 “Cube.001” 等。</p>
<p>在文件的开头，有一行 “mtllib scene.mtl”，表示该文件引用了一个名为 “scene.mtl” 的材质库文件，其中定义了这些物体所使用的材质/纹理信息。</p>
<p>接下来，通过使用 “v”，“vt”，和 “vn” 关键字定义了每一个物体的顶点位置、纹理坐标和法向量。</p>
<p>具体来说，每一个 “v” 后面的三个数值表示一个顶点的 x，y 和 z 坐标；</p>
<p>每一个 “vt” 后面的两个数值表示一个纹理坐标值，在这个文件中，它们是相对于材质图像的位置；</p>
<p>每一个 “vn” 后面的三个数值表示一个法向量的 x，y 和 z 分量。</p>
<p>下面排列的 “f” 行表示了多边形，每一个 “f” 后面跟随着一些数字，这些数字表示该多边形的组成部分。</p>
<p>在这个文件中，不同的数字之间使用斜线 “/” 分隔。</p>
<p>具体来说，每一个数字表示该物体的一个顶点，该顶点由前面的 “v” 行中相应编号的顶点位置信息定义，而后面的数字则来自前面的 “vt” 和 “vn” 行。</p>
<p>每一行的最后一个数字是该多边形的法向量，这个法向量来自 “vn” 行，指定了多边形所在平面的朝向。</p>
<p>“s off” 表示关闭了 smooth shading，即不使用平滑着色技术。</p>
</blockquote>
<ul>
<li><code>examples/basics/basic/output</code>：输出文件路径</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> blenderproc <span class="hljs-keyword">as</span> bproc<br><span class="hljs-keyword">import</span> argparse<br><br>parser = argparse.ArgumentParser()<br>parser.add_argument(<span class="hljs-string">&#x27;camera&#x27;</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;Path to the camera file, should be examples/resources/camera_positions&quot;</span>)<br>parser.add_argument(<span class="hljs-string">&#x27;scene&#x27;</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;Path to the scene.obj file, should be examples/resources/scene.obj&quot;</span>)<br>parser.add_argument(<span class="hljs-string">&#x27;output_dir&#x27;</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;Path to where the final files, will be saved, could be examples/basics/basic/output&quot;</span>)<br>args = parser.parse_args()<br></code></pre></td></tr></table></figure>
<p>初始化 blenderproc：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">bproc.init()<br></code></pre></td></tr></table></figure>
<p>从 <code>args.scene</code> 中载入模型场景：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">objs = bproc.loader.load_obj(args.scene)<br></code></pre></td></tr></table></figure>
<p>载入灯光：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># define a light and set its location and energy level</span><br>light = bproc.types.Light()<br>light.set_type(<span class="hljs-string">&quot;POINT&quot;</span>)<br>light.set_location([<span class="hljs-number">5</span>, -<span class="hljs-number">5</span>, <span class="hljs-number">5</span>])<br>light.set_energy(<span class="hljs-number">1000</span>)<br></code></pre></td></tr></table></figure>
<p>载入相机：这段代码的作用是设置相机分辨率，并读取相机位置信息并转换为齐次相机-世界变换矩阵。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># define the camera resolution</span><br><span class="hljs-comment"># 首先，调用 bproc.camera.set_resolution() 函数来定义相机的分辨率，该函数接受两个参数，即相机图像的宽度和高度。在这个示例中，我们将相机分辨率设置为 512x512。</span><br>bproc.camera.set_resolution(<span class="hljs-number">512</span>, <span class="hljs-number">512</span>)<br><br><span class="hljs-comment"># read the camera positions file and convert into homogeneous camera-world transformation</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(args.camera, <span class="hljs-string">&quot;r&quot;</span>) <span class="hljs-keyword">as</span> f:<br>    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f.readlines():<br>        <span class="hljs-comment"># 使用一个 for 循环来逐行读取相机位置文件中的信息，并将每个位置信息转换为齐次变换矩阵，并通过调用 bproc.camera.add_camera_pose() 函数将其添加到 BlenderProc 中。</span><br>        line = [<span class="hljs-built_in">float</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> line.split()]<br>        position, euler_rotation = line[:<span class="hljs-number">3</span>], line[<span class="hljs-number">3</span>:<span class="hljs-number">6</span>]<br>        matrix_world = bproc.math.build_transformation_mat(position, euler_rotation)<br>        bproc.camera.add_camera_pose(matrix_world)<br></code></pre></td></tr></table></figure>
<p>渲染图像：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># activate normal and depth rendering</span><br>bproc.renderer.enable_normals_output()<br>bproc.renderer.enable_depth_output(activate_antialiasing=<span class="hljs-literal">False</span>)<br><span class="hljs-comment"># bproc.renderer.set_noise_threshold(0.01)  # this is the default value</span><br><br><span class="hljs-comment"># render the whole pipeline</span><br>data = bproc.renderer.render()<br></code></pre></td></tr></table></figure>
<p>首先，我们需要启用 <code>blenderproc</code> 生成每张彩色图像的法线和距离。此外，我们设置所需的图像噪声阈值。较低的噪声阈值将减少图像中的噪声，但会增加渲染时间。默认值为 <code>0.01</code>，适用于大多数应用程序。</p>
<p>=&gt;在临时文件夹中创建文件 <code>rgb_0000.png</code> 和 <code>rgb_0001.png</code>。同时还创建法线和深度图像。</p>
<ul>
<li>法线和深度图像是使用 <code>.exr</code> 格式渲染的，可以线性色彩空间和更高的精度。</li>
<li>在这里，深度图像没有反锯齿处理，意味着对于每个像素，该像素中的深度不会聚合在其表面上。虽然距离和深度图像听起来很相似，但它们并不相同：在<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Range_imaging">距离图像</a>中，每个像素都包含从摄像机位置到场景中对应点的实际距离。而在<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Depth_map">深度图像</a>中，每个像素都包含相应点所处的与摄像机平行的平面与摄像机之间的距离。</li>
</ul>
<p>=&gt;创建文件 <code>normal_0000.exr</code>、<code>normal_0001.exr</code>、<code>distance_0000.exr</code> 和 <code>distance_0001.exr</code>。</p>
<p>在本例中，所有这些文件都是临时文件，直接在渲染后读取并在临时文件夹中删除。然后将它们打包成字典并返回，保存在 <code>data</code> 变量中。</p>
<p>FAQ：如果我们直接读取它们，为什么还要将它们存储在磁盘上？</p>
<ul>
<li>Blender 没有其他选项，只能先将它们保存到磁盘，然后再读取它们。</li>
</ul>
<blockquote>
<p>首先，通过调用 bproc.renderer.enable_normals_output() 和 bproc.renderer.enable_depth_output(activate_antialiasing=False) 函数，启用了法线和深度渲染。其中，enable_normals_output() 函数允许将法线渲染输出到渲染结果中，而 enable_depth_output(activate_antialiasing=False) 函数则允许将深度渲染输出到渲染结果中，并且关闭了抗锯齿选项。</p>
<p>接着，调用 bproc.renderer.render() 函数，开始渲染整个渲染管线，并将渲染结果存储在 data 变量中。在渲染过程中，会依次执行多个处理步骤，包括场景图遍历、光照计算、材质映射、纹理映射等，并最终生成最终的渲染结果。渲染结束后，data 变量中将包含法线和深度信息，它们可以用来进行后续的图像处理、计算机视觉等任务。</p>
</blockquote>
<p>保存成 <code>.hdf5</code> 文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">bproc.writer.write_hdf5(args.output_dir, data)<br></code></pre></td></tr></table></figure>
<h2 id="camera-sampling" tabindex="-1" id="Camera-sampling">Camera sampling</h2>
<h3 id="usage-1" tabindex="-1" id="Usage-2">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/basics/camera_sampling/main.py examples/resources/scene.obj examples/basics/camera_sampling/output<br></code></pre></td></tr></table></figure>
<h3 id="visualization-1" tabindex="-1" id="Visualization-2">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/basics/camera_sampling/output/0.hdf5<br></code></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Keys: &#x27;colors&#x27;: (512, 512, 3), &#x27;depth&#x27;: (512, 512), &#x27;normals&#x27;: (512, 512, 3)<br></code></pre></td></tr></table></figure>
<h3 id="code-1" tabindex="-1" id="Code-2">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Find point of interest, all cam poses should look towards it</span><br><span class="hljs-comment"># 通过调用 bproc.object.compute_poi(objs) 函数，计算出一组物体的几何中心点 poi，作为相机观察的焦点。</span><br>poi = bproc.<span class="hljs-built_in">object</span>.compute_poi(objs)<br><span class="hljs-comment"># Sample five camera poses</span><br><span class="hljs-comment"># 采样了五个随机的相机位置，渲染出 5 张图</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>    <span class="hljs-comment"># Sample random camera location above objects</span><br>    <span class="hljs-comment"># 通过调用 np.random.uniform([-10, -10, 8], [10, 10, 12]) 函数，从一个三维坐标区间中随机取得一个相机位置，其中相机位置的 x、y 坐标范围为 [-10, 10]，z 坐标范围为 [8, 12]。</span><br>    location = np.random.uniform([-<span class="hljs-number">10</span>, -<span class="hljs-number">10</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">12</span>])<br>    <span class="hljs-comment"># Compute rotation based on vector going from location towards poi</span><br>    <span class="hljs-comment"># 对于每一个相机位置，进一步计算其旋转矩阵 rotation_matrix，以便将相机的视线朝向 poi 的方向。</span><br>    <span class="hljs-comment"># 具体而言，调用 bproc.camera.rotation_from_forward_vec(poi - location, inplane_rot=np.random.uniform(-0.7854, 0.7854)) 函数，以相机位置和 poi 之间的向量作为前向向量，并通过 inplane_rot 参数加入少量的水平旋转随机性（其值在 [-0.7854, 0.7854] 范围内）来计算出旋转矩阵 rotation_matrix。</span><br>    rotation_matrix = bproc.camera.rotation_from_forward_vec(poi - location, inplane_rot=np.random.uniform(-<span class="hljs-number">0.7854</span>, <span class="hljs-number">0.7854</span>))<br>    <span class="hljs-comment"># Add homog cam pose based on location an rotation</span><br>    <span class="hljs-comment"># 将相机位置和旋转信息组合为齐次相机-世界变换矩阵</span><br>    cam2world_matrix = bproc.math.build_transformation_mat(location, rotation_matrix)<br>    <span class="hljs-comment"># 将其添加到 BlenderProc 中，以便后续渲染时使用。这样，就实现了对场景从不同视角的渲染。</span><br>    bproc.camera.add_camera_pose(cam2world_matrix)<br></code></pre></td></tr></table></figure>
<h2 id="light-sampling" tabindex="-1" id="Light-sampling">Light sampling</h2>
<h3 id="usage-2" tabindex="-1" id="Usage-3">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/basics/light_sampling/main.py examples/resources/camera_positions examples/resources/scene.obj examples/basics/light_sampling/output<br></code></pre></td></tr></table></figure>
<h3 id="visualization-2" tabindex="-1" id="Visualization-3">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/basics/light_sampling/output/0.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="L1.png" alt="png"></p>
<h3 id="code-2" tabindex="-1" id="Code-3">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Define a light</span><br>light = bproc.types.Light()<br>light.set_type(<span class="hljs-string">&quot;POINT&quot;</span>)<br><span class="hljs-comment"># Sample its location in a shell around the point [1, 2, 3]</span><br>light.set_location(bproc.sampler.shell(<br>    center=[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],<br>    radius_min=<span class="hljs-number">4</span>,<br>    radius_max=<span class="hljs-number">7</span>,<br>    elevation_min=<span class="hljs-number">15</span>,<br>    elevation_max=<span class="hljs-number">70</span><br>))<br>light.set_energy(<span class="hljs-number">500</span>)<br></code></pre></td></tr></table></figure>
<blockquote>
<p>这段代码的含义是：</p>
<p>首先，创建了一个名为 light 的 BlenderProc Light 类型变量。</p>
<p>接着，通过调用 light.set_type(“POINT”) 函数，指定该光源为点光源类型，即在三维空间中的某一点产生均匀辐射的光源。</p>
<p>然后，通过调用 bproc.sampler.shell(center=[1, 2, 3], radius_min=4, radius_max=7, elevation_min=15, elevation_max=70) 函数，生成一个位于包围点 [1, 2, 3] 的球壳内的随机三维坐标位置，并将其设置为光源的位置，以实现光源位置的随机性。具体而言，函数的参数如下：</p>
<ul>
<li>center=[1, 2, 3]：球心位置为 [1, 2, 3]。</li>
<li>radius_min=4：球壳内径的最小值为 4。</li>
<li>radius_max=7：球壳外径的最大值为 7。</li>
<li>elevation_min=15：光源位置相对于球心高度的最小值为 15 度。</li>
<li>elevation_max=70：光源位置相对于球心高度的最大值为 70 度。</li>
</ul>
<p>最后，通过调用 light.set_energy(500) 函数，将光源的强度 energy 设置为 500 瓦特，以控制光照亮度。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># render the whole pipeline</span><br>data = bproc.renderer.render()<br><br><span class="hljs-comment"># Collect states of all objects</span><br>object_states = []<br><span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> objs:<br>    object_states.append(&#123;<br>        <span class="hljs-string">&quot;name&quot;</span>: obj.get_name(),<br>        <span class="hljs-string">&quot;local2world&quot;</span>: obj.get_local2world_mat()<br>    &#125;)<br><span class="hljs-comment"># Add states (they are the same for all frames here)</span><br>data[<span class="hljs-string">&quot;object_states&quot;</span>] = [object_states] * bproc.utility.num_frames()<br><br><span class="hljs-comment"># Collect state of the one light</span><br>light_state = &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: light.get_name(),<br>    <span class="hljs-string">&quot;local2world&quot;</span>: light.get_local2world_mat(),<br>    <span class="hljs-string">&quot;energy&quot;</span>: light.get_energy()<br>&#125;<br><span class="hljs-comment"># Add states (its the same for all frames here)</span><br>data[<span class="hljs-string">&quot;light_states&quot;</span>] = [light_state] * bproc.utility.num_frames()<br><br><span class="hljs-comment"># Collect state of the camera at all frames</span><br>cam_states = []<br><span class="hljs-keyword">for</span> frame <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(bproc.utility.num_frames()):<br>    cam_states.append(&#123;<br>        <span class="hljs-string">&quot;cam2world&quot;</span>: bproc.camera.get_camera_pose(frame),<br>        <span class="hljs-string">&quot;cam_K&quot;</span>: bproc.camera.get_intrinsics_as_K_matrix()<br>    &#125;)<br><span class="hljs-comment"># Adds states to the data dict</span><br>data[<span class="hljs-string">&quot;cam_states&quot;</span>] = cam_states<br></code></pre></td></tr></table></figure>
<blockquote>
<p>这段代码的含义是：</p>
<p>首先，通过调用 bproc.renderer.render() 函数，对当前的场景进行渲染，并将渲染结果存储在 data 变量中。</p>
<p>接着，通过遍历 objs 列表中的每一个对象 obj，将 obj 的名称和本地坐标系到世界坐标系的变换矩阵信息添加到 object_states 列表中。</p>
<p>然后，将 object_states 列表复制 num_frames 次，并将其作为数据字典 data 中键名为 “object_states” 的值，表示所有帧的物体状态相同。</p>
<p>接下来，将 light 对象的名称、本地坐标系到世界坐标系的变换矩阵信息和能量值信息添加到 light_state 字典中，并将其复制 num_frames 次并添加到 data 中键名为 “light_states” 的值中，表示所有帧的光源状态相同。</p>
<p>最后，通过循环遍历所有帧的索引 frame，将每一帧相机的相机坐标系到世界坐标系的变换矩阵 cam2world 和相机的内参矩阵 K 添加到 cam_states 列表中，并将其作为数据字典 data 中键名为 “cam_states” 的值，表示所有帧的相机状态。</p>
</blockquote>
<h2 id="object-selection-and-manipulation" tabindex="-1" id="Object-selection-and-manipulation">Object selection and manipulation</h2>
<h3 id="usage-3" tabindex="-1" id="Usage-4">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/basics/entity_manipulation/main.py examples/resources/scene.obj examples/basics/entity_manipulation/output<br></code></pre></td></tr></table></figure>
<h3 id="visualization-3" tabindex="-1" id="Visualization-4">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/basics/entity_manipulation/output/0.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="O1.png" alt="png"></p>
<h3 id="code-3" tabindex="-1" id="Code-4">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># load the objects into the scene</span><br>objs = bproc.loader.load_obj(args.scene)<br><br><span class="hljs-comment"># Find object with name Suzanne</span><br>suzanne = bproc.<span class="hljs-built_in">filter</span>.one_by_attr(objs, <span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Suzanne&quot;</span>)<br><span class="hljs-comment"># Set its location and rotation</span><br>suzanne.set_location(np.random.uniform([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]))<br>suzanne.set_rotation_euler([<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure>
<blockquote>
<p>这个示例的重点是使用 BlenderProc 进行过滤操作以及设置对象的旋转和位置。</p>
<p>在此过滤操作中，我们将条件设置为：<code>&quot;name&quot;: 'Suzanne'</code>，意思是我们想要选择所有满足 <code>obj.name == 'Suzanne'</code> 的对象。在这种情况下，只有一个对象符合要求。如果我们想要选择多个元素，我们可以使用 <code>bproc.filter.by_attr()</code> 函数。这样就可以选择多个对象。</p>
<p>请注意：任何给定的字符串类型属性值都可以被视为正则表达式，只需在 <code>one_by_attr fct.</code> 调用中设置 <code>regex=True</code> 即可。因此，<code>&quot;name&quot;: 'Cylinder.*'</code> 的条件将选择场景中的所有三个圆柱体。</p>
<p>要查看所有可能的属性名称，请查阅官方 Blender 文档：<a target="_blank" rel="noopener" href="https://docs.blender.org/api/current/bpy.types.Object.html%E3%80%82">https://docs.blender.org/api/current/bpy.types.Object.html。</a></p>
</blockquote>
<h2 id="material-selection-and-manipulation" tabindex="-1" id="Material-selection-and-manipulation">Material selection and manipulation</h2>
<h3 id="usage-4" tabindex="-1" id="Usage-5">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/basics/material_manipulation/main.py examples/basics/material_manipulation/scene.obj images examples/basics/material_manipulation/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/basics/material_manipulation/main.py</code>: path to the python file.</li>
<li><code>examples/basics/material_manipulation/scene.obj</code>: path to the object file with the basic scene.</li>
<li><code>images</code>: path to a folder with .jpg textures to be used in the sampling process.</li>
<li><code>examples/basics/material_manipulation/output</code>: path to the output directory.</li>
</ul>
<h3 id="visualization-4" tabindex="-1" id="Visualization-5">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/basics/material_manipulation/output/0.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="M1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Find all materials</span><br>materials = bproc.material.collect_all()<br><br><span class="hljs-comment"># Find the material of the ground object</span><br>ground_material = bproc.<span class="hljs-built_in">filter</span>.one_by_attr(materials, <span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Material.001&quot;</span>)<br><span class="hljs-comment"># Set its displacement based on its base color texture</span><br>ground_material.set_displacement_from_principled_shader_value(<span class="hljs-string">&quot;Base Color&quot;</span>, multiply_factor=<span class="hljs-number">1.5</span>)<br></code></pre></td></tr></table></figure>
<blockquote>
<p>这段代码的作用是：</p>
<ol>
<li>使用 bproc.material.collect_all()函数查找所有材质。</li>
<li>使用 bproc.filter.one_by_attr()函数通过属性查找特定材质。在这种情况下，我们使用 “name”: “Material.001” 来查找 ground object 的材质。</li>
<li>使用 ground_material.set_displacement_from_principled_shader_value()函数来设置基于其基础颜色纹理的位移。在这种情况下，我们将 multiply_factor 设置为 1.5，以增加位移强度。</li>
</ol>
<p>这段代码的目的是修改指定材质的属性，实现更具创意的渲染效果。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Collect all jpg images in the specified directory</span><br>images = <span class="hljs-built_in">list</span>(Path(args.image_dir).absolute().rglob(<span class="hljs-string">&quot;material_manipulation_sample_texture*.jpg&quot;</span>))<br><span class="hljs-keyword">for</span> mat <span class="hljs-keyword">in</span> materials:<br>    <span class="hljs-comment"># Load one random image</span><br>    image = bpy.data.images.load(filepath=<span class="hljs-built_in">str</span>(random.choice(images)))<br>    <span class="hljs-comment"># Set it as base color of the current material</span><br>    mat.set_principled_shader_value(<span class="hljs-string">&quot;Base Color&quot;</span>, image)<br></code></pre></td></tr></table></figure>
<blockquote>
<p>这段代码的作用是：</p>
<ol>
<li>使用 pathlib 库中的 Path() 函数来设置指定目录（args.image_dir）的绝对路径，并通过 rglob() 函数找到该目录下所有以 “material_manipulation_sample_texture*.jpg” 结尾的文件。</li>
</ol>
<p><img src="M2.png" alt="png"></p>
<ol start="2">
<li>遍历所有材质，为每个材质设置随机选择的纹理。在这里，我们使用了 random.choice() 函数从上一步中收集到的所有图像中随机选择一个。然后通过 mat.set_principled_shader_value() 函数将其设置为当前材质的基础颜色。</li>
</ol>
<p>这段代码的目的是为指定的 Blender 场景中的所有材质添加多样化的纹理素材，以增强渲染效果和真实感。</p>
</blockquote>
<h2 id="physics-positioning" tabindex="-1" id="Physics-positioning">Physics positioning</h2>
<h3 id="usage-5" tabindex="-1" id="Usage-6">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/basics/physics_positioning/main.py examples/basics/physics_positioning/active.obj examples/basics/physics_positioning/passive.obj examples/basics/physics_positioning/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/basics/physics_positioning/main.py</code>: path to the python file.</li>
<li><code>examples/basics/physics_positioning/active.obj</code>: path to the object file with active objects, i. e. objects which we <strong>want to</strong> participate in physics simulation.</li>
<li><code>examples/basics/physics_positioning/passive.obj</code>: path to the object file with passive objects, i. e. objects which we <strong>do not want to</strong> participate in physics simulation, e.g. plane.</li>
<li><code>examples/basics/physics_positioning/output</code>: path to the output directory.</li>
</ul>
<h3 id="visualization-5" tabindex="-1" id="Visualization-6">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/basics/physics_positioning/output/0.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="P1.png" alt="png"></p>
<h3 id="code-4" tabindex="-1" id="Code-5">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Define a function that samples the pose of a given sphere</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sample_pose</span>(<span class="hljs-params">obj: bproc.types.MeshObject</span>):<br>    obj.set_location(np.random.uniform([-<span class="hljs-number">5</span>, -<span class="hljs-number">5</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">12</span>]))<br>    obj.set_rotation_euler(bproc.sampler.uniformSO3())<br><br><span class="hljs-comment"># Sample the poses of all spheres above the ground without any collisions in-between</span><br>bproc.<span class="hljs-built_in">object</span>.sample_poses(<br>    spheres,<br>    sample_pose_func=sample_pose<br>)<br></code></pre></td></tr></table></figure>
<p>首先，我们定义一个函数，将给定的物体设置为新的姿态。然后，在 <code>bproc.object.sample_poses</code> 函数调用中使用该函数，在每个物体上调用它，然后检查是否与其他物体发生碰撞。这个过程会重复进行，直到所有物体都被放置且没有发生碰撞。</p>
<blockquote>
<p>这段代码的作用是：</p>
<ol>
<li>定义一个名为 sample_pose() 的函数，该函数接受一个 bproc.types.MeshObject 对象作为参数，并对其进行位置和旋转属性的随机抽样，以模拟物体在 3D 空间中的运动姿态。具体来说，我们使用 obj.set_location() 函数将物体的位置坐标随机设置在 [-5,-5,8] 到 [5,5,12] 的范围内，并使用 obj.set_rotation_euler() 函数将物体的欧拉旋转角度随机设置。</li>
<li>使用 bproc.object.sample_poses() 函数对所有位于地面上方的 sphere 进行姿态抽样，同时确保每个 sphere 之间没有碰撞发生。我们通过传递 spheres 和 sample_pose_func 参数来执行这一操作。其中，spheres 指代待采样的所有 sphere 对象的列表，sample_pose_func 参数指定了姿态抽样函数，即上述定义的 sample_pose() 函数。</li>
</ol>
<p>这段代码的目的是模拟物体的动态运动过程，以增加渲染效果的真实感。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Make all spheres actively participate in the simulation</span><br><span class="hljs-comment"># 通过循环遍历所有的球体对象 spheres，调用 obj.enable_rigidbody(active=True) 函数使其能够参与物理仿真。其中 active=True 代表该球体是主动物体，需要施加力和碰撞等物理效应。</span><br><span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> spheres:<br>    obj.enable_rigidbody(active=<span class="hljs-literal">True</span>)<br><span class="hljs-comment"># The ground should only act as an obstacle and is therefore marked passive.</span><br><span class="hljs-comment"># To let the spheres fall into the valleys of the ground, make the collision shape MESH instead of CONVEX_HULL.</span><br><span class="hljs-comment"># 将地面对象 ground 的 enable_rigidbody 函数的 active 设置为 False，表示它是被动物体，只参与碰撞等物理效应，并调整地面的碰撞形状为 MESH，以便让球体可以掉落到地面的洼地中。</span><br>ground.enable_rigidbody(active=<span class="hljs-literal">False</span>, collision_shape=<span class="hljs-string">&quot;MESH&quot;</span>)<br><br><span class="hljs-comment"># Run the simulation and fix the poses of the spheres at the end</span><br><span class="hljs-comment"># 调用 bproc.object.simulate_physics_and_fix_final_poses(min_simulation_time=4, max_simulation_time=20, check_object_interval=1) 函数来运行物理仿真并在结束时固定球体的位置。具体而言，min_simulation_time 和 max_simulation_time 分别指示物理仿真的最小和最大时间（秒），check_object_interval 则指示固定物体位置时检查位置的时间间隔（秒）。在本例中，物理仿真时间介于 4s 和 20s 之间，每秒钟检查一次物体位置并固定。（注意：如果没有启用物理，该函数将不起作用。）</span><br>bproc.<span class="hljs-built_in">object</span>.simulate_physics_and_fix_final_poses(min_simulation_time=<span class="hljs-number">4</span>, max_simulation_time=<span class="hljs-number">20</span>, check_object_interval=<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>
<p>这段代码的作用是：</p>
<ol>
<li>将所有 sphere 对象设置为活动态，通过启用其刚体属性（rigidbody）实现。对于地面来说，将 active 属性设置为 False，这意味着它在场景中是被动的，但可以和其他活动态物体发生交互。此外，我们还使用 MESH 碰撞形状（collision shape）而不是默认的 CONVEX_HULL 碰撞形状来设置 ground 物体的碰撞形状。需要注意的是，在更复杂的用例中使用 mesh 碰撞形状可能会导致性能问题和错误。如果出现这些情况，最好尝试使用 physics_convex_decomposition。</li>
<li>在运行物理仿真时，函数每隔 1 秒检查一次是否仍有对象在运动。如果没有，就停止仿真。然而，仿真至少运行 4 秒，最多运行 20 秒。</li>
<li>在仿真结束时，将所有 sphere 的位置重新固定。这样，我们可以轻松采样位于凹凸不平的平面上方的 sphere 的随机位置。</li>
</ol>
<p>这段代码的目的是模拟物体之间的物理交互和运动过程，以增加渲染效果的真实感。</p>
<h2 id="semantic-segmentation" tabindex="-1" id="Semantic-Segmentation">Semantic Segmentation</h2>
<h3 id="usage-6" tabindex="-1" id="Usage-7">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/basics/semantic_segmentation/main.py examples/resources/camera_positions examples/basics/semantic_segmentation/scene.blend examples/basics/semantic_segmentation/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/basics/semantic_segmentation/main.py</code>: path to the python file.</li>
<li><code>examples/resources/camera_positions</code>: text file with parameters of camera positions.</li>
<li><code>examples/basics/semantic_segmentation/scene.blend</code>: path to the blend file with the basic scene.</li>
<li><code>examples/basics/semantic_segmentation/output</code>: path to the output directory.</li>
</ul>
<h3 id="visualization-6" tabindex="-1" id="Visualization-7">Visualization</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc vis hdf5 examples/basics/semantic_segmentation/output\1.hdf5<br></code></pre></td></tr></table></figure>
<p><img src="S1.png" alt="png"></p>
<h3 id="code-5" tabindex="-1" id="Code-6">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># load the objects into the scene</span><br>objs = bproc.loader.load_blend(args.scene)<br></code></pre></td></tr></table></figure>
<p>这个代码段加载了 <code>.blend</code> 文件，从文件中仅提取网格对象，而不是提取该 <code>.blend</code> 文件中存储的所有信息。</p>
<p>需要注意的是，在加载的 <code>.blend</code> 文件中，所有对象都已经设置了属性名称为“category_id”的自定义属性。这可以通过手动执行以下步骤来完成：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">obj.set_cp(<span class="hljs-string">&quot;category_id&quot;</span>, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># enable segmentation masks (per class and per instance)</span><br>bproc.renderer.enable_segmentation_output(map_by=[<span class="hljs-string">&quot;category_id&quot;</span>, <span class="hljs-string">&quot;instance&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>])<br></code></pre></td></tr></table></figure>
<blockquote>
<p>这个模块可以将任何类型的对象相关信息映射到图像或场景中对象的索引列表。例如，如果你想要将自定义属性 <code>category_id</code> 映射到图像上，可以设置 <code>map_by=[&quot;category_id&quot;]</code>。然后，每个像素都会被分配一个现有像素中的对象的自定义属性 <code>category_id</code>。如果它被设置为实例化，每个像素将获得一个场景中对象的 id，这些 id 对于多帧是一致的，这也意味着并不是每个图像中都必须出现所有的 id。</p>
<p>此外，还可以将其设置为对象类的不同自定义属性或属性，如“name”，这将返回每个对象的名称。这无法保存在图像中，因此需要生成一个额外的字典，附加到最终的 <code>.hdf5</code> 容器中。其中，它将每个实例编号映射到一个名称。如果有不能存储在图像中的键，则必须生成一个实例图像，否则会引发错误消息。</p>
<p>例如，也可以使用属性：“location”。这将访问每个对象的位置并将其添加到字典中。需要注意的是，如果背景可见，则会引发错误，因为背景没有位置属性。这可以通过提供默认值来避免，例如：<code>default_values=&#123;&quot;location: [0,0,0]&#125;</code>。</p>
</blockquote>
<h2 id="camera-object-pose-setting" tabindex="-1" id="Camera-Object-Pose-Setting">Camera Object Pose Setting</h2>
<h3 id="usage-7" tabindex="-1" id="Usage-8">Usage</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blenderproc run examples/basics/camera_object_pose/main.py examples/basics/camera_object_pose/obj_000004.ply examples/basics/camera_object_pose/output<br></code></pre></td></tr></table></figure>
<ul>
<li><code>examples/basics/camera_object_pose/main.py</code>: Python 文件的路径。</li>
</ul>
<p>随后的参数用于填充配置文件中的占位符，例如 <code>&lt;args:0&gt;</code>。</p>
<ul>
<li><code>examples/basics/camera_object_pose/obj_000004.ply</code>: 模型文件的路径，在这里是 <code>hb</code> 数据集中的一个基本对象。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">ply<br>format ascii 1.0<br>element vertex 59070<br>property float x<br>property float y<br>property float z<br>property float nx<br>property float ny<br>property float nz<br>property uchar red<br>property uchar green<br>property uchar blue<br>property uchar alpha<br>element face 118136<br>property list uchar int vertex_indices<br>end_header<br>-74.8915252685546875 -19.9308242797851562 -39.8891220092773438 -0.881483376026153564 0.153793498873710632 -0.446469098329544067 201 194 89 255<br>-74.283599853515625 -19.7608661651611328 -40.8353233337402344 -0.821542501449584961 0.139040097594261169 -0.552933812141418457 203 203 102 255<br>-74.7142333984375 -19.3212966918945312 -39.9898719787597656 -0.876855313777923584 0.193883597850799561 -0.43992498517036438 201 196 92 255<br><br>...<br><br>3 276 277 275<br>3 279 278 249<br>3 279 249 252<br><br>...<br></code></pre></td></tr></table></figure>
<blockquote>
<p>这个 ply 文件包含了一个三角网格模型的数据，其中每行数据表示一个顶点或者一个三角面的信息。下面是文件中的每个部分的解释：</p>
<p>第一行指定了文件使用的 PLY 文件格式。</p>
<p>第二行指定了文件的数据格式为 ASCII 格式，版本为 1.0。</p>
<p>第三行声明该模型包含 59070 个顶点。</p>
<p>第四行到第十行分别声明了顶点数据中包含的属性，分别是 x,y,z 坐标和法线 nx,ny,nz 以及颜色属性 red,green,blue,alpha。</p>
<p>第十一行声明该模型包含 118136 个三角形（即面）。</p>
<p>第十二行定义了面数据的属性列表，包括每个面由几个顶点组成以及对应的顶点索引。</p>
<p>第十三行是文件头与数据部分的分隔符。</p>
<p>从第十四行开始每一行都表示一个顶点的信息，按照 x,y,z 坐标、法线 nx,ny,nz 和颜色属性 red,green,blue,alpha 依次排列。</p>
<p>从最后一个顶点的信息结束后，文件中间间隔了若干空行，接下来每一行表示一个三角形面，格式为&quot;3 a b c&quot;，表示该面由三个顶点 a,b,c 组成，a,b,c 分别是该点在顶点列表中的索引。</p>
<p>总的来说，这个 PLY 文件描述了一个三角网格模型，包含了所需的顶点和面数据，可以被一些三维建模软件或者游戏引擎读取和展示。</p>
</blockquote>
<ul>
<li><code>examples/basics/camera_object_pose/output</code>: 输出目录的路径。</li>
</ul>
<p><img src="C1.png" alt="png"></p>
<center>BOP 数据集形式的输出</center>
<h3 id="code-6" tabindex="-1" id="Code-7">Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Use vertex color for texturing</span><br><span class="hljs-keyword">for</span> mat <span class="hljs-keyword">in</span> obj.get_materials():<br>    mat.map_vertex_color()<br><span class="hljs-comment"># Set pose of object via local-to-world transformation matrix</span><br>obj.set_local2world_mat(<br>    [[<span class="hljs-number">0.331458</span>, -<span class="hljs-number">0.9415833</span>, <span class="hljs-number">0.05963787</span>, -<span class="hljs-number">0.04474526765165741</span>],<br>    [-<span class="hljs-number">0.6064861</span>, -<span class="hljs-number">0.2610635</span>, -<span class="hljs-number">0.7510136</span>, <span class="hljs-number">0.08970402424862098</span>],<br>    [<span class="hljs-number">0.7227108</span>, <span class="hljs-number">0.2127592</span>, -<span class="hljs-number">0.6575879</span>, <span class="hljs-number">0.6823395750305427</span>],<br>    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1.0</span>]]<br>)<br><span class="hljs-comment"># Scale 3D model from mm to m</span><br>obj.set_scale([<span class="hljs-number">0.001</span>, <span class="hljs-number">0.001</span>, <span class="hljs-number">0.001</span>])<br><span class="hljs-comment"># Set category id which will be used in the BopWriter</span><br>obj.set_cp(<span class="hljs-string">&quot;category_id&quot;</span>, <span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>
<ul>
<li>将所有材质转换为顶点颜色（vertex color）材质，并直接使用每个加载的 .ply 对象的顶点颜色。这意味着，我们不再使用原始材质文件，而是用顶点颜色来渲染场景。</li>
<li>设置物体姿态的 matrix_world 属性为米（meter）单位。</li>
<li>按照每个维度的尺寸比例，将模型从毫米（mm）单位缩放到米（meter）单位。需要注意的是，如果模型已经以米（meter）为单位，则不需要执行这一步操作。</li>
<li>设置一个新的自定义属性 <code>&quot;category_id&quot;</code>，并将其设置为 <code>1</code>。后面的分割渲染器将使用该属性。</li>
</ul>
<p>这段代码的目的是对加载的模型进行预处理和优化，以便更好地适应后续渲染流程的需要。其中，将材质转换为顶点颜色材质可以减少纹理贴图的计算量，使场景更易于渲染；缩放模型到标准的米（meter）单位可以方便控制场景尺寸及物体之间距离的关系；设置自定义属性可以增加场景元素的分类信息，让后续的分割渲染器能够更好地区分不同的物体。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Set intrinsics via K matrix</span><br><span class="hljs-comment"># 通过相机矩阵 K 设置相机内参（intrinsics）。</span><br><span class="hljs-comment"># K 矩阵包括相机的焦距、主点和畸变参数等，用于描述相机的内部光学特性。函数将 K 矩阵作为参数，同时指定了最终图像的宽度和高度。</span><br>bproc.camera.set_intrinsics_from_K_matrix(<br>    [[<span class="hljs-number">537.4799</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">318.8965</span>],<br>     [<span class="hljs-number">0.0</span>, <span class="hljs-number">536.1447</span>, <span class="hljs-number">238.3781</span>],<br>     [<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>]], <span class="hljs-number">640</span>, <span class="hljs-number">480</span><br>)<br><span class="hljs-comment"># Set camera pose via cam-to-world transformation matrix</span><br><span class="hljs-comment"># 通过摄像机到世界坐标系的变换矩阵设置相机姿态（pose）。其中，变换矩阵 cam2world 描述了相机坐标系相对于世界坐标系的变换关系。该变换矩阵通常由外部传感器提供，如惯性测量单元（IMU）、GPS 等。</span><br>cam2world = np.array([<br>    [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>    [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>],<br>    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>]<br>])<br><span class="hljs-comment"># Change coordinate frame of transformation matrix from OpenCV to Blender coordinates</span><br><span class="hljs-comment"># 由于使用的是 OpenCV 坐标系，所以需要将坐标系转换为 Blender 中的坐标系。</span><br>cam2world = bproc.math.change_source_coordinate_frame_of_transformation_matrix(cam2world, [<span class="hljs-string">&quot;X&quot;</span>, <span class="hljs-string">&quot;-Y&quot;</span>, <span class="hljs-string">&quot;-Z&quot;</span>])<br>bproc.camera.add_camera_pose(cam2world)<br></code></pre></td></tr></table></figure>
<blockquote>
<p>这段代码的目的是对相机的内部光学特性和相对位置进行设置。通过设置相机内参和姿态，可以精确地模拟相机在场景中的位置、朝向，以及捕捉图像时的畸变效果等。这有助于实现更逼真的渲染效果，并提高视觉算法的精度。</p>
</blockquote>
<ul>
<li>通过调用 <code>set_intriniscs_from_K_matrix</code> 来设置相机的 K 矩阵。</li>
<li>相机的位姿由其世界矩阵定义，在这种情况下，它只是单位矩阵。</li>
<li>将相机源帧更改为匹配 Blender 帧（这将从 OpenCV 坐标系转换为 Blender 的坐标系）。</li>
<li>最后，将这个新的相机矩阵添加到位姿中，即可渲染。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># render the whole pipeline</span><br>data = bproc.renderer.render()<br><br><span class="hljs-comment"># Write object poses, color and depth in bop format</span><br>bproc.writer.write_bop(args.output_dir, [obj], data[<span class="hljs-string">&quot;depth&quot;</span>], data[<span class="hljs-string">&quot;colors&quot;</span>], m2mm=<span class="hljs-literal">True</span>, append_to_existing_output=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>
<blockquote>
<p>BOP 数据集是一个公共的工业场景物体姿态估计数据集，包含了 80 个具有挑战性的工业部件，每个部件都有不同的材质、变形、表面纹理和反光性质。BOP 数据集中每个部件都拍摄了数百张带有真实噪声深度信息和 RGB 图像的灰度图。此外，BOP 数据集还提供了每个部件的正式模型，即 CAD 文件，以便将您的方法与 CAD 进行比较。BOP 的主要目的是为评估工业场景物体姿态估计算法提供标准化基准。</p>
</blockquote>
<ul>
<li>保存 BOP 数据集中提供的所有姿态和相机信息。</li>
<li><code>&quot;m2mm&quot;</code> 将姿态转换为毫米，与原始的 BOP 标注一致。如果想要使用米作为单位则设置为 False。</li>
<li><code>&quot;append_to_existing_output&quot;</code> 表示如果选择了相同的输出文件夹，则数据将被追加而不是覆盖。</li>
</ul>

            </article>
            
	<div class="rightside">
	
		<div class="rightside-button" id="js-aside">
			<span>
				<img no-lazy src="/images/icon/aside.png" class="rightside-button-icon" alt="Icon">
			</span>
		</div>
		<script>
			$("#js-aside").click(function () {
				onShowAsideButton();
			});
		</script>
	
	<div class="rightside-button" id="js-toggle_theme">
		<span>
			<img no-lazy src="/images/icon/toggle_theme.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	
<script src="/js/plugins/goto_position.js"></script>

	
	<div class="rightside-button" id="js-go_top">
		<span>
			<img no-lazy src="/images/icon/go_top.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>
	<div class="rightside-button" id="js-go_bottom">
		<span>
			<img no-lazy src="/images/icon/go_bottom.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	<script>
		setToggleThemeButtonListener();
	</script>
	<script>
		$('#js-go_top')
		.gotoPosition( {
			speed: 300,
			target: 'top',
		} );
		$('#js-go_bottom')
		.gotoPosition( {
			speed: 300,
			target: 'bottom',
		} );
	</script>
</div>


<div class="post-bottom">
    
        <div class="post-paging">     
            <div class="post-paging-last">
                
                    <a href="/posts/Blender-BlenderProc%20Examples%20overview-Advanced%20Examples/">
                        上一篇：Blender-BlenderProc Examples overview-Advanced Examples
                    </a>
                
            </div>
            <div class="post-paging-next">
                
                    <a href="/posts/Paper-BlenderProc/">
                        下一篇：Paper-BlenderProc
                    </a>
                
            </div>
        </div>
    
    
    
        
            <div class="giscus comments"></div>
            <script>
                var scriptElement = document.createElement('script');
                scriptElement.src = 'https://giscus.app/client.js';
                scriptElement.setAttribute('data-repo', 'GZ-Metal-Cell/GZ-Metal-Cell.github.io');
                scriptElement.setAttribute('data-repo-id', 'R_kgDOIHLEOQ');
                scriptElement.setAttribute('data-category', 'Announcements');
                scriptElement.setAttribute('data-category-id', 'DIC_kwDOIHLEOc4CcVwP');
                scriptElement.setAttribute('data-mapping', 'title');
                scriptElement.setAttribute('data-strict', '1');
                scriptElement.setAttribute('data-reactions-enabled', '');
                scriptElement.setAttribute('data-emit-metadata', '0');
                scriptElement.setAttribute('data-input-position', 'bottom');
                scriptElement.setAttribute('data-theme', localStorage.getItem('theme') === 'light' ? 'light' : 'dark_high_contrast');
                scriptElement.setAttribute('data-lang', 'zh-CN');
                
                scriptElement.setAttribute('crossorigin', 'anonymous');
                scriptElement.async = true;
                document.head.appendChild(scriptElement);
            </script>
        
    
</div>
        </div>
    </main>
    
        <aside class="main-aside">
    
<script src="/js/widgets/aside.js"></script>

    <script>
        showAside();
    </script>

    <div class="aside-top">
        <div class="aside-top-about aside-card">
            <a href="/about" class="aside-top-about-portrait">
                <img no-lazy src="/about/portrait.png" alt="Q">
            </a>
            <div class="aside-top-about-info">
                <span class="author"> Zi-Zi</span>
                <span class="description">不以物喜，不以己悲。</span>
            </div>              
            <div class="aside-top-about-site">
                <a href="/categories" class="aside-top-about-site-item">
                    <span class="title">类别</span>
                    <span class="count">5</span>
                </a>
                <a href="/tags" class="aside-top-about-site-item">
                    <span class="title">标签</span>
                    <span class="count">122</span>
                </a>
                <a href="/archives" class="aside-top-about-site-item">
                    <span class="title">归档</span>
                    <span class="count">438</span>
                </a>
            </div>
            <div class="aside-top-about-contact">
                
                    
                        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
                            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
                            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
                            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
                            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
                        </a>
                    
                
            </div>
        </div> 

        
            <div class="aside-top-series aside-card">
                <ol class="aside-top-series-content">
                    
                    
                    
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                        
                    
                        
                        
                            
                                
                            
                                
                            
                                
                            
                        
                    
                </ol>
                <div class="aside-top-series-title">
                    <h1>
                        <a href="/tags/BlenderProc">标签：BlenderProc</a>
                    </h1>
                    <span id="serial-number">0/0</span>
                </div>
            </div>
            <script>
                activeSeriesItem();
            </script> 
        
    </div>

    <div class="aside-bottom">
        
            <script>
                
                    const tocCollapsed = true;
                
                
                    const tocDepth = 6;
                
                var headerString = '';
                for (let i = 1; i <= tocDepth; i++) {
                    if (i === 1) {
                        headerString += 'h1';
                    } else {
                        headerString += ', h' + i;
                    }
                }
                hbeToc();
            </script>
            <div class="aside-bottom-toc aside-card">
                <div class="aside-bottom-toc-title">
                    <h1>目录</h1>
                    <span class="toc-percentage"></span>
                </div>
                <ol class="aside-bottom-toc-content"></ol>
            </div>
        
    </div>
</aside>
    
</div>
		<footer>
	<div class="content">
		
			<span>©2022-2025&nbsp;By&nbsp;<a href="/about">Zi-Zi</a>.</span>
		
		<span><a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> theme by <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell/hexo-theme-quieter">Quieter</a>.</span>
		
			<span style="display: flex;">
				<img no-lazy alt="icp" src="/images/icp_icon.png" style="width: 16px; height: 16px;">
				<a href="https://icp.gov.moe/?keyword=20241647" target="_blank">萌 ICP 备 20241647 号</a>
			</span>
		
	</div>

	
<script src="/js/plugins/ref.js"></script>

	
<script src="/js/plugins/highlight_tools.js"></script>

	<script>
		const  COPY_ICON = "/images/icon/copy.png";
		const CLOSE_CODE_BLOCK_ICON = "/images/icon/close_code_block.png";
		const HIGHLIGHT_SHRINK = "";
		const HIGHLIGHT_HEIGHT_LIMIT = "";
	</script>

	
	
	<!-- Analytics -->

    
        <!-- Busuanzi Analytics -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
        <!-- Baidu Analytics -->
        <script defer>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?e57cf62289f84322ebff116e8b3d343e";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
    


	

	
		
			
				<link rel="stylesheet" href="/css/plugins/katex/katex.min.css">
				<script src="/js/plugins/copy-tex.js"></script>
			
		
	

    
		
<link rel="stylesheet" href="/css/plugins/textIndent.css">

		
<script src="/js/plugins/textIndent.js"></script>

	

	
	
	
		<script>
			if (typeof init === 'function') {
				init();
			}
		</script>
	

	
		
	

	

	<!--
		
<script src="/js/plugins/jquery.pjax.min.js"></script>

		<script>
			$(document).pjax('a[target!=_blank]', 'main', {
				fragment: 'main',
				timeout: 8000
			});

			$(document).on('pjax:complete', function() {
			});
		</script> 
	-->
	<script>
		console.log('\n %c Hexo-Quieter 主题 %c https://github.com/GZ-Metal-Cell/hexo-theme-quieter \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
	</script>
</footer>
	</body>

	<!-- Hexo-Quieter 主题  https://github.com/GZ-Metal-Cell/hexo-theme-quieter -->
</html>

