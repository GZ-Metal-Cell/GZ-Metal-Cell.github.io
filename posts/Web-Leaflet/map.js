// åˆ›å»ºä¸€ä¸ª Leaflet åœ°å›¾å¯¹è±¡ï¼Œè®¾ç½®äº†ä¸€äº›å‚æ•°ï¼Œå¦‚ç¼©æ”¾çº§åˆ«ã€æœ€å¤§ç¼©æ”¾çº§åˆ«ã€æ˜¯å¦å¯ç¼–è¾‘ç­‰ï¼Œå¹¶å°†åœ°å›¾è§†å›¾ç§»åŠ¨åˆ°æŒ‡å®šçš„ç»çº¬åº¦ä½ç½®ã€‚
var map = L.map('map',
    {
        zoomSnap: 0.1, // åœ°å›¾çš„æœ‰æ•ˆç¼©æ”¾çº§åˆ«
        maxZoom: 18,  // æœ€å¤§ç¼©æ”¾çº§åˆ«
        // crs: L.CRS.EPSG4326,  // é«˜å¾·ä¸æ˜¯è¿™ä¸ªåæ ‡ç³»   
        zoomControl: true,
        editable: true,
        // wheelPxPerZoomLevel:	60  // é¼ æ ‡æ»šè½®ç¼©æ”¾ è¾ƒå°çš„å€¼å°†ä½¿æ»šè½®è½®ç¼©æ”¾æ›´å¿«
    }).setView([26.078799594917704, 119.29471468823111], 14);  // å¾…æ˜¾ç¤ºåœ°ç‚¹çš„ç»çº¬åº¦å’Œç¼©æ”¾çº§åˆ«

// åˆ›å»ºä¸€ä¸ªç“¦ç‰‡å›¾å±‚å¯¹è±¡ baseLayerï¼ŒæŒ‡å®šäº†é«˜å¾·åœ°å›¾çš„ç“¦ç‰‡åœ°å€å’Œä¸€äº›å‚æ•°ï¼Œç„¶åå°†è¯¥å›¾å±‚æ·»åŠ åˆ°åœ°å›¾ä¸­ã€‚
// ç›®å‰ http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x} ä¹Ÿæ˜¯å¯ç”¨çš„ã€‚
let baseLayer = L.tileLayer("http://webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}", {
    attribution: '&copy; é«˜å¾·åœ°å›¾',
    maxZoom: 18,  // åº”ä¸ var map é‡Œçš„ maxZoom ä¸€è‡´ï¼Œä¸ç„¶æ˜¾ç¤ºä¸å‡ºæ¥å›¾ç‰‡ã€‚
    minZoom: 3,
    subdomains: "1234",
    zoom: 3
});
map.addLayer(baseLayer);

// ç›‘å¬åœ°å›¾çš„ç‚¹å‡»äº‹ä»¶ï¼Œå½“ç”¨æˆ·ç‚¹å‡»åœ°å›¾æ—¶ä¼šè¾“å‡ºå½“å‰ç‚¹å‡»çš„ç»çº¬åº¦ä¿¡æ¯ã€‚
map.on('click', function (event) {
    // console.log(event); // è¿”å›å½“å‰ç‚¹å‡»çš„æ‰€æœ‰ä¿¡æ¯
    let { lat, lng } = event.latlng;  // ç»çº¬åº¦ä¿¡æ¯
    console.log("[" + lat + ", " + lng + "]");  // è¾“å‡ºç»çº¬åº¦ä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•
});

// ç›‘å¬åœ°å›¾çš„ç¼©æ”¾å¼€å§‹äº‹ä»¶ï¼ˆzoomstartï¼‰ï¼Œå½“ç¼©æ”¾çº§åˆ«å‘ç”Ÿæ”¹å˜æ—¶ä¼šè¾“å‡ºå½“å‰çš„ç¼©æ”¾çº§åˆ«ã€‚
map.on('zoomstart', function () {
    var zoomLevel = map.getZoom();
    console.log(zoomLevel); // æ˜¾ç¤ºç¼©æ”¾ç­‰çº§ï¼ˆå¥½åƒåªèƒ½æ˜¾ç¤ºæ»šåŠ¨ä¹‹å‰çš„ï¼‰
});

// ç»™æŸä¸ªç‚¹åšæ ‡è®°
var marker = L.marker([26.081476491742904, 119.29704755981834]).addTo(map);
marker.bindPopup("<b>è¿™ä¸ªåœ°æ–¹çœŸæ˜¯å¤ªå¥½ç©äº†ï¼</b><br/>è¿™æ˜¯å±è‚¡æ ‘çš„åæ ‡ğŸ˜ï¼");

// å®šä¹‰è·¯å¾„ç‚¹çš„åæ ‡æ•°ç»„
var latlngs = [
    [26.08009367221409,119.29242494512384],
    [26.080079217568272,119.29223174932305],
    [26.08009367221409,119.29216735072279],
    [26.080310491686973,119.29212978487263],
    [26.080296037067946,119.29162532917066],
    [26.080453431663422,119.29152938351272],
    [26.080381158638648,119.29095499726753],
    [26.07820812885429,119.29081367507568],
    [26.07815030932909,119.29159187052262],
    [26.078212947146778,119.29209635584687]
];
// åˆ›å»ºè·¯å¾„å¯¹è±¡å¹¶æ·»åŠ åˆ°åœ°å›¾ä¸Š
var polyline = L.polyline(latlngs, {color: 'green'}).addTo(map);
polyline.bindPopup("ä¸Šå­¦å»äº†ğŸ˜­");

// å®šä¹‰å¤šè¾¹å½¢çš„è¾¹ç•Œç‚¹åæ ‡æ•°ç»„
var latlngs = [
    [26.074889884389435,119.2912822984996],
    [26.073579264327183,119.2915720922007],
    [26.073902102248386,119.2926293025549],
    [26.07466823643904,119.29226437715347],
    [26.075150079274067,119.29180822040166]
];
// åˆ›å»ºå¤šè¾¹å½¢å¯¹è±¡å¹¶æ·»åŠ åˆ°åœ°å›¾ä¸Š
var polygon = L.polygon(latlngs, {color: 'blue'}).addTo(map);
polygon.bindPopup("ä¹ŒçŸ³å±±ä¸‹ï¼Œç™½é©¬æ²³æ—~");

// ç»˜åˆ¶åœ†
var circle = L.circle([26.077862817425885, 119.29212395568047], {
    color: 'red',
    fillColor: '#f03',
    fillOpacity: 0.5,
    radius: 32.6  // è¿™ä¸ªå•ä½æ˜¯ç±³ã€‚
}).addTo(map);
circle.bindPopup("é˜¿å…¬é˜¿å¦ˆå®¶~");

// å®šä¹‰çŸ©å½¢çš„åœ°ç†è¾¹ç•Œ
var bounds = [[26.081312674254516, 119.2925756072068], [26.08073449305117, 119.29365965031108]];
// åˆ›å»ºä¸€ä¸ªæ©™è‰²çš„çŸ©å½¢
var rectangle = L.rectangle(bounds, {color: "#ff7800", weight: 1}).addTo(map);
rectangle.bindPopup("å°±æ²¡è§å®ƒå¼€å¼ è¿‡ï¼ğŸ˜ ");

// åˆ›å»º SVGï¼Œä½†å¥½åƒ Popup ä¸èƒ½è¢«ç‚¹å¼€
var svgElement = document.createElementNS("http://www.w3.org/2000/svg", "svg");
svgElement.setAttribute('xmlns', "http://www.w3.org/2000/svg");
svgElement.setAttribute('viewBox', "0 0 200 200");
svgElement.innerHTML = '<rect width="200" height="200"/><rect x="75" y="23" width="50" height="50" style="fill:red"/><rect x="75" y="123" width="50" height="50" style="fill:#0013ff"/>';
var svgElementBounds = [[26.077898151572324, 119.30137317389199], [26.07745968496554, 119.30187226304396]];
var svg = L.svgOverlay(svgElement, svgElementBounds).addTo(map);

// çº¯ popup
var popup = L.popup()
    .setLatLng([26.079171783403833, 119.2939243421818])
    .setContent("å°è¿·ç³Šå’Œå°å°æ€ªæœ€å–œæ¬¢åƒçš„ç™¾å§“é²œæ~")
    .openOn(map);