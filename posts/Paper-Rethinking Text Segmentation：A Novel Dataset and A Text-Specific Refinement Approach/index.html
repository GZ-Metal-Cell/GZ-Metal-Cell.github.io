<!DOCTYPE html>
<html lang=zh-CN data-theme="light">
	
<script src="/js/plugins/toggleTheme.js"></script>

	<script>
		setTheme();
	</script>
	<head>
		
<title>Paper-Rethinking Text Segmentationï¼šA Novel Dataset and A Text-Specific Refinement Approach | Zi-Zi's Journey</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/images/icon/favicon.ico">
<link href="/css/plugins/print.css" media="print" rel="stylesheet" />

<link rel="stylesheet" href="/css/index.css">



<meta name="keywords" content="Python,è®ºæ–‡,Pytorch,ä»£ç å¤ç°,å›¾åƒåˆ†å‰²,">
<meta name="description" content="è®ºæ–‡é˜…è¯»ã€‚">



<script src="/js/plugins/jquery.min.js"></script>


<script src="/js/plugins/hljs.min.js"></script>


<script src="/js/plugins/init.js"></script>


<script src="/js/plugins/hide.js"></script>


<script src="/js/plugins/tabs.js"></script>



    



    
<script src="/js/plugins/alert-title.js"></script>

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-base.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-dark-class.css">

    
<link rel="stylesheet" href="/css/plugins/github-alerts/github-colors-light.css">






    

	<meta name="generator" content="Hexo 6.1.0"></head>

	<body>
		<header class="sticky-header">
	<nav>
		<div class="nav-left">
			<a href="/" class="logo">
				<img no-lazy src="/images/headers_icon/logo.webp" alt="Quieter">
			</a>
			<ul class="breadcrumb" id="breadcrumb"></ul>
		</div>
		<div class="nav-right">
			<ul>
				
					<li>
						<a href="/">
						  ä¸»é¡µ
						</a>
					</li>
				
					<li>
						<a href="/categories">
						  ç±»åˆ«
						</a>
					</li>
				
					<li>
						<a href="/tags">
						  æ ‡ç­¾
						</a>
					</li>
				
					<li>
						<a href="/archives">
						  å½’æ¡£
						</a>
					</li>
				
					<li>
						<a href="/galleries">
						  ç›¸å†Œ
						</a>
					</li>
				
					<li>
						<a href="/links">
						  é“¾æ¥
						</a>
					</li>
				
					<li>
						<a href="/about">
						  å…³äº
						</a>
					</li>
								  
			</ul>
		</div>
		<div class="nav-right-close">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
				<path fill="none" d="M0 0h24v24H0z" />
				<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
			</svg>
		</div>

		<div class="sidebar">
    <div class="topo">
        <p>Zi-Zi's Journey</p>
    </div>
    <ul>
        
        <li>
            <a href="/">
                ä¸»é¡µ
            </a>
        </li>
        
        <li>
            <a href="/categories">
                ç±»åˆ«
            </a>
        </li>
        
        <li>
            <a href="/tags">
                æ ‡ç­¾
            </a>
        </li>
        
        <li>
            <a href="/archives">
                å½’æ¡£
            </a>
        </li>
        
        <li>
            <a href="/galleries">
                ç›¸å†Œ
            </a>
        </li>
        
        <li>
            <a href="/links">
                é“¾æ¥
            </a>
        </li>
        
        <li>
            <a href="/about">
                å…³äº
            </a>
        </li>
        
    </ul>
    <div class="sidebar-footer">
        
        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
        </a>
        
        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
        </a>
        
    </div>
</div>
<div class='shelter'>
    <script>
        $(function() {
            $('.nav-right-close > svg').click(function() {
                $('.sidebar').animate({
                    right: "0"
                }, 500);
                $('.shelter').fadeIn("slow");
            
                var element = $('.topo');
                element.addClass('custom-style');
            
                var links = null;
                if ("") {
                    links = "".split(',');
                } else {
                    links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
                }
            
                var randomLink = links[Math.floor(Math.random() * links.length)];
                element.css('background-image', "url('" + randomLink + "')");
            });
          
            $('.shelter').click(function(e) {
                $('.sidebar').animate({
                    right: "-100%"
                }, 500);
                $('.shelter').fadeOut("slow");
            });
        });      
    </script>
</div>
	</nav>

	
		<div class="header-background"></div>
	

	<script>
		const name = 'post';
		const ul = document.querySelectorAll('.nav-right ul')[0];
		const lis = ul.querySelectorAll('li');

		if (name == 'home') {
			lis[0].classList.add('select');
		} else {
			for (let i = 0; i < lis.length; i++) {
				const li = lis[i];
				const a = li.querySelector('a');
				if (name === a.href.split('/')[3]) {
					li.classList.add('select');
				}
			}
		}
	</script>
	
	<script>
		var element = document.querySelector('.header-background');
		if(element) {
			element.classList.add('custom-style');
			var links = null;
			if("")
			{
				links = "".split(',');
			} else
			{
				links = "/images/random_top_img/01.webp,/images/random_top_img/02.webp,/images/random_top_img/03.webp,/images/random_top_img/04.webp,/images/random_top_img/05.webp,/images/random_top_img/06.webp,/images/random_top_img/07.webp,/images/random_top_img/08.webp,/images/random_top_img/09.webp,/images/random_top_img/10.webp,/images/random_top_img/11.webp,/images/random_top_img/12.webp,/images/random_top_img/13.webp,/images/random_top_img/14.webp,/images/random_top_img/15.webp,/images/random_top_img/16.webp,/images/random_top_img/17.webp,/images/random_top_img/18.webp,/images/random_top_img/19.webp,/images/random_top_img/20.webp,/images/random_top_img/21.webp,/images/random_top_img/22.webp,/images/random_top_img/23.webp,/images/random_top_img/24.webp,/images/random_top_img/25.webp,/images/random_top_img/26.webp,/images/random_top_img/27.webp,/images/random_top_img/28.webp,/images/random_top_img/29.webp,/images/random_top_img/30.webp,/images/random_top_img/31.webp,/images/random_top_img/32.webp,/images/random_top_img/33.webp,/images/random_top_img/34.webp,/images/random_top_img/35.webp,/images/random_top_img/36.webp,/images/random_top_img/37.webp,/images/random_top_img/38.webp,/images/random_top_img/39.webp,/images/random_top_img/40.webp,/images/random_top_img/41.webp,/images/random_top_img/42.webp,/images/random_top_img/43.webp,/images/random_top_img/44.webp,/images/random_top_img/45.webp,/images/random_top_img/46.webp,/images/random_top_img/47.webp,/images/random_top_img/48.webp,/images/random_top_img/49.webp,/images/random_top_img/50.webp,/images/random_top_img/51.webp,/images/random_top_img/52.webp,/images/random_top_img/53.webp,/images/random_top_img/54.webp,/images/random_top_img/55.webp,/images/random_top_img/56.webp,/images/random_top_img/57.webp".split(',');
			}
			var randomLink = links[Math.floor(Math.random() * links.length)];
			element.style.backgroundImage = "url('" + randomLink + "')";
		}
	</script>

	
<script src="/js/plugins/breadcrumb.js"></script>

	<script>
		var menus_title = [];
		
			menus_title.push({home: 'ä¸»é¡µ'});
		
			menus_title.push({categories: 'ç±»åˆ«'});
		
			menus_title.push({tags: 'æ ‡ç­¾'});
		
			menus_title.push({archives: 'å½’æ¡£'});
		
			menus_title.push({galleries: 'ç›¸å†Œ'});
		
			menus_title.push({links: 'é“¾æ¥'});
		
			menus_title.push({about: 'å…³äº'});
		
		
			
				postsBreadcrumb(
					document.getElementById('breadcrumb'),
					"ç±»åˆ«",
					"/categories",
					"å­¦ä¹ ",
					"/categories/å­¦ä¹ ",
					1
				);
			
		
	</script>
</header>

<div class="main-wrapper">
    <main class="post">
        <header class="main-header">
	
		
			
				
<link rel="stylesheet" href="/css/plugins/fancybox.css">

				
<script src="/js/plugins/fancybox.umd.js"></script>

				
<script src="/js/plugins/fancybox.js"></script>

			
			<div class="post-header-background-content">
				<ul class="post-header-tag">
					
						
							<li><a href="/tags/Python"><span>Python</span></a></li>
						
							<li><a href="/tags/è®ºæ–‡"><span>è®ºæ–‡</span></a></li>
						
							<li><a href="/tags/Pytorch"><span>Pytorch</span></a></li>
						
							<li><a href="/tags/ä»£ç å¤ç°"><span>ä»£ç å¤ç°</span></a></li>
						
							<li><a href="/tags/å›¾åƒåˆ†å‰²"><span>å›¾åƒåˆ†å‰²</span></a></li>
						
					
				</ul>
				
				<h1>Paper-Rethinking Text Segmentationï¼šA Novel Dataset and A Text-Specific Refinement Approach</h1>
		
				
					<div class="post-header-desc">
						<svg t="1714702231661" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="1154" xmlns:xlink="http://www.w3.org/1999/xlink"
						width="20" height="20">
						<path
							d="M778.24 117.76A46.08 46.08 0 0 1 824.32 163.84v430.08c0 8.4992-4.13696 16.01536-10.50624 20.6848l-0.24576 0.2048L587.5712 846.09024a35.84 35.84 0 0 1-61.48096-25.06752v-220.9792a46.08 46.08 0 0 1 46.08-46.08l200.94976-0.02048V168.96h-522.24v686.08H389.12c13.25056 0 24.1664 10.07616 25.47712 22.97856l0.12288 2.62144c0 14.1312-11.4688 25.6-25.6 25.6h-143.36A46.08 46.08 0 0 1 199.68 860.16V163.84A46.08 46.08 0 0 1 245.76 117.76h532.48z m-26.78784 487.38304h-174.16192v178.176l174.16192-178.176z m-45.19936-169.94304a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z m0-122.88a25.6 25.6 0 0 1 0 51.2H307.2a25.6 25.6 0 0 1 0-51.2h399.0528z"
							fill="#ffffff" p-id="1155"></path>
						</svg>
						<p>è®ºæ–‡é˜…è¯»ã€‚</p>
					</div>
				
		
				<div class="post-header-info">
					<svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
					xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
						<path
							d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
							p-id="2902" fill="#ffffff"></path>
					</svg>
					<div class="post-header-info-author">
						<a href="/about">Zi-Zi</a>
					</div>
					
						<div class="post-header-info-categories">
							
								<a href="/categories/å­¦ä¹ ">å­¦ä¹ </a>
							
						</div>
					
					<time>2023/05/04 17:09:00</time>
				</div>
		
				
					<div class="post-header-stat">
						<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
						viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve" width="20" height="20">
							<path fill="#FFFFFF" d="M187.2,165.6c0,2.6-2.1,4.7-4.7,4.7H17.5c-2.6,0-4.7-2.1-4.7-4.7s2.1-4.7,4.7-4.7h165.1
								C185.2,160.9,187.2,163,187.2,165.6z"/>
							<path fill="#FFFFFF" d="M17.5,29.7c2.6,0,4.7,2.1,4.7,4.7v131.2c0,2.6-2.1,4.7-4.7,4.7s-4.7-2.1-4.7-4.7V34.4
								C12.8,31.8,14.9,29.7,17.5,29.7z M77.9,91.5c1.8,1.8,1.8,4.8,0,6.6l-39.8,39.8c-1.9,1.8-4.9,1.7-6.6-0.2c-1.7-1.8-1.7-4.6,0-6.4
								l39.8-39.8C73.1,89.6,76,89.6,77.9,91.5z M169.9,70.2c1.6,2.1,1.1,5-0.9,6.5c0,0,0,0,0,0l-64.2,48.2c-2.1,1.5-5,1.1-6.6-0.9
								c-1.6-2.1-1.1-5,0.9-6.5c0,0,0,0,0,0l64.2-48.2C165.4,67.7,168.3,68.1,169.9,70.2L169.9,70.2z"/>
							<path fill="#FFFFFF" d="M104.6,124.5c-1.8,1.8-4.8,1.8-6.6,0L71.6,98.1c-1.8-1.8-1.8-4.8,0-6.6c1.8-1.8,4.8-1.8,6.6,0l26.3,26.3
								C106.4,119.6,106.4,122.6,104.6,124.5C104.6,124.4,104.6,124.4,104.6,124.5z"/>
						</svg>
		
						
							
<script src="/js/plugins/wordCount.js"></script>

							<p class="post-count">æ–‡å­—æ•°ï¼š---</p>
						
		
						
							<p id="busuanzi_container_page_pv" style='display:none;'>é˜…è¯»æ•°ï¼š<span id="busuanzi_value_page_pv"></span></p>
						
					</div>
				
			</div>
		
	
</header>
        <div class="post-content article-container">
            <article class="post-content-info">
                <h1 id="%E8%B5%84%E6%BA%90" tabindex="-1">èµ„æº</h1>
<ul>
<li>
<p>åŸæ–‡ï¼š<a target="_blank" rel="noopener" href="https://arxiv.org/abs/2011.14021v1">[2011.14021v1] Rethinking Text Segmentation: A Novel Dataset and A Text-Specific Refinement Approach (arxiv.org)</a></p>
</li>
<li>
<p>ä»£ç ï¼š<a target="_blank" rel="noopener" href="https://github.com/SHI-Labs/Rethinking-Text-Segmentation">SHI-Labs/Rethinking-Text-Segmentation: [CVPR 2021] Rethinking Text Segmentation: A Novel Dataset and A Text-Specific Refinement Approach (github.com)</a></p>
</li>
</ul>
<h1 id="%E7%AC%94%E8%AE%B0" tabindex="-1">ç¬”è®°</h1>
<p><strong>æ–‡æœ¬åˆ†å‰²ï¼ˆtext segmentationï¼‰<strong>æ˜¯å¾ˆå¤šä»»åŠ¡çš„å…ˆå†³æ¡ä»¶ï¼å¦‚</strong>æ–‡æœ¬æ ·å¼è¿ç§»ï¼ˆtext style transferï¼‰<strong>å’Œ</strong>åœºæ™¯æ–‡æœ¬ç§»é™¤ï¼ˆscene text removalï¼‰</strong>ã€‚</p>
<h2 id="textseg" tabindex="-1" id="TextSeg">TextSeg</h2>
<p>æœ€è¿‘ä¸€æ¬¡å…¬å…±æ–‡æœ¬åˆ†å‰²æŒ‘æˆ˜åœ¨ 2013-2015 å¹´ï¼Œç”± ICDAR ä¸»åŠã€‚åªæœ‰æ•°æ®é›†ï¼š</p>
<ul>
<li>Total Text</li>
<li>COCO TS</li>
<li>MLT_S</li>
</ul>
<p>éƒ½åªæœ‰åœºæ™¯æ–‡æœ¬ï¼Œæ²¡æœ‰è‰ºæœ¯è®¾è®¡æ–‡æœ¬ã€‚</p>
<p>ç›®å‰æ•°æ®é›†å¤ªå°‘äº†å•Šå•Šå•Šå•Šï¼ä½†æ˜¯æˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„æ•°æ®é›† <em><strong>TextSeg</strong></em>ï¼</p>
<ul>
<li>
<p>4024 å¼ å›¾åƒ</p>
<ul>
<li>2646 è®­ç»ƒé›†</li>
<li>340 éªŒè¯é›†</li>
<li>1038 æµ‹è¯•é›†</li>
</ul>
</li>
<li>
<p>å…·æœ‰å…­ç§ç±»å‹çš„æ³¨é‡Šï¼š</p>
<ul>
<li>
<p>å•è¯ word</p>
</li>
<li>
<p>å­—ç¬¦ character</p>
</li>
<li>
<p>è¾¹ç•Œå¤šè¾¹å½¢ bounding polygons</p>
</li>
<li>
<p>è’™ç‰ˆ masks</p>
</li>
<li>
<p>è½¬å½• transcriptions</p>
</li>
<li>
<p>é˜´å½±ã€3Dã€å…‰æ™•ç­‰ä¹Ÿè¿›è¡Œäº†æ³¨é‡Š</p>
</li>
</ul>
</li>
<li>
<p>å…ˆè¿›ä¹‹å¤„ï¼š</p>
<ul>
<li>æ¥è‡ªä¸åŒæ¥æºï¼Œæ ·å¼æ›´å¤š</li>
<li>æ³¨é‡Šæ›´å…¨é¢</li>
<li>accurate masks æ›´å‡†ç¡®</li>
</ul>
</li>
</ul>
<h2 id="texrnet" tabindex="-1" id="TexRNet">TexRNet</h2>
<p>æ—©æœŸéƒ½æ˜¯ç”¨<strong>é˜ˆå€¼æ³•</strong>è¿›è¡Œåˆ†å‰²ï¼Œå¯¹å¤æ‚é¢œè‰²å’Œçº¹ç†çš„åœºæ™¯æ–‡æœ¬å›¾åƒå°± GGã€‚æ·±åº¦å­¦ä¹ æ–¹æ³•ï¼šSMANetã€‚</p>
<p>æå‡ºäº†ä¸€ç§æ–°çš„æ–‡æœ¬åˆ†å‰²ç½‘ç»œï¼š<em><strong>TexRNet</strong></em>ï¼</p>
<p><img src="3.png" alt="png"></p>
<ul>
<li>é€‚åº”äº†æ–‡æœ¬çš„ç‹¬ç‰¹ç‰¹æ€§ï¼Œå¦‚éå‡¸è¾¹ç•Œã€ä¸åŒçº¹ç†ç­‰ã€‚</li>
<li>DeeplabV3+ æˆ– HRNet
<ul>
<li>ResNet101-DeeplabV3+ å’Œ HRNetV-W48 æ˜¯è¯­ä¹‰åˆ†å‰²é¢†åŸŸçš„é‡Œç¨‹ç¢‘å’Œæœ€å…ˆè¿›çš„ä½œå“</li>
</ul>
</li>
<li>æœ‰æ•ˆçš„ç½‘ç»œæ¨¡å—ï¼š<strong>å…³é”®ç‰¹å¾æ± ï¼ˆkey features poolingï¼‰<strong>å’Œ</strong>åŸºäºæ³¨æ„åŠ›çš„ç›¸ä¼¼æ€§æ£€æŸ¥ï¼ˆattention-based similarity checkingï¼‰</strong>
<ul>
<li>å…³é”®ç‰¹å¾æ± ï¼šä½¿ç”¨ä½™å¼¦ç›¸ä¼¼æ€§å­¦ä¹ æ–‡æœ¬çº¹ç†</li>
<li>åŸºäºæ³¨æ„åŠ›çš„ç›¸ä¼¼æ€§æ£€æŸ¥ï¼Œä½¿ç”¨ä¸€ä¸ªæ³¨æ„åŠ›å±‚ï¼Œç”¨ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">v</span></span></span></span> ä½œä¸ºå…³é”®å­—ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mi>f</mi></msub></mrow><annotation encoding="application/x-tex">x_f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span> ä½œä¸ºæŸ¥è¯¢ï¼Œå¹¶é€šè¿‡ç‚¹ç§¯å’Œ softmax æ¥è®¡ç®—æŸ¥è¯¢å…³é”®å­—çš„ç›¸ä¼¼æ€§ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mrow><mi>a</mi><mi>t</mi><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">x_{att}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mrow><mi>a</mi><mi>t</mi><mi>t</mi></mrow></msub><mo>=</mo><mrow><mi mathvariant="normal">S</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">f</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi></mrow><mo>(</mo><msup><mi>v</mi><mi>T</mi></msup><mo>â‹…</mo><msub><mi>x</mi><mi>f</mi></msub><mo>)</mo><mo separator="true">,</mo><msub><mi>x</mi><mrow><mi>a</mi><mi>t</mi><mi>t</mi></mrow></msub><mo>âˆˆ</mo><msup><mrow><mi mathvariant="double-struck">R</mi></mrow><mrow><mi>c</mi><mo>Ã—</mo><mi>n</mi></mrow></msup></mrow><annotation encoding="application/x-tex">x_{att}=\mathrm{Softmax}(v^T\cdot x_f),x_{att}\in \mathbb{R}^{c\times n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8413309999999999em;"></span><span class="strut bottom" style="height:1.1274389999999999em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord textstyle uncramped"><span class="mord mathrm">S</span><span class="mord mathrm">o</span><span class="mord mathrm" style="margin-right:0.07778em;">f</span><span class="mord mathrm">t</span><span class="mord mathrm">m</span><span class="mord mathrm">a</span><span class="mord mathrm">x</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">â‹…</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">âˆˆ</span><span class=""><span class="mord textstyle uncramped"><span class="mord mathbb">R</span></span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">c</span><span class="mbin">Ã—</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></li>
</ul>
</li>
<li>å¼•å…¥äº†**ä¸‰æ˜ å°„ï¼ˆtrimap lossï¼‰<strong>å’Œ</strong>é‰´åˆ«å™¨ï¼ˆglyph discriminatorï¼‰**æŸå¤±
<ul>
<li>
<p>å…³æ³¨è¾¹ç•Œçš„æŸå¤±å‡½æ•°å°†è¿›ä¸€æ­¥æé«˜æ–‡æœ¬çš„ç²¾åº¦</p>
<ul>
<li>\mathcal L_{tri}=\mathrm{WCE}(x_{rfn},x_{gt},w_{tri})\\\mathrm{WCE}(x,y,m)=-\frac{\sum^m_{j=1}w_j\sum^c_{j=1}x_{i,j}\log(y_{i,j})}{\sum^n_{j=1}w_j}
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>w</mi><mrow><mi>t</mi><mi>r</mi><mi>i</mi></mrow></msub></mrow><annotation encoding="application/x-tex">w_{tri}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02691em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span> æ˜¯æ–‡æœ¬è¾¹ç•Œä¸Šå€¼ä¸º 1ã€å…¶ä»–åœ°æ–¹ä¸º 0 çš„äºŒè¿›åˆ¶æ˜ å°„</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="normal">W</mi><mi mathvariant="normal">C</mi><mi mathvariant="normal">E</mi></mrow><mo>(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><mi>w</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\mathrm{WCE}(x,y,w)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm" style="margin-right:0.01389em;">W</span><span class="mord mathrm">C</span><span class="mord mathrm">E</span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mclose">)</span></span></span></span> æ˜¯ç”±ç©ºé—´æ˜ å°„ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span></span></span></span> åŠ æƒçš„ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span> ä¹‹é—´çš„äº¤å‰ç†µ</li>
</ul>
</li>
</ul>
</li>
<li>
<p>é¢„è®­ç»ƒç”¨äºå­—ç¬¦è¯†åˆ«çš„åˆ†ç±»å™¨ï¼Œæœ‰ 37 ä¸ªç±»ï¼ŒåŒ…å« 26 ä¸ªå­—æ¯ï¼Œ10 ä¸ªæ•°å­—å’Œ misc</p>
</li>
<li>
<p>æœ€ç»ˆæŸå¤±å‡½æ•°ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="script">L</mi><mo>=</mo><msub><mi mathvariant="script">L</mi><mrow><mi>s</mi><mi>e</mi><mi>m</mi></mrow></msub><mo>+</mo><mi>Î±</mi><msub><mi mathvariant="script">L</mi><mrow><mi>r</mi><mi>f</mi><mi>n</mi></mrow></msub><mo>+</mo><mi>Î²</mi><msub><mi mathvariant="script">L</mi><mrow><mi>t</mi><mi>r</mi><mi>i</mi></mrow></msub><mo>+</mo><mi>Î³</mi><msub><mi mathvariant="script">L</mi><mrow><mi>d</mi><mi>i</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\mathcal L = \mathcal L_{sem} +\alpha\mathcal L_{rfn} +\beta\mathcal L_{tri} +\gamma\mathcal L_{dis}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord mathcal">L</span><span class="mrel">=</span><span class=""><span class="mord mathcal">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class=""><span class="mord mathcal">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05278em;">Î²</span><span class=""><span class="mord mathcal">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class=""><span class="mord mathcal">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p>
</li>
</ul>
</li>
</ul>
<hr>
<p>å®éªŒç»“æœï¼š</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>TextSeg(Ours)</th>
<th>ICDAR13 FST</th>
<th>COCO_TS</th>
<th>MLT_S</th>
<th>Total-Text</th>
</tr>
</thead>
<tbody>
<tr>
<td>æŒ‡æ ‡</td>
<td>fgIoU/F-score</td>
<td>fgIoU/F-score</td>
<td>fgIoU/F-score</td>
<td>fgIoU/F-score</td>
<td>fgIoU/F-score</td>
</tr>
<tr>
<td>DeeplabV3+</td>
<td>84.07/0.914</td>
<td>69.27/0.802</td>
<td>72.07/0.641</td>
<td>84.63/0.837</td>
<td>74.44/0.824</td>
</tr>
<tr>
<td>HRNetV2-W48</td>
<td>85.03/0.914</td>
<td>70.98/0.822</td>
<td>68.93/0.629</td>
<td>83.26/0.836</td>
<td>75.29/0.825</td>
</tr>
<tr>
<td>HRNetV2-W48 + OCR</td>
<td>85.98/0.918</td>
<td>72.45/0.830</td>
<td>69.54/0.627</td>
<td>83.49/0.838</td>
<td>76.23/0.832</td>
</tr>
<tr>
<td>Ours: TexRNet + DeeplabV3+</td>
<td>86.06/0.921</td>
<td>72.16/0.835</td>
<td><strong>73.98/0.722</strong></td>
<td><strong>86.31</strong>/0.830</td>
<td>76.53/0.844</td>
</tr>
<tr>
<td>Ours: TexRNet + HRNetV2-W48</td>
<td><strong>86.84/0.924</strong></td>
<td><strong>73.38/0.850</strong></td>
<td>72.39/0.720</td>
<td>86.09/<strong>0.865</strong></td>
<td><strong>78.47/0.848</strong></td>
</tr>
</tbody>
</table>
<h1 id="%E4%BB%A3%E7%A0%81" tabindex="-1">ä»£ç </h1>
<h2 id="textseg-1" tabindex="-1" id="TextSeg-2">TextSeg</h2>
<blockquote>
<p>æˆ‘ä»¬çš„æ•°æ®é›†ï¼ˆTextSegï¼‰ä»…ä¾›å­¦æœ¯ç•Œä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºä»»ä½•å•†ä¸šé¡¹ç›®å’Œç ”ç©¶ã€‚è¦ä¸‹è½½æ•°æ®ï¼Œè¯·å‘ <em><a href="mailto:textseg.dataset@gmail.com">textseg.dataset@gmail.com</a></em> å‘é€è¯·æ±‚ç”µå­é‚®ä»¶ï¼Œå¹¶å‘Šè¯‰æˆ‘ä»¬æ‚¨éš¶å±äºå“ªæ‰€å­¦æ ¡ã€‚</p>
</blockquote>
<p>ä½†æ˜¯ç½‘ä¸Šå±…ç„¶è¿˜æ˜¯èƒ½æ‰¾åˆ°ä¸‹è½½åœ°å€â€¦â€¦ï¼š<a target="_blank" rel="noopener" href="https://hyper.ai/datasets/15774">TextSeg å¤§è§„æ¨¡æ–‡æœ¬æ£€æµ‹åŠåˆ†å‰²æ•°æ®é›† - æ•°æ®é›†ä¸‹è½½ - è¶…ç¥ç» (hyper.ai)</a></p>
<hr>
<p><img src="C1.png" alt="png"></p>
<ul>
<li>
<p><code>image.tar.gz</code>åŒ…å« 4024 å¼ å›¾åƒã€‚</p>
</li>
<li>
<p><code>annotation.tar.gz</code></p>
<p>ä¸å›¾åƒå¯¹åº”çš„æ ‡ç­¾ã€‚åŒ…æ‹¬ä»¥ä¸‹ä¸‰ç§ç±»å‹çš„æ–‡ä»¶ï¼š</p>
<ul>
<li><code>[dataID]_anno.json</code> åŒ…å«æ‰€æœ‰å•è¯å’Œå­—ç¬¦çº§åˆ«çš„ç¿»è¯‘ä»¥åŠè¾¹ç•Œå¤šè¾¹å½¢ã€‚</li>
<li><code>[dataID]_mask.png</code> åŒ…å«æ‰€æœ‰å­—ç¬¦æ©ç ã€‚å­—ç¬¦æ©ç æ ‡ç­¾å€¼å°†ä» 1 åˆ° n æ’åºã€‚æ ‡ç­¾å€¼ 0 è¡¨ç¤ºèƒŒæ™¯ï¼Œ255 è¡¨ç¤ºå¿½ç•¥ã€‚</li>
<li><code>[dataID]_maskeff.png</code> åŒ…å«æ‰€æœ‰<strong>å…·æœ‰æ•ˆæœçš„</strong>å­—ç¬¦æ©ç ã€‚</li>
<li><code>Adobe_Research_License_TextSeg.txt</code> è®¸å¯è¯æ–‡ä»¶ã€‚</li>
</ul>
</li>
<li>
<p><code>semantic_label.tar.gz</code></p>
<p>åŒ…å«æ‰€æœ‰å­—çº§ï¼ˆè¯­ä¹‰çº§ï¼‰æ©ç ã€‚å®ƒåŒ…å«ï¼š</p>
<ul>
<li><code>[dataID]_maskfg.png</code> 0 è¡¨ç¤ºèƒŒæ™¯ï¼Œ100 è¡¨ç¤ºå•è¯ï¼Œ200 è¡¨ç¤ºå•è¯æ•ˆæœï¼Œ255 è¡¨ç¤ºå¿½ç•¥ã€‚ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨<code>[dataID]_maskfg.png</code>ã€<code>[dataID]_mask.png</code>  å’Œ <code>[dataID]_maskeff.png</code>)</li>
</ul>
</li>
<li>
<p><code>split.json</code> è®­ç»ƒé›†ï¼ŒéªŒè¯é›†å’Œæµ‹è¯•é›†çš„å®˜æ–¹æ‹†åˆ†ã€‚</p>
</li>
<li>
<p>[å¯é€‰]æˆ‘ä»¬è®ºæ–‡ä¸­ä½¿ç”¨çš„æ—§ç‰ˆæœ¬æ ‡ç­¾ã€‚å¯ä»¥ä¸‹è½½å®ƒä»¥å¤åˆ¶æˆ‘ä»¬çš„è®ºæ–‡ç»“æœã€‚<code>semantic_label_v1.tar.gz</code></p>
</li>
</ul>
<h2 id="texrnet-1" tabindex="-1" id="TexRNet-2">TexRNet</h2>
<p>æœ‰ä¸¤ç§ Backboneï¼Œæ•ˆæœå„æœ‰åƒç§‹ï¼Ÿ</p>
<ul>
<li>HENetV-W48</li>
<li>DeeplabV3+</li>
</ul>
<p>ä» <a target="_blank" rel="noopener" href="https://drive.google.com/drive/folders/1EvGNvI5R6NKsW0YTy_0YHD9dpvtM0HDi">TexRNet - Google Drive</a> ä¸‹è½½ç›¸åº”å†…å®¹ï¼š</p>
<ul>
<li>
<p>æµ‹è¯•ï¼š<code>texrnet_hrnet.pth</code> æˆ– <code>texrnet_deeplab.pth</code></p>
</li>
<li>
<p>è®­ç»ƒï¼š<code>init/*</code></p>
</li>
</ul>
<h2 id="%E9%85%8D%E7%BD%AE" tabindex="-1" id="é…ç½®">é…ç½®</h2>
<ol>
<li>æ–°å»ºä¸€ä¸ª conda ç¯å¢ƒï¼š</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda create -n texrnet python=3.7<br></code></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda activate texrnet<br></code></pre></td></tr></table></figure>
<ol start="2">
<li>ä½¿ç”¨ç¦»çº¿å®‰è£…æ–¹å¼å®‰è£… <code>pytorch</code>ï¼ˆè¢«å‘äº† n æ¬¡é€æ¸ç†Ÿç»ƒäº† orzï¼Œè¿˜æ˜¯ç¦»çº¿å®‰è£…çš„æ–¹å¼å¥½ä½¿ï¼‰ï¼Œä» <a target="_blank" rel="noopener" href="https://download.pytorch.org/whl/torch_stable.html">download.pytorch.org/whl/torch_stable.html</a> ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ <code>pytorch</code> å’Œ <code>torchvision</code>ï¼š</li>
</ol>
<ul>
<li><code>torch-1.13.1+cu117-cp37-cp37m-win_amd64.whl</code></li>
<li><code>torchvision-0.14.1+cu117-cp37-cp37m-win_amd64.whl</code></li>
</ul>
<p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆä»Šå¤© edge ä¸‹è½½å¾—ç‰¹åˆ«æ…¢ï¼Œç”¨è¿…é›·äº†ã€‚</p>
<p><img src="C2.png" alt="png"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install torch-1.13.1+cu117-cp37-cp37m-win_amd64.whl -i https://pypi.tuna.tsinghua.edu.cn/simple<br></code></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install torchvision-0.14.1+cu117-cp37-cp37m-win_amd64.whl -i https://pypi.tuna.tsinghua.edu.cn/simple<br></code></pre></td></tr></table></figure>
<p><img src="C3.png" alt="png"></p>
<ol start="3">
<li>
<p>æ‹‰å–ä»“åº“ï¼š<a target="_blank" rel="noopener" href="https://github.com/SHI-Labs/Rethinking-Text-Segmentation">SHI-Labs/Rethinking-Text-Segmentation: [CVPR 2021] Rethinking Text Segmentation: A Novel Dataset and A Text-Specific Refinement Approach (github.com)</a></p>
</li>
<li>
<p>åœ¨ä»“åº“ç›®å½•ä¸‹ï¼Œå°† <code>requirement.txt</code> é‡Œçš„ <code>torch==1.6</code> å’Œ <code>torchvision==0.7</code> åˆ æ‰ï¼Œç„¶åæ‰§è¡Œï¼š</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install -r requirement.txt -i https://pypi.tuna.tsinghua.edu.cn/simple<br></code></pre></td></tr></table></figure>
<ol start="6">
<li>åœ¨ä»“åº“ç›®å½•ä¸‹ï¼Œæ–°å»ºå¥½ä¸‹åˆ—æ–‡ä»¶å¤¹ï¼š</li>
</ol>
<ul>
<li><code>pretrained</code>
<ul>
<li><code>pretrained/init</code></li>
</ul>
</li>
<li><code>data</code></li>
<li><code>log</code></li>
</ul>
<p><img src="C4.png" alt="png"></p>
<ol start="7">
<li>æ”¾ç½®æ•°æ®åº“åœ¨ <code>data/TextSeg</code> ä¸­ï¼š</li>
</ol>
<p><img src="C5.png" alt="png"></p>
<h2 id="%E6%B5%8B%E8%AF%95" tabindex="-1" id="æµ‹è¯•">æµ‹è¯•</h2>
<ol>
<li>
<p>å…ˆæ”¹ä»£ç ï¼Windows ä¸‹è¸©å‘ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_61787307/article/details/129638108">Pytorch æŠ¥é”™è§£å†³â€”â€”ï¼ˆäº²æµ‹æœ‰æ•ˆï¼‰RuntimeError: Distributed package doesnâ€˜t have NCCL built in_åº·åº·å¥½è€å•Šçš„åšå®¢-CSDN åšå®¢</a>ã€‚pycharm ä¸­ <code>ctrl+shift+r</code> å°†æ‰€æœ‰ <code>nccl</code> æ›¿æ¢ä¸º <code>gloo</code></p>
</li>
<li>
<p>è®¾ç½®å‚æ•°ï¼š<code>--eval --pth pretrained/texrnet_hrnet.pth --hrnet --gpu 0 --dsname textseg</code></p>
</li>
</ol>
<p><img src="C6.png" alt="png"></p>
<ol start="3">
<li>èƒ½è·‘ï¼ŒGPU é£æ‰‡ç–¯ç‹‚è½¬ï¼Œå“å¾—æˆ‘èµ¶ç´§åœäº†ğŸ˜…ã€‚è¿˜æ˜¯ç”¨æœåŠ¡å™¨å§å‘œå‘œå‘œâ€¦â€¦</li>
</ol>
<p><img src="C7.png" alt="png"></p>
<h2 id="%E8%AE%AD%E7%BB%83" tabindex="-1" id="è®­ç»ƒ">è®­ç»ƒ</h2>
<ol>
<li>è®¾ç½®å‚æ•°ï¼š<code>--hrnet --gpu 0 --dsname textseg --trainwithcls</code></li>
</ol>
<p><img src="C8.png" alt="png"></p>
<ol start="2">
<li>è¸©å‘ï¼Œåœ¨ <code>data\TextSeg</code> ä¸­ï¼ŒæŠŠ <code>annotation</code> æ–‡ä»¶å¤¹åç§°ä¿®æ”¹ä¸º <code>bpoly_label</code></li>
</ol>
<p><img src="C9.png" alt="png"></p>
<ol start="3">
<li><s>åº”è¯¥èƒ½ train å§ï¼Œæ˜¾ç¤ºæ˜¾å­˜ä¸å¤Ÿæ˜¯çœŸçš„ç‰›é€¼ğŸ˜…ã€‚è¿˜æ˜¯ç”¨æœåŠ¡å™¨å§å‘œå‘œå‘œâ€¦â€¦ï¼ˆæ˜¯ä¸æ˜¯è°ƒæˆ gloo çš„é—®é¢˜ï¼Ÿè¯¥å¥½å¥½å­¦ linux äº†å‘œå‘œå‘œï¼‰</s></li>
</ol>
<p><img src="C10.png" alt="png"></p>
<p>æˆ‘è¯´å©·å©·ï¼åœ¨ <code>train_utils.py</code> é‡ŒæŠŠ <code>cfg.DATA.NUM_WORKERS_PER_GPU</code> è°ƒå°å°±åˆå¯ä»¥è·‘äº†ï¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> cfg.DEBUG:<br>    cfg.DATA.NUM_WORKERS_PER_GPU = <span class="hljs-number">2</span><br>    cfg.TRAIN.BATCH_SIZE_PER_GPU = <span class="hljs-number">2</span><br>cfg.TRAIN.OPTIM_MANAGER_LRSCALE = &#123;<br>    <span class="hljs-string">&#x27;hrnet&#x27;</span>:<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;texrnet&#x27;</span>: <span class="hljs-number">10</span>&#125;<br><span class="hljs-keyword">return</span> cfg<br></code></pre></td></tr></table></figure>
<p>å¥½å§è¿˜æ˜¯è·‘ä¸äº†ï¼Œgiaoï¼<font color="red">  File â€œD:\Study\XXXXX\Rethinking-Text-Segmentation\lib\torchutils.pyâ€, line 262, in <em>_call</em>_
return y
UnboundLocalError: local variable â€˜yâ€™ referenced before assignment</font></p>
<h2 id="%E9%98%85%E8%AF%BB" tabindex="-1" id="é˜…è¯»">é˜…è¯»</h2>
<p>æ„Ÿè§‰è¿™ä¸ªä»“åº“çš„ä»£ç å†™çš„å¾ˆéšç§˜â€¦â€¦ä¸€å±‚åˆä¸€å±‚çš„ã€‚</p>
<h3 id="main.py" tabindex="-1" id="main-py"><a target="_blank" rel="noopener" href="http://main.py">main.py</a></h3>
<p><code>--eval --pth pretrained/texrnet_hrnet.pth --hrnet --gpu 0 --dsname textseg</code></p>
<p>è¡¨ç¤ºï¼š</p>
<ul>
<li>å¼€å¯ eval æ¨¡å¼</li>
<li>é¢„è®­ç»ƒæ¨¡å‹è·¯å¾„ï¼š<code>pretrained/texrnet_hrnet.pth</code></li>
<li>ä½¿ç”¨ HRNet æ¨¡å‹</li>
<li>ä½¿ç”¨ 0 å· GPU</li>
<li>æ•°æ®é›†ï¼š<code>textseg</code></li>
</ul>
<p>è®¾ç½® parser å‚æ•°ï¼š</p>
<table>
<thead>
<tr>
<th>name</th>
<th>type</th>
<th>default</th>
<th>help</th>
</tr>
</thead>
<tbody>
<tr>
<td>â€“debug</td>
<td>bool</td>
<td>False</td>
<td>æ˜¯å¦å¯åŠ¨ debug æ¨¡å¼</td>
</tr>
<tr>
<td>â€“hrnet</td>
<td>bool</td>
<td>False</td>
<td>æ˜¯å¦ä½¿ç”¨ HRNet æ¨¡å‹</td>
</tr>
<tr>
<td>â€“eval</td>
<td>bool</td>
<td>False</td>
<td>æ˜¯å¦å¼€å¯ eval æ¨¡å¼</td>
</tr>
<tr>
<td>â€“pth</td>
<td>str</td>
<td></td>
<td>ä¿å­˜çš„æƒé‡æ–‡ä»¶è·¯å¾„ï¼Œå³é¢„è®­ç»ƒæ¨¡å‹çš„è·¯å¾„</td>
</tr>
<tr>
<td>â€“gpu</td>
<td></td>
<td></td>
<td>ä½¿ç”¨å“ªäº› GPU</td>
</tr>
<tr>
<td>â€“port</td>
<td>int</td>
<td>11233</td>
<td>åˆ†å¸ƒå¼å¤„ç†çš„ç«¯å£å·</td>
</tr>
<tr>
<td>â€“dsname</td>
<td>str</td>
<td>â€˜textsegâ€™</td>
<td>æ•°æ®é›†åç§°ï¼Œå¯é€‰ï¼šâ€˜textsegâ€™ã€â€˜cocotsâ€™ã€â€˜mltâ€™ã€â€˜icdar13â€™ã€â€˜totaltextâ€™</td>
</tr>
<tr>
<td>â€“trainwithcls</td>
<td>bool</td>
<td>False</td>
<td>æ˜¯å¦ä½¿ç”¨åˆ†ç±»å™¨æ¥è®­ç»ƒ</td>
</tr>
</tbody>
</table>
<p><code>istrain = not args.eval</code>ï¼Œå¦‚æœä¸å¼€å¯ eval æ¨¡å¼ï¼Œé‚£å°±æ˜¯å¼€å¯ train æ¨¡å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è®¾ç½®è®­ç»ƒæ¨¡å¼</span><br><span class="hljs-keyword">if</span> istrain:<br>    cfg = copy.deepcopy(cfg_train)<br><span class="hljs-keyword">else</span>:<br>    cfg = copy.deepcopy(cfg_test)<br><br><span class="hljs-keyword">if</span> istrain:<br>    <span class="hljs-comment"># è¿è¡Œåœ¨è®­ç»ƒæ¨¡å¼ä¸‹ï¼Œåˆ™è°ƒç”¨ get_experiment_id()å‡½æ•°è·å–ä¸€ä¸ªæ–°çš„å®éªŒ IDï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ cfg.EXPERIMENT_IDã€‚</span><br>    <span class="hljs-comment"># æ¯æ¬¡è¿è¡Œç¨‹åºæ—¶ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å®éªŒ IDï¼Œä»¥ä¾¿åœ¨è®­ç»ƒå¤šä¸ªæ¨¡å‹æ—¶èƒ½å¤ŸåŒºåˆ†å®ƒä»¬ä¹‹é—´çš„å·®å¼‚</span><br>    cfg.EXPERIMENT_ID = get_experiment_id()<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-comment"># è¡¨ç¤ºå½“å‰ä¸å¤„äºä»»ä½•å®éªŒä¸­</span><br>    cfg.EXPERIMENT_ID = <span class="hljs-literal">None</span><br><br><span class="hljs-comment"># è®¾ç½®æ•°æ®é›†</span><br><span class="hljs-keyword">if</span> args.dsname == <span class="hljs-string">&quot;textseg&quot;</span>:<br>    cfg_data = cfg_textseg<br><span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&quot;cocots&quot;</span>:<br>    cfg_data = cfg_cocots<br><span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&quot;mlt&quot;</span>:<br>    cfg_data = cfg_mlt<br><span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&quot;icdar13&quot;</span>:<br>    cfg_data = cfg_icdar13<br><span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&quot;totaltext&quot;</span>:<br>    cfg_data = cfg_totaltext<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-keyword">raise</span> ValueError<br><br>cfg.DEBUG = args.debug<br>cfg.DIST_URL = <span class="hljs-string">&#x27;tcp://127.0.0.1:&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(args.port)<br><span class="hljs-keyword">if</span> args.gpu <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>    <span class="hljs-comment"># å¦‚æœä¸è®¾ç½® GPUï¼Œå°±éƒ½ç”¨äº†</span><br>    cfg.GPU_DEVICE = <span class="hljs-string">&#x27;all&#x27;</span><br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-comment"># ä½¿ç”¨æŒ‡å®šçš„ GPU</span><br>    cfg.GPU_DEVICE = args.gpu<br><br><span class="hljs-comment"># åŠ è½½æ¨¡å‹å’Œæ•°æ®</span><br>cfg.MODEL = copy.deepcopy(cfg_mdel)<br>cfg.DATA  = copy.deepcopy(cfg_data)<br><br><span class="hljs-keyword">if</span> istrain:<br>    cfg = set_cfg_train(cfg, dsname=args.dsname)<br>    <span class="hljs-keyword">if</span> args.hrnet:<br>        <span class="hljs-comment"># è°ƒç”¨ set_cfg_hrnetw48_train å‡½æ•°å¯¹ HRNet-W48 æ¨¡å‹è¿›è¡Œé…ç½®</span><br>        cfg = set_cfg_hrnetw48_train(cfg)<br><span class="hljs-keyword">else</span>:<br>    cfg = set_cfg_eval(cfg, dsname=args.dsname)<br>    <span class="hljs-keyword">if</span> args.hrnet:<br>        cfg = set_cfg_hrnetw48_eval(cfg)<br>    <span class="hljs-comment"># åŠ è½½é¢„è®­ç»ƒæ¨¡å‹</span><br>    cfg.MODEL.TEXRNET.PRETRAINED_PTH = args.pth<br><br><span class="hljs-comment"># è®¾ç½®æ•°æ®é›†æ¨¡å¼</span><br><span class="hljs-keyword">if</span> istrain:<br>    <span class="hljs-keyword">if</span> args.dsname == <span class="hljs-string">&quot;textseg&quot;</span>:<br>        cfg.DATA.DATASET_MODE = <span class="hljs-string">&#x27;train+val&#x27;</span><br>    <span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&quot;cocots&quot;</span>:<br>        cfg.DATA.DATASET_MODE = <span class="hljs-string">&#x27;train&#x27;</span><br>    <span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&quot;mlt&quot;</span>:<br>        cfg.DATA.DATASET_MODE = <span class="hljs-string">&#x27;trainseg&#x27;</span><br>    <span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&quot;icdar13&quot;</span>:<br>        cfg.DATA.DATASET_MODE = <span class="hljs-string">&#x27;train_fst&#x27;</span><br>    <span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&quot;totaltext&quot;</span>:<br>        cfg.DATA.DATASET_MODE = <span class="hljs-string">&#x27;train&#x27;</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">raise</span> ValueError<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-keyword">if</span> args.dsname == <span class="hljs-string">&quot;textseg&quot;</span>:<br>        cfg.DATA.DATASET_MODE = <span class="hljs-string">&#x27;test&#x27;</span><br>    <span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&quot;cocots&quot;</span>:<br>        cfg.DATA.DATASET_MODE = <span class="hljs-string">&#x27;val&#x27;</span><br>    <span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&quot;mlt&quot;</span>:<br>        cfg.DATA.DATASET_MODE = <span class="hljs-string">&#x27;valseg&#x27;</span><br>    <span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&quot;icdar13&quot;</span>:<br>        cfg.DATA.DATASET_MODE = <span class="hljs-string">&#x27;test_fst&#x27;</span><br>    <span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&quot;totaltext&quot;</span>:<br>        cfg.DATA.DATASET_MODE = <span class="hljs-string">&#x27;test&#x27;</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">raise</span> ValueError<br>        <br><span class="hljs-keyword">if</span> istrain:<br>    <span class="hljs-keyword">if</span> args.trainwithcls:  <span class="hljs-comment"># å¯åŠ¨åˆ†å¸ƒå¼è®­ç»ƒ</span><br>        <span class="hljs-keyword">if</span> args.dsname == <span class="hljs-string">&#x27;textseg&#x27;</span>:  <span class="hljs-comment"># æ•°æ®é›†</span><br>            cfg.DATA.LOADER_PIPELINE = [<br>                <span class="hljs-string">&#x27;NumpyImageLoader&#x27;</span>,   <span class="hljs-comment"># ä½¿ç”¨ numpy æ¨¡å—è¯»å–å›¾åƒæ•°æ®</span><br>                <span class="hljs-string">&#x27;TextSeg_SeglabelLoader&#x27;</span>,  <span class="hljs-comment"># åŠ è½½æ–‡æœ¬åŒºåŸŸåˆ†å‰²æ ‡ç­¾æ•°æ®</span><br>                <span class="hljs-string">&#x27;CharBboxSpLoader&#x27;</span>,]  <span class="hljs-comment"># åŠ è½½å­—ç¬¦è¾¹ç•Œæ¡†æ•°æ®ã€‚è¿™äº›æ•°æ®éƒ½æ˜¯ç”¨äºæ–‡æœ¬æ£€æµ‹æˆ–åˆ†å‰²ä»»åŠ¡çš„</span><br>            cfg.DATA.RANDOM_RESIZE_CROP_SIZE = [<span class="hljs-number">32</span>, <span class="hljs-number">32</span>]  <span class="hljs-comment"># éšæœºè£å‰ªçš„å°ºå¯¸</span><br>            cfg.DATA.RANDOM_RESIZE_CROP_SCALE = [<span class="hljs-number">0.8</span>, <span class="hljs-number">1.2</span>]  <span class="hljs-comment"># ç¼©æ”¾æ¯”ä¾‹</span><br>            cfg.DATA.RANDOM_RESIZE_CROP_RATIO = [<span class="hljs-number">3</span>/<span class="hljs-number">4</span>, <span class="hljs-number">4</span>/<span class="hljs-number">3</span>]  <span class="hljs-comment"># å®½é«˜æ¯”èŒƒå›´</span><br>            cfg.DATA.TRANS_PIPELINE = [<br>                <span class="hljs-string">&#x27;UniformNumpyType&#x27;</span>,  <span class="hljs-comment"># å°†å›¾åƒæ•°æ®ç±»å‹è½¬æ¢ä¸ºç›¸åŒçš„ç±»å‹ï¼Œä»¥ä¾¿è¿›è¡Œåç»­çš„å¤„ç†</span><br>                <span class="hljs-string">&#x27;TextSeg_RandomResizeCropCharBbox&#x27;</span>,  <span class="hljs-comment"># å¯¹æ–‡æœ¬åŒºåŸŸåˆ†å‰²æ ‡ç­¾å’Œå­—ç¬¦è¾¹ç•Œæ¡†ç­‰æ•°æ®è¿›è¡Œéšæœºå°ºåº¦å˜æ¢å’Œè£å‰ªæ“ä½œï¼Œä»¥å¢å¼ºæ¨¡å‹é²æ£’æ€§</span><br>                <span class="hljs-string">&#x27;NormalizeUint8ToZeroOne&#x27;</span>,   <span class="hljs-comment"># å°†åƒç´ å€¼èŒƒå›´ä»[0, 255]å½’ä¸€åŒ–åˆ°[0, 1]</span><br>                <span class="hljs-string">&#x27;Normalize&#x27;</span>,  <span class="hljs-comment"># è¿›è¡Œé›¶å‡å€¼å’Œå•ä½æ–¹å·®çš„æ ‡å‡†åŒ–å¤„ç†</span><br>                <span class="hljs-string">&#x27;RandomScaleOneSide&#x27;</span>,  <span class="hljs-comment"># å¯¹å›¾åƒæ•°æ®è¿›è¡Œå•è¾¹ç¼©æ”¾ï¼Œä»¥å¢åŠ æ¨¡å‹å¯¹å›¾åƒå°ºåº¦çš„é²æ£’æ€§</span><br>                <span class="hljs-string">&#x27;RandomCrop&#x27;</span>,   <span class="hljs-comment"># å¯¹å›¾åƒæ•°æ®è¿›è¡Œéšæœºè£å‰ªæ“ä½œ</span><br>            ]<br>        <span class="hljs-keyword">elif</span> args.dsname == <span class="hljs-string">&#x27;icdar13&#x27;</span>:<br>            cfg.DATA.LOADER_PIPELINE = [<br>                <span class="hljs-string">&#x27;NumpyImageLoader&#x27;</span>,   <span class="hljs-comment"># ä½¿ç”¨ numpy æ¨¡å—è¯»å–å›¾åƒæ•°æ®</span><br>                <span class="hljs-string">&#x27;SeglabelLoader&#x27;</span>,  <span class="hljs-comment"># åŠ è½½æ–‡æœ¬åŒºåŸŸåˆ†å‰²æ ‡ç­¾æ•°æ®</span><br>                <span class="hljs-string">&#x27;CharBboxSpLoader&#x27;</span>,]  <span class="hljs-comment"># åŠ è½½å­—ç¬¦è¾¹ç•Œæ¡†æ•°æ®</span><br>            cfg.DATA.TRANS_PIPELINE = [<br>                <span class="hljs-string">&#x27;UniformNumpyType&#x27;</span>,  <span class="hljs-comment"># å°†å›¾åƒæ•°æ®ç±»å‹è½¬æ¢ä¸ºç›¸åŒçš„ç±»å‹ï¼Œä»¥ä¾¿è¿›è¡Œåç»­çš„å¤„ç†</span><br>                <span class="hljs-string">&#x27;NormalizeUint8ToZeroOne&#x27;</span>,   <span class="hljs-comment"># å°†åƒç´ å€¼èŒƒå›´ä»[0, 255]å½’ä¸€åŒ–åˆ°[0, 1]</span><br>                <span class="hljs-string">&#x27;Normalize&#x27;</span>,  <span class="hljs-comment"># è¿›è¡Œé›¶å‡å€¼å’Œå•ä½æ–¹å·®çš„æ ‡å‡†åŒ–å¤„ç†</span><br>                <span class="hljs-string">&#x27;RandomScaleOneSide&#x27;</span>,  <span class="hljs-comment"># å¯¹å›¾åƒæ•°æ®è¿›è¡Œå•è¾¹ç¼©æ”¾ï¼Œä»¥å¢åŠ æ¨¡å‹å¯¹å›¾åƒå°ºåº¦çš„é²æ£’æ€§</span><br>                <span class="hljs-string">&#x27;RandomCrop&#x27;</span>,  <span class="hljs-comment"># å¯¹å›¾åƒæ•°æ®è¿›è¡Œéšæœºè£å‰ªæ“ä½œ</span><br>            ]<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">raise</span> ValueError<br>        <span class="hljs-comment"># å°†æ–‡æœ¬æ•°æ®æ ¼å¼åŒ–ä¸ºæ–‡æœ¬åŒºåŸŸå’Œå­—ç¬¦è¾¹ç•Œæ¡†æ ‡ç­¾ï¼Œä»¥ä¾¿è¿›è¡Œæ£€æµ‹å’Œè¯†åˆ«ä»»åŠ¡çš„è®­ç»ƒ</span><br>        cfg.DATA.FORMATTER = <span class="hljs-string">&#x27;SemChinsChbbxFormatter&#x27;</span><br>        <span class="hljs-comment"># ç”¨äºå°†å­—ç¬¦è¾¹ç•Œæ¡†è½¬åŒ–æˆæ–¹å½¢ï¼Œä»¥æ–¹ä¾¿è¿›è¡Œ RoI æ± åŒ–</span><br>        cfg.DATA.LOADER_SQUARE_BBOX = <span class="hljs-literal">True</span><br>        <span class="hljs-comment"># è¡¨ç¤ºéšæœºè£å‰ªæ“ä½œä»å“ªä¸ªé˜¶æ®µå¼€å§‹ï¼Œè¿™é‡Œè®¾ä¸º&#x27;sem&#x27;å³ä»è¯­ä¹‰åˆ†å‰²çš„é˜¶æ®µå¼€å§‹</span><br>        cfg.DATA.RANDOM_RESIZE_CROP_FROM = <span class="hljs-string">&#x27;sem&#x27;</span><br>        <span class="hljs-comment"># è¡¨ç¤ºç½‘ç»œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä»å“ªä¸ªé˜¶æ®µè¿›è¡Œé¢„æµ‹å¾—åˆ°è¾“å‡ºç»“æœï¼Œè¿™é‡Œè®¾ä¸º&#x27;sem&#x27;ä¹Ÿæ˜¯ä»è¯­ä¹‰åˆ†å‰²çš„é˜¶æ®µå¼€å§‹</span><br>        cfg.MODEL.TEXRNET.INTRAIN_GETPRED_FROM = <span class="hljs-string">&#x27;sem&#x27;</span><br>        <span class="hljs-comment"># the one with 93.98% and trained on semantic crops</span><br>        <span class="hljs-comment"># åˆ†ç±»å™¨çš„é¢„è®­ç»ƒæ¨¡å‹è·¯å¾„</span><br>        cfg.TRAIN.CLASSIFIER_PATH = osp.join(<br>            <span class="hljs-string">&#x27;pretrained&#x27;</span>, <span class="hljs-string">&#x27;init&#x27;</span>, <span class="hljs-string">&#x27;resnet50_textcls.pth&#x27;</span>,<br>        )<br>        <span class="hljs-comment"># RoI æ± åŒ–æ—¶è¾¹ç•Œæ¡†çš„æ‰©å……æ–¹å¼ï¼Œè¿™é‡Œé‡‡ç”¨ semcrop</span><br>        cfg.TRAIN.ROI_BBOX_PADDING_TYPE = <span class="hljs-string">&#x27;semcrop&#x27;</span><br>        <span class="hljs-comment"># RoI æ± åŒ–åçš„å›¾åƒå¤§å°</span><br>        cfg.TRAIN.ROI_ALIGN_SIZE = [<span class="hljs-number">32</span>, <span class="hljs-number">32</span>]<br>        <span class="hljs-comment"># æ˜¯å¦å¯¹åˆ†ç±»å™¨è¿›è¡Œæ›´æ–°</span><br>        cfg.TRAIN.UPDATE_CLASSIFIER = <span class="hljs-literal">False</span><br>        <span class="hljs-comment"># åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä»è¯­ä¹‰åˆ†å‰²çš„é˜¶æ®µå¼€å§‹å¤šå°‘æ¬¡è¿­ä»£åæ¿€æ´»åˆ†ç±»å™¨çš„è®­ç»ƒ</span><br>        cfg.TRAIN.ACTIVATE_CLASSIFIER_FOR_SEGMODEL_AFTER = <span class="hljs-number">0</span><br>        <span class="hljs-comment"># å„ä¸ªæŸå¤±å‡½æ•°çš„æƒé‡ï¼ŒåŒ…æ‹¬è¯­ä¹‰åˆ†å‰²çš„æŸå¤±ã€RFN çš„æŸå¤±ã€RFNtri çš„æŸå¤±å’Œåˆ†ç±»å™¨çš„æŸå¤±</span><br>        cfg.TRAIN.LOSS_WEIGHT = &#123;<br>            <span class="hljs-string">&#x27;losssem&#x27;</span>   : <span class="hljs-number">1</span>, <br>            <span class="hljs-string">&#x27;lossrfn&#x27;</span>   : <span class="hljs-number">0.5</span>,<br>            <span class="hljs-string">&#x27;lossrfntri&#x27;</span>: <span class="hljs-number">0.5</span>,<br>            <span class="hljs-string">&#x27;losscls&#x27;</span>   : <span class="hljs-number">0.1</span>,<br>        &#125;<br><br><span class="hljs-keyword">if</span> istrain:<br>    <span class="hljs-comment"># æ˜¯å¦é‡‡ç”¨ HRNet ä½œä¸ºè¯­ä¹‰åˆ†å‰²ç½‘ç»œæ¨¡å‹ï¼Œå¦‚æœä¸é‡‡ç”¨ï¼Œå°±ç”¨ deeplab</span><br>    <span class="hljs-keyword">if</span> args.hrnet:<br>        cfg.TRAIN.SIGNATURE = [<span class="hljs-string">&#x27;texrnet&#x27;</span>, <span class="hljs-string">&#x27;hrnet&#x27;</span>]<br>    <span class="hljs-keyword">else</span>:<br>        cfg.TRAIN.SIGNATURE = [<span class="hljs-string">&#x27;texrnet&#x27;</span>, <span class="hljs-string">&#x27;deeplab&#x27;</span>]<br>    <span class="hljs-comment"># &#x27;LOG_DIR&#x27;ï¼šæ—¥å¿—æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œå¦‚æœæ˜¯è®­ç»ƒæ¨¡å¼åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„å®éªŒæ–‡ä»¶å¤¹ï¼Œå¹¶å°†æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨è¯¥ç›®å½•ä¸‹çš„&#x27;train.log&#x27;ä¸­</span><br>    cfg.LOG_DIR = experiment_folder(cfg, isnew=<span class="hljs-literal">True</span>, sig=cfg.TRAIN.SIGNATURE)<br>    cfg.LOG_FILE = osp.join(cfg.LOG_DIR, <span class="hljs-string">&#x27;train.log&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-comment"># å¦‚æœæ˜¯è¯„ä¼°æ¨¡å¼åˆ™å°†æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨&#x27;eval.log&#x27;ä¸­</span><br>    cfg.LOG_DIR = osp.join(cfg.MISC_DIR, <span class="hljs-string">&#x27;eval&#x27;</span>)<br>    cfg.LOG_FILE = osp.join(cfg.LOG_DIR, <span class="hljs-string">&#x27;eval.log&#x27;</span>)<br>    cfg.TEST.SUB_DIR = <span class="hljs-literal">None</span><br><br><span class="hljs-keyword">if</span> cfg.DEBUG:<br>    <span class="hljs-comment"># å¦‚æœå¼€å¯äº†è°ƒè¯•æ¨¡å¼ï¼Œåˆ™å°†å®éªŒ ID è®¾ç½®ä¸º 999999999999ï¼Œæ–¹ä¾¿è·Ÿè¸ªè°ƒè¯•ç»“æœ</span><br>    cfg.EXPERIMENT_ID = <span class="hljs-number">999999999999</span><br>    <span class="hljs-comment"># æ¯ä¸ª GPU ä½¿ç”¨çš„æ•°æ®åŠ è½½å™¨çº¿ç¨‹æ•°</span><br>    cfg.DATA.NUM_WORKERS_PER_GPU = <span class="hljs-number">0</span><br>    <span class="hljs-comment"># æ¯ä¸ª GPU ä½¿ç”¨çš„ batch size å¤§å°</span><br>    cfg.TRAIN.BATCH_SIZE_PER_GPU = <span class="hljs-number">2</span><br><br>cfg = common_initiates(cfg)  <span class="hljs-comment"># è¯¥å‡½æ•°ç”¨äºåŠ è½½è®­ç»ƒå’Œæµ‹è¯•æ•°æ®ï¼Œå¹¶è¿›è¡Œæ•°æ®é¢„å¤„ç†ã€æ ‡å‡†åŒ–ç­‰æ“ä½œ</span><br><br><span class="hljs-keyword">if</span> istrain:<br>    <span class="hljs-keyword">if</span> args.trainwithcls:<br>        <span class="hljs-comment"># æ‰§è¡Œè®­ç»ƒæ“ä½œçš„æ—¶é—´æˆ³ã€‚å¦‚æœä½¿ç”¨åˆ†ç±»å™¨ï¼Œåˆ™è°ƒç”¨ ts_with_classifier()å‡½æ•°è¿›è¡Œæ—¶é—´æˆ³è®¾ç½®</span><br>        exec_ts = ts_with_classifier()<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment"># è°ƒç”¨ ts()å‡½æ•°è¿›è¡Œæ—¶é—´æˆ³è®¾ç½®</span><br>        exec_ts = ts()<br>    <span class="hljs-comment"># è®­ç»ƒå™¨å¯¹è±¡</span><br>    trainer = train(cfg)<br>    <span class="hljs-comment"># å‘è®­ç»ƒå™¨å¯¹è±¡æ³¨å†Œä¸åŒçš„è®­ç»ƒé˜¶æ®µï¼ŒåŒ…æ‹¬æ•°æ®åŠ è½½ã€å‰å‘ä¼ æ’­ã€åå‘ä¼ æ’­ã€å‚æ•°æ›´æ–°ç­‰æµç¨‹</span><br>    trainer.register_stage(exec_ts)<br><br>    <span class="hljs-comment"># trainer(0)</span><br>    <span class="hljs-comment"># ä½¿ç”¨å¤šè¿›ç¨‹æ–¹å¼è¿›è¡Œè®­ç»ƒï¼Œè®¾ç½® nprocs ä¸º GPU_COUNT å³å¯åˆ©ç”¨ GPU å¹¶è¡ŒåŠ é€Ÿè®­ç»ƒè¿‡ç¨‹ã€‚</span><br>    <span class="hljs-comment"># æœ€åï¼Œjoin=True è¡¨ç¤ºç¨‹åºä¼šä¸€ç›´é˜»å¡åœ¨è¿™é‡Œï¼Œç›´åˆ°æ‰€æœ‰è¿›ç¨‹éƒ½å®Œæˆå¹¶é€€å‡ºåæ‰ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œ</span><br>    mp.spawn(trainer,<br>                args=(),<br>                nprocs=cfg.GPU_COUNT,<br>                join=<span class="hljs-literal">True</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-comment"># æ‰§è¡Œæµ‹è¯•æ“ä½œçš„æ—¶é—´æˆ³</span><br>    exec_es = es()<br>    <span class="hljs-comment"># æµ‹è¯•å™¨å¯¹è±¡</span><br>    tester = <span class="hljs-built_in">eval</span>(cfg)<br>    <span class="hljs-comment"># å‘æµ‹è¯•å™¨å¯¹è±¡æ³¨å†Œä¸åŒçš„æµ‹è¯•é˜¶æ®µï¼ŒåŒ…æ‹¬æ•°æ®åŠ è½½ã€å‰å‘ä¼ æ’­ã€è¯„ä¼°ç­‰æµç¨‹</span><br>    tester.register_stage(exec_es)<br><br>    <span class="hljs-comment"># tester(0)</span><br>    <span class="hljs-comment"># ä½¿ç”¨å¤šè¿›ç¨‹æ–¹å¼è¿›è¡Œæµ‹è¯•ï¼Œè®¾ç½® nprocs ä¸º GPU_COUNT å³å¯åˆ©ç”¨ GPU å¹¶è¡ŒåŠ é€Ÿæµ‹è¯•è¿‡ç¨‹ã€‚</span><br>    <span class="hljs-comment"># æœ€åï¼Œjoin=True è¡¨ç¤ºç¨‹åºä¼šä¸€ç›´é˜»å¡åœ¨è¿™é‡Œï¼Œç›´åˆ°æ‰€æœ‰è¿›ç¨‹éƒ½å®Œæˆå¹¶é€€å‡ºåæ‰ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œ</span><br>    mp.spawn(tester,<br>            args=(),<br>            nprocs=cfg.GPU_COUNT,<br>            join=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>
<p>å¼€è·‘æ—¶ï¼Œä¼šæ˜¾ç¤ºå„ç§å‚æ•°çš„æƒ…å†µï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span>&#x27;COMPUTER_NAME&#x27;<span class="hljs-punctuation">:</span> &#x27;OMEN&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ç”µè„‘åç§°</span><br> &#x27;CUDA&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// CUDA æ˜¯å¦å¯ç”¨</span><br> &#x27;DATA&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;ALIGN_CORNERS&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦å¯¹é½å›¾åƒçš„å››ä¸ªè§’</span><br>          &#x27;CLASS_NAME&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&#x27;background&#x27;<span class="hljs-punctuation">,</span> &#x27;text&#x27;<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ç±»åˆ«åç§°ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæœ‰ä¸¤ç±»åˆ†åˆ«ä¸º&#x27;background&#x27;å’Œ&#x27;text&#x27;</span><br>          &#x27;CLASS_NUM&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ç±»åˆ«æ•°é‡</span><br>          &#x27;DATASET_MODE&#x27;<span class="hljs-punctuation">:</span> &#x27;train+val&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ•°æ®é›†æ¨¡å¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæ˜¯è®­ç»ƒæ•°æ®é›†å’ŒéªŒè¯æ•°æ®é›†ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨</span><br>          &#x27;DATASET_NAME&#x27;<span class="hljs-punctuation">:</span> &#x27;textseg&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ•°æ®é›†åç§°ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸º&#x27;textseg&#x27;</span><br>          &#x27;EFFECTIVE_CLASS_NUM&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æœ‰æ•ˆçš„ç±»åˆ«æ•°é‡</span><br>          &#x27;FORMATTER&#x27;<span class="hljs-punctuation">:</span> &#x27;SemChinsChbbxFormatter&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ•°æ®æ ¼å¼åŒ–å™¨çš„åç§°ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸º&#x27;SemChinsChbbxFormatter&#x27;</span><br>          &#x27;IGNORE_LABEL&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">999</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å¿½ç•¥çš„æ ‡ç­¾å€¼ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸º 999</span><br>          &#x27;IM_MEAN&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.485</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.456</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.406</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å›¾åƒå„ä¸ªé€šé“çš„å‡å€¼</span><br>          &#x27;IM_STD&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.229</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.224</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.225</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å›¾åƒå„ä¸ªé€šé“çš„æ ‡å‡†å·®</span><br>          &#x27;LOADER_DERIVED_CLS_MAP_TO&#x27;<span class="hljs-punctuation">:</span> &#x27;bg&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åŠ è½½ç¨‹åºæ˜ å°„çš„ç±»å</span><br>          &#x27;LOADER_PIPELINE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&#x27;NumpyImageLoader&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åŠ è½½æ•°æ®çš„å¤„ç†æµç¨‹</span><br>                              &#x27;TextSeg_SeglabelLoader&#x27;<span class="hljs-punctuation">,</span><br>                              &#x27;CharBboxSpLoader&#x27;<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>          &#x27;LOADER_SQUARE_BBOX&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦åœ¨åŠ è½½æ—¶å°†å­—ç¬¦çš„ bbox è½¬æ¢ä¸ºæ­£æ–¹å½¢</span><br>          &#x27;LOAD_BACKEND_IMAGE&#x27;<span class="hljs-punctuation">:</span> &#x27;pil&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¯»å–å›¾åƒçš„åº“åç§°</span><br>          &#x27;LOAD_IS_MC_IMAGE&#x27;<span class="hljs-punctuation">:</span> False<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦æ˜¯å¤šé€šé“å›¾åƒ</span><br>          &#x27;LOAD_IS_MC_SEGLABEL&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åŠ è½½çš„æ ‡ç­¾æ˜¯å¦æ˜¯å¤šé€šé“çš„</span><br>          &#x27;NUM_WORKERS&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åŠ è½½æ•°æ®çš„çº¿ç¨‹æ•°</span><br>          &#x27;NUM_WORKERS_PER_GPU&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ¯ä¸ª GPU ä¸ŠåŠ è½½æ•°æ®çš„çº¿ç¨‹æ•°</span><br>          &#x27;RANDOM_CROP_FILL&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;image&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> &#x27;seglabel&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">999</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å¯¹å›¾åƒè¿›è¡Œéšæœº crop æ—¶éœ€è¦å¡«å……çš„å†…å®¹</span><br>          &#x27;RANDOM_CROP_PADDING_MODE&#x27;<span class="hljs-punctuation">:</span> &#x27;random&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å¡«å……æ¨¡å¼ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸º&#x27;random&#x27;</span><br>          &#x27;RANDOM_CROP_SIZE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">513</span><span class="hljs-punctuation">,</span> <span class="hljs-number">513</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¿›è¡Œéšæœº crop æ—¶è¾“å‡ºçš„å°ºå¯¸å¤§å°</span><br>          &#x27;RANDOM_RESIZE_CROP_FROM&#x27;<span class="hljs-punctuation">:</span> &#x27;sem&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å°† semantic label resize åˆ°æŒ‡å®šå¤§å°åå†è¿›è¡Œéšæœº crop</span><br>          &#x27;RANDOM_RESIZE_CROP_RATIO&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.75</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1.3333333333333333</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¿›è¡Œ resize æ—¶çš„çºµæ¨ªæ¯”èŒƒå›´</span><br>          &#x27;RANDOM_RESIZE_CROP_SCALE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.8</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1.2</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¿›è¡Œ resize æ—¶çš„ç¼©æ”¾æ¯”ä¾‹èŒƒå›´</span><br>          &#x27;RANDOM_RESIZE_CROP_SIZE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">32</span><span class="hljs-punctuation">,</span> <span class="hljs-number">32</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åœ¨è¿›è¡Œ resize å‰éœ€è¦ä¿è¯ semantic label çš„æœ€å°å°ºå¯¸å¤§å°</span><br>          &#x27;RANDOM_SCALE_ONESIDE_ALIGN_CORNERS&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦å¯¹é½å›¾åƒçš„å››ä¸ªè§’</span><br>          &#x27;RANDOM_SCALE_ONESIDE_DIM&#x27;<span class="hljs-punctuation">:</span> &#x27;shortside&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¿›è¡Œç¼©æ”¾çš„ç»´åº¦ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸ºé•¿è¾¹</span><br>          &#x27;RANDOM_SCALE_ONESIDE_RANGE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">513</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1025</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¿›è¡Œç¼©æ”¾æ—¶çš„å°ºå¯¸èŒƒå›´</span><br>          &#x27;ROOT_DIR&#x27;<span class="hljs-punctuation">:</span> &#x27;D<span class="hljs-punctuation">:</span>\\Study\\XXX\\TextSeg&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ•°æ®é›†æ‰€åœ¨ç›®å½•</span><br>          &#x27;SEGLABEL_IGNORE_LABEL&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">999</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å¿½ç•¥çš„æ ‡ç­¾å€¼ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸º 999</span><br>          &#x27;SEMANTIC_PICK_CLASS&#x27;<span class="hljs-punctuation">:</span> &#x27;all&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¦é€‰æ‹©çš„è¯­ä¹‰ç±»åˆ«ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸º&#x27;all&#x27;</span><br>          &#x27;TRANS_PIPELINE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&#x27;UniformNumpyType&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å›¾åƒçš„é¢„å¤„ç†æµç¨‹</span><br>                             &#x27;TextSeg_RandomResizeCropCharBbox&#x27;<span class="hljs-punctuation">,</span><br>                             &#x27;NormalizeUint8ToZeroOne&#x27;<span class="hljs-punctuation">,</span><br>                             &#x27;Normalize&#x27;<span class="hljs-punctuation">,</span><br>                             &#x27;RandomScaleOneSide&#x27;<span class="hljs-punctuation">,</span><br>                             &#x27;RandomCrop&#x27;<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>          &#x27;TRY_SAMPLE&#x27;<span class="hljs-punctuation">:</span> None<span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å°è¯•æ ·æœ¬çš„æ•°é‡</span><br> &#x27;DEBUG&#x27;<span class="hljs-punctuation">:</span> False<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦å¼€å¯è°ƒè¯•æ¨¡å¼</span><br> &#x27;DIST_BACKEND&#x27;<span class="hljs-punctuation">:</span> &#x27;gloo&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åˆ†å¸ƒå¼è®­ç»ƒçš„åç«¯ï¼Œæœ¬ä¾‹ä¸­ä¸º&#x27;gloo&#x27;</span><br> &#x27;DIST_URL&#x27;<span class="hljs-punctuation">:</span> &#x27;tcp<span class="hljs-punctuation">:</span><span class="hljs-comment">//127.0.0.1:11233&#x27;,  // åˆ†å¸ƒå¼è®­ç»ƒçš„ URL</span><br> &#x27;EXPERIMENT_ID&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">168471973979</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å®éªŒçš„ ID</span><br> &#x27;GPU_COUNT&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä½¿ç”¨çš„ GPU æ•°é‡</span><br> &#x27;GPU_DEVICE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä½¿ç”¨çš„ GPU ç¼–å·</span><br> &#x27;LOG_DIR&#x27;<span class="hljs-punctuation">:</span> &#x27;D<span class="hljs-punctuation">:</span>\\Study\\XXXX\\Rethinking-Text-Segmentation\\log\\texrnet_textseg\\<span class="hljs-number">168471973979</span>_texrnet_hrnet&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ—¥å¿—å­˜å‚¨çš„ç›®å½•è·¯å¾„</span><br> &#x27;LOG_FILE&#x27;<span class="hljs-punctuation">:</span> &#x27;D<span class="hljs-punctuation">:</span>\\Study\\XXXX\Rethinking-Text-Segmentation\\log\\texrnet_textseg\\<span class="hljs-number">168471973979</span>_texrnet_hrnet\\train.log&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ—¥å¿—è¾“å‡ºçš„æ–‡ä»¶è·¯å¾„</span><br> &#x27;MAINLOOP_EXECUTE&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦æ‰§è¡Œä¸»å¾ªç¯</span><br> &#x27;MAIN_CODE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&#x27;main.py&#x27;<span class="hljs-punctuation">,</span> &#x27;train_utils.py&#x27;<span class="hljs-punctuation">,</span> &#x27;eval_utils.py&#x27;<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä¸»è¦çš„ä»£ç æ–‡ä»¶</span><br> &#x27;MAIN_CODE_PATH&#x27;<span class="hljs-punctuation">:</span> &#x27;D<span class="hljs-punctuation">:</span>\\Study\\XXXX\\Rethinking-Text-Segmentation&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä»£ç æ‰€åœ¨çš„è·¯å¾„</span><br> &#x27;MATPLOTLIB_MODE&#x27;<span class="hljs-punctuation">:</span> &#x27;Agg&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// Matplotlib æ¨¡å¼</span><br> &#x27;MISC_DIR&#x27;<span class="hljs-punctuation">:</span> &#x27;D<span class="hljs-punctuation">:</span>\\Study\\XXXX\\Rethinking-Text-Segmentation\\log&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ‚é¡¹æ–‡ä»¶çš„å­˜å‚¨ç›®å½•è·¯å¾„</span><br> <span class="hljs-comment">// æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«äº† HRNet æ¨¡å‹çš„è·ç¦»å‚æ•°å’Œç»“æ„</span><br> &#x27;MODEL&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;HRNET&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;ALIGN_CORNERS&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨ align_corners å‚æ•°å¯¹é½è§’ç‚¹</span><br>                     &#x27;BN_MOMENTUM&#x27;<span class="hljs-punctuation">:</span> &#x27;hardcoded to <span class="hljs-number">0.1</span>&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// Batch Normalization å±‚çš„åŠ¨é‡</span><br>                     &#x27;FINAL_CONV_KERNEL&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æœ€ç»ˆå·ç§¯æ ¸çš„å¤§å°</span><br>                     &#x27;IGNORE_LABEL&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">999</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å¿½ç•¥æ ‡ç­¾çš„æ•°å€¼</span><br>                     &#x27;INTRAIN_GETPRED&#x27;<span class="hljs-punctuation">:</span> False<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦åœ¨è®­ç»ƒæ—¶è®¡ç®—é¢„æµ‹ç»“æœ</span><br>                     &#x27;LOSS_TYPE&#x27;<span class="hljs-punctuation">:</span> &#x27;ce&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä½¿ç”¨çš„æŸå¤±å‡½æ•°ç±»å‹</span><br>                     &#x27;MODEL_TAGS&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&#x27;v0&#x27;<span class="hljs-punctuation">,</span> &#x27;base&#x27;<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ¨¡å‹æ ‡ç­¾</span><br>                     &#x27;OUTPUT_CHANNEL_NUM&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">720</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ¨¡å‹è¾“å‡ºé€šé“æ•°</span><br>                     &#x27;PRETRAINED_PTH&#x27;<span class="hljs-punctuation">:</span> &#x27;D<span class="hljs-punctuation">:</span>\\Study\\XXXX\\Rethinking-Text-Segmentation\\pretrained\\init\\hrnetv2_w48_imagenet_pretrained.pth.base&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// é¢„è®­ç»ƒæ¨¡å‹çš„è·¯å¾„</span><br>                     &#x27;STAGE1_PARA&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;BLOCK&#x27;<span class="hljs-punctuation">:</span> &#x27;BOTTLENECK&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// HRNet ä¸­æ‰€ä½¿ç”¨çš„å—çš„ç±»å‹</span><br>                                     &#x27;FUSE_METHOD&#x27;<span class="hljs-punctuation">:</span> &#x27;SUM&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// HRNet çš„æ¯ä¸ªåˆ†æ”¯ä¸Šè¿›è¡Œç‰¹å¾èåˆçš„æ–¹æ³•</span><br>                                     &#x27;NUM_BLOCKS&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">4</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ¯ä¸ªåˆ†æ”¯ä¸­å—çš„æ•°é‡</span><br>                                     &#x27;NUM_BRANCHES&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä½¿ç”¨çš„åˆ†æ”¯æ•°</span><br>                                     &#x27;NUM_CHANNELS&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">64</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ¯ä¸ªåˆ†æ”¯çš„é€šé“æ•°</span><br>                                     &#x27;NUM_MODULES&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä½¿ç”¨çš„æ¨¡å—æ•°</span><br>                     &#x27;STAGE2_PARA&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;BLOCK&#x27;<span class="hljs-punctuation">:</span> &#x27;BASIC&#x27;<span class="hljs-punctuation">,</span><br>                                     &#x27;FUSE_METHOD&#x27;<span class="hljs-punctuation">:</span> &#x27;SUM&#x27;<span class="hljs-punctuation">,</span><br>                                     &#x27;NUM_BLOCKS&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                                     &#x27;NUM_BRANCHES&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>                                     &#x27;NUM_CHANNELS&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">48</span><span class="hljs-punctuation">,</span> <span class="hljs-number">96</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                                     &#x27;NUM_MODULES&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>                     &#x27;STAGE3_PARA&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;BLOCK&#x27;<span class="hljs-punctuation">:</span> &#x27;BASIC&#x27;<span class="hljs-punctuation">,</span><br>                                     &#x27;FUSE_METHOD&#x27;<span class="hljs-punctuation">:</span> &#x27;SUM&#x27;<span class="hljs-punctuation">,</span><br>                                     &#x27;NUM_BLOCKS&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                                     &#x27;NUM_BRANCHES&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>                                     &#x27;NUM_CHANNELS&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">48</span><span class="hljs-punctuation">,</span> <span class="hljs-number">96</span><span class="hljs-punctuation">,</span> <span class="hljs-number">192</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                                     &#x27;NUM_MODULES&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>                     &#x27;STAGE4_PARA&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;BLOCK&#x27;<span class="hljs-punctuation">:</span> &#x27;BASIC&#x27;<span class="hljs-punctuation">,</span><br>                                     &#x27;FUSE_METHOD&#x27;<span class="hljs-punctuation">:</span> &#x27;SUM&#x27;<span class="hljs-punctuation">,</span><br>                                     &#x27;NUM_BLOCKS&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                                     &#x27;NUM_BRANCHES&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span><br>                                     &#x27;NUM_CHANNELS&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">48</span><span class="hljs-punctuation">,</span> <span class="hljs-number">96</span><span class="hljs-punctuation">,</span> <span class="hljs-number">192</span><span class="hljs-punctuation">,</span> <span class="hljs-number">384</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                                     &#x27;NUM_MODULES&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>           &#x27;MODEL_NAME&#x27;<span class="hljs-punctuation">:</span> &#x27;texrnet&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ¨¡å‹åç§°</span><br>           &#x27;TEXRNET&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;ALIGN_CORNERS&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨ align_corners å‚æ•°å¯¹é½è§’ç‚¹</span><br>                       &#x27;BIAS_ATTENTION_TYPE&#x27;<span class="hljs-punctuation">:</span> &#x27;cossim&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åç½®æ³¨æ„åŠ›çš„ç±»å‹</span><br>                       &#x27;BN_TYPE&#x27;<span class="hljs-punctuation">:</span> &#x27;bn&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// Batch Normalization å±‚çš„ç±»å‹</span><br>                       &#x27;CONV_TYPE&#x27;<span class="hljs-punctuation">:</span> &#x27;conv&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å·ç§¯å±‚çš„ç±»å‹</span><br>                       &#x27;INIT_BIAS_ATTENTION_WITH&#x27;<span class="hljs-punctuation">:</span> None<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å“ªä¸ªæ³¨æ„åŠ›å±‚è¿›è¡Œåˆå§‹åŒ–åç½®æ³¨æ„åŠ›</span><br>                       &#x27;INPUT_CHANNEL_NUM&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">720</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¾“å…¥ Tensor çš„é€šé“æ•°</span><br>                       &#x27;INTRAIN_GETPRED_FROM&#x27;<span class="hljs-punctuation">:</span> &#x27;sem&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åœ¨è®­ç»ƒæ—¶è®¡ç®—é¢„æµ‹ç»“æœçš„æ¥æºã€‚æ­¤å¤„ä¸º&#x27;sem&#x27;ï¼Œè¡¨ç¤ºæ¥è‡ªè¯­ä¹‰åˆ†å‰²</span><br>                       &#x27;MODEL_TAGS&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&#x27;hrnet&#x27;<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ¨¡å‹æ ‡ç­¾</span><br>                       &#x27;PRETRAINED_PTH&#x27;<span class="hljs-punctuation">:</span> None<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// é¢„è®­ç»ƒæ¨¡å‹çš„è·¯å¾„</span><br>                       &#x27;REFINEMENT_CHANNEL_NUM&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">725</span><span class="hljs-punctuation">,</span> <span class="hljs-number">64</span><span class="hljs-punctuation">,</span> <span class="hljs-number">64</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ç²¾ç»†åŒ–æ¨¡å—ä¸­å„å±‚è¾“å‡ºé€šé“æ•°</span><br>                       &#x27;REFINEMENT_LOSS_TYPE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;lossrfn&#x27;<span class="hljs-punctuation">:</span> &#x27;ce&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ç²¾ç»†åŒ–æ¨¡å—ä¸­å„æŸå¤±å‡½æ•°ç±»å‹</span><br>                                                &#x27;lossrfntri&#x27;<span class="hljs-punctuation">:</span> &#x27;trimapce&#x27;<span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>                       &#x27;RELU_TYPE&#x27;<span class="hljs-punctuation">:</span> &#x27;relu&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ReLU æ¿€æ´»å‡½æ•°çš„ç±»å‹</span><br>                       &#x27;SEMANTIC_CLASS_NUM&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¯­ä¹‰åˆ†å‰²çš„ç±»åˆ«æ•°</span><br>                       &#x27;SEMANTIC_IGNORE_LABEL&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">999</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¯­ä¹‰åˆ†å‰²ä¸­è¢«å¿½ç•¥çš„æ ‡ç­¾</span><br>                       &#x27;SEMANTIC_LOSS_TYPE&#x27;<span class="hljs-punctuation">:</span> &#x27;ce&#x27;<span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¯­ä¹‰åˆ†å‰²ä¸­ä½¿ç”¨çš„æŸå¤±å‡½æ•°ç±»å‹</span><br> &#x27;RND_RECORDING&#x27;<span class="hljs-punctuation">:</span> False<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦è®°å½•éšæœºæ•°ç”Ÿæˆå™¨çš„çŠ¶æ€</span><br> &#x27;RND_SEED&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// éšæœºæ•°ç§å­</span><br> &#x27;SAVE_CODE&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦ä¿å­˜ä»£ç </span><br> &#x27;TORCH_VERSION&#x27;<span class="hljs-punctuation">:</span> &#x27;<span class="hljs-number">1.13</span><span class="hljs-number">.1</span>+cu117&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä½¿ç”¨çš„ PyTorch ç‰ˆæœ¬å·</span><br> &#x27;TRAIN&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;ACTIVATE_CLASSIFIER_FOR_SEGMODEL_AFTER&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åœ¨ç¬¬å‡ æ¬¡è¿­ä»£åä¸ºåˆ†å‰²æ¨¡å‹æ¿€æ´»åˆ†ç±»å™¨</span><br>           &#x27;ACTIVATE_REFINEMENT_AT_ITER&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åœ¨ç¬¬å‡ æ¬¡è¿­ä»£åæ¿€æ´»ç²¾ç»†åŒ–æ¨¡å—</span><br>           &#x27;BATCH_SIZE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ¯ä¸ª GPU ä¸Šçš„ batch å¤§å°</span><br>           &#x27;BATCH_SIZE_PER_GPU&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span><br>           &#x27;CKPT_EVERY&#x27;<span class="hljs-punctuation">:</span> inf<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ¯å¤šå°‘ epoch ä¿å­˜ä¸€æ¬¡æ¨¡å‹æƒé‡</span><br>           &#x27;CLASSIFIER_PATH&#x27;<span class="hljs-punctuation">:</span> &#x27;pretrained\\init\\resnet50_textcls.pth&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åˆ†ç±»å™¨çš„è·¯å¾„</span><br>           &#x27;COMMENT&#x27;<span class="hljs-punctuation">:</span> &#x27;&gt;&gt;&gt;&gt;later&lt;&lt;&lt;&lt;&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ³¨é‡Šä¿¡æ¯</span><br>           &#x27;DISPLAY&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ¯éš”å¤šå°‘æ¬¡è¿­ä»£è¾“å‡ºä¸€æ¬¡æ—¥å¿—ä¿¡æ¯</span><br>           &#x27;LOSS_WEIGHT&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;losscls&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">0.1</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä¸åŒæŸå¤±å‡½æ•°çš„æƒé‡</span><br>                           &#x27;lossrfn&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">0.5</span><span class="hljs-punctuation">,</span><br>                           &#x27;lossrfntri&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">0.5</span><span class="hljs-punctuation">,</span><br>                           &#x27;losssem&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>           &#x27;LOSS_WEIGHT_NORMALIZED&#x27;<span class="hljs-punctuation">:</span> False<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨å½’ä¸€åŒ–çš„æŸå¤±æƒé‡</span><br>           &#x27;LR_BASE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">0.01</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å­¦ä¹ ç‡çš„åŸºç¡€å€¼</span><br>           &#x27;LR_ITER_BY&#x27;<span class="hljs-punctuation">:</span> &#x27;iter&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å­¦ä¹ ç‡çš„è¿­ä»£æ–¹å¼ã€‚æ­¤å¤„ä¸º&#x27;iter&#x27;ï¼Œè¡¨ç¤ºæŒ‰ç…§è¿­ä»£æ¬¡æ•°æ›´æ–°å­¦ä¹ ç‡</span><br>           &#x27;LR_TYPE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>(&#x27;linear&#x27;<span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.01</span><span class="hljs-punctuation">,</span> <span class="hljs-number">500</span>)<span class="hljs-punctuation">,</span> (&#x27;ploy&#x27;<span class="hljs-punctuation">,</span> <span class="hljs-number">0.01</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">20000</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.9</span>)<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å­¦ä¹ ç‡çš„æ›´æ–°æ–¹å¼ã€‚åŒ…å«äº†ä¸¤ç§ç±»å‹ï¼š&#x27;linear&#x27;å’Œ&#x27;ploy&#x27;</span><br>           &#x27;MAX_STEP&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">20500</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æœ€å¤§è¿­ä»£æ¬¡æ•°æˆ– epoch æ•°</span><br>           &#x27;MAX_STEP_TYPE&#x27;<span class="hljs-punctuation">:</span> &#x27;iter&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æœ€å¤§è¿­ä»£æ¬¡æ•°æˆ– epoch æ•°çš„ç±»å‹ã€‚æ­¤å¤„ä¸º&#x27;iter&#x27;ï¼Œè¡¨ç¤ºæŒ‰ç…§è¿­ä»£æ¬¡æ•°æ¥è®¡ç®—ã€‚</span><br>           &#x27;OPTIMIZER&#x27;<span class="hljs-punctuation">:</span> &#x27;sgd&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä¼˜åŒ–å™¨çš„ç±»å‹ã€‚æ­¤å¤„ä¸º&#x27;sgd&#x27;ï¼Œè¡¨ç¤ºéšæœºæ¢¯åº¦ä¸‹é™æ³•</span><br>           &#x27;OPTIM_MANAGER_LRSCALE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>&#x27;hrnet&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> &#x27;texrnet&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä¸åŒæ¨¡å‹åœ¨ä¼˜åŒ–å™¨ä¸­å­¦ä¹ ç‡çš„æ¯”ä¾‹ã€‚åŒ…å«äº†&#x27;texrnet&#x27;å’Œ&#x27;hrnet&#x27;ä¸¤ä¸ªé”®ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒæ¨¡å‹</span><br>           &#x27;OVERFIT_A_BATCH&#x27;<span class="hljs-punctuation">:</span> False<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦ä»¥ä¸€ä¸ª batch è¿›è¡Œè¿‡æ‹Ÿåˆå®éªŒ</span><br>           &#x27;ROI_ALIGN_SIZE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">32</span><span class="hljs-punctuation">,</span> <span class="hljs-number">32</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¡¨ç¤º Region of Interest (ROI) Align çš„å¤§å°</span><br>           &#x27;ROI_BBOX_PADDING_TYPE&#x27;<span class="hljs-punctuation">:</span> &#x27;semcrop&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¡¨ç¤º ROI Align æ—¶çš„å¡«å……ç±»å‹</span><br>           &#x27;SAVE_CODE&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦ä¿å­˜ä»£ç </span><br>           &#x27;SAVE_INIT_MODEL&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦ä¿å­˜åˆå§‹åŒ–æ¨¡å‹</span><br>           &#x27;SGD_MOMENTUM&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">0.9</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// SGD ä¼˜åŒ–å™¨çš„åŠ¨é‡</span><br>           &#x27;SGD_WEIGHT_DECAY&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-number">0.0005</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// SGD ä¼˜åŒ–å™¨çš„æƒé‡è¡°å‡å› å­</span><br>           &#x27;SIGNATURE&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&#x27;texrnet&#x27;<span class="hljs-punctuation">,</span> &#x27;hrnet&#x27;<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ¨¡å‹ç­¾å</span><br>           &#x27;SKIP_PARTIAL&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦è·³è¿‡éƒ¨åˆ†æ•°æ®</span><br>           &#x27;UPDATE_CLASSIFIER&#x27;<span class="hljs-punctuation">:</span> False<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦æ›´æ–°åˆ†ç±»å™¨å‚æ•°</span><br>           &#x27;USE_OPTIM_MANAGER&#x27;<span class="hljs-punctuation">:</span> True<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨ä¼˜åŒ–å™¨ç®¡ç†å™¨</span><br>           &#x27;VISUAL&#x27;<span class="hljs-punctuation">:</span> False<span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span>  <span class="hljs-comment">// æ˜¯å¦å¯è§†åŒ–</span><br></code></pre></td></tr></table></figure>

            </article>
            
	<div class="rightside">
	
		<div class="rightside-button" id="js-aside">
			<span>
				<img no-lazy src="/images/icon/aside.png" class="rightside-button-icon" alt="Icon">
			</span>
		</div>
		<script>
			$("#js-aside").click(function () {
				onShowAsideButton();
			});
		</script>
	
	<div class="rightside-button" id="js-toggle_theme">
		<span>
			<img no-lazy src="/images/icon/toggle_theme.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	
<script src="/js/plugins/goto_position.js"></script>

	
	<div class="rightside-button" id="js-go_top">
		<span>
			<img no-lazy src="/images/icon/go_top.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>
	<div class="rightside-button" id="js-go_bottom">
		<span>
			<img no-lazy src="/images/icon/go_bottom.png" class="rightside-button-icon" alt="Icon">
		</span>
	</div>

	<script>
		setToggleThemeButtonListener();
	</script>
	<script>
		$('#js-go_top')
		.gotoPosition( {
			speed: 300,
			target: 'top',
		} );
		$('#js-go_bottom')
		.gotoPosition( {
			speed: 300,
			target: 'bottom',
		} );
	</script>
</div>


<div class="post-bottom">
    
        <div class="post-paging">     
            <div class="post-paging-last">
                
                    <a href="/posts/Paper-Segment%20Everything%20Everywhere%20All%20at%20Once/">
                        ä¸Šä¸€ç¯‡ï¼šPaper-Segment Everything Everywhere All at Once
                    </a>
                
            </div>
            <div class="post-paging-next">
                
                    <a href="/posts/Plan-%E4%B8%80%E4%BA%9B%E7%A5%9E%E5%A5%87%E5%B0%8F%E7%BD%91%E7%AB%99/">
                        ä¸‹ä¸€ç¯‡ï¼šPlan-ä¸€äº›ç¥å¥‡å°ç½‘ç«™
                    </a>
                
            </div>
        </div>
    
    
    
        
            <div class="giscus comments"></div>
            <script>
                var scriptElement = document.createElement('script');
                scriptElement.src = 'https://giscus.app/client.js';
                scriptElement.setAttribute('data-repo', 'GZ-Metal-Cell/GZ-Metal-Cell.github.io');
                scriptElement.setAttribute('data-repo-id', 'R_kgDOIHLEOQ');
                scriptElement.setAttribute('data-category', 'Announcements');
                scriptElement.setAttribute('data-category-id', 'DIC_kwDOIHLEOc4CcVwP');
                scriptElement.setAttribute('data-mapping', 'title');
                scriptElement.setAttribute('data-strict', '1');
                scriptElement.setAttribute('data-reactions-enabled', '');
                scriptElement.setAttribute('data-emit-metadata', '0');
                scriptElement.setAttribute('data-input-position', 'bottom');
                scriptElement.setAttribute('data-theme', localStorage.getItem('theme') === 'light' ? 'light' : 'dark_high_contrast');
                scriptElement.setAttribute('data-lang', 'zh-CN');
                
                scriptElement.setAttribute('crossorigin', 'anonymous');
                scriptElement.async = true;
                document.head.appendChild(scriptElement);
            </script>
        
    
</div>
        </div>
    </main>
    
        <aside class="main-aside">
    
<script src="/js/widgets/aside.js"></script>

    <script>
        showAside();
    </script>

    <div class="aside-top">
        <div class="aside-top-about aside-card">
            <a href="/about" class="aside-top-about-portrait">
                <img no-lazy src="/about/portrait.png" alt="Q">
            </a>
            <div class="aside-top-about-info">
                <span class="author"> Zi-Zi</span>
                <span class="description">ä¸ä»¥ç‰©å–œï¼Œä¸ä»¥å·±æ‚²ã€‚</span>
            </div>              
            <div class="aside-top-about-site">
                <a href="/categories" class="aside-top-about-site-item">
                    <span class="title">ç±»åˆ«</span>
                    <span class="count">5</span>
                </a>
                <a href="/tags" class="aside-top-about-site-item">
                    <span class="title">æ ‡ç­¾</span>
                    <span class="count">120</span>
                </a>
                <a href="/archives" class="aside-top-about-site-item">
                    <span class="title">å½’æ¡£</span>
                    <span class="count">435</span>
                </a>
            </div>
            <div class="aside-top-about-contact">
                
                    
                        <a target="_blank" rel="noopener" href="https://weibo.com/u/5020307235">
                            <img no-lazy src="/images/bottom_icon/Weibo.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://tieba.baidu.com/home/main?id=tb.1.ff6d2775.vFH7wrdW2ZjPCmyBHJcjnA">
                            <img no-lazy src="/images/bottom_icon/Tieba.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://space.bilibili.com/11547880">
                            <img no-lazy src="/images/bottom_icon/Bilibili.webp" alt="Quieter">
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell">
                            <img no-lazy src="/images/bottom_icon/github.webp" alt="Quieter">
                        </a>
                    
                
            </div>
        </div> 

        
    </div>

    <div class="aside-bottom">
        
            <script>
                
                    const tocCollapsed = true;
                
                
                    const tocDepth = 6;
                
                var headerString = '';
                for (let i = 1; i <= tocDepth; i++) {
                    if (i === 1) {
                        headerString += 'h1';
                    } else {
                        headerString += ', h' + i;
                    }
                }
                hbeToc();
            </script>
            <div class="aside-bottom-toc aside-card">
                <div class="aside-bottom-toc-title">
                    <h1>ç›®å½•</h1>
                    <span class="toc-percentage"></span>
                </div>
                <ol class="aside-bottom-toc-content"></ol>
            </div>
        
    </div>
</aside>
    
</div>
		<footer>
	<div class="content">
		
			<span>Â©2022-2025&nbsp;By&nbsp;<a href="/about">Zi-Zi</a>.</span>
		
		<span><a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> theme by <a target="_blank" rel="noopener" href="https://github.com/GZ-Metal-Cell/hexo-theme-quieter">Quieter</a>.</span>
		
			<span style="display: flex;">
				<img no-lazy alt="icp" src="/images/icp_icon.png" style="width: 16px; height: 16px;">
				<a href="https://icp.gov.moe/?keyword=20241647" target="_blank">èŒ ICP å¤‡ 20241647 å·</a>
			</span>
		
	</div>

	
<script src="/js/plugins/ref.js"></script>

	
<script src="/js/plugins/highlight_tools.js"></script>

	<script>
		const  COPY_ICON = "/images/icon/copy.png";
		const CLOSE_CODE_BLOCK_ICON = "/images/icon/close_code_block.png";
		const HIGHLIGHT_SHRINK = "";
		const HIGHLIGHT_HEIGHT_LIMIT = "";
	</script>

	
	
	<!-- Analytics -->

    
        <!-- Busuanzi Analytics -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
        <!-- Baidu Analytics -->
        <script defer>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?e57cf62289f84322ebff116e8b3d343e";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
    


	

	
		
			
				<link rel="stylesheet" href="/css/plugins/katex/katex.min.css">
				<script src="/js/plugins/copy-tex.js"></script>
			
		
	

    
		
<link rel="stylesheet" href="/css/plugins/textIndent.css">

		
<script src="/js/plugins/textIndent.js"></script>

	

	
	
	
		<script>
			if (typeof init === 'function') {
				init();
			}
		</script>
	

	
		
	

	

	<!--
		
<script src="/js/plugins/jquery.pjax.min.js"></script>

		<script>
			$(document).pjax('a[target!=_blank]', 'main', {
				fragment: 'main',
				timeout: 8000
			});

			$(document).on('pjax:complete', function() {
			});
		</script> 
	-->
	<script>
		console.log('\n %c Hexo-Quieter ä¸»é¢˜ %c https://github.com/GZ-Metal-Cell/hexo-theme-quieter \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
	</script>
</footer>
	</body>

	<!-- Hexo-Quieter ä¸»é¢˜  https://github.com/GZ-Metal-Cell/hexo-theme-quieter -->
</html>

